<!DOCTYPE html><html><head><meta charset="utf-8"/>
<link rel="stylesheet" href="../../../zoo/sh/styles/aplsimple.css">
<script src="../../../zoo/sh/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<title>::highlight_tcl reference</title>
<style>
/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,button,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,var,optgroup{font-style:inherit;font-weight:inherit;}del,ins{text-decoration:none;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:baseline;}sub{vertical-align:baseline;}legend{color:#000;}input,button,textarea,select,optgroup,option{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;}input,button,textarea,select{*font-size:100%;}body{font:13px/1.231 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small;}select,input,button,textarea,button{font:99% arial,helvetica,clean,sans-serif;}table{font-size:inherit;font:100%;}pre,code,kbd,samp,tt{font-family:Consolas,"Courier New",monospace;font-size:100%;line-height:100%;}body{text-align:center;}#doc,#doc2,#doc3,#doc4,.yui-t1,.yui-t2,.yui-t3,.yui-t4,.yui-t5,.yui-t6,.yui-t7{margin:auto;text-align:left;width:57.69em;*width:56.25em;}#doc2{width:73.076em;*width:71.25em;}#doc3{margin:auto 10px;width:auto;}#doc4{width:74.923em;*width:73.05em;}.yui-b{position:relative;}.yui-b{_position:static;}#yui-main .yui-b{position:static;}#yui-main,.yui-g .yui-u .yui-g{width:100%;}.yui-t1 #yui-main,.yui-t2 #yui-main,.yui-t3 #yui-main{float:right;margin-left:-25em;}.yui-t4 #yui-main,.yui-t5 #yui-main,.yui-t6 #yui-main{float:left;margin-right:-25em;}.yui-t1 .yui-b{float:left;width:12.30769em;*width:12.00em;}.yui-t1 #yui-main .yui-b{margin-left:13.30769em;*margin-left:13.05em;}.yui-t2 .yui-b{float:left;width:9.8461em;*width:13.50em;}.yui-t2 #yui-main .yui-b{margin-left:10.8461em;*margin-left:14.55em;}.yui-t3 .yui-b{float:left;width:23.0769em;*width:22.50em;}.yui-t3 #yui-main .yui-b{margin-left:24.0769em;*margin-left:23.62em;}.yui-t4 .yui-b{float:right;width:13.8456em;*width:13.50em;}.yui-t4 #yui-main .yui-b{margin-right:14.8456em;*margin-right:14.55em;}.yui-t5 .yui-b{float:right;width:18.4615em;*width:18.00em;}.yui-t5 #yui-main .yui-b{margin-right:19.4615em;*margin-right:19.125em;}.yui-t6 .yui-b{float:right;width:23.0769em;*width:22.50em;}.yui-t6 #yui-main .yui-b{margin-right:24.0769em;*margin-right:23.62em;}.yui-t7 #yui-main .yui-b{display:block;margin:0 0 1em 0;}#yui-main .yui-b{float:none;width:auto;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf,.yui-gc .yui-u,.yui-gd .yui-g,.yui-g .yui-gc .yui-u,.yui-ge .yui-u,.yui-ge .yui-g,.yui-gf .yui-g,.yui-gf .yui-u{float:right;}.yui-g div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first,.yui-ge div.first,.yui-gf div.first,.yui-g .yui-gc div.first,.yui-g .yui-ge div.first,.yui-gc div.first div.first{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf{width:49.1%;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{width:32%;margin-left:1.99%;}.yui-gb .yui-u{*margin-left:1.9%;*width:31.9%;}.yui-gc div.first,.yui-gd .yui-u{width:66%;}.yui-gd div.first{width:32%;}.yui-ge div.first,.yui-gf .yui-u{width:74.2%;}.yui-ge .yui-u,.yui-gf div.first{width:24%;}.yui-g .yui-gb div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first{margin-left:0;}.yui-g .yui-g .yui-u,.yui-gb .yui-g .yui-u,.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u,.yui-ge .yui-g .yui-u,.yui-gf .yui-g .yui-u{width:49%;*width:48.1%;*margin-left:0;}.yui-g .yui-g .yui-u{width:48.1%;}.yui-g .yui-gb div.first,.yui-gb .yui-gb div.first{*margin-right:0;*width:32%;_width:31.7%;}.yui-g .yui-gc div.first,.yui-gd .yui-g{width:66%;}.yui-gb .yui-g div.first{*margin-right:4%;_margin-right:1.3%;}.yui-gb .yui-gc div.first,.yui-gb .yui-gd div.first{*margin-right:0;}.yui-gb .yui-gb .yui-u,.yui-gb .yui-gc .yui-u{*margin-left:1.8%;_margin-left:4%;}.yui-g .yui-gb .yui-u{_margin-left:1.0%;}.yui-gb .yui-gd .yui-u{*width:66%;_width:61.2%;}.yui-gb .yui-gd div.first{*width:31%;_width:29.5%;}.yui-g .yui-gc .yui-u,.yui-gb .yui-gc .yui-u{width:32%;_float:right;margin-right:0;_margin-left:0;}.yui-gb .yui-gc div.first{width:66%;*float:left;*margin-left:0;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf .yui-u{margin:0;}.yui-gb .yui-gb .yui-u{_margin-left:.7%;}.yui-gb .yui-g div.first,.yui-gb .yui-gb div.first{*margin-left:0;}.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u{*width:48.1%;*margin-left:0;}.yui-gb .yui-gd div.first{width:32%;}.yui-g .yui-gd div.first{_width:29.9%;}.yui-ge .yui-g{width:24%;}.yui-gf .yui-g{width:74.2%;}.yui-gb .yui-ge div.yui-u,.yui-gb .yui-gf div.yui-u{float:right;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf div.first{float:left;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf div.first{*width:24%;_width:20%;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf .yui-u{*width:73.5%;_width:65.5%;}.yui-ge div.first .yui-gd .yui-u{width:65%;}.yui-ge div.first .yui-gd div.first{width:32%;}#hd:after,#bd:after,#ft:after,.yui-g:after,.yui-gb:after,.yui-gc:after,.yui-gd:after,.yui-ge:after,.yui-gf:after{content:".";display:block;height:0;clear:both;visibility:hidden;}#hd,#bd,#ft,.yui-g,.yui-gb,.yui-gc,.yui-gd,.yui-ge,.yui-gf{zoom:0;}

body{margin:10px;}h1{font-size:138.5%;}h2{font-size:123.1%;}h3{font-size:108%;}h1,h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6,strong,dt{font-weight:bold;}optgroup{font-weight:normal;}abbr,acronym{border-bottom:1px dotted #000;cursor:help;}em{font-style:italic;}del{text-decoration:line-through;}blockquote,ul,ol,dl{margin:1em;}ol,ul,dl{margin-left:2em;}ol li{list-style:decimal outside;}ul li{list-style:disc outside;}dl dd{margin-left:1em;}th,td{border:1px solid #000;padding:.5em;}th{font-weight:bold;text-align:center;}caption{margin-bottom:.5em;text-align:center;}sup{vertical-align:super;}sub{vertical-align:sub;}p,fieldset,table,pre{margin-bottom:1em;}button,input[type="checkbox"],input[type="radio"],input[type="reset"],input[type="submit"]{padding:1px;}

/* Ruff default CSS */

body {
  /*max-width: 70em;*/
  margin: 0;
}

h1,h2 {
  color: #888888;
  margin-bottom: 0.5em;
  margin-top: 0em;
}

#ft { font-size: x-small; font-family: Arial, sans-serif;
  text-align: left;
  border-top: 1px solid #0B3467;
  color: #888888;
  margin-top: 10px;
}

.banner h2 {
  color: #0B3467;
}

#hd.banner {
 font-family: "Times New Roman", serif;
 font-size: 200%;
 line-height: 64px;
 border-bottom: thin solid #0B3467;
 color: #0B3467;
}

p.linkline {
  text-align: right;
  font-size: smaller;
  /*    margin-top: -1em; */
  margin-bottom: 0;
}

.tinylink {
  font-size: x-small;
  font-variant: normal;
  font-family: Arial, sans-serif;
  float: right;
  padding:2px;
}

h1 .tinylink a {
  color: white;
}

#bd {
font-family: Arial, sans-serif;
/*font-size: 108%;*/
}

div.navbox {
  /* margin-top: 1em; */
  background-color: #0B3467;
  color: white;
  padding: 3px 4px 2px 4px;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

div.navbox:hover {
  overflow: visible;
}

/* Note .navbox header css should be based on $header_levels */
.navbox h1, .navbox h2, .navbox h3, .navbox h4, .navbox h5 {
  font-size: 85%;
  margin: 0px;
  font-weight: normal;
}
.navbox h1 {
  font-weight: bold; /* Override */
}
.navbox h2 {
  padding-left: 1em;
}
.navbox h3 {
  padding-left: 2em;
}
.navbox h4 {
  padding-left: 2.5em;
  font-weight: normal;
}
.navbox h5 {
  padding-left: 3em;
  font-weight: normal;
}
.navbox hr {
  color: white;
  margin-top:0.1em;
  margin-bottom:0.1em;
}

.navbox a:link, .navbox a:visited, .navbox a:hover {
  text-decoration: none;
  color: white;
  background-color: #0B3467;
}

.navbox a:hover {
   font-weight: bold;
}

/* Tooltip text - see https://www.w3schools.com/css/css_tooltip.asp */
.tooltip {
  position: relative;
  /* display: inline-block; */
}

.tooltip .tooltiptext {
  width: 100%;
  font-weight: bold;
  background-color: white;
  color: #0B3467;
  text-align: left;
  border: 1px solid #0B3467;
  /* border-radius: 4px; */
  position: absolute;
  z-index: 1;
  margin-left: 4px;
  padding: 2px 3px;
  visibility: hidden;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}

span.ns_scope {
  color: #aaaaaa;
}

span.ns_scope a:link, span.ns_scope a:visited {
  text-decoration: none;
  color: #aaaaaa;

}

li {
  margin-top: 0.5em;
}

span.ns_scope a:hover {
  text-decoration: none;
  color: #666666;
}

table {
  margin: 1em;
  margin-top: 0.5em;
  border: thin solid;
  border-collapse: collapse;
  border-color: #808080;
  padding: 4px;
}

td {
  border: thin solid;
  border-color: #808080;
  vertical-align: top;
  font-size: 93%;
  padding: 0.3em;
  padding-top: 0.1em;
}
th {
  border: thin solid;
  border-color: #808080;
  padding: 0.3em;
  padding-top: 0.1em;
  background-color: #CCCCCC;
}

dt, dd {
   font-size: 93%;
}

h1.ruff {
  background-color: #0B3467;
  color: #ffffff;
  padding-left: 0.2em;
  font-family: "Times New Roman", serif;
}
h2.ruff {
  font-variant: small-caps;
  color: #0B3467;
  font-weight: bold;
  font-family: "Times New Roman", serif;
}

h3.ruff, h4.ruff, h5.ruff, h6.ruff {
  color: #0B3467;
}
h5.ruff {
  font-style: italic;
  font-weight: normal;
}
h6.ruff {
  font-weight: normal;
}
h3.ruffclass, h3.ruffproc, h3.ruffmethod,
h4.ruffclass, h4.ruffproc, h4.ruffmethod,
h5.ruffclass, h5.ruffproc, h5.ruffmethod {
  border-bottom: thin solid #0B3467;
  color: #0B3467;
  margin-bottom: 0.2em;
}

pre {
  background-color: #f9f9f9;
  margin-top: 1em;
  margin-left: 1em;
  padding: 5px;
  font-family: Consolas, "Courier New", monospace;
  /* width: max-content; --- to leave footsteps */ overflow: auto;
  line-height: 1.2em;
}

.ruff_dyn_src {
  display: none; /* Displayed via JS */
}

.ruff_synopsis {
  border: thin solid #cccccc;
  background: #f9f9f9;
  font-family: Consolas, "Courier New", monospace;
  padding: 5px;
  margin: 0em 2em 1em;
}
.ruff_const, .ruff_cmd, ruff_defitem {
  font-weight: bold;
  font-family: Consolas, "Courier New", monospace;
}
.ruff_arg {
  font-style: italic;
  font-family: Consolas, "Courier New", monospace;
}

.ruff_source_link {
  font-size: smaller;
}
</style>
<script>function toggleSource( id )
{
  /* Copied from Rails */
  var elem
  var link

  if( document.getElementById )
  {
      elem = document.getElementById( id )
      link = document.getElementById( "l_" + id )
  }
  else if ( document.all )
  {
      elem = eval( "document.all." + id )
      link = eval( "document.all.l_" + id )
  }
  else
      return false;

  if( elem.style.display == "block" )
  {
      elem.style.display = "none"
      link.innerHTML = "Show source"
  }
  else
  {
      elem.style.display = "block"
      link.innerHTML = "Hide source"
  }
}
</script></head>
<meta name="author" content="aplsimple">
<meta name="description" content="aplsimple's home page">
<meta name="keywords" content="aplsimple,home">
<link rel="stylesheet" href="../../../en/zoo/style.css">
<style>
table{
background-color: #f9f9f9;
margin: 0%;
margin-bottom: 2%;
padding: 0%;
box-shadow: none;
filter: none;
}
pre{
margin: 0%;
margin-bottom: 2%;
padding: 0%;
}
</style>
<link rel="icon" type="image/jpg" href="../../../zoo/favicon.jpg">
<body>
<div id="wrapper">
<div name="divd1" ALIGN="CENTER"> <FONT SIZE=5em color=#b01c20><B>
<noscript>THIS PAGE IS NOT WORKING WITHOUT JAVASCRIPT!
<BR>
<BR>PLEASE, SWITCH ON JAVASCRIPT IN SETTINGS OF YOUR BROWSER AND RELOAD THE PAGE.
</noscript>
</B></FONT></div>
<div id='doc3' class='yui-t2'>
<script src="../../../zoo/funcs.js"></script>
<script src="../../../en/zoo/this.js"></script>
<section id=sec2>
<div id='hd' class='banner'>
<a name='highlight_tcl.html'>::highlight_tcl reference</a>
</div>
<div id='bd'><div id='yui-main'><div class='yui-b'><h1 class='ruff'><a name='::highlight_tcl'></a>::highlight_tcl<span class='tinylink'><a href='#top'>Top</a></span></h1>
<div style='clear:both;'></div>
<p class='ruff'>The <em>highlight_tcl</em> package provides the syntax highlighting of Tcl/Tk scripts.</p>
<p class='ruff'>Download:</p>
<p class='ruff'><a href="http://chiselapp.com/user/aplsimple/repository/highlight_tcl/download" >highlight_tcl.zip</a></p>
<br><h2 class='ruff'><a name='::highlight_tcl-Commands'></a>Commands<span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::commandForChange'>commandForChange</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Replaces a command of text widget for making changes</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>commandForChange</span> <span class='ruff_arg'>w com on ?com2?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>w</code></code></td><td class='ruff_defitem'>text widget's name</td></tr>
<tr><td class='ruff_defitem'><code><code>com</code></code></td><td class='ruff_defitem'>command for changes</td></tr>
<tr><td class='ruff_defitem'><code><code>on</code></code></td><td class='ruff_defitem'>if &quot;yes&quot;, replaces a text command; if &quot;no&quot;, restores it</td></tr>
<tr><td class='ruff_defitem'><code><code>com2</code></code></td><td class='ruff_defitem'>additional command for &quot;after all&quot; action; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>In particular, when <code>com</code> is empty, the text widget becomes readonly.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_1' href="javascript:toggleSource('1')">Show source</a></p>
<div id='1' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::commandForChange {w com on {com2 {}}} {

  # Replaces a command of text widget for making changes
  #   w - text widget's name
  #   com - command for changes
  #   on - if &quot;yes&quot;, replaces a text command; if &quot;no&quot;, restores it
  #   com2 - additional command for &quot;after all&quot; action
  # In particular, when `com` is empty, the text widget becomes readonly.

  set newcom $w.internal
  if {!$on} {
    if {[info commands ::$newcom] ne &quot;&quot;} {
      rename ::$w &quot;&quot;
      rename ::$newcom ::$w
    }
  } elseif {[info commands ::$newcom] eq &quot;&quot;} {
    rename $w ::$newcom
    if {$com eq &quot;&quot;} {
      # text to be readonly
      proc ::$w {args} &quot;
        switch -exact -- \[lindex \$args 0\] \{
            insert \{\}
            delete \{\}
            replace \{\}
            default \{
                return \[eval ::$newcom \$args\]
            \}
        \}&quot;
    } else {
      # text to be sensible to changes
      proc ::$w {args} &quot;
        set _res_of_TextCommandForChange \[eval ::$newcom \$args\]
        switch -exact -- \[lindex \$args 0\] \{
            insert \{after idle {$com}\}
            delete \{after idle {$com}\}
            replace \{after idle {$com}\}
        \}
        return \$_res_of_TextCommandForChange&quot;
    }
  }
  if {$com2 ne &quot;&quot;} {
    {*}$com2
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::count_QuoSla'>count_QuoSla</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>count_QuoSla</span> <span class='ruff_arg'>txt ln</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>ln</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_2' href="javascript:toggleSource('2')">Show source</a></p>
<div id='2' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::count_QuoSla {txt ln} {

  set ln [expr {int($ln)}]
  set st [$txt get $ln.0 $ln.end]
  return [list [countCh $st &quot;\&quot;&quot;] [countCh $st &quot;\\&quot;] [countCh $st &quot;#&quot;]]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::countCh'>countCh</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Counts a character in a string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>countCh</span> <span class='ruff_arg'>str ch</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>str</code></code></td><td class='ruff_defitem'>a string</td></tr>
<tr><td class='ruff_defitem'><code><code>ch</code></code></td><td class='ruff_defitem'>a character</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a number of non-escaped occurences of character <em>ch</em> in string <em>str</em>.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="https://wiki.tcl-lang.org/page/Reformatting+Tcl+code+indentation" >wiki.tcl-lang.org</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_3' href="javascript:toggleSource('3')">Show source</a></p>
<div id='3' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::countCh {str ch} {

  # Counts a character in a string.
  #   str - a string
  #   ch - a character
  #
  # Returns a number of non-escaped occurences of character *ch* in
  # string *str*.
  #
  # See also:
  # [wiki.tcl-lang.org](https://wiki.tcl-lang.org/page/Reformatting+Tcl+code+indentation)

  set icnt 0
  while {[set idx [string first $ch $str]] &gt;= 0} {
    set backslashes 0
    set nidx $idx
    while {[string equal [string index $str [incr nidx -1]] \\]} {
      incr backslashes
    }
    if {$backslashes % 2 == 0} { incr icnt }
    set str [string range $str [incr idx] end]
  }
  return $icnt
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::ending'>ending</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>ending</span> <span class='ruff_arg'>kName lineName iName</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>kName</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>lineName</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>iName</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_4' href="javascript:toggleSource('4')">Show source</a></p>
<div id='4' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::ending {kName lineName iName} {

  upvar 1 $kName k $lineName line $iName i
  return [expr {[set k [string first &quot;#&quot; $line $i]]&gt;-1 &amp;&amp;  ([string trimleft [string range $line 0 $k-1]] eq &quot;&quot; || [string index  [string trimright [string range $line $i+1 $k-1]] end] eq &quot;;&quot;)}]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::firstq'>firstq</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>firstq</span> <span class='ruff_arg'>lineName iName</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>lineName</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>iName</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_5' href="javascript:toggleSource('5')">Show source</a></p>
<div id='5' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::firstq {lineName iName} {

  variable data
  upvar 1 $lineName line $iName i
  while {1} {
    # below is a line that brings Tcl highlighters in the stupor:
    if {[set i [string first {&quot;} $line $i]]==-1} {return no}
    ;# this one bring them out:
    # if {0} {&quot;}
    if {[noEsc $line $i]} {
      set i1 [expr {$i-1}]
      set i2 [expr {$i+1}]
      if {[noEsc $line $i1] &amp;&amp; [noEsc $line $i2]} {
        set c1 [string index $line $i1]  ;# check the string ends
        set c2 [string index $line $i2]
        if {$c1 in $data(S_BOTH) || $c2 in $data(S_BOTH) ||
        $c1 in $data(S_LEFT) &amp;&amp; $c2 ni $data(S_RIGHT) || $c1 ni $data(S_LEFT) &amp;&amp; $c2 in $data(S_RIGHT)} {
          return yes
        }
        # last reverence: for braced expression
        set i1 $i
        while {$i1&gt;0} {
          set c1 [string index $line $i1-1]
          set c2 [string index $line $i1]
          if {$c1 in $data(S_SPACE)} {return [expr {$c2 ne &quot;\{&quot;}]}
          incr i1 -1
        }
        return no ;#[expr {!$data(MULTI_LINE_STR)}]
      }
      return yes
    }
    incr i
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::get_currQtd'>get_currQtd</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>get_currQtd</span> <span class='ruff_arg'>txt tSTR tCMN l1</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>tSTR</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>tCMN</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>l1</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_6' href="javascript:toggleSource('6')">Show source</a></p>
<div id='6' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::get_currQtd {txt tSTR tCMN l1} {

  set i1 [$txt index $l1]
  if {[string first &quot;-1&quot; $l1]&gt;-1} {
    set ch [$txt get &quot;$i1 -1 chars&quot; $i1]
  } else {
    set ch [$txt get &quot;$i1&quot; &quot;$i1 +1 chars&quot;]
  }
  set currQtd 0
  if {[lsearch_qtd $tCMN $i1]!=-1} {
    if {$ch eq &quot;\\&quot;} {set currQtd -1}
  } elseif {[set i [lsearch_qtd $tSTR $i1]]!=-1} {
    lassign [split $i1 .] -&gt; c    ;# is a string continues
    lassign [split [lindex $tSTR $i] .] -&gt; c1
    lassign [split [lindex $tSTR $i+1] .] -&gt; c2
    catch {if {$ch ne &quot;\&quot;&quot; || $c&lt;$c1 || $c&gt;$c2 || ($c2-$c1)&lt;2} {set currQtd 1}}
  }
  return $currQtd
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::highlight'>highlight</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>highlight</span> <span class='ruff_arg'>txt ?darkedit?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>darkedit</code></code></td><td class='ruff_defitem'>Not documented; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_7' href="javascript:toggleSource('7')">Show source</a></p>
<div id='7' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::highlight {txt {darkedit {}}} {

  variable data
  if {$darkedit ne &quot;&quot;} {set data(DARK_EDITOR) $darkedit}
  set font0 [font configure TkFixedFont]
  dict set font0 -size 12
  set font1 [set font2 $font0]
  $txt tag config tagSTD -font &quot;$font0&quot;
  $txt tag add tagSTD 1.0 end
  dict set font1 -weight bold
  dict set font2 -slant italic
  if {$data(DARK_EDITOR)} {
    set clrCOM orange
    set clrCOMTK DarkOrange3
    set clrSTR lightgreen
    set clrVAR #f1b479
    set clrCMN #a3a3a3
  } else {
    set clrCOM #922b23
    set clrCOMTK #771008
    set clrSTR #035103
    set clrVAR #4A181B
    set clrCMN #646464
  }
  $txt tag config tagCOM -font &quot;$font1&quot; -foreground $clrCOM
  $txt tag config tagCOMTK -font &quot;$font1&quot; -foreground $clrCOMTK
  $txt tag config tagSTR -font &quot;$font0&quot; -foreground $clrSTR
  $txt tag config tagVAR -font &quot;$font0&quot; -foreground $clrVAR
  $txt tag config tagCMN -font &quot;$font2&quot; -foreground $clrCMN
  highlight_all $txt
  if {![info exists data(BIND_TXT,$txt)]} {
    bind $txt &lt;KeyPress&gt; [list + [namespace current]::onhl_KeyPress $txt]
    bind $txt &lt;ButtonPress-1&gt; [list + [namespace current]::onhl_Mempos $txt]
    commandForChange $txt &quot;[namespace current]::onhl_Modified $txt&quot; yes
    set data(BIND_TXT,$txt) yes
  }
  set data(REG_TXT,$txt) &quot;1&quot;
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::highlight_all'>highlight_all</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>highlight_all</span> <span class='ruff_arg'>txt</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_8' href="javascript:toggleSource('8')">Show source</a></p>
<div id='8' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::highlight_all {txt} {

  set tlen [lindex [split [$txt index end] .] 0]
  remove_tags $txt 1.0 end
  for {set currQtd [set ln 0]} {$ln&lt;=$tlen} {incr ln} {
    set currQtd [highlight_line $txt $ln $currQtd]
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::highlight_comms'>highlight_comms</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>highlight_comms</span> <span class='ruff_arg'>txt line ln pri i</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>line</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>ln</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>pri</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_9' href="javascript:toggleSource('9')">Show source</a></p>
<div id='9' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::highlight_comms {txt line ln pri i} {

  variable data
  $txt tag add tagSTD &quot;$ln.$pri&quot; &quot;$ln.$i -1 char&quot;
  set st [string range $line $pri $i-1]
  set lcom [regexp -inline -all -indices {(^|\[|\{|\}|;)+\s*(:|\w)+} $st]
  # commands
  foreach {lc g1 g2} $lcom {
    lassign $lc i1 i2
    set c [string trim [string range $st $i1 $i2] &quot;\{\}\[;\t &quot;]
    set ik [expr {$i2-$i1+1-[string length $c]}]
    if {$c ne &quot;&quot;} {
      incr i1 $ik
      incr i2
      if {[set j [lsearch -exact $data(CMD) $c]]&gt;-1} {
        $txt tag add tagCOM &quot;$ln.$pri +$i1 char&quot; &quot;$ln.$pri +$i2 char&quot;
      } elseif {[set j [lsearch -exact $data(CMD_TK) $c]]&gt;-1} {
        $txt tag add tagCOMTK &quot;$ln.$pri +$i1 char&quot; &quot;$ln.$pri +$i2 char&quot;
      }
    }
  }
  foreach el {else elseif} {
    set lcom [regexp -inline -all -indices &quot;\}\\s+($el)\\s+\{&quot; $st]
    foreach {g1 lc} $lcom {
      lassign $lc i1 i2
      $txt tag add tagCOM &quot;$ln.$pri +$i1 char&quot; &quot;$ln.$pri +[incr i2] char&quot;
    }
  }
  # variable values
  set lcom [regexp -inline -all -indices {(^|[^\\])\$+\{?(:|\w|\(|\))+\}?} $st]
  foreach {lc g1 g2} $lcom {
    lassign $lc i1 i2
    set i [string first \$ [set c [string range $st $i1 $i2]]]
    if {[string last \} $c]&gt;0 &amp;&amp; [string first \$\{ $c]==-1} {incr i2 -1}
    if {[incr i1 $i]&lt;[incr i2]} {
      $txt tag add tagVAR &quot;$ln.$pri +$i1 char&quot; &quot;$ln.$pri +$i2 char&quot;
    }
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::highlight_init'>highlight_init</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>highlight_init</span> <span class='ruff_arg'>txt</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_10' href="javascript:toggleSource('10')">Show source</a></p>
<div id='10' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::highlight_init {txt} {

  variable data
  set data(REG_TXT,$txt) &quot;&quot;
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::highlight_line'>highlight_line</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>highlight_line</span> <span class='ruff_arg'>txt ln prevQtd</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>ln</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>prevQtd</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_11' href="javascript:toggleSource('11')">Show source</a></p>
<div id='11' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::highlight_line {txt ln prevQtd} {

  variable data
  set line [$txt get $ln.0 $ln.end]
  if {$prevQtd==-1} {  ;# comments continued
    $txt tag add tagCMN $ln.0 $ln.end
    if {[string index $line end] ne &quot;\\&quot;} {set prevQtd 0}
    return $prevQtd
  }
  set currQtd $prevQtd  ;# current state of being quoted
  set i [set pri [set lasti 0]]
  set k -1
  while {1} {
    if {![firstq line i]} {
      if {$currQtd} {
        highlight_str $txt $ln.$pri $ln.end
      } elseif {$k&gt;-1 || [ending k line lasti]} {
        highlight_comms $txt $line $ln $lasti [string length $line]
        $txt tag add tagCMN $ln.$k $ln.end
        if {[string index $line end] eq &quot;\\&quot;} {set currQtd -1}
      } else {
        highlight_comms $txt $line $ln $lasti [string length $line]
      }
      break
    }
    set lasti $i
    if {$currQtd} {
      highlight_str $txt $ln.$pri &quot;$ln.$i +1 char&quot;
      set currQtd 0
      if {[ending j line lasti]} {
        set k $j
        set i end+1
        continue
      }
    } else {
      if {[ending j line pri] &amp;&amp; $j&lt;$i} {
        set lasti $pri
        set k $j
        set i end+1
        continue
      }
      highlight_comms $txt $line $ln $pri $i
      set currQtd 1
    }
    set pri $i
    incr i
  }
  if {!$data(MULTI_LINE_STR) &amp;&amp; $currQtd &amp;&amp; [string index $line end] ne &quot;\\&quot;} {
    set currQtd 0
  }
  return $currQtd
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::highlight_str'>highlight_str</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>highlight_str</span> <span class='ruff_arg'>txt p1 p2</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>p1</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>p2</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_12' href="javascript:toggleSource('12')">Show source</a></p>
<div id='12' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::highlight_str {txt p1 p2} {

  set p1 [$txt index $p1]
  set p2 [$txt index $p2]
  $txt tag add tagSTR $p1 $p2
  set st [$txt get $p1 $p2]
  set lcom [regexp -inline -all -indices {(^|[^\\])(\[|\]|\$)+} $st]
  foreach {lc g1 g2} $lcom {
    lassign $lc i1 i2
    incr i2
    while {$i1&lt;$i2} {
      if {[string index $st $i1] in {\[ \] \$}} {
        $txt tag add tagVAR &quot;$p1 +$i1 char&quot; &quot;$p1 +$i2 char&quot;
      }
      incr i1
    }
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::lsearch_qtd'>lsearch_qtd</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>lsearch_qtd</span> <span class='ruff_arg'>tagpos l1</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>tagpos</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>l1</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_13' href="javascript:toggleSource('13')">Show source</a></p>
<div id='13' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::lsearch_qtd {tagpos l1} {

  lassign [split $l1 .] l c
  set i 0
  foreach {p1 p2} $tagpos {
    lassign [split $p1 .] l1 c1
    lassign [split $p2 .] l2 c2
    if {$l&gt;$l1 &amp;&amp; $l&lt;$l2 || ($l==$l1 &amp;&amp; $c&gt;=$c1 &amp;&amp; $l&lt;=$l2) ||
    ($l==$l2 &amp;&amp; $c&lt;=$c2 &amp;&amp; $l&gt;=$l1)} {
      return $i
    }
    incr i 2
  }
  return -1
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::noEsc'>noEsc</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>noEsc</span> <span class='ruff_arg'>line i</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>line</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_14' href="javascript:toggleSource('14')">Show source</a></p>
<div id='14' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::noEsc {line i} {

  ;# counting escapes

  set cntq 0
  while {$i&gt;0} {
    incr i -1
    if {[string index $line $i] ne &quot;\\&quot;} break
    incr cntq
  }
  return [expr {($cntq%2)==0}]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::onhl_KeyPress'>onhl_KeyPress</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>onhl_KeyPress</span> <span class='ruff_arg'>txt</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_15' href="javascript:toggleSource('15')">Show source</a></p>
<div id='15' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::onhl_KeyPress {txt} {

  variable data
  onhl_Mempos $txt
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::onhl_Mempos'>onhl_Mempos</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>onhl_Mempos</span> <span class='ruff_arg'>txt</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_16' href="javascript:toggleSource('16')">Show source</a></p>
<div id='16' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::onhl_Mempos {txt} {

  variable data
  set ln [$txt index insert]
  set data(CUR_POS,$txt) [$txt index insert]
  set data(CUR_LEN,$txt) [$txt index end]
  lassign [count_QuoSla $txt $ln]  data(CNT_QUOTE,$txt) data(CNT_SLASH,$txt) data(CNT_COMMENT,$txt)
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::onhl_Modified'>onhl_Modified</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>onhl_Modified</span> <span class='ruff_arg'>txt</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_17' href="javascript:toggleSource('17')">Show source</a></p>
<div id='17' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::onhl_Modified {txt} {

  variable data
  if {![info exist data(REG_TXT,$txt)] || $data(REG_TXT,$txt) eq &quot;&quot; ||  ![info exist data(CUR_LEN,$txt)]} {
    return  ;# skip changes till the highlighting done
  }
  # current line:
  set ln [expr {int([$txt index insert])}]
  # range of change:
  set dl [expr {abs([expr {int($data(CUR_LEN,$txt))}] - int([$txt index end]))}]
  # ending line:
  set endl [expr {int([$txt index end])}]
  # begin and end of changes:
  set ln1 [expr {max(($ln-$dl),1)}]
  set ln2 [expr {min(($ln+$dl),$endl)}]
  lassign [count_QuoSla $txt $ln] cntq cnts ccmnt
  # flag &quot;highlight to the end&quot;:
  set bf1 [expr {$ln!=int($data(CUR_POS,$txt)) || $dl&gt;1  || $cntq!=$data(CNT_QUOTE,$txt)  || $cnts!=$data(CNT_SLASH,$txt)  || $ccmnt!=$data(CNT_COMMENT,$txt)}]
  set tSTR [$txt tag ranges tagSTR]
  set tCMN [$txt tag ranges tagCMN]
  if {$ln1==1} {
    set currQtd 0
  } else {
    set currQtd [get_currQtd $txt $tSTR $tCMN &quot;$ln1.0 -1 chars&quot;]
  }
  while {$ln1&lt;=$ln2} {
    if {$ln1==$ln2} {
      set bf2 [get_currQtd $txt $tSTR $tCMN &quot;$ln1.end +1 chars&quot;]
    }
    remove_tags $txt $ln1.0 $ln1.end
    set currQtd [highlight_line $txt $ln1 $currQtd]
    if {$ln1==$ln2 &amp;&amp; $data(MULTI_LINE_STR)} {
      if {$bf1 || $bf2!=[get_currQtd $txt $tSTR $tCMN &quot;$ln1.end +1 chars&quot;]} {
        set ln2 $endl  ;# run to the end
      }
    }
    incr ln1
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::remove_tags'>remove_tags</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>remove_tags</span> <span class='ruff_arg'>txt from to</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>from</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>to</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_18' href="javascript:toggleSource('18')">Show source</a></p>
<div id='18' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::remove_tags {txt from to} {

  foreach tag {tagCOM tagCOMTK tagSTR tagVAR tagCMN} {
    $txt tag remove $tag $from $to
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::highlight_tcl::set_firstq'>set_firstq</a><span class='ns_scope'> [<a href="highlight_tcl.html#::highlight_tcl" title="::highlight_tcl" class='ruff_cmd'>::highlight_tcl</a>]</span><span class='tinylink'><a href='highlight_tcl.html#::highlight_tcl'>highlight_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<div class='ruff_synopsis'><span class='ruff_cmd'>set_firstq</span> <span class='ruff_arg'>newfq</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>newfq</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_19' href="javascript:toggleSource('19')">Show source</a></p>
<div id='19' class='ruff_dyn_src'><pre><code class="tcl"><br>proc ::highlight_tcl::set_firstq {newfq} {

  variable data
  set currfirstq [namespace current]::firstq
  if {[info exists data(MULTI_LINE_STR,oldfq)]} {
    rename $currfirstq $data(MULTI_LINE_STR,oldfq)
  }
  set newfirstq [namespace current]::$newfq
  rename $newfirstq $currfirstq
  set data(MULTI_LINE_STR,oldfq) $newfirstq
}<br><br></code></pre></div>
</div></div></div><div class='yui-b navbox' ><h1><a href='#::highlight_tcl'>highlight_tcl</a></h1><h2><a href='#::highlight_tcl-Commands'>Commands</a></h2><h4 class='tooltip'><a href='highlight_tcl.html#::highlight_tcl::commandForChange'>commandForChange</a><span class='tooltiptext'>Replaces a command of text widget for making changes
</span></h4><h4><a href='highlight_tcl.html#::highlight_tcl::count_QuoSla'>count_QuoSla</a></h4><h4 class='tooltip'><a href='highlight_tcl.html#::highlight_tcl::countCh'>countCh</a><span class='tooltiptext'>Counts a character in a string.
</span></h4><h4><a href='highlight_tcl.html#::highlight_tcl::ending'>ending</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::firstq'>firstq</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::get_currQtd'>get_currQtd</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::highlight'>highlight</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::highlight_all'>highlight_all</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::highlight_comms'>highlight_comms</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::highlight_init'>highlight_init</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::highlight_line'>highlight_line</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::highlight_str'>highlight_str</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::lsearch_qtd'>lsearch_qtd</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::noEsc'>noEsc</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::onhl_KeyPress'>onhl_KeyPress</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::onhl_Mempos'>onhl_Mempos</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::onhl_Modified'>onhl_Modified</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::remove_tags'>remove_tags</a></h4><h4><a href='highlight_tcl.html#::highlight_tcl::set_firstq'>set_firstq</a></h4></div></div><div id='ft'><div style='float: right;'>Document generated by <a href='https://ruff.magicsplat.com'>Ruff!</a></div></div>
</div></body></html>
