<!DOCTYPE html>
<html lang="ru">
<head><meta charset="UTF-8">
<meta name="author" content="aplsimple">
<meta name="description" content="e_menu">
<meta name="keywords" content="menu,e_menu,context,editor,Tcl/Tk,TKE,Geany,Wing IDE,PyCharm IDE,Kate,plugin">
<link rel="stylesheet" href="../../zoo/style.css">
<link rel="icon" type="image/jpg" href="../../../zoo/favicon.jpg">
</head>
<body>
<div name="divd1" ALIGN="CENTER"> <FONT SIZE=5em color=#b01c20><B>
<noscript>THIS PAGE IS NOT WORKING WITHOUT JAVASCRIPT!
<BR>
<BR>PLEASE, SWITCH ON JAVASCRIPT IN SETTINGS OF YOUR BROWSER AND RELOAD THE PAGE.
</noscript>
</B></FONT></div>
<div id="wrapper">

<script src="../../../zoo/funcs.js"></script>
<script src="../../zoo/this.js"></script>

<section id=sec2>

<title>e_menu</title>
</head>

  <div id="bodyContent" class="dokuwiki">
  <!-- start rendered wiki content -->
  <!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle open" style="cursor: pointer;">Table of Contents</h3>
<div aria-expanded="true" style="">

<ul class="toc">
<li class="level2"><div class="li"><a href="#intro">What is this</a></div></li>
<li class="level2"><div class="li"><a href="#introduction_to_e_menu">Introduction</a></div></li>
<hr>
<li class="level2"><div class="li"><a href="#calling_e_menu">Calling e_menu</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a
href="#calling_e_menu">Options of e_menu</a></div></li>
<li class="level3"><div class="li"><a
href="#setting_options_in_a_menu_file">Options in menu files</a></div></li>
<li class="level3"><div class="li"><a href="#options_in_environment">Options in environment</a></div></li>
<li class="level3"><div class="li"><a href="#examples">Examples</a></div></li>
</ul>
</li>
<hr>
<li class="level2"><div class="li"><a href="#creating_e_menu_files">Creating e_menu files</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#structure_of_menu">Structure of menu</a></div></li>
<li class="level3"><div class="li"><a href="#wildcards_in_menu_names_and_commands">Wildcards</a></div></li>
<li class="level3"><div class="li"><a href="#processing_wildcards">Processing wildcards</a></div></li>
<li class="level3"><div class="li"><a href="#input_dialogs">Input dialogs</a></div></li>
<li class="level3"><div class="li"><a href="#warnings_of_menus">Warnings (Q command)</a></div></li>
<li class="level3"><div class="li"><a href="#variables">Variables</a></div></li>
<li class="level3"><div class="li"><a
href="#bash_scripts">Shell scripts</a></div></li>
<li class="level3"><div class="li"><a href="#macros">Macros</a></div></li>
<li class="level3"><div class="li"><a href="#examples1">Examples</a></div></li>
</ul>
</li>
<hr>
<li class="level2"><div class="li"><a href="#detailed_example">Detailed example</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#step_1_initial_testing">Initial testing</a></div></li>
<li class="level3"><div class="li"><a href="#step_2_creating_a_menu">Making menus</a></div></li>
<li class="level3"><div class="li"><a href="#step_3_creating_a_submenu">Making submenus</a></div></li>
</ul>
</li>
<hr>
<li class="level2"><div class="li"><a href="#using_e_menu">Usage of e_menu</a></div>
<ul>
<li class="level2"><div class="li"><a href="#detailed_editors">in editors and IDE</a></div></li>
<ul class="toc">
<li class="level3"><div class="li"><a href="#detailed_alited">alited editor</a></div></li>
<li class="level3"><div class="li"><a href="#detailed_tke">TKE editor</a></div></li>
<li class="level3"><div class="li"><a href="#detailed_kate">Kate editor</a></div></li>
<li class="level3"><div class="li"><a href="#detailed_geany">Geany IDE</a></div></li>
<li class="level3"><div class="li"><a href="#detailed_wing">Wing IDE</a></div></li>
<li class="level3"><div class="li"><a href="#detailed_pycharm">PyCharm IDE</a></div></li>
</ul>
<li class="level2"><div class="li"><a href="#detailed_fm">in file managers</a></div></li>
<ul class="toc">
<li class="level3"><div class="li"><a href="#caja_fm">Caja</a></div></li>
<li class="level3"><div class="li"><a href="#nautilus_fm">Nautilus</a></div></li>
<li class="level3"><div class="li"><a href="#nemo_fm">Nemo</a></div></li>
<li class="level3"><div class="li"><a href="#thunar_fm">Thunar</a></div></li>
</ul>
<li class="level2"><div class="li"><a href="#detailed_tcl">in Tcl scripts</a></div></li>
</ul>
</li>
<hr>
<li class="level2"><div class="li"><a href="#making_menus_project_sensitive">Project... </a></div></li>
<hr>
<li class="level2"><div class="li"><a href="#tips_and_hints">Tips and hints</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#what_s_all_those_r_re_rw_s_se_sw_m_me_mw_mean">What's those R, RE, RW etc. mean?</a></div></li>
<li class="level3"><div class="li"><a href="#changing_menus_look_and_feel">Look and feel</a></div></li>
<li class="level3"><div class="li"><a href="#counting_and_timing_commands">Counting and timing</a></div></li>
<li class="level3"><div class="li"><a href="#starting_menu_items_at_intervals">Running items at intervals</a></div></li>
<li class="level3"><div class="li"><a href="#running_commands_at_start">Running items at start</a></div></li>
<li class="level3"><div class="li"><a href="#closing_all_menus">Destroying menus</a></div></li>
<li class="level3"><div class="li"><a href="#sort_of_debugging">Logging and debugging</a></div></li>
<li class="level3"><div class="li"><a href="#tclkits">Running by tclkits</a></div></li>
</ul>
</li>
<hr>
<li class="level2"><div class="li"><a href="#download">Download</a></div></li>
<li class="level2"><div class="li"><a href="#see_also">See also</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->
<!--
makes e_menu skip #ARGS0/#RUNF0/#EXEC0 comments in code snippets:
#ARGS0:OFF
-->

<br>

<h2 id="intro">What is this</h2>
<div class="level2">

<p>
This software written in <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org"
rel="nofollow">Tcl/Tk</a> and pompously named <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> provides a menu system
bound to an edit / file managing session. A text editor / file manager with
plugin or context facilities allows to use <span class="curid"><a href="#" class="wikilink1"
title="Table of Contents">e_menu</a></span> as "a plugin of plugins"
that raises a whole environment of commands & menus around the editor / file manager.
</p>

<p>
By now <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> is implemented for <a href="../../tcl/alited/index.html">alited editor</a>,
<a href="https://github.com/phase1geo/tke/tree/master/plugins/"
title="TKE's plugins">TKE editor</a>, <a href="https://kate-editor.org" title="Kate editor">Kate editor</a>, <a href="https://www.geany.org" title="Geany IDE">Geany IDE</a>, <a href="http://www.wingware.com/" title="Wing Python IDE">Wing Python IDE</a> and <a href="https://www.jetbrains.com/pycharm/" title="PyCharm IDE">PyCharm IDE</a>. Though the usage of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> is mostly
independent on an editor / IDE, a few demonstrative details for <a href="#detailed_alited" title="alited editor">alited</a>, <a href="#detailed_tke" title="TKE editor">TKE</a>, <a href="#detailed_kate" title="Kate editor">Kate</a>, <a
href="#detailed_geany" title="Geany IDE">Geany</a>, <a href="#detailed_wing" title="Wing Python IDE">Wing</a> and <a href="#detailed_pycharm" title="PyCharm IDE">PyCharm</a> are described <a href="#detailed_editors">below</a>.
</p>
<p>
Also, <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> can be used in  <a href="#detailed_fm">file managers</a> that provide scripting facilities.
</p>
<p>
The <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> can be a "mega-widget" called from Tcl/Tk code as a modal / independent / dock / desktop window.
</p>

<p>
For Tclers, <span class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> provides a <a
href=#contextHelp>context help on Tcl/Tk</a>
commands / keywords while editing a Tcl script.
</p>

<p>
The <a href="https://github.com/aplsimple/aplsimple.github.io/releases/download/e_menu_v3.0/e_menu-3.0.mp4"
title="e_menu-3.0.mp4" rel="nofollow">e_menu-3.0.mp4</a> is sort of demo just to glance at <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>.
</p>

<br>

<p>
In more details, <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> provides the following features:
</p>
<ul>
<li class="level1"><div class="li"> calling a context help for <a
href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a>
while editing a Tcl script (nay, any text containing Tcl)</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> for faster response <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a> help pages can be made and called offline</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> opening any number of menus containing any commands (programs) to run</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> passing a selected text as %s wildcard to the menu commands to process</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> using a lot of other wildcards in the
menu commands, including %f (edited file name), %x (its extention), %d (its
directory), %PD (its project's
directory derived from %d) </div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> commands can be run by itself and by shell in console box</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> commands can be run with or without waiting their completion</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> internal command <em>%E</em> means “edit a file”</div>
</li>
<li class="level1"><div class="li"> internal command <em>%B</em> means “browse an internet link”</div>
</li>
<li class="level1"><div class="li"> internal command <em>%M</em> means “do a message”</div>
</li>
<li class="level1"><div class="li"> internal command <em>%Q</em> means “do a
query“</div>
</li>
<li class="level1"><div class="li"> internal command <em>%I</em> means “enter
a data that can be required by next commands“</div>
</li>
<li class="level1"><div class="li"> internal command <em>%C</em> means
“execute a Tcl code“</div>
</li>
<li class="level1"><div class="li"> internal command <em>%S</em> means
“execute OS command“</div>
<li class="level1"><div class="li"> internal command <em>%IF</em> means
“conditional execution“</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> a batch of multiple commands can be united under a
single menu item which in turn can be multi-lined</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> a menu item can include the whole shell script (even in two ways), so no need of disk files to perform it</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> confirming messages or input dialogs (with entries, checkboxes, radiobuttons etc.) may provide data for commands</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">the input data may be saved/restored between sessions</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> a hierarchy of menus is provided</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> a child menu can be called with or without closing its parent menu</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> a child menu can be called with closing its parent and returning to the parent after closing the child</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> menus can be called (or made afterwards) as
'stayed on the top of screen'</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> menus can be called to stay at any desirable position with reasonable width</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> inactive menus can be "lowlighted" as opposed to highlighted active ones</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>dock</em> and <em>desktop</em> type of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> can be used in Linux OS</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> menu items can be bound to hotkeys F1-F12
(by default they are bound to 1-9a-zA-Z which makes maximum 61+3=64 items)</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> menu items and their underlying commands
can include counters of their calls (up to 10 counters per a menu)</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> menu items and their underlying commands can be supplied with current date/time</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> menus are independent applications and as such can be run independently on the editor</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> however, <em>s_menu.tcl</em> can be used instead of <em>e_menu.tcl</em> to have a single window for all menus</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> a stand-alone <a href=#download>e_menu executable</a> can be used instead of <em>e_menu.tcl</em>, providing an independence on Tcl/Tk installation</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>e_menu.tcl</em> can be used as a "mega-widget" from a Tcl/Tk script</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> any menu item can be assigned to 'autorun' at start of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> (submenus including)</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> commands that are invisible in menu may be assigned to 'autorun' (submenus including)</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Tcl command(s) can be assigned to 'autorun' at start of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> menus can be edited 'on fly' and then re-read</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> when calling non-existent menu you are
prompted to create it from a template; so you can create all menu system 'on fly'</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> 'autorun' items and commands are also re-run when the menu is re-read</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> menu items can be run repeatedly at intervals set in seconds</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> can be started with a pause to delay its initialization</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> neighboring applications can be killed with two keystrokes (sort of clearance)</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> there are a lot of 'look and feel' options</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> the options may be set at calling of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> and/or in [OPTIONS] section of a menu</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> parent menu options are inherited by child menu and can be overridden by its [OPTIONS]</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> as an easy exercise, <a
href="https://mercurial-scm.org/" title="https://mercurial-scm.org"
rel="nofollow">Mercurial</a> or <a href="http://fossil-scm.org/"
title="http://fossil-scm.org" rel="nofollow">Fossil</a> SCM support
can be provided with <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> encoding of menus is utf-8</div>
</li>
</ul>

<p>
<br>

</p>

</div>

<h2 id="introduction_to_e_menu">Introduction</h2>
<div class="level2">

<p>
Imagine we have a module under testing in an editor. And it's run or debugged
with arguments. And the arguments are changed from time to time. And from a
function to a function of our module.
</p>

<p>
Going now and then to Run/Debug settings is tiresome. And a dull nuisance when we
have <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>.
</p>

<p>
All we need is to put some comments into our module (let it be module.some), something like:
</p>
<pre class="code">  /* Test block 1:
  some module.some testpar1
  some module.some testpar1 testpar2
  */
  ...some code 1...
  ...
  ...
  /* Test block 2:
  some module.some test2-par1
  some module.some test2-par1 test2-par2
  */
  ...some code 2...
  ...
  ...
  /* Test block 3:
  #ARGS1: test3-arg1 test2-arg2
  #RUNF1: module.tcl test3-arg1 test2-arg2
  */
  ...
  ...
  /* Test block 4:
  # doctests
  #% command arg1 arg2
  #> results
  */
  ...  </pre>

<p>
We write these comments close to a debugged code, then
select a line with a current test and call <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> where we do run the test.
</p>

<p>
The trick with <a href=#ARwildcard>#ARGS1: and #RUNF1:</a> allows to run tests without any text selection, at any text position, located as close to a tested code as you like.
</p>

<p>
The <a href=#download>e_menu.zip</a> archive provides also <a href="https://wiki.tcl-lang.org/page/doctest+for+Tcl"
title="doctest for Tcl" rel="nofollow">doctest for Tcl scripts</a> in its <em>main / utils / test1.mnu</em> menu.</p>

<p>
Thus, we get a batch of self-documented test cases directly inserted in the
code. Of course, Python's unittest/doctest could be applied here, but <u><a
href="#" class="wikilink1" title="Table of Contents">e_menu</a> can be applied
not only to Python modules</u>. What about Tcl, JavaScript, Vala etc.?
</p>

<p>
You can include in your menus any commands that would process the selected
text, as well as other relevant attributes: a current file's name, a file's directory, time/date, environment variables, a project's directory etc.
</p>

<p>
For example, having this <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> menu
</p>

<p>
<img src="files/menu.png" class="media" alt="">
</p>

<p>
... and "<b>package</b>" selected in <b>apave.tcl</b> edited text, we can perform the following:


<ul>
<li class="level1"><div class="li"> </div>
<em>HELP "package"</em> - get a help on <em>package</em> command of Tcl
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>EXEC "package"</em> - execute a selection as a command
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>SHELL "package"</em> - execute a selection in a console box
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Run me (+ selection)</em> - execute a current module with a selection as an
argument(s) or execute a command from <em>#ARGS: (#ARGS2: etc.)</em>, <em>#RUNF: (#RUNF2: etc.)</em> or <em>#EXEC: (#EXEC2: etc.)</em> comments
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Run Tcl {all selection} ...</em> - run a selection as Tcl code in a console box
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Edit/create file "package"</em> - edit (or create if
absent) a file named after a selection
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Open directory "src"</em> - open a current file's directory by file
manager
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Open terminal in "src"</em> - open a console box for the current file's directory
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Open in browser "package" site</em> - go to an Internet site named after a
selection
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Search in Firefox "package"</em> - run Firefox's search machine for a
selection
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Wikipedia for "package"</em> - go to Wikipedia for a
selection
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>GoldenDict for "package"</em> - go to GoldenDict for a
selection
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Search All "package" in src</em> - open a submenu to run <em>grep</em> on a current file's directory
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Backup of "apave.tcl"</em> - create a backup of a current file (similar to Vim's backup)
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Commit "package"</em> - make a SCM commit with "package" as a commit message (though editable)
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Differences of "apave.tcl"</em> - show changes made to a current file
since a last commit, with Fossil or Git GUI diff command
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Edit all *.tcl of 'current dir'</em> - open all .tcl files of a current file's directory
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Fossil, Git, Hg</em> - open a submenu with corresponding SCM commands
</li>
</ul>

<ul>
<li class="level1"><div class="li"> </div>
<em>Utils</em> - open a submenu with miscellaneous commands and submenus
</li>
</ul>

</p>

<hr  id="introduction_2">
<br>

<p>
Now let's move to installing and customizing <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>, as applied to <a
href="https://www.geany.org" title="Geany IDE">Geany IDE</a>.
</p>

<p>
Please try this:
</p>

<p>
1. If you do not have <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org"
rel="nofollow">Tcl/Tk</a> on your system, install it from <a
href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org"
rel="nofollow">www.tcl.tk</a>. Linux users have it highly likely preinstalled.
However, in Linux it may be necessary to install some packages or even to update Tcl to 8.6
version.
</p>

<p>
For example, in Debian Linux you might need the following packages:
<ul>
<li>tcl8.6</li>
<li>tcllib</li>
<li>tk8.6</li>
<li>tklib</li>
<li>tcl-tls</li>
</ul>
and possibly:
<ul>
<li>tkcon</li>
<li>tcl-vfs</li>
<li>tclx8.4</li>
</ul>
</p>

<p>
 The Mac users should take <span class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> "as is", because it hasn't been tested on Mac.
</p>

<p>
You can also download a stand-alone <a href=#download>e_menu executable</a></span> for Linux and Windows. It need no pre-installed Tcl/Tk.
</p>

<p>
2. Download and unpack <a href="https://chiselapp.com/user/aplsimple/repository/aplsimple_github_io/uv/e_menu.zip"
title="e_menu.zip" rel="nofollow">e_menu.zip</a> into the future <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> directory, e.g.
<code><b>/home/me/UTILS/e_menu</b></code> (for Windows it may be <code><b>C:\Users\me\UTILS\e_menu</b></code>).
</p>

<p>
3. Go to Geany's menu 'Edit/Settings', then to 'Tools' page and enter in the 'Context action' field:
</p>
<pre class="code">  tclsh ~/UTILS/e_menu/e_menu.tcl m=menus/menu.mnu "s=%s"</pre>
Or, with a stand-alone <a href=#download>e_menu executable</a></span>:
<pre class="code">  ~/UTILS/e_menu/s_menu m=menus/menu.mnu "s=%s"</pre>

You may find it <b>convenient to use</b> a bit more advanced context for <a
href="https://www.geany.org" title="Geany IDE">Geany IDE</a>:
<pre class="code">  tclsh "~/UTILS/e_menu/e_menu.tcl" "s=%s" "md=~/UTILS/menus" m=menu.mnu "f=%d/%f" "d=%d" "PD=~/UTILS/e_menu_PD.txt" "TF=%f" "s1=%d" "z5=~" l=%l ts=1 c=0</pre>

<p>The last call needs <a href="#calling_e_menu">some explanation</a>, but you can try it by guess. Remember only about the <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> directories - here all those <code>~/UTILS/...</code></p>
<br id=contextHelp>
<p>
Now the context Tcl/Tk help should be available. While editing your <a
href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a>
script, select a <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org"
rel="nofollow">Tcl/Tk</a> command/keyword or simply place the caret on it and call
“Context action” from popup menu. Incidentally being in Russia:-) you would see something like this:
</p>

<p>
<img src="files/e_menu2.png" class="media" alt="">
</p>

<p>
<br>
where the first line calls <a href="https://wiki.tcl-lang.org/"
title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a> help for “selection” (i.e. foreach, string, grid, panedwindow etc. - about 200 <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a> man pages and 26 pages of Tcl keywords from A.htm to Z.htm).
</p>

<p>This screenshot would be different for <em>official Geany</em>. For example, you may see <em>menu.mnu</em> instead of a current file's name. The reason is that <em>official Geany</em> doesn't provide any of %f, %d etc.
wildcards for its context command. <a href="#detailed_geany">Below</a> this
issue is considered, with advices how to fix it.
</p>

<p>
<b>Note</b>: In Geany's Edit/Settings you can map F1 key to the context action and call it with one
keystroke.
</p>

<p>
<br>

</p>

</div>

<h2 id="calling_e_menu">Calling e_menu</h2>
<div class="level2">

<p>
The command to call <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> is following:
</p>

<p>
<strong><em>

  tclsh e_menu.tcl [s=%s] [m=menufile] [options]

</em></strong>
</p>

<p>
where any argument in brackets may be omitted, but one (or both) of s= or m= argument must be present. If not,  <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> puts out a message with its synopsis and ends up.
</p>

<p>
<strong><em> s=  argument </em></strong> refers to a selected text, though it may be anything else to process as 'selection'. If s= is set,  <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>'s menu includes the following three commands:
</p>
<ul>
<li class="level1"><div class="li"> HELP  'selection'</div>
</li>
<li class="level1"><div class="li"> EXEC  'selection'</div>
</li>
<li class="level1"><div class="li"> SHELL 'selection'</div>
</li>
</ul>

<p>
that mean:
</p>
<ul>
<li class="level1"><div class="li"> <em>HELP</em> calls Tcl/Tk context help for 'selection'</div>
</li>
<li class="level1"><div class="li"> <em>EXEC</em> executes 'selection' as a command/program by itself</div>
</li>
<li class="level1"><div class="li"> <em>SHELL</em> executes 'selection' as a command/program in console box</div>
</li>
</ul>

<p>
<strong><em> m=  argument </em></strong> refers to a name of file containing a
menu of commands. If <em>m=menufile</em> is set,  <span class="curid"><a
href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> adds to those three commands (if present) also the <em>menufile</em>'s commands.
</p>

<p>
If <em>s=</em> argument is not set then the <em>menufile</em>'s commands only are present in the menu. If both <em>s=</em> and <em>m=</em> are set then all commands are present in the menu, i.e. HELP/EXEC/SHELL and the menu file commands.
</p>

<p>
You can always pass a selection as <em>s0=</em> argument and get rid of those abominable 'HELP/EXEC/SHELL' forever.
</p>

<p>
A special <em>-remain</em> option may be useful when you want <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> to stay on the screen. If <em>-remain 1</em> is passed to <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a>, you can go through all menu hierarchy down and up. Thus, only with pressing Escape key on the root <em>menu.mnu</em> you close <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> application.
</p>

<p id=s_menu1>
At that you can call <em>s_menu.tcl</em> (or the stand-alone <a href=#download>e_menu executable</a>) instead of <em>e_menu.tcl</em> to have always a single menu's window on the screen. E.g., in <a
href="https://www.geany.org" title="Geany IDE">Geany IDE</a> you can set a context command as follows:
<br><br>
<strong><em>
tclsh  "~/UTILS/e_menu/s_menu.tcl" -remain 1 "md=~/UTILS/em/mnu" m=menu.mnu "s=%s" "f=%d/%f" "d=%d" "PD=~/UTILS/em/e_menu_PD.txt"
<br><br>
"~/UTILS/e_menu/s_menu" -remain 1 "md=~/UTILS/em/mnu" m=menu.mnu "s=%s" "f=%d/%f" "d=%d" "PD=~/UTILS/em/e_menu_PD.txt"

</em></strong>
</p>

<p id=e_menu_options>
Other options of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> define a menu's look and behaviour and are described below, where:
</p>
<ul>
<li class="level1"><div class="li"> <em>number</em> means integer value</div>
</li>
<li class="level1"><div class="li"> <em>“string”</em> means text value</div>
</li>
</ul>

<p>
<b>Note</b>: It's strongly recommended to quote <em>“string option”</em>.
</p>

<p> The <strong><em>options</em></strong> are:
</p>
<div class="table sectionedit1"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0">Option</th><th class="col1">Description</th><th class="col2">Usage</th>
	</tr>
	</thead>
	<tbody>
	<tr class="row2">
		<td class="col0"><em> “s=selection” </em></td><td class="col1">selected text of edited file</td><td class="col2">in Geany's
		context command: "s=%s"</td>
	</tr>
	<tr class="row2">
		<td class="col0"><em> “m=menu.mnu” </em></td><td class="col1">menu
		file that will be first displayed at calling <a href="#" class="wikilink1" title="Table of Contents">e_menu</a></td><td class="col2">
			“m=fossil.mnu”</td>
	</tr>
	<tr class="row2">
		<td class="col0"><em> “md=directory” </em></td><td class="col1">directory containing <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> menus
		<br>(by default, <em>menus</em> subdirectory of installed <a href="#"
		class="wikilink1" title="Table of Contents">e_menu</a>)
		<br><b>useful when you have your own menus</b> and do not want to mix with <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> installation's files</td><td
		class="col2"> “md=/home/me/.config/e_menu_menus”</td>
	</tr>
	<tr class="row2">
		<td class="col0"><em> “PD=directory” </em></td><td class="col1">project directory that can be used in commands as %PD wildcard
		<br>(by default equals to 'working directory')</td><td class="col2"> “PD=/home/me/my projects/proj1”</td>
	</tr>
	<tr class="row2">
		<td class="col0"><em> “PD=dirlist.txt” </em></td><td class="col1">file containing a list of project directories that can be used in
		commands as %PD wildcard</td><td class="col2"> “PD=/home/me/my
		projects/proj_dirs.txt”</td>
	</tr>
	<tr class="row3">
		<td class="col0"><em> “PN=project-name” </em></td><td class="col1">current project name that can be used in commands as %PN wildcard <br>
(by default equals to a tailing part of working directory path or PD= if set)</td><td class="col2"> “PN=myproj1”</td>
	</tr>
	<tr class="row38">
		<td class="col0"><em> “f=file” </em></td><td class="col1">current edited file's name</td><td class="col2">in Geany's context command: "f=%d/%f"</td>
	<tr class="row38">
		<td class="col0"><em> “d=directory” </em></td><td class="col1">current edited file's directory</td><td class="col2">in Geany's context command: "d=%d"
  <br>"d=/home/me/my projects/proj1/src”</td>
	</tr>
	<tr class="row38">
		<td class="col0"><em> “e=filename” </em></td><td class="col1">current edited file's name (without path and extension)</td><td
		class="col2">in Geany's context command: "e=%e"</td>
	<tr class="row41">
		<td class="col0"><em> l=number </em></td><td class="col1">line number
		at the current cursor position</td><td class="col2">in Geany's context
		command: "l=%l"</td>
	</tr>
	<tr class="row42">
		<td class="col0"><em> “p=directory” </em></td><td class="col1">base
		path from the project (Geany wildcard)</td><td class="col2">in Geany's context command:
		"p=%p"</td>
	</tr>
	<tr class="row18">
		<td class="col0"><em> “h=path” </em></td><td class="col1">path to offline Tcl/Tk help</td><td class="col2">"h=/home/me/DOC/www.tcl.tk/man/tcl8.6"</td>
	</tr>
	<tr class="row19">
		<td class="col0"><em> “b=browser” </em></td><td class="col1">browser to be used for viewing Tcl/Tk help (also used in a menu command ”%B link“)</td><td class="col2">b=/usr/bin/epiphany</td>
	</tr>
	<tr class="row27">
		<td class="col0"><em> “ed=editor” </em></td><td class="col1">editor
		used as %E command in menus <br>
(by default, <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>'s internal editor is used)</td><td class="col2">“ed=C:/Program Files (x86)/Notepad++/notepad++.exe”<br>
also, something like <em>“z1=editor”</em> can be used in <span
class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> call and <em>%z1 file.txt</em> in menus</td>
	</tr>
	<tr class="row34">
		<td class="col0"><em> pa=number </em></td><td class="col1">pause (in milliseconds) to suspend <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> before starting it; sometimes it may be desirable</td><td class="col2">pa=500</td>
	</tr>
	<tr class="row15">
		<td class="col0"><em>"n=string" </em></td><td class="col1">title of
		menu</td><td class="col2">"n=&lt; e_menu &gt;"</td>
	</tr>
	<tr class="row15" id=co_parameter>
		<td class="col0"><em>"co=string" </em></td><td class="col1">additional
		continuator for menu items</td><td class="col2">"co= \" by default
		<br>"co=;" adds ";" for line continuation:
<em>
<br> <br> S: Shell script S: ? \
<br>&nbsp;&nbsp;  if [ $? -ne 1 ]; then \
<br>&nbsp;&nbsp;&nbsp;&nbsp;    echo "going up from: $(pwd)";
<br>&nbsp;&nbsp;&nbsp;&nbsp;    cd ..;
<br>&nbsp;&nbsp;&nbsp;&nbsp;    echo ".......... to: $(pwd)";
<br>&nbsp;&nbsp;  fi
</em><br><br>
 <ul>
<li class="level1"><div class="li">" \" and ";" both used here
</div></li>
<li class="level1"><div class="li"><em>co=string</em> is the top candidate
for <a
href="#setting_options_in_a_menu_file">[OPTIONS] section</a> of menu file (see
<em>test1.mnu</em> for example)
</div></li>
</ul>
</div>
		</td>
	</tr>
	<tr class="row15">
		<td class="col0"><em>t=1 </em></td><td class="col1">sets a menu as a topmost window on screen</td><td class="col2">t=1</td>
	</tr>
	<tr class="row15">
		<td class="col0"><em>dk=string </em></td><td class="col1">sets a menu type (for Linux OS)</td><td class="col2">dk=dialog (with window's title)<br>dk=dock (without window's title)<br>dk=desktop (places a menu on the desktop)</td>
	</tr>
	<tr class="row16">
		<td class="col0"><em> g=+X+Y </em></td><td class="col1">(X,Y) screen coordinates of menu</td><td class="col2"> g=+700+200</td>
	</tr>
	<tr class="row17">
		<td class="col0"><em> wc=1 </em> </td><td class="col1">centers a menu on screen</td><td class="col2">wc=1</td>
	</tr>
	<tr class="row4">
		<td class="col0"><em> fs=number </em></td><td class="col1">size of
		fonts used in menu</td><td class="col2"> fs=9 by default</td>
	</tr>
	<tr class="row5">
		<td class="col0"><em> “f1=font” </em></td><td class="col1">name of font used in menu header</td><td class="col2"> “f1=Liberation Sans” </td>
	</tr>
	<tr class="row6">
		<td class="col0"><em> “f2=font” </em></td><td class="col1">name of font used in menu entries</td><td class="col2"> “f2=Liberation Mono”</td>
	</tr>
	<tr class="row6">
		<td class="col0"><em> “f3=font” </em></td><td class="col1">name of font used in text widgets</td><td class="col2"> “f3=Noto Sans Mono”</td>
	</tr>
	<tr class="row7">
		<td class="col0"><em> w=number </em></td><td class="col1">width of menu items (in characters)</td><td class="col2"> w=30 </td>
	</tr>
	<tr class="row8">
		<td class="col0"><em> c=number </em></td><td class="col1">index of
		color scheme (-2 through 47)</td><td class="col2"> c=-2 by default ("no CS")<br>c=-1 ("basic CS", very similar to default)<br>c=36 ("MildDark CS")</td>
	</tr>
	<tr class="row8">
		<td class="col0"><em> fg=#number<br>bg=#number<br>fE=#number<br>bE=#number<br>fS=#number<br>bS=#number<br>fM=#number<br>bM=#number<br>hh=#number<br>cc=#number </em></td><td class="col1">colors (hexadecimal numbers) of
		foreground and background of e_menu, editor's, selection's, popup menu's, header's and
		cursor<br>(to override a color scheme's colors)</td><td
		class="col2">cc=#ff0000 </td>
	</tr>
	<tr class="row9">
		<td class="col0"><em> sh=number </em></td><td class="col1">allows shadowing a menu when it loses a focus</td><td class="col2">sh=0 by default<br>sh=1</td>
	</tr>
	<tr id=ornamentdetails class="row9">
		<td class="col0"><em> o=number </em></td><td class="col1">ornament
		(view mode):<br>
o=-2 - none<br>
o=-1 - top line only (default)<br>
o=0 - Help/Exec/Shell<br>
o=1 - Help/Exec/Shell + header<br>
o=2 - Help/Exec/Shell + prompts <br>
o=3 - all</td><td class="col2">o=2, o=3 are best viewed when f2=Mono is set (font of items is of "Mono" family)</td>
	</tr>
	<tr class="row11">
		<td class="col0"><em>b0=number </em></td><td class="col1">border width of menu items</td><td class="col2">b0=0 by default</td>
	</tr>
	<tr class="row11">
		<td class="col0"><em>b1=number </em></td><td class="col1">internal vertical padding of menu items</td><td class="col2">b1=1</td>
	</tr>
	<tr class="row12">
		<td class="col0"><em>b2=number </em></td><td class="col1">internal horizontal padding of menu items</td><td class="col2">b2=1</td>
	</tr>
	<tr class="row13">
		<td class="col0"><em>b3=number </em></td><td class="col1">external vertical padding of menu items</td><td class="col2">b3=1</td>
	</tr>
	<tr class="row14">
		<td class="col0"><em>b4=number </em></td><td class="col1">external horizontal padding of menu items</td><td class="col2">b4=1</td>
	</tr>
	<tr class="row20">
		<td class="col0"><em> “u=string” </em></td><td
		class="col1"><em>string</em> will have " " replaced by "_" when used as
		%u wildcard in menu</td><td class="col2">“u=%s” by default</td>
	</tr>
	<tr class="row20">
		<td class="col0"><em> “+=string” </em></td><td class="col1"><em>string</em> will have " " replaced by "+" when used as %+ wildcard in menu</td><td
		class="col2">“+=%s” by default</td>
	</tr>
	<tr class="row21">
		<td class="col0"><em> “qq=string” </em></td><td class="col1"><em>string</em> will have quotes (”) escaped when used as %qq wildcard in menu</td><td class="col2">“qq=%s” by default</td>
	</tr>
	<tr class="row22">
		<td class="col0"><em> “dd=string” </em></td><td class="col1"><em>string</em> will have special symbols (“, $, %, {}, [], &lt;&gt;, *)
		deleted and spaces converted to “_” when used as %dd wildcard in menu</td><td class="col2">“dd=%s” by default</td>
	</tr>
	<tr class="row22">
		<td class="col0"><em> “ss=string” </em></td><td
		class="col1"><em>string</em> will have leading and tailing spaces
		stripped when used as %ss wildcard in menu</td><td class="col2">“ss=%s” by default</td>
	</tr>
	<tr class="row23">
		<td class="col0"><em> “s0=string0” <br>
“s1=string1” <br>
-”-“- <br>
“s9=string9”</em></td><td class="col1">strings used in commands as %s0, %s1,
…, %s9 wildcards</td><td class="col2">“s0=%s” can be used when it's desirable
to process the selection (%s) without having those HELP/EXEC/SHELL commands in menu;
<br> other arguments (s1, …, s9) can contain environment variables or their combinations</td>
	</tr>
	<tr class="row24">
		<td class="col0"><em> “u0=string0” <br>
 “u1=string1” <br>
-”-“- <br>
“u9=string9”</em></td><td class="col1">the same as s0…s9 strings modified so that all spaces are converted to “_”</td><td class="col2">“u1=%s-1st”</td>
	</tr>
	<tr class="row25">
		<td class="col0"><em> i0=number <br>
i1=number <br>
-”-“- <br>
i9=number </em></td><td class="col1">initial values for %i0, %i1, …, %i9 wildcards that mean counters of runs of corresponding commands; these wildcards are used both in commands and their menu names</td><td class="col2"> i1=100 i2=200
<br>useful in a command that should have been passed a counter of its runs;
<br>a corresponding menu is supposed to stay on the screen</td>
	</tr>
	<tr class="row26">
		<td class="col0"><em>t0= .. t9= </em></td><td class="col1">formats of date/time that are used in commands containing %t0, %t1, %t2, %t3 .. %t9 wildcards:</td><td class="col2">defaults are: <br>
“t0=%H:%M:%S” - format of time <br>
“t1=%Y-%m-%d” - format of date <br>
“t2=%Y-%m-%d_%H:%M:%S” - format of date and time <br>
“t3=%A” - format of day of week <br>
t4= t5= .. t9= - after being defined they can be used as %t4..%t9 wildcards in commands</td>
	</tr>
	<tr class="row28">
		<td class="col0"><em> “a0=Tcl command(s)” </em></td><td class="col1">Tcl command(s) to be run at start of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <em class="u">before</em> any processing of other arguments (m= including, that may be potentially buggy)</td><td class="col2">“a0=D starting e_menu”</td>
	</tr>
	<tr class="row29">
		<td class="col0"><em> “a1=Tcl command(s)” </em></td><td class="col1">Tcl command(s) to be run at start of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <em class="u">before</em> processing <em>a=list</em> (see below)
  <br>";" may be used as dividers of commands</td><td class="col2">“a1=wm attributes . -alpha 0.8”
		<br><br>
		"a1=if {![Q Continue? {Do you want to continue\nwith e_menu?} okcancel warn OK -ontop 1]} exit"
  <br><br>"a1=if {![set ::MYN [Q Continue? {Run TKE at starting e_menu?} yesnocancel warn NO -ontop 1]]} exit ; if {$::MYN==1} {append ::em::autohidden ,4}"
  </td>
	</tr>
	<tr class="row32">
		<td class="col0"><em> “a2=Tcl command(s)” </em></td><td class="col1">Tcl command(s) to be run at start of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <em class="u">after</em> processing <em>a=list</em> (see below)
  <br>";" may be used as dividers of commands</td><td class="col2">“a2=M {Hello! \n\n Today is [clock format [set systime [clock seconds]] -format {%A %d-%m-%Y %H:%M}] \n\n Current dir: [pwd]}“</td>
	</tr>
	<tr class="row30">
		<td class="col0"><em> a=list </em></td><td class="col1">list of hotkeys of menu items to be run at start of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></td><td class="col2">a=1,8,b</td>
	</tr>
	<tr class="row31">
		<td class="col0"><em> ah=list </em></td><td class="col1">list of hotkeys of menu items of [HIDDEN] section to be run at start of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></td><td class="col2">ah=1,2,3
  <br>the items of [HIDDEN] section have hotkeys in the same manner as [MENU], i.e.
  <br>1,2,3,4,5,6,7,8,9,a,b,c,d,e,f,g,h,...,x,y,z,A,B,C,...,Z</td>
	</tr>
	<tr class="row32">
		<td class="col0"><em> ex=list </em></td><td class="col1">list of hotkeys of menu items including [HIDDEN] section to be run by <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>
  <br>which might be useful to run some command(s) of a menu, <u>without displaying it</u></td><td class="col2">ex=1,2,h,h1,h5,hh
  <br>where "1,2,h" mean [MENU] section's hotkeys, while "h1,h5,hh" refer to the 1, 5, h hotkeys of [HIDDEN] section</td>
	</tr>
	<tr class="row33">
		<td class="col0"><em> P=syms </em> </td><td class="col1">symbol(s) used instead of ”%” in  <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> call</td><td class="col2">It's important if the caller of  <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> (<abbr title="A fast and lightweight IDE">Geany</abbr>, shell) uses % literals conflicting with  <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>'s arguments. <br>
Example of overcoming <abbr title="A fast and lightweight IDE">Geany</abbr>'s %d substitution: <br>
tclsh e_menu.tcl “s=%s” P=# “t2=#A #d-#m-#Y #H:#M”</td>
	</tr>
	<tr class="row35">
		<td class="col0"><em> “x*=string” </em></td><td class="col1">%x0 - %x9
		wildcards in commands</td><td class="col2">“x0=%s” “x9=%s”</td>
	</tr>
	<tr class="row36">
		<td class="col0"><em> “y*=string” </em></td><td class="col1">%y0 - %y9
		wildcards in commands</td><td class="col2">“y0=%s” “y9=%s”</td>
	</tr>
	<tr class="row37">
		<td class="col0"><em> “z*=string” </em></td><td class="col1">%z0 - %z9
		wildcards in commands</td><td class="col2">“z0=%s” “z9=%s”</td>
	</tr>
	<tr class="row43">
		<td class="col0"><em> “om=0” </em></td><td class="col1"> om=0 overrides the [OPTIONS] menu options <br>
(by default [OPTIONS] options overcome the options defined in the call string of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>)</td><td class="col2">om=0</td>
	</tr>
	<tr class="row43">
		<td class="col0"><em> tg=WxH+X+Y </em></td><td class="col1"> geometry
		of Linux terminal (width in columns, height in rows, position in pixels)
		</td><td class="col2">tg=80x24+200+200 by default</td>
	</tr>
	<tr class="row43" id=tt_option>
		<td class="col0"><em> “tt=string” </em></td><td class="col1"> command for Linux terminal
		<br><b>by default, <a href="#" class="wikilink1" title="Table of
		Contents">e_menu</a> uses <em>lxterminal</em> (if <em>lxterminal</em> not found,
		<em>xterm</em> is run)</b>
		</td><td class="col2">"tt=xterm -fs 12 -geometry 90x30+400+100"</td>
	</tr>
	<tr class="row43" id=tt_option>
		<td class="col0"><em> “wt=string” </em></td><td class="col1"> command for MS Windows terminal
		</td><td class="col2">wt=cmd.exe by default<br>wt=powershell.exe</td>
	</tr>
	<tr class="row44">
		<td class="col0"><em> “in=number” </em></td><td class="col1">firstly selected item of menu
  <br>if this option is set in <a
href="#setting_options_in_a_menu_file">[OPTIONS]</a> section of menu file, specifically in the form:
  <br><em>in=1.0</em>
  <br>the <a href="#" class="wikilink1" title="Table of
		Contents">e_menu</a> will save and restore the last run position of menu
  </td><td class="col2">in=1 by default
  </td>
	</tr>
	<tr class="row45">
		<td class="col0"><em> “cb=string” </em></td><td class="col1">callback command being run after closing the menu</td><td class="col2">in a menu file:<br>
<code>ME: Fossil ME: m=menus/fossil.mnu "cb=%cb in=%in"</code><br>
       means the following actions:<br>
       1) after choosing "Fossil" item the fossil.mnu is called<br>
       2) the current menu closes<br>
       3) after some working the fossil.mnu closes<br>
       4) the previous menu is called back<br>
       5) the previous menu's "Fossil" item is selected<br>
       </td>
	</tr>
	<tr class="row1">
		<td class="col0"><em>ln=number </em><br><em>cn=number </em>
  </td><td class="col1">line and column of current position in text buffer
  <br>these are important when an editor does not provide "a current word under caret" option
  for <a href="#" class="wikilink1" title="Table of
		Contents">e_menu</a>
  <br> and, if at that it provides line and column numbers of editing point, you can use them
  <br> so that <a href="#" class="wikilink1" title="Table of
		Contents">e_menu</a> will read the current word under caret and use it as <em>%s wildcard</em> if there is no selection
  </td><td class="col2">for <a href="#detailed_pycharm">PyCharm IDE</a> the following arguments
  <br><em>ln=$LineNumber$ cn=$ColumnNumber$</em>
  <br>are passed to <a href="#" class="wikilink1" title="Table of
		Contents">e_menu</a>
   </td>
	</tr>
	<tr class="row1">
		<td class="col0"><em> rt=number/number </em></td><td class="col1">sets ratio "min.width / init.width" for menu window</td><td class="col2">rt=3/5 by default</td>
	</tr>
	<tr class="row1">
		<td class="col0"><em> tc=string </em></td><td class="col1">sets Tcl/Tk executable's path</td><td class="col2">by default, <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> uses <em>[info nameofexecutable]</em> to run  commands starting with tclsh/wish
<br><br>See also <a href="#tclkits">Running by tclkits</a> below.</td>
	</tr>
	<tr class="row1">
		<td class="col0"><em> yn=1 </em></td><td class="col1">sets "Confirm exit" query when Escape key is pressed in
  <a href="#" class="wikilink1" title="Table of Contents">e_menu</a></td><td class="col2">yn=0 by default</td>
	</tr>
	<tr class="row1">
		<td class="col0"><em> N=number </em></td><td class="col1">number (ID)
		of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> application; numbers from 1 to 64 are used to close neighboring
		menus</td><td class="col2">N=65 prevents a menu from destroying by others</td>
	</tr>
</tbody></table></div>

<p>
<b>Note</b>: Options s0..s9, u0..u9, x*, y*, z* can include wildcards used in menu commands, e.g.:
</p>
<pre class="code">  "s0= run #%i0 at %t2"
  "u0=_run_#%i0_at_%t2"</pre>

<p>
See also <a href="#processing_wildcards">Processing wildcards</a> below.
</p>

<p>
<br>

</p>

</div>

<h3 id="setting_options_in_a_menu_file">Setting options in menu files</h3>
<div class="level3">

<p>
Most options <a href=#e_menu_options>described above</a> can be set in [OPTIONS] section of a menu file,
as e.g. in this menu:
</p>
<pre class="code">  [OPTIONS]
  om=1
  o=0
  c=0
  fs=11
  w=52
  in=1.0
  h=/home/apl/DOC/www.tcl.tk/man/tcl8.6
  PD=/home/apl/PG/Tcl-Tk/projects/e_menu
  b=/usr/bin/chromium

  [MENU]
  R: Firefox search for "%s" R: firefox -search "%s"
  R: Wikipedia for "%s" R:%B https://en.wikipedia.org/w/index.php?cirrusUserTesting=classic-explorer-i&amp;search=%+
  R: Open/create file(s) "%s" R:%E %s
  R: geany: edit all          R: geany readme.md wiki.txt e_help.tcl e_menu.tcl

  R:  R: 6
  MW: Git  MW: m=%PN/git.mnu "u=%s" o=0 w=50
  MW: Tcl/Tk    MW: m=%PN/tcltk.mnu w=20
  MW: Python    MW: m=%PN/python.mnu w=40
  MW: Utils     MW: m=%PN/utils.mnu
  MW: Links     MW: m=%PN/links.mnu

  [HIDDEN]
  R: 1. Stop work R: ?-33*60?-7*60:ah=2? audacious  /home/me/PG/breakon.wav
  R: 2. Arbeiten  R: audacious /home/me/PG/breakoff.wav</pre>

<p>
The <em>om=</em> option is of particular weight. By default, the menu [OPTIONS] take priority over the options defined in a call string. This can be overridden by setting <em>om=0</em> in the call string of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> - after that the call string options would have more priority than the menu [OPTIONS]. But all the same, the final decision is left to the menu that can reset the <em>om=</em> option to <em>om=1</em> and override all previously set options of the call string or the parent menus.
</p>

<p>
Pay also attention to the <em>in=</em> option of [OPTIONS] section. If it is set in the form:
  <br><em>in=1.0</em>
  <br>the <a href="#" class="wikilink1" title="Table of
		Contents">e_menu</a> will save and restore the last run position of menu.
</p>

<p>
Some options are intended rather for <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> call string than for [OPTIONS] section. E.g. if you want to have a menu system 'project sensitive', do not include into [OPTIONS] such options as <em>PD=</em> (project directory) and <em>PN=</em> (project name). They are mostly for setting in a command line to call <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> which is dynamic due to %d, %f etc. wildcards. Setting them in [OPTIONS] section you make them static.
</p>

<p>
And vice versa, if you want to have a specific menu <i>iron bound to</i> some
project, include into its [OPTIONS] the <em>PD=, PN=</em> and <em>om=1</em>, as
seen in the above example.
</p>
<p>
<br>

</p>

</div>

<h3 id="options_in_environment">Setting options in environment</h3>
<div class="level3">

<p>
The last but not the least possibility for <span class="curid"><a href="#"
class="wikilink1" title="Table of Contents">e_menu</a> to receive options is an
environment variable named E_MENU_OPTIONS.
</p>

<p>
It's mostly useful in command files run by shell. For example, in TKE, <span class="curid"><a href="#"
class="wikilink1" title="Table of Contents">e_menu</a> is run from
<em>main.tcl</em> (a plugin's main module) which defines most options of it. To avoid modifying the
<em>main.tcl</em>, we can define missing or redefine undesirable options in
E_MENU_OPTIONS variable:

<pre class="code">
  #! /bin/bash
  # ...some commands...
  export E_MENU_OPTIONS="b=konqueror"
  tke &amp;
  # ...other commands...
</pre>
By this, <a
href="https://github.com/phase1geo/tke" title="TKE editor">TKE</a> and its <span class="curid"><a href="#"
class="wikilink1" title="Table of Contents">e_menu</a> plugin can access the
value of <em>b=</em> option (name of browser).
</p>

<p>
Another consideration is about the options priority. The options of
E_MENU_OPTIONS variable are added to the beginning, to
the middle or to the end of <span class="curid"><a href="#"
class="wikilink1" title="Table of Contents">e_menu</a>'s arguments. The above example sets
<em>b=konqueror</em> as default option being in the beginning of <a href="#"
class="wikilink1" title="Table of Contents">e_menu</a>'s arguments
list, i.e. having the lowest priority. We can set an index of included options, this way:
<pre class="code">  export E_MENU_OPTIONS="99 b=konqueror"
  tke &amp;</pre>
This sets <em>b=konqueror</em> at 99 position in the arguments list, most
likely in the end, i.e. having the highest priority. So, we can override some
arguments of <em>main.tcl</em> by E_MENU_OPTIONS variable, for example:
<pre class="code">  export E_MENU_OPTIONS="b=konqueror 99 fs=10 cc=red"
  tke &amp;</pre>
</p>
<p>and the actual arguments of <a href="#"
class="wikilink1" title="Table of Contents">e_menu</a> would look as follows:
<pre class="code">  "b=konqueror [...arguments set by main.tcl...] fs=10 cc=red"</pre>
Here we set <em>"font size = 10"</em> (instead of default 9) and <em>"cursor color = red"</em>
(instead of TKE color scheme's color).
</p>
<p>
As noted before, the <a href="#setting_options_in_a_menu_file">[OPTIONS] in a
menu file</a> can overcome all options derived from <a href="#"
class="wikilink1" title="Table of Contents">e_menu</a>'s arguments.
</p>


<p>
</p>

<br>

</p>

</div>

<h3 id="examples">Examples</h3>
<div class="level3">

<p>
 Here are two examples of calling <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>.
</p>

<p>
 <strong> 1. </strong>
</p>
<pre class="code">  tclsh /home/me/e_menu/e_menu.tcl "s=%s" "m=menus/menu.mnu" \
  "h=/home/me/DOC/Tcl/tcl8.6" c=1 fs=11 \
  "PD=/home/me/PG/projects/myprj" b=/usr/bin/epiphany a=6,b</pre>

<p>
- this call of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> consists of:
</p>
<ul>
<li class="level1"><div class="li"> selected text of an editor (%s)</div>
</li>
<li class="level1"><div class="li"> menu file named <em> menus/menu.mnu </em></div>
</li>
<li class="level1"><div class="li"> color scheme equaled to 1</div>
</li>
<li class="level1"><div class="li"> font size equaled to 11</div>
</li>
<li class="level1"><div class="li"> working directory <em> equaled to /home/me/PG/projects/myprj </em> <br>
(this would set <em>PN=myprj</em> as 'project name', used as %PN wildcard in commands)</div>
</li>
<li class="level1"><div class="li"> browser equaled to <em> epiphany </em></div>
</li>
<li class="level1"><div class="li"><em>"h=/home/me/DOC/Tcl/tcl8.6"</em> means that <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a> help is offline and located in <em> /home/me/DOC/Tcl/tcl8.6</em></div>
<li class="level1"><div class="li"><em>a=6,b</em> sets two menu items to run
at start, having their menu hotkeys '6' and 'b'</div>
</li>
</li>
</ul>

<p>
The <em> menu.mnu </em> file is located in <em>menus</em> subdirectory of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> not related anyhow to the <em>PD=</em> which is a separate option of call and used as <em>%PD</em> wildcard in menu commands.
</p>

<p>
 <strong> 2. </strong>
</p>

<p>
This bash file runs <abbr title="A fast and lightweight
IDE">Geany</abbr> IDE and <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> application positioned at right side of screen:
</p>
<pre class="code">  #! /bin/bash

  DIR=/home/apl/PG/Tcl-Tk/projects/e_menu
  PROJECT=e_menu
  THEME="Preparing wiki"
  SUBJ=": calling e_menu"

  curdir=$PWD
  cd $DIR

  tclsh ~/.tke/e_menu/e_menu/e_menu.tcl \
  "s0=$PROJECT" "x0=$EDITOR" "x1=$THEME" "x2=$SUBJ" "b=/usr/bin/epiphany" "PD=$DIR" "d=$DIR" \
  md=~/.tke/plugins/e_menu/menus m=side.mnu g=+1484+25 t=1 o=0 w=16 pa=500 fs=10 ah=1,2 &amp;

  geany readme.md wiki.txt e_help.tcl e_menu.tcl &amp;

  cd $curdir</pre>

<p>
The menu is called as a topmost (t=1) independent application without
<em>ornament</em> (o=0). Some options (PROJECT, THEME, SUBJ) are supplied to
use in SCM commands as %s0, %x0 etc. wildcards. <abbr title="A fast and lightweight IDE">Geany</abbr> IDE is run with project files as arguments.
</p>

<p>
<br>

</p>

</div>

<h2 id="creating_e_menu_files">Creating e_menu files</h2>
<div class="level2">

<p>
<br>

</p>

</div>

<h3 id="structure_of_menu">Structure of menu</h3>
<div class="level3">

<p>
The general structure of menu file is following:
</p>
<pre class="code">  [MENU]
  &lt;marker&gt; name1 &lt;marker&gt; command1
  &lt;marker&gt; name2 &lt;marker&gt; command2

  &lt;marker&gt; - &lt;marker&gt;

  &lt;marker&gt; name31 &lt;marker&gt; ? command31
  &lt;marker&gt; name32 &lt;marker&gt; ?interval? command32

  &lt;marker&gt; &lt;marker&gt; N

  &lt;marker&gt; name4 &lt;marker&gt; command41
  &lt;marker&gt; name4 &lt;marker&gt; command42
  &lt;marker&gt; name4 &lt;marker&gt; command43

  # comments
  # ...

  [HIDDEN]
  1.
  &lt;marker&gt; nameH1 &lt;marker&gt; command_H1
  2.
  &lt;marker&gt; nameH2 &lt;marker&gt; command_H2
  # ...

  [OPTIONS]
  # ... options of e_menu call string
  # ...</pre>

<p>
where <em>&lt;marker&gt;</em> can be one of following:
</p>
<ul>
<li class="level1"><div class="li"> <em> R/ </em></div>
</li>
<li class="level1"><div class="li"> <em> R: </em> these ones run <em>command</em> and <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> continues working</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em> RE/ </em></div>
</li>
<li class="level1"><div class="li"> <em> RE: </em> these ones execute <em>command</em> and <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> exits</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em> RW/ </em></div>
</li>
<li class="level1"><div class="li"> <em> RW: </em> these ones run <em>command</em> and <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> waits its completion</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em> S/ </em></div>
</li>
<li class="level1"><div class="li"> <em> S: </em> these ones run <em>command</em> in console box and <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> continues working</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em> SE/ </em></div>
</li>
<li class="level1"><div class="li"> <em> SE: </em> these ones execute <em>command</em> in console box and <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> exits</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em> SW/ </em></div>
</li>
<li class="level1"><div class="li"> <em> SW: </em> these ones run <em>command</em> in console box and <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> waits its completion</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em> MW/ </em></div>
</li>
<li class="level1"><div class="li"> <em> MW: </em></div>
</li>
<li class="level1"><div class="li"> <em> M/ </em> </div>
</li>
<li class="level1"><div class="li"> <em> M: </em> these ones call a child menu and a parent continues working (<b>note</b>: <em>MW</em> type is the same as <em>M</em>)</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em> ME/ </em></div>
</li>
<li class="level1"><div class="li"> <em> ME: </em> these ones call a child menu and close a parent</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em> I: </em> Tcl commands (incl. the
internal e_menu functions M, Q, S, T)</div>
</li>
</ul>

<p>
The [MENU] line may be omitted if menu commands go first. It's used after
[OPTIONS] if  <a href="#co_parameter"><em>co=</em> argument</a> is set in
[OPTIONS] (see <em>test1.mnu</em> for example).
</p>

<p>
Markers with ”/“ are the same as with ”:“; the one and only difference is that
in their corresponding commands all “\” are converted to ”/“. It's only for use
in Windows and only for convenience, because <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> being written in Tcl recognizes only ”/“ as a dividing slash of directory name.
</p>

<p>
 You can manually replace "\" with "/" in Windows' pathes and use <em>R:</em> and <em>S:</em> markers.
</p>

<p>
The lines:
<pre class="code">&lt;marker&gt; - &lt;marker&gt; N
&lt;marker&gt; &lt;marker&gt; N
</pre>
are separators. The first form sets a horizontal line separator, the
second form sets a blank separator. <em>N</em> means a height in conventional
units. For example, to set a blank separator of 4 height, use:
<pre class="code">R: R: 4
</pre>
</p>

<p>
Normally commands are run without catching their errors or warnings. But if you want to see return messages of a command, you may set ”?“ before the command as in <em>command31</em> above.

</p>
<p>
 Also, you can run a command repeatedly with interval in seconds set as <em>?interval?</em> before the command (see <em>command32</em> above and <a href="#starting_menu_items_at_intervals">details</a> below).
</p>

<p>
A menu item can contain several commands to run. To enable this you should place them under the same item name in successive lines. There must be strongly equal names for <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> to identify them as a batch of commands united under a menu item. Any differences including spaces and empty lines are treated as a begin of new command or comment.
</p>
<pre class="code">In Geany editor, pressing Ctrl+D doubles a current line or selected text.

In e_menu's internal editor, also there are hotkeys:
  - Ctrl+D to double a current line or selected text
  - Ctrl+Y to delete a current line
  - Ctrl+F to find first occurence of string
  - F3 to find next occurence of string
  - Ctrl+W to save and exit
(all of them are available from popup menu)</pre>

<p>
For example <em>command4</em> (see above) contains in fact three successive commands united under <em>” name4 “</em>.
</p>

<p>
<em>[HIDDEN]</em> section of menu file is of the same format as the previous visible one. Now it is used only to autorun commands that aren't visible in menu. For example <em>command5</em> and <em>command6</em> (see above) can be run at start of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> with <em>ah=1,2</em> call argument. Hidden items are numerated with 1,2,..,9,a,b,… as well as visible ones.
</p>

<p>
One important command used in a batch of commands is 'cd'. It is inevitable if you have some program that, being altogether useful and good, nevertheless innocently assumes a current directory to be its 'own' one.
</p>

<p>
<em>Comments</em> are lines that begin with anything different from &lt;marker&gt;. Use for comments any commenting symbols you like.
</p>

<p>
A <em>menu item name</em> can begin with <em>F1</em> through <em>F12</em> which
means a hotkey F1…F12 for this name. By default, items have hotkeys <em>1</em>
through <em>9</em>, <em>a</em> through <em>z</em> and <em>A</em> through <em>Z</em>. For example:
</p>
<pre class="code">  RE: F1 Geany's help RE:%B file:///usr/share/doc/geany/html/index.html</pre>

<p>
- this would display <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> that would display (after pressing F1) the help of <abbr title="A fast and lightweight IDE">Geany</abbr> IDE and close.
</p>

<p>
It's useful feature if you mapped F1 to <abbr title="A fast and lightweight IDE">Geany</abbr> context action - then double pressing F1 brings up <abbr title="A fast and lightweight IDE">Geany</abbr>'s help and closes <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>.
</p>

<p>
An item marked with <em>I:</em> refers to some internals, namely the direct
execution of Tcl commands. <em>M, Q, S, T</em> procedures of <span
class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> can be also used in <em>I:</em> items.
</p>

<p>
<b>Important note:</b> The <em>I:</em> item can be executed only standalone. It
cannot participate in a batch of commands. So, the whole Tcl code should be presented in a one and only <em>I:</em> line to be executed. That said, you can use "\" as a line continuator and ";" as a command divider.
</p>

<p>
 Here are few
examples (note \$ and \n escaped for <em>T</em>):
</p>
<pre class="code">
I: Xterm in "%PD" I: S xterm -e bash

I: Xterm in "%PD" (queried) I: if {[Q "BASH" "Want to bash?"]} { cd "%PD"; exec xterm -e bash & }

I: Console commands I: M Three commands to be run in separate console boxes! ; \
  T dir \n \
  echo \$PWD \n \
  date
</pre>

<p>
<br>

</p>

</div>

<h3 id="wildcards_in_menu_names_and_commands">Wildcards in menu names and commands</h3>
<div class="level3">

<p>
Item names and commands can include the following wildcards:
</p>
<div class="table sectionedit2"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0">Wildcard</th><th class="col1">Description</th>
	</tr>
	</thead>
	<tbody><tr class="row1">
		<td class="col0"><em> %s </em></td><td class="col1"> an editor's selected text</td>
	</tr>
	<tr class="row2">
		<td class="col0"><em> %u </em></td><td class="col1"> an editor's selected text underscored</td>
	</tr>
	<tr class="row3">
		<td class="col0"><em> %+ </em></td><td class="col1"> an editor's selected text with ” “ converted to ”+“</td>
	</tr>
	<tr class="row12">
		<td class="col0"><em> %qq </em></td><td class="col1"> <em>qq=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a></span> in which all quotes
		should be escaped<br>e.g. "qq=%s" promotes %qq wildcard with quotes escaped</td>
	</tr>
	<tr class="row13">
		<td class="col0"><em> %dd </em></td><td class="col1"> <em>dd=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a></span> from which all special characters
		should be removed<br>e.g. "dd=%s" promotes %dd wildcard without ", $,
		{, }, [, ], %, &lt;, &gt;, *, and spaces replaced by "_"</td>
	</tr>
	<tr class="row13">
		<td class="col0"><em> %ss </em></td><td class="col1"> <em>ss=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a></span> (or <em>%s</em>
		wildcard) stripped of leading and tailing spaces
		<br>e.g. to call a browser: <em>%B %ss</em></td>
	</tr>
	<tr class="row4">
		<td class="col0"><em>%PD </em></td><td class="col1"> a directory or a file passed as <em>PD=</em> argument to <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>; when it is a file (e.g. <em>PD.txt</em>, the file contains a list of prject directories</td>
	</tr>
	<tr class="row4">
		<td class="col0"><em>%P2 </em></td><td class="col1"> project's nickname which is set in <em>PD.txt</em> file as 2nd item</td>
	</tr>
	<tr class="row5">
		<td class="col0"><em>%PN </em></td><td class="col1"> a tailing part of working directory or a project name passed as <em>PN=</em> argument to <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></td>
	</tr>
	<tr class="row6">
		<td class="col0"><em> %w </em></td><td class="col1"> a working (current) directory</td>
	</tr>
	<tr class="row7">
		<td class="col0"><em> %m </em></td><td class="col1"> a directory of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></td>
	</tr>
	<tr class="row7">
		<td class="col0"><em> %ms </em></td><td class="col1"> <em>src</em> subdirectory of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>'s directory (e.g. to access <em>src/s1.wav</em>)</td>
	</tr>
	<tr class="row8">
		<td class="col0"><em> %t0 </em></td><td class="col1"> a system time</td>
	</tr>
	<tr class="row9">
		<td class="col0"><em> %t1 </em></td><td class="col1"> a system date</td>
	</tr>
	<tr class="row10">
		<td class="col0"><em> %t2 </em></td><td class="col1"> a system date + time</td>
	</tr>
	<tr class="row11">
		<td class="col0"><em> %t3 </em></td><td class="col1"> a system day of week</td>
	</tr>
	<tr class="row14">
		<td class="col0"><em> %s0 <br>
%s1 <br>
-”-“- <br>
 %s9  </em></td><td class="col1"> <em>s0=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <br>
 <em>s1=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <br>
-”-“- <br>
 <em>s9=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></td>
	</tr>
	<tr class="row15">
		<td class="col0"><em> %u0 <br>
 %u1 <br>
-”-“- <br>
%u9 </em></td><td class="col1"> <em>u0=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <br>
<em>u1=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <br>
-”-“- <br>
 <em>u9=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></td>
	</tr>
	<tr class="row16">
		<td class="col0"><em> %i0 <br>
 %i1  <br>
-”-“- <br>
 %i9  </em></td><td class="col1"> 0th counter of runs (it may be initialized with <em>i0=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>) <br>
 1st counter of runs (it may be initialized with <em>i1=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>) <br>
-”-“- <br>
 9th counter of runs (it may be initialized with <em>i9=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>)</td>
	</tr>
	<tr class="row14">
		<td class="col0"><em> %x0 <br>
%x1 <br>
-”-“- <br>
 %x9  </em></td><td class="col1"> <em>x0=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <br>
 <em>x1=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <br>
-”-“- <br>
 <em>x9=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></td>
	</tr>
	<tr class="row14">
		<td class="col0"><em> %y0 <br>
%y1 <br>
-”-“- <br>
 %y9  </em></td><td class="col1"> <em>y0=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <br>
 <em>y1=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <br>
-”-“- <br>
 <em>y9=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></td>
	</tr>
	<tr class="row14">
		<td class="col0"><em> %z0 <br>
%z1 <br>
-”-“- <br>
 %z9  </em></td><td class="col1"> <em>z0=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <br>
 <em>z1=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> <br>
-”-“- <br>
 <em>z9=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span></td>
	</tr>
	<tr class="row17">
		<td class="col0"><em> %B “link” </em></td><td class="col1"> calls a
		browser with passed <em>link</em>; here <em>%B</em> corresponds to
		<em>b=</em> argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>, e.g.
		<br> <em>R: e_menu help R: %B https://aplsimple.github.io/e_menu/e_menu.html</em></td>
	</tr>
	<tr class="row19">
		<td class="col0"><em> %E filename</em></td><td class="col1"> calls the
		editor to edit/create <em>a file</em>, e.g. <br>
 to edit a file of the editor's selection: <br>
  <em>R: edit "%s" file R: %E %s</em></td>
	</tr>
	<tr class="row18">
		<td class="col0"><em> %M message </em></td><td class="col1"> puts out a
		'message' (it may be not quoted), e.g.
		<br> <em>R: Wow R: M What a wonderful world!</em></td>
	</tr>
	<tr class="row18">
		<td class="col0" id=Q_wildcard><em> %Q “title” “message” </em></td><td class="col1">
			puts out a query with <em>title</em> and <em>message</em> asking
			“OK” or “Cancel”<br> if answered “Cancel”, cancels next commands of
			batch, e.g.
		<br> <em>R: hg addremove * R: %Q "SURE?" "This will ADD & REMOVE all changes in:\n\n%PD"</em>
  <br>See also <a href=#warnings_of_menus>Warnings of menus</a>.</td>
	</tr>
	<tr class="row18">
		<td class="col0" id=C_wildcard><em> %C commands </em></td><td class="col1">executes
		Tcl commands, e.g.<br>
		<em>
  R:fossil diff ? R: %C if {![info exist ::EMENUCOMMIT]} {set ::EMENUCOMMIT ""}
  <br>R:fossil diff ? R: %I <u>... some input dialog to get ::EMENUCOMMIT ...</u>
  <br>R:fossil diff ? R: %C if {"$::EMENUCOMMIT" eq ""} \
  <br>
   {set ::EMENUTMP ""} {set ::EMENUTMP "--from $::EMENUCOMMIT --to tip"}<br>S:fossil diff ? S: fossil diff $::EMENUTMP</em></td>
	</tr>
	<tr class="row18">
		<td class="col0"><em> %S commands </em></td><td class="col1">executes
		OS commands/programs<br>can process a batch of commands divided with
		\n, e.g.<br>
		<em>R: Batch R: %S xterm -e bash \n nautilus %PD \n cd %PD \n my-softina</em></td>
	</tr>
	<tr class="row23">
		<td class="col0"><em> %f </em></td><td class="col1"> <em>f=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a> (a current edited file's name) OR
		a <em>current menu</em> file's name</td>
	</tr>
	<tr class="row21">
		<td class="col0"><em> %d </em></td><td class="col1"><em>d=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a> OR <em>directory name</em> taken from %f
		wildcard</td>
	</tr>
	<tr class="row22">
		<td class="col0"><em> %e </em></td><td class="col1"> <em>e=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a> OR <em>pure file name</em> taken from %f
		wildcard </td>
	</tr>
	<tr class="row21">
		<td class="col0"><em> %F </em></td><td class="col1"><em>F=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a> OR <em>tail file name</em> taken from %f
		wildcard</td>
	</tr>
	<tr class="row21">
		<td class="col0"><em> %F_ </em></td><td class="col1"><em>%F</em> wildcard underlined, i.e. with " " and "." changed to "_"</td>
	</tr>
	<tr class="row21">
		<td class="col0"><em> %D </em></td><td class="col1"><em>D=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a> OR <em>tail directory name</em> taken from %f
		wildcard</td>
	</tr>
	<tr class="row21">
		<td class="col0"><em> %x </em></td><td class="col1"><em>x=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a> OR <em>file extension</em> taken from %f
		wildcard</td>
	</tr>
	<tr class="row25">
		<td class="col0"><em> %p </em></td><td class="col1"> <em>p=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a> (<em>"p=%p"</em> means Geany's
		<em>project directory</em>)</td>
	</tr>
	<tr class="row24">
		<td class="col0"><em> %l </em></td><td class="col1"> <em>l=</em>
		argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a> (<em>current line number</em>, e.g.
		for Geany it would be <em>l=%l</em>)</td>
	</tr>
	<tr class="row25">
		<td class="col0"><em> %L </em></td><td class="col1"> contents of
		<em>the current line</em> taken from <em>l=</em> argument of <span class="curid"><a href="#" class="wikilink1"
		title="Table of Contents">e_menu</a> </td>
	</tr>
	<tr class="row25" id=ARwildcard>
		<td class="col0"><em> %AR </em></td><td class="col1">It is contents of first one
		of <em>#ARGS:... #ARGS0:... #ARGS1:...</em> comment lines of current file,
		<br>for example, having in <em>mulster.tcl</em> the following comments:
<br>&nbsp;&nbsp;&nbsp;#-ARGS0: -k 1 test/test12ini
<br>&nbsp;&nbsp;&nbsp;#ARGS1: -mode exact -backup 0 tasks/mulster-tke
<br>&nbsp;&nbsp;&nbsp;#-ARGS100: -mode exact -backup 0 tasks/mulster-geany
		<br>we can perform "Run me" of menu.mnu to run the
		<em>mulster.tcl</em> in this manner:
<br>&nbsp;&nbsp;&nbsp;<em>tclsh mulster.tcl -mode exact -backup 0 tasks/mulster-tke</em>
<br>The first encountered <em>#ARGS</em> line is taken for
<em>%AR</em> value. Thus, we need no selecting any "test cases" to run the
test on the current edited file.
<br> We should only have an active #ARGS comment while others being disabled as #-ARGS, #--ARGS, #---ARGS etc.
<br>Starting from <a href="#" class="wikilink1" title="Table of
Contents">e_menu v3.0</a></span>, #ARGS:,  #ARGS0:, #ARGS1: etc. can be included in non-Tcl comments, e.g.:
<br>&nbsp;&nbsp;&nbsp;// C++ style comments; Run me with args - #ARGS0: -opt1 val1 -opt2 val2
<br><b>Note</b>: if some argument contains multiple words, it may need escaped or single quotes, e.g.:
<br>&nbsp;&nbsp;&nbsp;#ARGS0: -opt1 \"value of multiple words\"
<br>&nbsp;&nbsp;&nbsp;#ARGS0: -opt1 'value of multiple words'
<br>Though, it depends on the terminal. The <em>lxterminal</em> and <em>xterm</em> don't need this trick. See <em>tt=</em> option <a href=#tt_option>above</a>.
		 </td>
	</tr>
	<tr class="row25">
		<td class="col0"><em> %RF </em></td><td class="col1">It is contents of first one
		of <em>#RUNF:... #RUNF0:... #RUNF1:...</em> comment lines of current file to execute a command,
		<br>for example, having in <em>obbit.tcl</em> the following comments:
<br>&nbsp;&nbsp;&nbsp;#RUNF1: ./tests/test2_pave.tcl 20 11 12
		<br>we can perform "Run me" of menu.mnu to run the
		<em>test2_pave.tcl</em> in this manner:
<br>&nbsp;&nbsp;&nbsp;<em>tclsh ./tests/test2_pave.tcl 20 11 12</em>
<br>The first encountered <em>#RUNF</em> line is taken for
<em>%RF</em> value.
<br>While in menu.mnu #ARGS string is used with a current file name, #RUNF string is used "as is" and may refer to some file (not the current). It may provide "a space for manoeuvre" with using #ARGS in one case and #RUNF in another case. Say, one edited file may require to be run with #ARGS, while other file - with #RUNF.
<br>Starting from <a href="#" class="wikilink1" title="Table of
Contents">e_menu v3.0</a></span>, #RUNF0:, #RUNF1: etc. can be included in non-Tcl comments, e.g.:
<br>&nbsp;&nbsp;&nbsp;/* C style comments:
<br>&nbsp;&nbsp;&nbsp; Process somefile with args - #RUNF0: somefile -opt1 val1 -opt2 val2
<br>&nbsp;&nbsp;&nbsp;*/
<br><b>Note</b>: If some argument contains multiple words, it may need escaped or single quotes, e.g.:
<br>&nbsp;&nbsp;&nbsp;#RUNF1: ./tests/test2_pave.tcl 0 13 12 \"middle icons\"
<br>&nbsp;&nbsp;&nbsp;#RUNF1: ./tests/test2_pave.tcl 0 13 12 'middle icons'
<br>Though, it depends on the terminal. The <em>lxterminal</em> and <em>xterm</em> don't need this trick. See <em>tt=</em> option <a href=#tt_option>above</a>.
<br><b>Note</b>: #EXEC: comments allow to set any command to run in a terminal, e.g.
<br>&nbsp;&nbsp;&nbsp;#EXEC: ~/UTILS/processMe ./tests/test2_pave.tcl

		 </td>
	</tr>
	<tr class="row25">
		<td class="col0"><em> %P </em></td><td class="col1">goes before a
		command and prepares it by inserting environment variables' values, e.g.
		<br> <em>R: edit ~/.hgrc R: %P %E $::env(HOME)/.hgrc</em></td>
	</tr>
	<tr class="row18">
		<td class="col0" id=h_wildcard><em>%#<b>s</b> command</em></td><td class="col1"> sets a command to be edited up to the whole script for shell
  <br><br>Here <b>s</b> stands for any unique (in a current menu) symbol.
  <br>See <a
href="#bash_scripts2">an example</a> in grep.mnu called through "Menu / Search All / GREP TEMPLATE" where <em>%#t</em> is used in the following menu item:
  <br><em>S: GREP TEMPLATE: '%s' S: %#t grep -H -n -I -s -i -d recurse * -e '%s'</em>
  </td>
	</tr>
	<tr class="row18">
		<td class="col0"><em> %I ques “title” options == ::globvar
		</em></td><td class="col1"> Puts out a dialog asking to enter a value; if answered “Cancel”, cancels next commands of batch. See details in <a href="#input_dialogs">Input dialogs</a>.</td>
	</tr>
	<tr class="row18">
		<td class="col0"><em> %TT
		</em></td><td class="col1"> command for Linux terminal</td>
	</tr>
	<tr class="row20">
		<td class="col0"><em> <code>%%</code> </em></td><td class="col1"> % symbol</td>
	</tr>
</tbody></table></div>

<p>
<br>

</p>

</div>

<h3 id="processing_wildcards">Processing wildcards</h3>
<div class="level3">

<p>
 Wildcards of names and commands are processed in the following order:
</p>
<ul>
<li class="level1"><div class="li"> %PD</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %PN</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %s0, %s1, …, %s9 </div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %u0, %u1, …, %u9</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %+</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %qq</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %dd</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %ss</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %w, %m</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %s</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %u</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %t0, %t1, %t2, %t3</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %i0, %i1, …, %i9</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %x0, %x1, …, %x9</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %y0, %y1, …, %y9</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> %z0, %z1, …, %z9</div>
</li>
</ul>

<p>
Wildcards %s0 … %s9, %u0 … %u9 can delegate their values to lower levels (from %s0 down %u9).
</p>

<p>
For example:
</p>
<pre class="code">  "s1= %s committed #%i1 at %t2" "u1=%s1"

    is equivalent to:

  "s1= %s committed #%i1 at %t2" "u1=_%s_committed_#%i1_at_%t2"</pre>

<p>
In some cases, it may be desirable to have an hierarchy of substitutions.
</p>

<p>
For example:
</p>
<pre class="code">  "s1= Theme 1" "s2=%s1.2" "s3=%s2.3" "s4=%s3.4"

    is equivalent to:

  "s1= Theme 1" "s2= Theme 1.2" "s3= Theme 1.2.3" "s4= Theme 1.2.3.4"</pre>

<p>
<br>

</p>

</div>

<h3 id="input_dialogs">Input dialogs</h3>
<div class="level3">
<p>
	Probably, most obscure is the <em>%I</em> wildcard. It uses <a
	href="../pave/index.html#APaveDialog_input">apaveObject
	input</a> basically	and allows to enter values of Entry, Checkbox, Radiobutton etc.
	The returned values can be multiple and are listed after ==.
</p>
<p>
Let's consider a few of examples of its usage.
</p>
<p>
<b>1.</b>
</p>
<p>
In this example from <em>hg.mnu</em>, a file name is entered manually or chosen from
a file chooser.
</p>
<p>
<pre class="code"> # entering a file name to view the file's changes since a last commit
 R: kdiff3 of %F R: cd %PD
 R: kdiff3 of %F R: %C if {![info exist ::FIL1] || $::FIL1==""} {set ::FIL1 "%f"}
 R: kdiff3 of %F R: %I ques "KDIFF3" {filName {{File:} {} {-w 60}} {"$::FIL1"} lab} \
   -head "\n Enter/choose a file to kdiff3" -weight bold == ::FIL1
 R: kdiff3 of %F R: hg extdiff -p kdiff3 "$::FIL1"</pre>
</p>
<p>The dialog line by line:
<ul>
<li class="level1"><div class="li"><code>%C</code> line initializes the variable for file name</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li">in <code>%I</code> line we run the input dialog, where each line excepting the last is terminated with " \" which is a line continuator
</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"><code>ques</code> stands for <em>question</em> icon (others are info, warn, err, "")</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"><code>KDIFF3</code> stands for a title of dialog window</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"><code>filName</code> stands for a field name of entering/choosing file;
<br>it sets also the type of field (entry + file chooser)
</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"><code>{File:}</code> is the prompt</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"><code>{}</code> stands for options of <em>pack</em> command</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"><code>{-w 60}</code> stands for options of <em>ttk::entry</em> command, here a width</div>
</li>
</ul>


<ul>
<li class="level1"><div class="li"><code>{{File:} {} {-w 60}}</code> are all options of entry field</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"><code>{"$::FIL1"}</code> stands for passed value of the <em>filName</em> field
<br>(note that quotes are necessary as a file name can contain spaces)
</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"><code>lab</code> stands for <em>ttk::label</em>, it's last in the list, so its options are omitted;
<br><em>lab</em> just separates <em>File:</em> from buttons, it's a pure ornamental detail</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li">the rest are options for heading message (-head, boldness)</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"><code>== ::FIL1</code> stands for variables receiving input (here only one)</div>
</li>
</ul>

</p>
<p>
This example produces the following picture:
</p>

<p>
<img src="files/inputdata1.png" class="media" alt="">
</p>

<p>
<br>
<b>2.</b>
</p>
<p>
In this example from <em>menu / utils / test1.mnu</em>, more field types are used: Label, Entry, Radiobutton, Checkbutton, Combobox, Text, Listbox, Option Cascade, Tablelist:

<pre class="code">
 R: Input dialog R: %C if {![info exist ::EN2]} {set ::EN2 ""; set ::V1 Exact}
 R: Input dialog R: %C if {![info exist ::C1]}  {set ::C1 [set ::C2 0]}
 R: Input dialog R: %C if {![info exist ::W1]}  {set ::W1 "in file"}
 R: Input dialog R: \
  %I "" "TEST OF %I" { \
  ent1  {{   Find: }} {"$::EN1"} \
  ent2  {{Replace: }} {"$::EN2"} \
  labo  {{} {} {-t {\nOptions:} -font {-weight bold}}}  {} \
  radA  {{Match:   }} {"$::V1" {Exact} {Glob} {RE  }} \
  seh   {{} {} {}} {} \
  chb1  {{Match whole word only}} {$::C1} \
  chb2  {{Match case           }} {$::C2} \
  seh2  {} {} \
  v_    {} {} \
  cbx1  {{Where:   } {} {-state readonly}} {"$::W1" {in file} {in session} {in directory}} \
  tex1  {{Any text:} {} {-h 3 -w 50 -wrap word -tabnext lbx1}} {$::TEX} \
  lbx1  {{Related: } {} {-h 3}} {"$::LBX" {my Father} Mother Son Daughter Brother Sister Uncle Aunt Cousin {Big Brother} "Second cousin" "1000th cousin"} \
  opc1  {{Color:   }} {{$::OPT} {{color red green blue -- {{other colors} yellow magenta cyan \
      | #52CB2F #FFA500 #CB2F6A | #FFC0CB #90EE90 #8B6914}} \
      {hue dark medium light} -- {{opc widget example}} ok}} \
  tblSEL1  {{Table:   \n\nThe 'tbl' name\nis tblSEL* to\nreturn an item} {} {-h 4 -columns {16 {Name of widget} left \
    0 Type left 0 X right 0 Y right} }} {"$::TBL" {"but" "ttk::button" 1 1} \
    {"can" "canvas" 3 3} \
    {"chb" "ttk::checkbutton" 4 4} \
    {"cbx fco" "ttk::combobox" 23 2} \
    {"ent" "ttk::entry" 212 6}} \
  } \
  -head "Enter data:" -weight bold == ::EN1 ::EN2 ::V1 ::C1 ::C2 ::W1 ::TEX ::LBX ::OPT ::TBL
</pre>
</p>
<p>The dialog line by line:

<ul>
<li class="level1"><div class="li"> <code>R: Input dialog R: %C ...</code> lines initialize the variables used in the dialog and commands afterwards. The dialog's variables can be also set in [OPTIONS] section, <a href=#variables>with two methods</a>.
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>ent1</code> and <code>ent2</code> stand for ttk::entry fields to enter the Find and Replace values.</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>labo</code> field (ttk::label) is labeled as "Options:" (this may include \n to set blank rows), of bold font.</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>radA</code> stands for ttk::radiobutton;
<br> choices are listed after its value (quoted because of {RE } containing a space).</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>seh</code> is a horizontal separator.</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>chb1</code> and <code>chb2</code> are checkboxes.</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>v_</code> is a vertical spacer.</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>cbx1</code> is a combobox.</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>tex1</code> is a text widget.</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>lbx1</code> is a listbox.</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>opc1</code> is an option cascade widget.</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>tblSEL1</code> is a tablelist widget.</div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <code>== ::EN1 ::EN2 ::V1 ::C1 ::C2 ::W1 ::TEX ::LBX ::OPT ::TBL</code>
<br>is a list of input variables; after "OK" they will get their input values.</div>
</li>
</ul>

</p>
<p>
<b>Note</b>: for more security it's recommended to use uppercased
 names of variables, i.e. ::EN1 instead of ::en1 etc. Though <span
 class="curid"><a href="#" class="wikilink1" title="Table of
 Contents">e_menu</a> uses the global variables (a few), none of them is
 uppercased.
</p>
<p>
This example produces the following picture:
</p>

<p>
<img src="files/inputdata2.png" class="media" alt="">
</p>

<p id=exREVFIL>
<br>
<b>3.</b>
</p>
<p>
In this example from <em>hg.mnu</em>, Entry, File Chooser and Text fields are used, the
text widget being read-only (due to <code>-ro 1</code> option).
<br>
This menu item allows to dig the file's differences down to a desirable level.
<pre class="code">
 R: hg extdiff %F R: cd %d
 R: hg extdiff %F R: %C if {![info exist ::REV]}  {set ::REV -1}
 R: hg extdiff %F R: %C if {![info exist ::FIL]}  {set ::FIL "%f"}
 R: hg extdiff %F R: \
  %I "" "DIFFERENCES" { \
  v_0  {{} {-pady 7} {}} {} \
  ent1    {{Revision: } {} {}} {"$::REV"} \
  filName {{ of file: } {} {-w 65}} {"$::FIL"} \
  v_1  {{} {-pady 7} {}} {} seh {{} {} {}} {} v_2 {{} {} {}} {} \
  texc {{hg help:  } {} {-h 4 -w 52 -ro 1}} {A plain integer is treated \
as a revision number.\nNegative integers are treated as sequential offsets from the \
tip, with -1 denoting the tip, -2 denoting the revision prior to the tip, and so forth.} \
  } -head "\n Enter a revision (a prior commit's number):" -weight bold == ::REV ::FIL
 R: hg extdiff %F R: hg extdiff -r $::REV -p meld $::FIL
</pre>

</p>
<p>
This example produces the following picture shot in  <a
href="https://github.com/phase1geo/tke" title="TKE editor">TKE editor</a>:
</p>

<p>
<img src="files/hgdiff.png" class="media" alt="">
</p>

<p>
<br>

</p>

</div>

<h3 id="warnings_of_menus">Warnings of menus (Q command)</h3>
<div class="level3">

<p>
The Q command can be used in menus as a part of <a href=#C_wildcard>%C</a> wildcard's content. The <a href=#Q_wildcard>%Q</a> wildcard uses the same syntax.
</p>

<p>
The <a href=#C_wildcard>%C Q</a> and <a href=#Q_wildcard>%Q</a> both display warning dialogs.
</p>

<p>
Syntax:
<pre class="code">
%C Q ttl msg {typ okcancel} {icon warn} {defb OK} args
%Q ttl msg {typ okcancel} {icon warn} {defb OK} args
</pre>
where:
<br>&nbsp;&nbsp;&nbsp;<em>ttl</em> - title of query
<br>&nbsp;&nbsp;&nbsp;<em>msg</em> - message of query
<br>others may be omitted:
<br>&nbsp;&nbsp;&nbsp;<em>typ</em> - type of dialog: one of <code>okcancel</code> (default), <code>yesno</code> or <code>yesnocancel</code>
<br>&nbsp;&nbsp;&nbsp;<em>icon</em> - type of icon: one of <code>warn</code> (default), <code>info</code>, <code>ques</code> or <code>err</code>
<br>&nbsp;&nbsp;&nbsp;<em>defb</em> - selected default button: one of <code>OK</code> (default), <code>CANCEL</code>, <code>YES</code> or <code>NO</code>
<br>&nbsp;&nbsp;&nbsp;<em>args</em> - additional options for <a href="../pave/index.html#APaveDialog_options">APaveDialog dialogs</a>, e.g. <code>-ch "Do not show again"</code>
</p>

<p>
Using <em>a1=</em> call argument, you can warn a user about potential risks of an open menu, e.g.:
</p>
<pre class="code">  MW: Dangerous MW: m=git2.mnu w= fs=50 c=5 "a1=if {![Q {DANGER!} \
  {These commands are dangerous\nand can set the world on fire! \
  \n\nContinue?}]} exit"</pre>

<p>
Here the Tcl commands are used to exit and close the dangerous menu possibly open by mistake. Q is a query with “head” and “message” that can contain <a href=#wildcards_in_menu_names_and_commands>wildcards</a> like %s, %f. Q returns "false" if answered "Cancel" so that <em>exit</em> command closes the menu.
</p>

<p>
In a menu item, you can use <em>%Q “head” “message”</em>. It's the same query with the difference that <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> stops executing the menu item after answering 'Cancel'. For example:
</p>
<pre class="code">  R:git reset --hard HEAD R: %Q "RESET" \
  "This cancels the last uncommitted changes and resets \
  \nto the last commited state!\n\nDo you want to RESET ? \
  \n\n(VERY LIKELY IT'S CANNOT BE UNDONE)"
  R:git reset --hard HEAD R: cd %PD
  S:git reset --hard HEAD S: git reset --hard HEAD</pre>

<p>
- here the cancelled commands are <code>cd</code> and <code>git reset</code>.
</p>


<p>
<br>

</p>

</div>

<h3 id="variables">Usage of initializing code and variables in menus</h3>
<div class="level3">

<p>
In the examples above, %C wildcard was used to initialize variables of input dialogs and commands.
</p>

<p>
If some initializing code is duplicated in a menu's items, it makes sense to move it into [OPTION] section, using %C wildcards in the same manner. This %C Tcl code would be executed at opening the menu. It may contain any number of Tcl commands devided with ";" or continued with "\".
</p>

<p>
For example, <em>fossil.mnu</em> uses this feature to discern two ways of its calling:

<pre class="code">[OPTION]
%C if {{%F}=={*} && ![info exist ::EMENUFILE]} {set ::EMENUFILE "*"}
%C if {![info exist ::EMENUFILE]} {set ::EMENUFILE "%f"}
</pre>

</p>

<p>
Also, if you want to have a set of variables used throughout the whole menu and
 saved (possibly) between the menu sessions, you'd find it convenient to define them in [OPTIONS] section. Specifically, the <a href=#exREVFIL>example of previous section</a> can be rewritten this way:
<pre class="code"> R: Differences of %F (hg extdiff) R: cd %d
 R: Differences of %F (hg extdiff) R: \
  %I "" "DIFFERENCES" { \
  v_0  {{} {-pady 7} {}} {} \
  ent1    {{Revision: } {} {}} {"$::REV"} \
  filName {{ of file: } {} {-w 61}} {"$::FIL"} \
  v_1  {{} {-pady 7} {}} {} seh {{} {} {}} {} v_2 {{} {} {}} {} \
  texc {{hg help:  } {} {-h 3 -w 52 -state disabled}} {A plain integer is treated \
as a revision number.\nNegative integers are treated as sequential offsets from the \
tip, with -1 denoting the tip, -2 denoting the revision prior to the tip, and so forth.} \
  } -head "\n Enter a revision (a prior commit's number):" -weight bold == ::REV ::FIL
 R: Differences of %F (hg extdiff) R: hg extdiff -r $::REV -p meld $::FIL
...
[OPTIONS]
::REV=-1
::FIL=%f
...</pre>
</p>

<p>
Thus, in [OPTIONS] you can set any variables that you may use everywhere in the menu's commands and input dialogs.
</p>

<p>
The variables' values are saved from one session to another, excluding those
variables that contain % initial of wildcards. Above, the
<em>::REV</em> variable is initialized to -1 and saved for next menu
sessions while
<em>::FIL</em> is always initialized with %f wildcard's value and saved only
for a current menu session.
</p>

<p>
The <span class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> detects the variables in [OPTIONS] by their glob template of
"::*=*". You cannot use constructs sort of <em>myVar=10</em>. Instead, use
<em>::MYVAR=10</em>. This means that you are prompted to use global variables.
</p>

<b>Note</b>: for more security, it's recommended to use uppercased
 names of variables, i.e. <em>::MYVAR</em> instead of <em>::myVar</em> etc. Though <span
 class="curid"><a href="#" class="wikilink1" title="Table of
 Contents">e_menu</a> uses the global variables (a few), none of them is
 uppercased.
</p>

<p>
Another hint is about temporary files:
<br>&nbsp;&nbsp;&nbsp;Use the <em>%mn.tmp~</em> template for temporary file names!
</p>
<p>
For example:
<br>
<pre class="code">
[OPTIONS]
::EMENUTMPFILE=%mn.tmp~
</pre>
</p>
<p>
By this, you would provide a unique temporary file name per menu.
<br>Second profit is that <span
 class="curid"><a href="#" class="wikilink1" title="Table of
 Contents">e_menu</a> at exiting would remove the *.tmp~ files from menus directory, so you need not worry about this clearance.
</p>

<p>
The following color names may be useful in .mnu files, e.g. to set a message color (see e.g. <code>-hfg $::em::clrhotk</code> in fossil.mnu):
<ul>
<li><code>::em::clrhotk</code> - foreground of hot keys</li>
<li><code>::em::clractf</code> - foreground of active item</li>
<li><code>::em::clractb</code> - background of active item</li>
<li><code>::em::clrinaf</code> - foreground of inactive item</li>
<li><code>::em::clrinab</code> - background of inactive item</li>
<li><code>::em::clrtitf</code> - foreground of title ("Use arrow...")</li>
<li><code>::em::clrtitb</code> - background of title</li>
<li><code>::em::clrhelp</code> - foreground of HELP/EXEC/SHELL</li>
<li><code>::em::clrgrey</code> - background of greyed menu</li>
</ul>
</p>

<p>
</p>

<p>
<br>

</p>

</div>

<h3 id="bash_scripts">Running shell scripts as a single menu item</h3>
<div class="level3">

<br>
<p>
<strong>1. Nice way:</strong>
</p>

<p>
My Italian colleague Flavio had suggested the following usage of <em>"S:"</em> menu item: it can
include the whole shell script!
<br>It means <em>no files on disk to perform bash
scripts in <span class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span></em>!
</p>

<p>
The following example makes it clear:
<pre class="code"> S: Shell script S: ? \
  err=1; cd ~/FOSSIL; \
  # make a cycle till not found \n \
  while [ $err -eq 1 ]; \
    do repo=$(find *.fossil 2>/dev/null ); \
    err=$?; \
    if [ $err -eq 1 ]; then \
      if [ $(pwd) = '/' ]; then \
        echo "repo non esistente" ;break; \
      fi; \
      cd ../; \
    else \
      echo "$(pwd)/${repo}"; \
    fi; \
  done
</pre>
</p>

<p>
This script finds all *.fossil files in a directory and echos their names.
</p>

<p>
This item of <em>test1.mnu</em> is available through "Menu / Utils / Test1 / Shell script". The actual item is somewhat different as for using <a href="#co_parameter">co=;</a> in [OPTIONS] to simplify things (";" and "; \" mean the same continuator of line).
</p>

<p>
<b>Note</b>:
<ul>
<li class="level1"><div class="li"> The "?" before the script allows to see any errors that would
occur during its execution.
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">The terminating "\" serves as a mark of line continuation.
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">The <em>"cd"</em> command should go <u>after</u> first command if
you make a script. Let it be any innocent command, sort of <em>"tmp=0"</em>
(in this example it is <em>"err=1"</em>).
<br>
When <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> comes
into <em>"cd "</em> at beginning of any command, it considers the rest as a directory name (and swallows it silently if it's not a directory).
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">Comments in scripts are terminated by "\n \"
in order to run next commands.</div>
</li>
</ul>

<p>
A real life usage of this feature is available here: <a href="bin4hg.html">How to minimize the Mercurial SCM history of binary files</a>.
</p>
<br>

<p id="bash_scripts2">
<strong>2. Another nice way:</strong>
</p>

<p>Perhaps, the preferable scripting way of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> would be through <a href="#h_wildcard">%#<b>X</b> wildcard</a> where <b>X</b> may be any character unique for different dialogs of the menu.
<br>It's well seen in <em>test1.mnu</em>, where the line:
<pre class="code">S: Shell script-2 S: %#s err=1; cd ~/FOSSIL</pre>
means that the command (<em>err=1; cd ~/FOSSIL</em>) would be edited in an editor.
At that you can extend the command up to the whole shell script.
</p>

<p>With this method, <a href="#bash_scripts">the previous script</a> can be edited as a regular bash script:
<pre class="code"># this script is run with %#s wildcard in test1.mnu
# it does the same as the previous "Shell script"

err=1
cd ~/FOSSIL
while [ $err -eq 1 ]
  do repo=$(find *.fossil 2>/dev/null )
  err=$?
  if [ $? -eq 1 ]; then
  if [ $(pwd) = '/' ]; then
    echo "repo non esistente" ; break
  fi
  cd ../
  else
  echo "$(pwd)/${repo}"
  fi
done</pre>
</p>

<p>
This item of <em>test1.mnu</em> is available through "Menu / Utils / Test1 / Shell script-2".
<br>See also another example in <em>grep.mnu</em> available through "Menu / Search All / GREP TEMPLATE".
</p>

<p>
<br>

</p>

</div>

<h3 id="macros">Macros</h3>
<div class="level3">
<p>
The macros allow to get rid of repetitions in .mnu files.
</p>
<p>
If some code is repeated in several places of menu, it would be a good candidate for a macro. For example, let our menu code be as follows:
<pre class="code">
 R:fossil forget $::FILETAIL R: %I {} "FORGET FILE" { \
   v_ {{} {-pady 4} {}} {} \
   fil1 {{   File:} {} {-w 70}} {"$::EMENUFILE"} \
   } -head {\n This will forget a file in the Fossil repository. \
   \n Use wildcards to forget a few.} -hfg $::em::clrhotk -weight bold == ::EMENUFILE
 S:fossil forget $::FILETAIL S: fossil forget $::EMENUFILE
</pre>
... and it's repeated for some <em>fossil</em> commands (<em>forget, revert, add, remove</em> etc.). The only differences are: 1) title 2) message 3) command.
</p>
<p>
Then, we can build <em>%M1</em> macro like this:
<pre class="code">
%M1 TITLE %M1 MESSAGE %M1 COMMAND
%M1 R: %I {} "$TITLE" { \
   v_ {{} {-pady 4} {}} {} \
   fil1 {{   File:} {} {-w 70}} {"$::EMENUFILE"} \
   } -head {\n $MESSAGE} -hfg $::em::clrhotk -weight bold == ::EMENUFILE
%M1 S: fossil $COMMAND $::EMENUFILE
</pre>
</p>
<p>
Thus, for <em>forget, revert, remove, add</em> commands, we can use the code:
<pre class="code">
 R:fossil forget $::FILETAIL R: %M1 FOSSIL FORGET %M1 This will forget a file... %M1 forget

 R:fossil revert $::FILETAIL R: %M1 FOSSIL REVERT %M1 This will revert a file... %M1 revert

 R:fossil remove $::FILETAIL R: %M1 FOSSIL REMOVE %M1 This will remove a file... %M1 remove

 R:fossil add    $::FILETAIL R: %M1 FOSSIL ADD %M1 This will add a file... %M1 add
</pre>
</p>
<p>
The first <code>%M1 TITLE %M1 MESSAGE %M1 COMMAND</code> line sets the macro's parameters used in its body (<em>$TITLE, $MESSAGE, $COMMAND</em>). The corresponding arguments are set at the macro evaluation, e.g. this way: <code>%M1 FOSSIL FORGET %M1 This will forget a file... %M1 forget</code>.
</p>
<p>
 This first line of macro may be empty (<code>%M1</code>), but it should go first in the macro code, all the same.
</p>
<p>
Other lines of macro should contain:
<ul>
<li>macro name of <em>%M?</em> form (<em>%M0</em> through <em>%M9</em>, <em>%Ma</em> through <em>%Mz</em>, <em>%MA</em> through <em>%MZ, %M~, %M!, %M@, %M#</em> and so on)</li>
<li>type of line (R:, S:, RE:, SW: and so on)</li>
<li>content of line (any stuff used in menu's lines, including "\" as a continuation mark)</li>
</ul>
</p>
<p>
</p>

<p>
<br>

</p>

</div>

<h3 id="examples1">Examples</h3>
<div class="level3">

<p>
<strong>1.</strong>
</p>

<p>
<span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> being written in Tcl requires ”/“ in pathnames. So, in order to avoid manual converting “\” to ”/“, items are marked with “R/” instead of “R:”, “RW/” instead of “RW:” and so on. It's used only in Windows.
</p>

<p>
Here is an example:
</p>
<pre class="code">  # menu for e_menu

   R/ GoldenDict              R/ "C:\Program Files (x86)\GoldenDict\GoldenDict.exe"
   R/ FVdict for "%s"         R/ cd C:\Program Files (x86)\FVdict
  RW/ FVdict for "%s"        RW/ fvdict.exe %s
   R/ Tclsh "samples/%s.tcl"  R/ tclsh "C:\PG\Tcl-Tk\examples\Proj01\%s"
   S/ Tkcon                   S/ tkcon

   R: Firefox search for "%s" R: firefox -search "%s"
   R: Wikipedia for "%s"      R: %B https://en.wikipedia.org/w/index.php?cirrusUserTesting=classic-explorer-i&amp;search=%+

  MW/ Git menu               MW/ "m=menus\gitmenu.txt" o=0 "PD=%d" "s=%s"</pre>

<p>
A menu item <em> FVdict for ”%s“ </em> consists of two commands: the first one sets current directory of command, the second executes it (and wait its completion).
</p>

<p>
Notice that the command 'cd' does not require quoting directory path, because it's executed by <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> that adds missing quotes. Other commands with spaced pathnames need quoting them.
</p>

<p>
Also notice how WWW searches are called for Firefox search machine and for Wikipedia: "%+" is the same as "%s" with spaces replaced by "+".
</p>

<p>
A last item calls and then waits for a git menu that is in the example below.
</p>

<p>
<strong> 2. </strong>
</p>

<p>
Most commands in this menu need changing to a project's directory, so 'cd' is first used in a batch of commands.
</p>

<p>
The command batches contain mixed 'R' and 'S' markers which means that their commands are executed by itself and by shell in console box.
</p>

<p>
The wildcard <em>%s</em> refers to the editor's selection. The wildcard <em>%dd</em> is the same as <em>%s</em> but it's used to get rid of special symbols as ”, $, %, {, }, [, ], &lt;, &gt;, *.
</p>

<p>
The wildcard <em>%M</em> shows a message.
</p>

<p>
The wildcard <em>%Q</em> shows a query with 'title' and 'query text'. Being answered 'Cancel' it cancels the execution of batch.
</p>

<p>
In <em> %Q </em> command you should use edging double quotes and internal single quotes in a title and a message. Symbol \<em>n</em> stands for an empty line.
</p>
<pre class="code">  # git menu for e_menu

  R:nautilus command R: %M Now the nautilus file manager should go to %PD directory.
  R:nautilus command R: nautilus "%PD"

  S:git status S: cd %PD
  S:git status S: git status

  R:git gui R: cd %PD
  R:git gui R: git gui

  S:git add * S: cd %PD
  S:git add * S: git add *

  S:git commit -m "%dd" S: cd %PD
  R:git commit -m "%dd" R: %Q "Committing changes" "Commit with message\n\n'%dd' ?"
  S:git commit -m "%dd" S: git commit -m "%dd"

  S:git commit -am "%s" S: cd %PD
  R:git commit -am "%s" R: %Q "Committing changes" "Add and commit with message\n\n'%s' ?"
  S:git commit -am "%s" S: git commit -am "%s"

  S:git log "--since=1 day ago" S: cd %PD
  S:git log "--since=1 day ago" S: git log "--since=1 day ago"

  R:git log -p "--since=1 day ago" R: cd %PD
  S:git log -p "--since=1 day ago" S: git log -p "--since=1 day ago"

  MW: Others MW: m=menus/git2.mnu w=40</pre>

<p>
<br>

</p>

</div>

<h2 id="detailed_example">Detailed example</h2>
<div class="level2">

<p>
 The following example illustrates step by step how to create and use <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> in Windows. Linux version is mostly the same and even more simple than Windows'.
</p>

<p>
<br>

</p>

</div>

<h3 id="step_1_initial_testing">Step 1. Initial testing.</h3>
<div class="level3">

<p>
It's assumed that you had installed <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a> and <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> software. If not, refer to <a href="#introduction_2">Introduction</a>.
</p>

<p>
It's also assumed in the next sections that <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> has been unpacked into <em>C:\UTILS\e_menu</em> directory. The example deals with <a href="#introduction_2">Geany IDE</a>.
</p>

<p>
To start from scratch, the Geany's context command would be as follows:
<pre class="code">tclsh C:\UTILS\e_menu\e_menu.tcl "s=%s"</pre>
</p>

<p>
Try <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> now. Set the caret on a word of your text edited in <abbr title="A fast and lightweight IDE">Geany</abbr> IDE. You may also select a piece of text. Call <em>'Context action'</em> from popup menu or with a hotkey mapped to it.
</p>

<p>
You should see the following:
</p>

<p>
<img src="files/p0.png" class="media" alt="">
</p>

<p>
(in this example <em>'Step 1'</em> was selected in <abbr title="A fast and lightweight IDE">Geany</abbr> editor).
</p>

<p>
If you see it, <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> works OK. Well, if you are not Tcler then skipping the rest of this step would not harm you badly.
</p>

<p>
The first line of the picture above means calling a context help on <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a> command or keyword you had selected.
</p>

<p>
The help is online. You can tune it to be offline for faster response and zero of Internet. To do it try this:
</p>
<ul>
<li class="level1"><div class="li"> include the h= argument into <abbr title="A fast and lightweight IDE">Geany</abbr> context action:</div>
</li>
</ul>
<pre class="code"> tclsh C:\UTILS\e_menu\e_menu.tcl "s=%s" h=C:\DOC\www.tcl.tk\man\tcl8.6</pre>
<ul>
<li class="level1"><div class="li"> download the <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a> help to C:\DOC directory with commands:</div>
</li>
</ul>
<pre class="code">  md C:\DOC

  cd C:\DOC

  wget -r -k -l 2 -p --accept-regex=.+/man/tcl8\.6.+ https://www.tcl.tk/man/tcl8.6/</pre>

<p>
Now the offline help should be ready to call. If not, check the version of your <em>wget</em> utility.
</p>

<p>
Retry <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a> help calling. Select in your text (or place the caret on), for example, <em>package</em> and call the editor's context menu. You should see something like:
</p>

<p>
<img src="files/p1.png" class="media" alt="">
</p>

<p>
Click on the first item and you would see the <a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org" rel="nofollow">Tcl/Tk</a> help on <em>package</em>.
</p>

<p>
<br>

</p>

</div>

<h3 id="step_2_creating_a_menu">Step 2. Creating a menu.</h3>
<div class="level3">

<p>
Let's try and create a simple menu of 2 commands that would be available from <abbr title="A fast and lightweight IDE">Geany</abbr>'s context.
</p>

<p>
The menu file will be <em>C:\UTILS\e_menu\menus\test.mnu</em>. We shall use commands that process the editor's selected text to:
</p>
<ul>
<li class="level1"><div class="li"> seek the selected internet pages</div>
</li>
<li class="level1"><div class="li"> view the selected words in a dictionary</div>
</li>
</ul>

<p>
Fill the <em>C:\UTILS\e_menu\menus\test.mnu</em> with the following:
</p>
<pre class="code">  R/ Firefox search for "%s" R/ ""C:\Program Files (x86)\Mozilla Firefox\firefox.exe" -search "%s"

  RW/ Dictionary FVdict for "%s" RW/ cd C:\Program Files (x86)\FVdict
  RW/ Dictionary FVdict for "%s" RW/ fvdict.exe "%s"</pre>

<p>
(Here a fvdict dictionary is used. It's one of many similar dictionaries that accept a word as input argument and put out a translation of it. This one is English-Russian available at <a href="https://aplsimple.github.io/ru" title="https://aplsimple.github.io/ru" rel="nofollow">https://aplsimple.github.io/ru</a>).
</p>

<p>
After that include the menu file into the call string of <abbr title="A fast and lightweight IDE">Geany</abbr>'s context, for example:
</p>
<pre class="code"> tclsh C:\UTILS\e_menu\e_menu.tcl "s=%s" h=C:\DOC\www.tcl.tk\man\tcl8.6 m=menus/test.mnu</pre>

<p>
NOTE: if you dislike to have the HELP/EXEC/SHELL commands in your menu though the context would be desirable, you can use:
</p>
<ul>
<li class="level1"><div class="li"> “s0=%s” instead of “s=%s” in <abbr title="A fast and lightweight IDE">Geany</abbr>'s context command</div>
</li>
<li class="level1"><div class="li"> %s0 instead of %s in menu commands</div>
</li>
</ul>

<p>
For example, you can write <abbr title="A fast and lightweight IDE">Geany</abbr>'s context command as:
</p>
<pre class="code"> tclsh C:\UTILS\e_menu\e_menu.tcl "s0=%s" m=menus/test.mnu</pre>

<p>
… and <em>test.mnu</em> as:
</p>
<pre class="code">  R/ Firefox search for "%s0" R/ "C:\Program Files (x86)\Mozilla Firefox\firefox.exe" -search "%s0"

  RW/ Dictionary FVdict for "%s0" RW/ cd C:\Program Files (x86)\FVdict
  RW/ Dictionary FVdict for "%s0" RW/ fvdict.exe "%s0"</pre>

<p>
… and then you should see:
</p>

<p>
<img src="files/p12.png" class="media" alt="">
</p>

<p>
… instead of:
</p>

<p>
<img src="files/p2.png" class="media" alt="">
</p>

<p>
Try and seek the selected “Firefox” in WWW. Click the item named <em>Firefox search for “Firefox”</em> and you would see something like:
</p>

<p>
<img src="files/p22.png" class="media" alt="">
</p>

<p>
<br>

</p>

</div>

<h3 id="step_3_creating_a_submenu">Step 3. Creating a submenu.</h3>
<div class="level3">

<p>
The <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>'s menus are hierarchical. You can include a submenu into any menu with the following e.g.:
</p>
<pre class="code">  MW/ Test4 menu MW/ "m=test4.mnu" o=0</pre>

<p>
NOTE: here <em>“o=0”</em> option means that the submenu doesn't contain the header i.e. those awful messages <em>“Use arrow… (or press…”</em>. Also notice that <em>s0=</em> option is passed to the submenu (as well as the other options of parent menu), and only <em>m=</em> and <em>o=</em> options were overridden for the child menu. In the example below the <em>PD=</em> option is added as well. The header is useful for mouse moving of menu, btw.
</p>

<p>
Let's create a submenu <em>test4.mnu</em> located at <em>C:\UTILS\e_menu\menus</em>.
</p>

<p>
However, at the beginning we should write it in the parent menu <em>test.mnu</em> so:
</p>
<ul>
<li class="level1"><div class="li"> <em>test.mnu</em>:</div>
</li>
</ul>
<pre class="code">  R/ Firefox search for "%s" R/ "C:\Program Files (x86)\Mozilla Firefox\firefox.exe" -search "%s"

  RW/ Dictionary FVdict for "%s" RW/ cd C:\Program Files (x86)\FVdict
  RW/ Dictionary FVdict for "%s" RW/ fvdict.exe %s

  MW/ Test4 menu MW/ "m=test4.mnu" "PD=C:\UTILS\e_menu\" o=0</pre>

<p>
After that if you clicked on the menu item,  <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> would offer to create the menu file. Answer “OK” and you'll get the following menu template:
</p>
<pre class="code">   R: nam1  R: prog

   S: nam2  S: comm

  MW: nam3  MW: m=e_menu/nam3.mnu</pre>

<p>
The template contains three most common types of records to fill a menu.
</p>

<p>
Now let's fill our submenu with the following:
</p>
<ul>
<li class="level1"><div class="li"> <em>test4.mnu</em>:</div>
</li>
</ul>
<pre class="code">  SW: echo %%s0 is %s0 SW: echo %%s0 is %s0

  SW: echo %%PD is %PD SW: echo %%PD is %PD

  R: git init R: %Q "Init GIT" "Are you sure to init git in\n\n%PD ?"
  R: git init R: cd %PD
  S: git init S: git init

  R: git status R: cd %PD
  S: git status S: git status

  R: git gui R: cd %PD
  R: git gui R: git gui

  R: git add * R: cd %PD
  S: git add * S: git add *

  R: git commit -am '%s' R: %Q "Committing changes" "Do you really want to commit with message\n'%s' ?"
  R: git commit -am '%s' R: cd %PD
  S: git commit -am '%s' S: git commit -am "%s"</pre>

<p>
Call the <abbr title="A fast and lightweight IDE">Geany</abbr> context action again. You should see the following:
</p>

<p>
<img src="files/p3.png" class="media" alt="">
</p>

<p>
After choosing <em>“Test4 menu”</em> you'll see the new submenu:
</p>

<p>
<img src="files/p4.png" class="media" alt="">
</p>

<p>
In the submenu you can play with its items. Notice that some git commands would require a confirmation. Also notice how a working directory is passed to the child menu with “PD=” argument and then used in its commands as “%PD” wildcard.
</p>

<p>
First items only echo the options passed to <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>. Echos are useful for debugging btw. Other items refer to GIT system so that they would be working if you had installed GIT.
</p>
</div>
<p><br></p>

<h2 id="using_e_menu">Using e_menu application</h2>
<div class="level2">

<p>
The <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> usage is rather standard for menus.
</p>
<p><u>The following keys take actions of menu</u>:
</p>
<ul>
<li class="level1"><div class="li"> <em>Down</em> or <em>Tab</em> to select a next item</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Up</em> or <em>Shift+Tab</em> to select a previous item</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Space, Enter, Return</em> to execute a selected item</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>hotkeys 1,2,3..a,b..</em> to execute items quickly</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>hotkeys F1, F2, .. F12</em> (if set) to execute items quickly</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Esc</em> to close a menu</div>
</li>
</ul>

<p>
<u>The following hot keys can be also used</u>:
</p>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+P</em> to change a project's directory, set/view a menu's color scheme and geometry</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+T</em> to switch on/off 'stay on the top' mode</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+E</em> to edit a current menu file</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+R</em> to re-read a current menu file and restart its 'autorun' list</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+D</em> to delete other <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> applications (sort of clearance)</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+Right</em> to increase a menu's width</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+Left</em> to decrease a menu's width</div>
</li>
</ul>

<p>
If not redefined in the menu, F1 calls 'About' dialog where 'Help' button displays this wiki.
</p>

<p>
You can use the right and the left arrow keys for calling and closing a submenu respectively.
</p>

<p>
The popup menu will appear after your right click. You can select the
described actions from it.
</p>

<p>
Any menu can be dragged on the screen if it's grasped by the top space.
</p>

<p>
<u>The internal editor of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> provides the popup menu and the following hot keys</u>:
</p>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+D</em> to double a current line or a selected text</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+Y</em> to delete a current line</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Alt+Up</em> to move a current line or a selected text up</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Alt+Down</em> to move a current line or a selected text down</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+F</em> to find a first occurence of string</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>F3</em> to find a next occurence of string </div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+Z</em> to undo changes</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+Shift+Z</em> to redo changes</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Ctrl+W</em> to save and exit</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em>Esc</em> to exit without saving</div>
</li>
</ul>
<p>After saving a menu or executing <a href=#bash_scripts2>an edited command</a> (grep, wget), the edit position is saved in [OPTIONS] so that it's restored at editing next time.</p>
<p>

<p><br></p></div>

<h2 id="detailed_editors">Usage in editors and IDE</h2>
<div class="level2">
<p>
Some editors and IDE provide a full set of data for <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>, while others only partly.
</p>

<p>
In general, any editor providing a sort of %f (and %s as desirable) wildcard for its external tools or plugins can take advantage of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>.
</p>

<p>
For example, <a href="http://mate-desktop.org">Pluma</a>, a text editor for <a href="http://mate-desktop.org">MATE Desktop Environment</a>, provides %f only. So, we can set in its menu <code>Service / Manage External Tools...</code> a command like this:
<pre class="code">
#!/bin/sh
tclsh "~/PG/e_menu/e_menu.tcl" "md=~/DATA/e_menu/menus" m=menu.mnu "f=$PLUMA_CURRENT_DOCUMENT_PATH" "PD=~/PG/e_menu_PD.txt" s=? h=~/DOC/www.tcl.tk/man/tcl8.6
</pre>
</p>

<p>
Almost the same settings are available in <a href="https://wiki.gnome.org/Apps/Gedit">Gedit</a>, a text editor for <a href="https://www.gnome.org/">GNOME Desktop Environment</a>. In its <code>External Tools</code>, we can set  a command like this:
<pre class="code">
#!/bin/sh
tclsh "~/PG/e_menu/e_menu.tcl" "md=~/DATA/e_menu/menus" m=menu.mnu "f=$GEDIT_CURRENT_DOCUMENT_PATH" "PD=~/PG/e_menu_PD.txt" s=? h=~/DOC/www.tcl.tk/man/tcl8.6
</pre>
</p>
<p>
Of course, all pathes in the commands are specific for a machine.
</p>

<p><br></p></div>

<h2 id="detailed_alited">Usage in alited editor</h2>
<div class="level2">

<p>
The <A href="../../tcl/alited/index.html">alited</A> is a natural editor for integrating with <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>. After all, both have been written by the same guy, me:)
</p>

<p>
Thus, <A href="../../tcl/alited/index.html">the description of alited</A> is the best guide for using <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> in it.
</p>

<p>
Here is presented alited's screenshot only, where the top toolbar contains <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> by itself and other its tools:
</p>

<p>
<img src="files/em-alited.png" class="media" alt="e_menu in TKE editor">
</p>


<p><br></p></div>

<h2 id="detailed_tke">Usage in TKE editor</h2>
<div class="level2">

<p>For  <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> to be used in <a href="https://github.com/phase1geo/tke" title="TKE
editor">TKE editor</a>, the <a href="https://github.com/phase1geo/tke" title="TKE
editor">TKE</a> should be installed from <a href="https://github.com/phase1geo/tke">.tgz archive</a> (most likely, you would not be able to run <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> from the stand-alone <code>tke.exe</code> in Windows). Then
you should unpack the <a href="https://github.com/phase1geo/tke">archive file</a> and run <code>tclsh install.tcl</code> under the directory of unpacked <a href="https://github.com/phase1geo/tke" title="TKE
editor">TKE</a>. If some Tcl packages were absent, the installer would notice it with its error messages. In those cases you should install the required package(s) and repeat <code>tclsh install.tcl</code> for <a href="https://github.com/phase1geo/tke" title="TKE
editor">TKE</a>.</p>
<p>
The main feature of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> in <a href="https://github.com/phase1geo/tke" title="TKE
editor">TKE</a> is its implementation as <a
href="https://github.com/phase1geo/tke/tree/master/plugins/" title="TKE's
plugins">TKE plugin</a>. As a result, almost all of environment details presented by
<a href="https://wiki.tcl-lang.org/" title="https://wiki.tcl-lang.org"
rel="nofollow">Tcl/Tk</a> and <a href="https://github.com/phase1geo/tke" title="TKE
editor">TKE</a> can be
passed to <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> as
 arguments (including s0-s9, x0-x9, y0-y9, z0-z9).
</p>
<p>
	As for now available, the additional facilities include:
</p>
<p>
<ul>
<li class="level1"><div class="li">executing the current Tcl script in tclsh (with selected text as arguments of script)
</div></li>
<li class="level1"><div class="li">executing the selected Tcl code in tclsh
</div></li>
<li class="level1"><div class="li"><em>z6=</em> argument equaling to a 'left'
edited file (on TKE file bar); used to compare with current file
</div></li>
<li class="level1"><div class="li"><em>z7=</em> argument equaling to a 'right'
edited file (on TKE file bar); used to compare with current file
</div></li>
<li class="level1"><div class="li"><em>ts=1</em> argument when there is
'a real selected text' (not just a caret set on a word)
</div></li>
</ul>

</p>

<p>
The last option is related to special comments in current text:

<pre class="code">#ARGS0: arguments
#ARGS1: arguments-1
#ARGS2: arguments-2
...
#ARGS99: arguments-99</pre>
</p>

<p>
The first found of such strings is used as arguments for calling <em>'Run me'</em> of
<em>menu.mnu</em>.
<br> Others can be disabled for
example this way:
<pre class="code">#-ARGS0: -k 1 test/test12ini
#-ARGS1: -mode exact -backup 0 tasks/mulster-tke
#ARGS10: -mode exact -backup 0 tasks/mulster-geany</pre>
Here only <em>#ARGS10</em> would be used for the  <em>'Run me'</em> (as <em>%AR</em>
wildcard) that in this case would run the edited <em>mulster.tcl</em> as follows:
<pre class="code">tclsh mulster.tcl -mode exact -backup 0 tasks/mulster-geany</pre>
</p>

<p>
If there is a real selection in TKE text, then <em>ts=1</em> and </em>%AR</em>
value equals to the selection. Thus, <em>#ARGS</em> doesn't work at the real selection of text.
</p>

<p>
<img src="files/em-tke.png" class="media" alt="e_menu in TKE editor">
</p>

<p>
The "ts=" option of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> can be also used with <a href=#detailed_wing>Wing IDE</a>, because of its cool API for plugin scripts. </p>

<p>
There isn't a way to define "ts=" in <a href=#detailed_pycharm>PyCharm</a>, <a href=#detailed_geany>Geany</a> and <a href=#detailed_kate>Kate</a>, thus the </em>%AR</em>
wildcard of their <a href="#" class="wikilink1" title="Table of
Contents">e_menu</a> can get only a <em>#ARGS</em> value.
</p>

<p>
TKE's <a href="#" class="wikilink1" title="Table of
Contents">e_menu</a> provides <em>TF=tempfile</em> argument where <em>tempfile</em> is a name of temporary file containing all of selected text. It can be used (as <em>%TF</em> wildcard) by those commands that need the whole selection 'as is'. In TKE, <em>s=%s</em> argument supplies only first non-empty string of selection.
</p>

<p>
Another specific feature of TKE's <a href="#" class="wikilink1" title="Table of
Contents">e_menu</a> is an option available in "Edit / Preferences / Plugins". This option switches on / off saving a current file before running the plugin.
</p>

<p><br></p></div>

<h2 id="detailed_kate">Usage in Kate editor</h2>
<div class="level2">
<p>
For KDE Applications 19.12 release, it's possible to use External Tools in <a href="https://kate-editor.org" title="Kate editor">Kate editor</a>. The tools may include <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> as well.
</p>
<p>
The <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> in <a href="https://kate-editor.org" title="Kate editor">Kate</a> is customized this way:
<ul>
<li>open <em>Settings/ Configure Kate.../ External Tools</em></li>
<li>add "e_menu" item to <em>External tools</em></li>
<li>enter the data for <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>, mostly <code>tclsh</code> and <code>e_menu.tcl arguments</code></li>
</ul>
</p>
<p>The arguments for <code>tclsh</code> may be as follows:
<pre class="code">
~/PG/e_menu/e_menu.tcl md=menus m=menu.mnu c=12 "f=%{Document:FilePath}" "s=%{Document:Selection:Text}" ln=%{Document:Cursor:Line}+1 cn=%{Document:Cursor:Column}+1
</pre>
<b>Note</b>: in <a href="https://kate-editor.org" title="Kate editor">Kate</a>, lines and columns are numerated from 0, so that <em>ln=</em> and <em>cn=</em> arguments are incremented by 1.
</p>
<p>
Other settings are seen in the picture below:
<br><br>
<img src="files/em-kate0.png" class="media" alt="Settings for e_menu in Kate editor">
</p>
<p>
<br>
In <em>Settings / Configure Keyboard Shortcuts</em>, the shortcut for <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> may be customized.
</p>
<p>
And below is a picture of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> called from <a href="https://kate-editor.org" title="Kate editor">Kate</a>:
<br><br>
<img src="files/em-kate.png" class="media" alt="e_menu called from Kate editor">
</p>

<p><br></p></div>

<h2 id="detailed_geany">Usage in Geany IDE</h2>
<div class="level2">
<p>
The main problem of using <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> in <a
href="https://www.geany.org" title="Geany IDE">Geany</a> is that <em>the official
Geany</em> doesn't provide %f and %d wildcards for the context command. As
we've seen, these wildcards are of main interest for <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>. See for example <a
href="https://github.com/geany/geany/issues/1836">
https://github.com/geany/geany/issues/1836</a>.
</p>

<p>
Another issue of Geany is that its context command is disabled when %s
(selected text) is empty. It's rather serious restriction for using <a href="#"
class="wikilink1" title="Table of Contents">e_menu</a>. What
if we want simply to view SCM status of project? For this action we need no
selected text at all.
</p>

<p>
At last, Geany might save a current file before running the context command
(if it includes %f, %d and other file-related wildcards), as it behaves
before running Compile/Build/Run.
</p>

<p>
Shortly, our good old <em>official Geany</em> needs to be unofficialized a bit.
</p>

<p>
There is already a version of Geany with the proposed modification. Download its code by <a href=https://github.com/aplsimple/geany>this link</a>. Still, this version may be obsolete a little.
</p>

<p>
As for new versions of Geany, you can do the following:
</p>

<p>
<ul>
<li class="level1"><div class="li">Clone Geany with:
  <pre class="code">git clone git://github.com/geany/geany.git geany</pre>
as recommended in:
   <a href="https://www.geany.org/Download/Git">https://www.geany.org/Download/Git</a>
</div></li>
</ul>

<ul>
<li>Download a tool to modify Geany's code, by the link <a href="http://chiselapp.com/user/aplsimple/repository/mulster/download">mulster.zip</a>.</li>
</ul>

<ul>
<li class="level1"><div class="li">Replace all files in
<em>mulster/tasks/geany/src</em> directory of unpacked <a
href="http://chiselapp.com/user/aplsimple/repository/mulster/download">mulster.zip</a> with the
Geany clone's ones (i.e. from <em>geany/src</em>).
</div></li>
</ul>

<ul>
<li class="level1"><div class="li">Run in console, under <em>mulster</em>
directory, the following command:
<pre class="code">tclsh mulster.tcl -mode exact -backup 0 tasks/mulster-geany
</pre>
All replacements should be done, i.e. you should see all <em>"Replacement #1: 1
done"</em>.<br>If any not done, the console messages notify about this. In
such case, the whole quest is cancelled :((

</div></li>
</ul>

<ul>
<li class="level1"><div class="li">Copy all <em>mulstered</em> files from
<em>mulster/tasks/geany/<b>mulstered</b></em> back to <em>geany/src</em>).
</div></li>
</ul>

After the modifications done, compile and install the modified Geany as
recommended in <a
href="https://www.geany.org/Support/BuildingFromSource">https://www.geany.org/Support/BuildingFromSource</a>.
<br>On Linux, simply run the commands in <em>geany</em> directory:
<pre class="code"># possibly, "make distclean" is not mandatory for the last Geany versions
make distclean
./autogen.sh
./configure
# or possibly
./configure --disable-html-docs
make
sudo make install
</pre>
While building Geany, note if any library is absent, by the final messages. If there is a warning about an absent library, it needs to be installed.
<br>
For Geany 1.36 in Debian 10, I had indeed to install a few packages,
some of them were not of the same name as were messaged (<em>synaptic</em>
being helpful at that).
<br>Specifically, I'd installed:
<pre class="code">  autoconf
  intltool
  libtool
  libglib2.0-dev
  libgtk-3-dev
</pre>
</div>
</p>

<p>
Uff. Hopefully our efforts were successful and we can enjoy our <em>good new</em> Geany:
</p>

<p>
<img src="files/geany1.png" class="media" alt="">
</p>

<br>
<p>
... as confirmed by the picture:

<p>
<img src="files/e_menu2.png" class="media" alt="">
</p>

<br>
<p>See also <a href="#introduction_2">Introduction</a> about customizing Geany's context action.
</p>

<p><br></p></div>

<h2 id="detailed_wing">Usage in Wing IDE</h2>
<div class="level2">
<p>
<a href="http://www.wingware.com/" title="Wing Python IDE">Wing Python IDE</a> provides so good API for extensions that making its <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> plugin is nearly trivial. The flexible API allows <a href="http://www.wingware.com/" title="Wing Python IDE">Wing</a>'s plugins to implement the same things as <a href="#detailed_tke">TKE</a>'s ones do. Perhaps even more. For example, it's possible to separate a text selection from a simple placing the caret on a word.
</p>
<p>
Your actions in <a href="http://www.wingware.com/" title="Wing Python IDE">Wing</a> may be as follows:
</p>
<p>
<b>1.</b> In <b>scripts</b> subdirectory of Wing's settings directory (e.g. the free <a href="http://www.wingware.com/downloads/wing-personal" title="Free Wing Personal 7">Wing Personal 7</a> stores its settings in <em>~/.wingpersonal7</em>) create the following <b>emenu.py</b> file:
<pre class="code">import os
import wingapi
def emenu():
  app = wingapi.gApplication
  edi = app.GetActiveEditor()
  doc = app.GetActiveDocument()
  fnam = doc.GetFilename()
  dnam = os.path.dirname(fnam)
  start, end = edi.GetSelection()            # positions of selection
  ln = doc.GetLineNumberFromPosition(start)  # current line
  lstart = doc.GetLineStart(ln)              # begin of current line
  sel = doc.GetCharRange(start, end)         # selected text
  ts = 'ts=1'
  if sel=='':    # if no selection, get a current word under caret
      ts = 'ts=0'
      for i in range(start,lstart,-1):
          ch = doc.GetCharRange(i-1,i)
          if str.isalnum(ch) or ch=='_':
              sel = ch+sel
          else:
              break
      for i in range(start+1,doc.GetLineEnd(ln)+1):
          ch = doc.GetCharRange(i-1,i)
          if str.isalnum(ch) or ch=='_':
              sel = sel+ch
          else:
              break
  app.AsyncExecuteCommandLine('tclsh', '~', '/home/apl/.tke/e_menu/e_menu/e_menu.tcl', \
                            'md=~/.tke/plugins/e_menu/menus', 'm=menu.mnu', 'PD=~/PG/e_menu_PD.txt', 'c=17', \
                            's1='+dnam, "z5=~", ts, 'f='+fnam, 'TF='+fnam, 'd='+dnam, 's='+sel, 'h=~/DOC/www.tcl.tk/man/tcl8.6')</pre>
<b>Note</b>: you should write the correct pathes in the last line above, specifically for <em>e_menu.tcl</em> as well as <em>md=</em> and <em>PD=</em> arguments explained in <a href="#calling_e_menu">Calling e_menu</a>.
</p>
<p>
<b>2.</b> In <em>Edit / Preferences</em> menu item, select <em>IDE Extension Scripting</em> and insert a new record containing <em>emenu.py</em> (name of the script).
</p>

<p>
<b>3.</b> In <em>Edit / Preferences</em> menu item, select <em>User interface / Keyboard</em> and insert a new record containing:
<ul><li><em>F1</em> (or <em>Alt+M</em>) - just press the key in <em>Key</em> field</li>
<li><em>emenu</em> in <em>Command</em> field</li>
</ul>
</p>

<p>
That's all. For calling <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> press F1 (and/or Alt+M if you mapped so). Also you may run <em>Edit / Command by Name</em> menu item and enter <em>emenu</em> to call <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>.
</p>

<p>
Thus, <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> is available in <a href="http://www.wingware.com/downloads/wing-personal" title="Free Wing Personal 7">Wing Personal 7</a>:
<br>
<img src="files/em-wing.png" class="media" alt="e_menu called from Wing Personal 7">
</p>

<p>
By the way, I've found a rather annoying issue with <a href="http://www.wingware.com/" title="Wing Python IDE">Wing Python IDE</a> in my Xfce WM, namely the Wing's window is enlarged from session to session (by 10 pixels to bottom and right). The following lines of <em>Wing's project files</em> (listed in ~/.wingpersonal7/recent-projects) are responsible for this artefact:
<pre class="code">        'window-alloc': (0,
                       26,
                       1506,
                       830)}]}</pre>
Of course, they are specific for each display. But once customized, these lines can be easily restored before running <a href="http://www.wingware.com/" title="Wing Python IDE">Wing</a>, e.g. by the following command file:
<pre class="code">
#! /bin/bash
input="/home/me/.wingpersonal7/recent-projects"
while IFS= read -r line
do
  line=${line:5:999}
  tclsh ~/PG/mulster/mulster.tcl -backup ~/BAK -keep 1 -infile "$line" "~/PG/mulster/tasks/mulster-wing"
done < "$input"
wing-personal7.1 &
</pre>
</p>
<p>
which uses the above mentioned <a
href="http://chiselapp.com/user/aplsimple/repository/mulster/download">mulster</a> and its ini-file <em>"~/PG/mulster/tasks/mulster-wing"</em>containing:
<pre class="code">
# try #1
IN=BEGIN
      'window-alloc': (0,
                       26,
                       1506,
                       830)}]}
IN=END
OUT=BEGIN
      'window-alloc': (0,
                       26,
                       1486,
                       810)}]}
OUT=END

# try #2
IN=BEGIN
      'window-alloc': (0,
                       26,
                       1496,
                       820)}]}
IN=END
OUT=BEGIN
      'window-alloc': (0,
                       26,
                       1486,
                       810)}]}
OUT=END</pre>
</p>

<p><br></p></div>

<h2 id="detailed_pycharm">Usage in PyCharm IDE</h2>
<div class="level2">
<p>
The great and awful <a href="https://www.jetbrains.com/pycharm/" title="PyCharm IDE">PyCharm IDE</a> would not be such that, if it couldn't provide a lot of facilities for extensions.
</p>
<p>
Our <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> is plugged into <a href="https://www.jetbrains.com/pycharm/" title="PyCharm IDE">PyCharm</a> this way:
</p>
<p>
<ul>
<li>Open <em>File / Settings</em> menu item.</li>
<li>In <em>Tools / External tools</em> add a new record. Then enter the following:
<ul>
<li>Name: <em>emenu</em></li>
<li>Description: <em>blah-blah</em></li>
<li>Program: <em>tclsh</em></li>
<li>Arguments: <em>/home/apl/.tke/e_menu/e_menu/e_menu.tcl "md=~/.tke/plugins/e_menu/menus" m=menu.mnu "PD=~/PG/e_menu_PD.txt" "s1=$FileDir$" "z5=~" ln=$LineNumber$ cn=$ColumnNumber$ ts=1 "TF=$FilePath$" "f=$FilePath$" "d=$FileDir$" "s=$SelectedText$" "c=12"</em>
<br>(all pathes should be correct, specifically <em>e_menu.tcl</em> as well as <em>md=</em> and <em>PD=</em> arguments explained in <a href="#calling_e_menu">Calling e_menu</a>)</li>
<li>Working directory: <em>$FileDir$</em></li>
<li>Open console for tool output: <em>unchecked</em> (check only for debugging)</li>
</li>
</ul>
<li>Set a hot key for <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> in <em>File / Settings / Keymap / External tools</em>, for example Alt+M.</li>
</ul>
</p>
<p>
You may also customize the toolbar by right-clicking it and adding (<em>Add after...</em>) the <em>External tools / emenu</em>.
</p>

<p>
Thus, <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> is available in <a href="https://www.jetbrains.com/pycharm/" title="PyCharm IDE">PyCharm</a>:
<br>
<img src="files/em-pycharm.png" class="media" alt="e_menu called from PyCharm IDE">
</p>

<p>
By the way, I didn't find the "current word under caret" among PyCharm's macros. It seems <a href="http://www.wingware.com/" title="Wing Python IDE">Wing</a> is a good competitor for <a href="https://www.jetbrains.com/pycharm/" title="PyCharm IDE">PyCharm</a> as for extensions. Perhaps, for the rest as well.
</p>


<p><br></p></div>

<h2 id="detailed_fm">Usage in file managers</h2>
<div class="level2">
<p>
There are at least four file managers that allow to run <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> and apply its commands to files and directories.
</p>
<br id=caja_fm>
<p>
<b>1.</b> The <a href="https://github.com/mate-desktop/caja" title="Caja file manager">Caja</a> file manager stores its scripts in the <em>~/.config/caja/scripts</em> directory. Put there the following script:
<pre class="code">#! /bin/bash
# Runs e_menu. Install this into ~/.config/caja/scripts

tclsh "~/.tke/e_menu/e_menu/e_menu.tcl" "md=~/.tke/plugins/e_menu/menus" m=menu.mnu \
  "f=$CAJA_SCRIPT_SELECTED_FILE_PATHS" "d=$PWD" "PD=~/PG/e_menu_PD.txt" "s1=$PWD" \
  "TF=$CAJA_SCRIPT_SELECTED_FILE_PATHS" "z2=$CAJA_SCRIPT_SELECTED_FILE_PATHS" "z5=~" "c=0" &amp; </pre>
... and call the script from Caja's popup menu to process a current file or directory with any thinkable command.
</p>
<p>
Thus, <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> is available in <a href="https://github.com/mate-desktop/caja" title="Caja file manager">Caja</a> file manager:
<br>
<img src="files/em-caja.png" class="media" alt="e_menu called from Caja file manager">
</p>
<br id=nautilus_fm>
<p>
<b>2.</b> The <a href="https://github.com/GNOME/nautilus" title="Nautilus file manager">Nautilus</a> file manager stores its scripts in the <em>~/.local/share/nautilus/scripts</em> directory. Put there the following script:
<pre class="code">#! /bin/bash
# Runs e_menu. Install this into ~/.local/share/nautilus/scripts

tclsh "~/.tke/e_menu/e_menu/e_menu.tcl" "md=~/.tke/plugins/e_menu/menus" m=menu.mnu \
  "f=$NAUTILUS_SCRIPT_SELECTED_FILE_PATHS" "d=$PWD" "PD=~/PG/e_menu_PD.txt" "s1=$PWD" \
  "TF=$NAUTILUS_SCRIPT_SELECTED_FILE_PATHS" "z2=$NAUTILUS_SCRIPT_SELECTED_FILE_PATHS" "z5=~"  "c=12" &amp; </pre>
... and call the script from Nautilus' popup menu to process a current file or directory with any thinkable command.
</p>
<p>
Thus, <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> is available in <a href="https://github.com/GNOME/nautilus" title="Nautilus file manager">Nautilus</a> file manager:
<br>
<img src="files/em-nautilus.png" class="media" alt="e_menu called from Nautilus file manager">
</p>
<br id=nemo_fm>
<p>
<b>3.</b> The <a href="https://github.com/linuxmint/nemo" title="Nemo file manager">Nemo</a> file manager stores its scripts in the <em>~/.local/share/nemo/scripts</em> directory. Put there the following script:
<pre class="code">#! /bin/bash
# Runs e_menu. Install this into ~/.local/share/nemo/scripts

tclsh "~/.tke/e_menu/e_menu/e_menu.tcl" "md=~/.tke/plugins/e_menu/menus" m=menu.mnu \
  "f=$NEMO_SCRIPT_SELECTED_FILE_PATHS" "d=$PWD" "PD=~/PG/e_menu_PD.txt" "s1=$PWD" \
  "TF=$NEMO_SCRIPT_SELECTED_FILE_PATHS" "z2=$NEMO_SCRIPT_SELECTED_FILE_PATHS" "z5=~" "c=12" &amp; </pre>
... and call the script from Nemo's popup menu to process a current file or directory with any thinkable command.
</p>
<p>
<b>Note</b>: you should write the correct pathes in the above scripts, specifically for <em>e_menu.tcl</em> as well as <em>md=</em> and <em>PD=</em> arguments explained in <a href="#calling_e_menu">Calling e_menu</a>.
</p>
<p>
Thus, <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> is available in <a href="https://github.com/linuxmint/nemo" title="Nemo file manager">Nemo</a> file manager:
<br>
<img src="files/em-nemo.png" class="media" alt="e_menu called from Nemo file manager">
</p>
<br id=thunar_fm>
<p>
<b>4.</b> The <a href="https://docs.xfce.org/xfce/thunar/start" title="Thunar file manager">Thunar</a> file manager allows you to have the custom actions that are called with popup menu or with hotkeys.
<p>
</p>
You can enter the <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> action by this way:
<ul>
<li class="level1"><div class="li"> choose "Edit / Configure custom actions..." <a href="https://docs.xfce.org/xfce/thunar/start" title="Thunar file manager">Thunar</a> menu item</div></li>
<li class="level1"><div class="li"> choose "Add a new custom action" (<code>+</code> button) </div></li>
</li>
<li class="level1"><div class="li"> enter the data of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>:</div>
<ul>
<li class="level1"><div class="li"> <em>Name</em>: <code>e___menu</code> (enter three "_" to view one)</div></li>
<li class="level1"><div class="li"> <em>Description</em>: <code>any info</code></div></li>
<li class="level1"><div class="li"> <em>Command</em>: something like<br> <code> tclsh "~/PG/github/e_menu/e_menu.tcl" m=menu.mnu "f=%f" "d=%d" md=~/PG/e_menu/MNU/menus PD=~/PG/e_menu/PD.txt c=12</code></div></li>
<li class="level1"><div class="li"> <em>Keyboard shortcut</em>: press any keys in this field, e.g. <code>Alt+M</code></div></li>
<li class="level1"><div class="li"> <em>Icon</em>: choose <code>src/e_menu.png</code> from <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> directory</div></li>
<li class="level1"><div class="li"> <b>Appearance Conditions</b> tab: check all checkboxes for opening <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> on any files</div></li>
</ul>
</li>
</ul>

<p>
<b>Note</b>: you should write the correct pathes in the above <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> command, specifically for <em>e_menu.tcl</em> as well as <em>md=</em> and <em>PD=</em> arguments explained in <a href="#calling_e_menu">Calling e_menu</a>.
</p>
<p>
As you can see from the picture below, <a href="https://docs.xfce.org/xfce/thunar/start" title="Thunar file manager">Thunar</a> passes a file name in %f single-quoted. This peculiarity of <a href="https://docs.xfce.org/xfce/thunar/start" title="Thunar file manager">Thunar</a> is correctly handled in <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> v1.43 or later.
</p>
<p>
Thus, <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> is available in <a href="https://docs.xfce.org/xfce/thunar/start" title="Thunar file manager">Thunar</a> file manager:
<br>
<img src="files/em-thunar.png" class="media" alt="e_menu in Thunar file manager">
</p>


<p><br></p></div>

<h2 id="detailed_tcl">Usage in Tcl scripts</h2>
<div class="level2">

<p>
As mentioned <a href=#s_menu1>above</a>, instead of <em>e_menu.tcl</em> you can use <em>s_menu.tcl</em> or even a stand-alone <a href=#download>e_menu executable</a> which provides a single window <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> application.
</p>

<p>
The main features of these two approaches:
<ul>
<li><em>e_menu.tcl</em> makes a separate application for each child menu, while <em>s_menu.tcl</em> makes a child menu in the same application</li>
<li>thus, the performance of <em>s_menu.tcl</em> at creating child menus is better than <em>e_menu.tcl</em>'s</li>
<li>if "On top" mode is set, <em>e_menu.tcl</em> makes all hierarchy of menus to be visible; <em>s_menu.tcl</em> shows only a last level menu</li>
<li><em>s_menu.tcl</em> (or <em>s_menu</em>) is good to be called and to stay permanently on the screen, say, at right side; <em>e_menu.tcl</em> is good to be called from time to time</li>
<li>the parent menus of both <em>e_menu.tcl</em> and <em>s_menu.tcl</em> behave independently on its children as for "Project..." settings</li>
<li><em>e_menu.tcl</em> allows to call <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> as a "mega-widget" from your own Tcl/Tk code; at that <em>e_menu.tcl</em> behaves just like <em>s_menu.tcl</em></li>
</ul>
</p>

<p>
The last feature is implemented as shown below:

<pre class="code">
set ::e_menu_dir "where e_menu.tcl is located"
source [file join $::e_menu_dir e_menu.tcl]

# ...

::em::main -prior 1 -modal 1 -remain 1 -noCS 1 \
  "md=~/em/menus" m=utils.mnu "PD=PD.txt" \
  "f=$filename" "s=$selection" \
  h=~/DOC/www.tcl.tk/man/tcl8.6 t=1 w=25 g=+420+170
</pre>
</p>

<p>
At first, you set <code>::e_menu_dir</code> global variable to be equal a location of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>, then <code>source e_menu.tcl</code>.
</p>

<p>
To call <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>, its <code>::em::main</code> procedure is used. Its four options mean the following:
<ul>
<li><code>-prior 1</code> allows to use variables' values and settings from a previous call</li>
<li><code>-modal 1</code> makes <a href="#" class="wikilink1" title="Table of Contents">e_menu</a>'s window to be modal</li>
<li><code>-remain 1</code> allows to go through a whole hierarchy of menus down/up (a root menu to be closed only by force) </li>
<li><code>-noCS 1</code> disables changing a color scheme in "Project..." of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a></li>
</ul>
Other arguments of <code>::em::main</code> are <a href="#calling_e_menu">options of e_menu</a>.
</p>

<p>
If you use a color scheme of <a href="../pave/index.html">apave</a> package, you should take into account a possibility of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> to change it. So, you should call <code>::em::main</code> as follows:
</p>

<p>
<pre class="code">
set cs [pave csCurrent]
::em::main -prior 1 -modal 1 -remain 1 \
  "md=~/em/menus" m=utils.mnu "PD=PD.txt" \
  "f=$filename" "s=$selection" \
  h=~/DOC/www.tcl.tk/man/tcl8.6 t=1 w=25 g=+420+170
set cs2 [pave csCurrent]
if {$cs!=$cs2} {
  # some possible actions at changing CS
}
</pre>
You can also disable the color scheme changes with <code>-noCS 1</code> option. In that case, all of your menus should be of the same color scheme as your application or be not supplied with <code>c=</code> option at all.
</p>

<p>
<br>

</p>

</div>
<h2 id="making_menus_project_sensitive">Making menus project sensitive</h3>
<div class="level3">


<br>
<p>
<b>1. %PN wildcard.</b>
</p>
<p>
In the simplest case, <span class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> allows to use a tail of working directory path as <em>project name</em>.
</p>

<p>
E.g. if you started a project like this:
</p>
<pre class="code">
  cd /home/me/PG/projects/my_best_project
  tclsh /home/me/UTILS/e_menu.tcl [...]
</pre>

<p>
then <code>my_best_project</code> will be <em>project name</em>.
</p>

<p>
This name can be used as <em>%PN</em> wildcard in the calling string of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> as well as in the menu commands.
</p>
<pre class="code">  Note: you should use %%PN instead of %PN in Windows' command line.</pre>

<p>
So, you can have a lot of menus in <em>%PN</em> subdirectory of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> that are specific for your current project and the one and only <abbr title="A fast and lightweight IDE">Geany</abbr> context command for all projects like this:
</p>
<pre class="code"> tclsh /home/me/UTILS/e_menu.tcl "s=%s" "m=%PN/main.mnu" ...</pre>

<p>
It would open the main menu of your current project as <abbr title="A fast and lightweight IDE">Geany</abbr>'s context command.
</p>

<p>
Also you can set in the calling string of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> “PN=projectname” argument that would override a value of <em>%PN</em> wildcard taken from a working directory. It may be suitable when your different projects are named equally (e.g. <em>/…/Java/Project1</em> and <em>/…/JavaScript/Project1</em>).
</p>

<br>
<p id=pd_wildcard>
<b>2. %PD wildcard.</b>
</p>

<p>
In the menus, the <em>%PD</em> wildcard is often used. It is defined as "a directory of current project". If you work with one project, you can rightly set the "PD=" argument of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> as "PD=your-project-dir".
</p>

<p>
But what if your edited files are from various projects (hence various directories)? In such case you may define "PD=" argument as a name of file containing the list of project directory names.
</p>
<p>
This is recommended and best way indeed. You run <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> with the <em>"PD=/home/me/PD-dirs.txt"</em> argument where <em>PD-dirs.txt</em> contains for example:
</p>
<p>
<pre class="code">
  # list of project directories for e_menu

  # directory of various projects
  /home/me/PG/projects/my_proj1
  /home/me/PG/projects/my_proj2
  /home/me/PG/projects/my_proj3

  # directory of APP clone
  /home/me/APP-clone/APP-clone

  # directory of APP data (incl. config, plugins, themes)
  /home/me/.APP </pre>
</p>
<p>

The blank lines and the # comments are ignored. All other lines are considered to be directory names of your projects.
</p>
<p>

When your edited file is located in one of those directories or its subdirectory, the root directory name is used as <em>%PD</em> wildcard of menu.
</p>
<p>
While editing a file you would not break your head with questions like <em>"what a project is open? which project this file is of? is its project open? may I open files
from other projects?"</em> and so on. The main thing is the registration of projects' directories in <em>PD-dirs.txt</em> or whatever it's named.
The <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> would know the project your file is from and as such it would perform the commands related to your file and its project.
</p>
<p>The corresponding tailing part of <em>%PD</em> is used as <em>%PN</em> wildcard.
</p>

<br>
<p>
<b>3. "Project..." dialog.</b>
</p>

<p>The "Project..." dialog is open with pressing Ctrl+P or choosing "Project..." from the popup menu. It looks like this:
</p>

<p>
<img src="files/project.png" class="media" alt="'Project...' dialog">
</p>

<p>The upper combobox lists projects' directories of some <em>PD.txt</em> file that is passed to <a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> as <em>PD=</em> argument. This file may be edited just in the "Project..." dialog after clicking on the right button.
</p>
<p>You can choose any project from the combobox which will be active (as <a href=#pd_wildcard>%PD wildcard</a>) throughout the menu and its children.
</p>
<p>
Other features of the "Project..." dialog allow:
<ul>
<li>to change the menu's color scheme</li>
<li>to change the menu's geometry</li>
<li>to change the menu's type:
<ul><li><em>topmost</em> - to set it on the top of screen</li>
<li><em>dialog</em> - to set it as a standard dialog window</li>
<li><em>dock</em> - to set it as a dock window without a title</li>
<li><em>desktop</em> - to set it as a window on the desktop</li>
</ul>
</ul>
</p>
<p>The "Use it" checkboxes allow to save these settings in the menu's [OPTIONS] so that the settings will be applied to the next <a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> sessions.
</p>
<p>
For example, the <em>dock</em> type of <a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> looks like this:
</p>

<p>
<span>&nbsp;&nbsp; on the right:</span>
<img src="files/dock2.png" class="media" alt="dock type of e_menu">
&nbsp;&nbsp; or over the editor: <img src="files/dock.png" class="media" alt="dock type of e_menu">
</p>

<p>
</p>

<br>

<p><br></p></div>

<h2 id="tips_and_hints">Tips and hints</h2>
<div class="level2"><p><br></p></div>

<h3 id="what_s_all_those_r_re_rw_s_se_sw_m_me_mw_mean">What's all those R, RE, RW, S, SE, SW, M, ME mean?</h3>
<div class="level3">

<p>
<strong> R </strong> stands for <em>run a program by itself</em>
</p>

<p>
<strong> S </strong> stands for <em>run a command by shell in console</em>
</p>

<p>
<strong> M </strong> stands for <em>call a menu</em>
</p>

<p>
<strong> E </strong> stands for <em>exit after calling action</em>
</p>

<p>
<strong> W </strong> stands for <em>wait for completion of action (RW / SW)</em>
</p>

<p>
Note:
<ul>
<li>A first command in batch of commands sets the main "exit / no exit" mode (and <a href=#ornamentdetails>"ornament" details</a>).
 For example, if there is the following batch of commands:
<pre class="code">
 RE: Run me RE: cd %d
  R: Run me R: command1
  R: Run me R: command2
  S: Run me S: shell_command
</pre>
then the whole batch will be executed without exiting, but after the last <code>shell_command</code> the exit will be performed anyway.
</li>
<li>Any command in a batch can be of RE/SE type, which means that after its execution the exit will be performed immediately. Other commands will be unreachable. </li>
<li>A bit peculiar is <code>%IF .. %THEN .. %ELSE</code> command. If any clause of it (<code>%THEN</code> or <code>%ELSE</code>) were executed, it is considered being successful and other commands are skipped. At that, if the <code>%IF</code> command is set as RE/SE, the exit will be performed immediately after it.</li>
<li>When "On top" mode is on, no exit is performed after RE:, SE: and ME:
commands. The menu will remain on the screen till you close it. It's useful when you want to access a whole hierarchy of menus.</li>
<li>Starting from <a href="#" class="wikilink1" title="Table of
Contents">e_menu v3.0</a></span>, <code>MW</code> menu type is not actually used. It's equal to <code>M</code> type, i.e. a parent menu doesn't close and doesn't wait a child menu to be closed.</li>

</ul>
</p>


<p>
<br>

</p>

</div>

<h3 id="changing_menus_look_and_feel">Changing menus' look and feel</h3>
<div class="level3">

<p>
Let me remind you how <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> is called:
<pre class="code"> tclsh ~/UTILS/e_menu/e_menu.tcl "s=%s" "m=menu.mnu" [options]</pre>
where <code>[options]</code> can be set also in [OPTIONS] section of <code>menu.mnu</code> file.
</p>
<p>
The following <a href=#calling_e_menu>call options</a> of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> influence menus' look and feel:
</p>
<ul>
<li class="level1"><div class="li">"n=title" sets a menu's title</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> o=-1  - turns off the header's hint</div>
</li>
<li class="level1"><div class="li"> o=0  - turns off all of 'ornament' leaving a menu naked (minimalistic)</div>
</li>
</li>
<li class="level1"><div class="li"> o=1  - turns on the header of menu (default)</div>
</li>
<li class="level1"><div class="li"> o=2  - turns on prompts in menu items (RUN, EXEC, SHELL, MENU)</div>
</li>
<li class="level1"><div class="li"> o=3  - turns on all of 'ornament'</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> dk=dialog     - sets a dialog type of menu window (standard, with window's title)</div>
</li>
<li class="level1"><div class="li"> dk=dock    - sets a dock type of menu window (without window's title)</div>
<li class="level1"><div class="li"> dk=desktop - places a menu on the desktop</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> fs=12     - sets a font size of menu's header and items equal to 12</div>
</li>
<li class="level1"><div class="li"> “f1=Sans” - sets a font name of header to “Sans”</div>
</li>
<li class="level1"><div class="li"> “f2=Mono” - sets a font name of items to “Mono”</div>
</li>
<li class="level1"><div class="li"> “f3=Noto Sans Mono” - sets a font name of text widgets to “Noto Sans Mono”</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">b0=1 sets a border width of menu items</div>
</li>
<li class="level1"><div class="li">b1=1 sets an internal vertical padding of menu items</div>
</li>
<li class="level1"><div class="li">b2=1 sets an internal horizontal padding of menu items</div>
</li>
<li class="level1"><div class="li">b3=1 sets an external vertical padding of menu items</div>
</li>
<li class="level1"><div class="li">b4=1 sets an external horizontal padding of menu items</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> w=40 - sets a width of menu buttons (in characters); 40 is default</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> g=+100+200 - positions a menu at x=100, y=200 coordinates of screen</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">wc=1	centers a menu on the screen</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li">rt=3/5 sets a "min.width / init.width" ratio for a menu window</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> t=1 - sets a menu as topmost over other windows on desktop</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> sh=1 - allows to shade a menu when it loses a focus</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> c=0 - sets an index of color scheme; to view all CS, open "Project..." of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>'s popup menu</div>
</li>
</ul>

<p>
5th color scheme can be used to open a potentially dangerous menu, e.g. containing some dangerous or irrevocable commands and being as big as a monitor screen.
</p>

<p>
Before their calls, you can set a terrible warning, sort of:
</p>

<p>
<img src="files/danger2.png" class="media" alt="">
</p>
<p>If <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>'s colors aren't good for you (say, you want them fit your IDE), you can pass <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>
 the following arguments:
<ul>
<li><code>fg=</code> foreground</li>
<li><code>bg=</code> background</li>
<li><code>fI=</code> active item foreground</li>
<li><code>bI=</code> active item background</li>
<li><code>ht=</code> hotkey foreground</li>
<li><code>hh=</code> header foreground</li>
<li><code>gr=</code> shading background</li>
<li><code>fE=</code> edit foreground</li>
<li><code>bE=</code> edit background</li>
<li><code>fS=</code> edit selection foreground</li>
<li><code>bS=</code> edit selection background</li>
<li><code>fM=</code> popup menu foreground</li>
<li><code>bM=</code> popup menu background</li>
<li><code>cc=</code> edit caret background</li>
</ul>
For example:
<pre class="code">
 tclsh "~/PG/e_menu/e_menu.tcl" "md=~/PG/e_menu_MNU" m=menu.mnu \
  fg=#d2d2d2 bg=#364c64 fI=#d2d2d2 bI=#1F2D3F ht=#FFA500 gr=grey \
  fE=#aeaeae bE=#161717 fS=#d2d2d2 bS=#14416A cc=#00ffff sh=1
</pre>
</p>
<p>
<br>

</p>

</div>

<h3 id="counting_and_timing_commands">Counting and timing commands</h3>
<div class="level3">

<p>
You can use the following wildcards in menu commands:
</p>
<ul>
<li class="level1"><div class="li"> <em> %t0 </em> is a system time</div>
</li>
<li class="level1"><div class="li"> <em> %t1 </em> is a system date</div>
</li>
<li class="level1"><div class="li"> <em> %t2 </em> is a system date + time</div>
</li>
<li class="level1"><div class="li"> <em> %t3 </em> is a system day of week</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <em> %i0 </em></div>
</li>
<li class="level1"><div class="li"> <em> %i1 </em></div>
</li>
<li class="level1"><div class="li"> …</div>
</li>
<li class="level1"><div class="li"> <em> %i9 </em> - are counters of item runs</div>
</li>
</ul>

<p>
It's useful feature for commands that are logging or marking their data (files, directories etc.) with a current time, date and/or counter. There are 10 run counters per a menu and 10 time/date formats that can be set at call.
</p>

<p>
Here is a typical example:
</p>
<pre class="code">  git commit --amend -am "%s: amending N%i0 made at %t2"</pre>

<p>
- this git command would amend a last commit with a message sort of
</p>
<pre class="code">  "My_function_of_all: amending N3 made at 2018-03-31_14:15:07"</pre>

<p>
<br>

</p>

</div>

<h3 id="starting_menu_items_at_intervals">Starting menu items at intervals</h3>
<div class="level3">

<p>
You can also write a menu item so that it would be started periodically with an interval set in seconds.
</p>

<p>
Common usage is following:
</p>
<pre class="code">  &lt;marker&gt; name1 &lt;marker&gt; ?interval? command1
  &lt;marker&gt; name1 &lt;marker&gt; command1 continued</pre>

<p>
where &lt;marker&gt; is R:, R/, S: or S/. Markers with E ('run and exit') and W ('run and wait') aren't badly reasonable. Maybe S: and S/ too. But R: and R/ is the point.
</p>

<p>
Examples:
</p>
<pre class="code">  R: Run periodic logging at 10 min. interval R: ?10*60? cd %PD
  R: Run periodic logging at 10 min. interval R: logging

  R: Run periodic archiving at 1 hour interval R: ?60*60? cd %PD
  R: Run periodic archiving at 1 hour interval R: archiving

  R: Run periodic messaging at 2 hour interval R: ?2*60*60? messaging

  R: Run periodic reminding of rest at 45 min interval R: ?-45*60/-15*60? stopwork_arbeiten %TI</pre>

<p>
The last task should be explained in details. The common format of periodic command is following:
</p>
<pre class="code">  ?NSEC/NSEC1:a=n1,n2/NSEC2:ah=n3,n4/.../TN=X:ah=n5/? TASK_COMMAND %TI</pre>

<p>
where:
</p>
<ul>
<li class="level1 node"><div class="li"> NSEC - interval in seconds to run TASK_COMMAND:</div>
<ul>
<li class="level3"><div class="li"> if NSEC&gt;0, TASK_COMMAND is executed immediately and then after NSEC seconds</div>
</li>
<li class="level3"><div class="li"> if NSEC&lt;0, TASK_COMMAND is executed after abs(NSEC) seconds</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> NSEC1, NSEC2 have the same meaning, but apply to a= (autorun list of commands) and ah=  (autorun list of hidden commands) </div>
</li>
<li class="level1"><div class="li"> if a= and ah= are not present, the current command is called</div>
</li>
<li class="level1"><div class="li"> TN=X:ah=n5 means “after X cycles execute ah=n5 and stop”</div>
</li>
<li class="level1"><div class="li"> %TN is a wildcard that equals to the current cycle number</div>
</li>
<li class="level1"><div class="li"> %TI is a wildcard that equals to the current position in batch (while NSEC TI=0, while NSEC1 TI=1, while NSEC2 TI=2)</div>
</li>
</ul>

<p>
So the batch
</p>
<pre class="code">   ?-45*60/-15*60? stopwork_arbeiten %TI</pre>

<p>
means:
</p>
<ul>
<li class="level1"><div class="li"> wait 45 minutes</div>
</li>
<li class="level2"><div class="li"> run “stopwork_arbeiten 0”</div>
</li>
<li class="level2"><div class="li"> wait 15 minutes</div>
</li>
<li class="level2"><div class="li"> run “stopwork_arbeiten 1”</div>
</li>
<li class="level2"><div class="li"> repeat all</div>
</li>
</ul>

<p>
We could easily set the task of theater show (taken from <em>test3.mnu</em>):
</p>
<pre class="code">  S: Comedy 'Miaou' S: ?-0.1/-20:a=/TN=3:ah=3/-0:ah=1/-10:ah=2/-3:ah=2/-3:a=? echo 'Miaou' part %TN \ndate
  [HIDDEN]
  S: Intermission S: echo Intermission %TN \ndate
  S: Bell S: echo Bell N %TI-3 \ndate
  S: Curtain S: echo Curtain \ndate</pre>

<p>
which means:
</p>
<ul>
<li class="level1"><div class="li"> comedy part 1 starts</div>
</li>
<li class="level2"><div class="li"> 20 seconds of part 1 showing</div>
</li>
<li class="level2"><div class="li"> intermission 1 starts</div>
</li>
<li class="level2"><div class="li"> 10 seconds of intermissing</div>
</li>
<li class="level2"><div class="li"> bell #1</div>
</li>
<li class="level2"><div class="li"> 3 seconds of intermissing</div>
</li>
<li class="level2"><div class="li"> bell #2</div>
</li>
<li class="level2"><div class="li"> 3 seconds of intermissing</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> comedy part 2 starts</div>
</li>
<li class="level2"><div class="li"> 20 seconds of part 2 showing</div>
</li>
<li class="level2"><div class="li"> intermission 2 starts</div>
</li>
<li class="level2"><div class="li"> 10 seconds of intermissing</div>
</li>
<li class="level2"><div class="li"> bell #1</div>
</li>
<li class="level2"><div class="li"> 3 seconds of intermissing</div>
</li>
<li class="level2"><div class="li"> bell #2</div>
</li>
<li class="level2"><div class="li"> 3 seconds of intermissing</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> comedy part 3 starts</div>
</li>
<li class="level2"><div class="li"> 20 seconds of part 3 showing</div>
</li>
<li class="level2"><div class="li"> curtain</div>
</li>
</ul>

<p>
Here is the show and even a spectator:)
</p>

<p>
<img src="files/miaou.jpg" class="media" alt="">
</p>

<p>
You may desire to stop this periodical stuff manually. Just call it again and
<span class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> would stop it on your confirmation. For now, there
are no possibility to stop a hidden autorun items.
</p>

<p>
<br>

</p>

</div>

<h3 id="running_commands_at_start">Running commands at start</h3>
<div class="level3">

<p>
It's rather useful feature of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> allowing at start of a menu:
</p>
<ul>
<li class="level1"><div class="li"> to run any runnable item(s)</div>
</li>
<li class="level1"><div class="li"> to call any submenu(s)</div>
</li>
<li class="level1"><div class="li"> to run hidden command(s) or program(s)</div>
</li>
</ul>

<p>
Thus you can organize a menu system so there would be a starting menu that in turn would run and call all the rest (menus as well as commands).
</p>

<p>
Then, if you would desire to destroy and/or re-run the 'autorun' suite of menus, you may press <em>Ctrl+D</em> and/or <em>Ctrl+R</em> on the 'master' menu.
</p>

<p>
Let us have a laconic <em>test.mnu</em>:
<pre class="code"> R: Firefox search for "%s" R: firefox -search "%s"
 MW: Test4 menu MW: "m=test4.mnu" o=0
[HIDDEN]
 R: 1. tkcon         R: tkcon
 R: 2. Stop working! R: ?-33*60/-7*60:ah=3? audacious "/home/apl/PROGRAMS/C_COMM/breakon.wav"
 R: 3. Arbeiten!     R: audacious "/home/apl/PROGRAMS/C_COMM/breakoff.wav"</pre>
We can call it this way:
<pre class="code">tclsh ~/UTILS/e_menu/e_menu/e_menu.tcl m=test.mnu ah=1,2 &</pre>
...and would have <em>tkcon</em> started, as well as <a href=#starting_menu_items_at_intervals>periodic music</a> sort of
"Stop working!... Arbeiten!... Stop working!... Arbeiten!...".
</p>

<p>
Another example. We have a startup batch file with the following lines (ornaments omitted):
</p>
<pre class="code">
  cd %DIR%
  start tclsh %EMDIR%/e_menu.tcl "m=menu.mnu"
  start cmd.exe /c "C:\Program Files (x86)\Geany\bin\geany.exe" readme.md wiki.txt e_help.tcl e_menu.tcl</pre>
<p>
The problem is the last line. We might probe also these command lines:
</p>
<pre class="code">
  1. start cmd.exe /c "C:\Program Files (x86)\Geany\bin\geany.exe" readme.md wiki.txt e_help.tcl e_menu.tcl
  2. start "C:\Program Files (x86)\Geany\bin\geany.exe"            readme.md wiki.txt e_help.tcl e_menu.tcl
  3. start "C:\\Program Files\ (x86)\\Geany\\bin\geany.exe"        readme.md wiki.txt e_help.tcl e_menu.tcl
  4. start "C:/Program Files (x86)/Geany/bin/geany.exe"            readme.md wiki.txt e_help.tcl e_menu.tcl
  5. start /D "C:\Program Files (x86)\Geany\bin" geany.exe         readme.md wiki.txt e_help.tcl e_menu.tcl
  6. start /D "C:\Program Files (x86)\Geany\bin" geany.exe %DIR%/readme.md %DIR%\wiki.txt %DIR%\e_help.tcl %DIR%\e_menu.tcl
</pre>

<p>
1st case is OK excluding that hideous box of cmd.exe. <br>

2nd, 3rd, 4th commands fail at all.<br>

5th is OK but files (readme.md etc.) are open as new ones (in C:\Program Files (x86)\<abbr title="A fast and lightweight IDE">Geany</abbr>\bin) <br>

6th is OK but a working directory changes to C:\Program Files (x86)\Geany\bin. Not to say about those repeating %DIR%. S… again!
</p>

<p>
The problem is resolved with the 7th line (as 'start' accepts optional “header” … or accepts not in case of cmd.exe):
</p>
<pre class="code">
  7. start "" /b "C:\Program Files (x86)\Geany\bin\geany.exe" readme.md wiki.txt e_help.tcl e_menu.tcl
</pre>

<p>
Uff, what titanic efforts we have taken while all we need is our good old <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>. Let's do so:
</p>

<p>
Insert into “menu.mnu” the following line (it will be useful by itself in future):
</p>
<pre class="code">  R/ Open all R/ "C:\Program Files (x86)\Geany\bin\geany.exe" readme.md wiki.txt e_help.tcl e_menu.tcl</pre>

<p>
… and assuming that “Open all” entry is number 8 in menu.mnu, change the <a href="#" class="wikilink1" title="Table of Contents">e_menu</a> call so:
</p>
<pre class="code"> start tclsh e_menu.tcl "m=menu.mnu" a=8</pre>

<p>
That's all. Minus a special start of <abbr title="A fast and lightweight IDE">Geany</abbr> in batch file. Plus a useful menu command that allows <em class="u">to restore our project file list</em> in <abbr title="A fast and lightweight IDE">Geany</abbr> IDE.
</p>

<p>
<br>

</p>

</div>

<h3 id="closing_all_menus">Closing all menus</h3>
<div class="level3">

<p>
Sometimes you might desire to close all <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> applications. To do this, press <em>Ctrl+D</em> keys.
</p>

<p>
A query would occur asking you to confirm closing all menus. Press OK to close all of them. A current menu ("menu destroyer") should close all <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> applications excepting itself.
</p>

<p>
You can control this behaviour with assigning 'id' to menus by <em>N=id</em> (id=1..64) option of call. A menu destroyer normally doesn't kill a menu if its 'id' is greater than 64 (e.g. N=65 passed). Also it doesn't kill itself, if it is a parent and has a <em>g= (geometry)</em> option passed.
</p>

<p>
However, it's worth noticing that this feature is buggy under Linux and generally doesn't work under Windows.
</p>

<p>
<br>

</p>

</div>

<h3 id="sort_of_debugging">Logging and debugging</h3>
<div class="level3">

<p>
When executing a command, <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> puts out a message to stdout:
<br><br><b><em>&nbsp;&nbsp;menu - oper: number</b></em>
<br><br>where:
<br>&nbsp;&nbsp;menu - menu's name
<br>&nbsp;&nbsp;oper - operation (Run, Shell)
<br>&nbsp;&nbsp;number - index of executed item
</p>
<p>
The executed command can also put its own messages to stdout.
</p>
<p>
This output can be redirected to a logging file by means of &gt; or &gt;&gt;, for example this way:
<br><br><b><em>&nbsp;&nbsp;tclsh ~/e_menu/e_menu.tcl "s=%s" "m=menus/menu.mnu" &gt;&gt; ~/e_menu/e_menu.log</b></em>
</p>
<p>
Normally no error messages are displayed while <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> running commands. There are many useful programs that return some warning mess as if it were errors. This unnecessary trash is thrown off by <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>.
</p>

<p>
However, sometimes you need those error messages. E.g. you wrote a menu item that doesn't work stubbornly and is silent at that. What's up? In such case you can get over the silence of <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> with setting “?” before the <u>first command</u> of batch, for example:

<pre class="code">
 R: TEST1 R: cd %PD
 R: TEST1 R: not_existing_command

 R: TEST2 R: cd %PD
 R: TEST2 R: ? not_existing_command

 R: TEST3 R: ? cd %PD
 R: TEST3 R: not_existing_command
</pre>
</p>
<p>
Of these items, only <code>TEST3</code> would show the error message:
<pre class="code">ERROR of running

not_existing_command

couldn't execute "not_existing_command": no such file or directory</pre>

</p>

<p>

</p>

<p>
If your calling <span class="curid"><a href="#" class="wikilink1" title="Table
of Contents">e_menu</a></span> fails at start, you can call it in console so
that you would see its error messages. You can use also a0=, a1=, a2= arguments
to check if your starting list (a=) is run properly. See <a
href="#calling_e_menu">Calling e_menu</a> above.
</p>

<p>
A command useful for debugging is a console echo if properly included in a menu, e.g.:
</p>
<pre class="code">  S: Echo: %%s1  S: echo %s1</pre>

<p>
M and S commands can be used in a0=, a1=, a2= arguments to show messages and run commands in console, e.g.:
</p>
<pre class="code">  "a0=M starting e_menu" "a1=M start inits" "a2=M end of inits"</pre>
<p>

<p>
<br>
</p>

</div>

<h3 id="tclkits">Running by tclkits</h3>
<div class="level3">

<p>


If you use a stand-alone <a href=https://wiki.tcl-lang.org/page/Tclkit>tclkit</a> instead of fully installed <a href=https://wiki.tcl-lang.org/>Tcl/Tk</a>, run <span class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> with a command:
<pre class="code">tclkit ~/PG/e_menu/e_menu.tcl "m=menus/menu.mnu"</pre>
</p>

<p>
Also, you might want to have a shortcut to run this <a href=https://wiki.tcl-lang.org/page/Tclkit>tclkit</a> as <a href=https://wiki.tcl-lang.org/>Tcl/Tk</a> by itself. If so, in Linux, make a command file like that:
<pre class="code">
#! /bin/bash
# supposing our tclkit is in /usr/local/bin:
/usr/local/bin/tclkit $@ &
</pre>
</p>

<p>
Save this command file as <em>tcl</em>. In Windows, it can be easily imitated by <em>tcl.bat</em>:
<pre class="code">@echo off
start C:\MyUtils\tclkit.exe %*
</pre>
</p>

<p>
To have <span class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> run this <em>tcl</em> in its menu commands that start with <em>tclsh / wish</em>, use <em>tc=</em> option:
<pre class="code">tcl ~/PG/e_menu/e_menu.tcl "m=menus/menu.mnu" tc=tcl</pre>
</p>

<p>
By the way, you can have <a href=https://wiki.tcl-lang.org/>Tcl/Tk</a> fully installed and still prefer to run <span class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> by a <a href=https://wiki.tcl-lang.org/page/Tclkit>tclkit</a> (say, of some specific version).
</p>

<p>
If you want to force running <em>tclsh</em> or <em>wish</em> of a menu item, just quote them:
<pre class="code">R: ruler R: "wish" /usr/share/tcltk/tklib0.7/widget/ruler.tcl
# instead of
R: ruler R: wish /usr/share/tcltk/tklib0.7/widget/ruler.tcl</pre>
</p>

<p>
</p>

<p>
</p>

<p>
</p>

<p>
<br>
</p>

</div>


<h2 id="download">Download</h2>
<div class="level2">

<p>
<span class="curid"><a href="#" class="wikilink1" title="Table of
Contents">e_menu</a></span> stuff is available here:
</p>

<ul>
<li class="level1"><div class="li">
<a href="https://chiselapp.com/user/aplsimple/repository/e_menu/download" title="e_menu.zip" rel="nofollow">e_menu.zip</a>
</li>
</ul>

<ul>
<li class="level1"><div class="li">
<a href="https://github.com/aplsimple/e_menu" title="e_menu's repo" rel="nofollow">e_menu's git repo</a>
</li>
</ul>

<ul>
<li class="level1"><div class="li">
<a href="https://github.com/aplsimple/e_menu/releases" title="e_menu executables" rel="nofollow">e_menu executables for Linux and Windows</a>
</li>
</ul>

<ul>
<li class="level1"><div class="li">
<a href="https://github.com/aplsimple/aplsimple.github.io/releases/download/e_menu_v3.0/e_menu-3.0.mp4" title="e_menu-3.0.mp4" rel="nofollow">demo of e_menu v3.0 (~33 Mb)</a>
</li>
</ul>

<p>
Notice that <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span> is still disposed to update.
</p>

<p>
<br>

</p>

</div>

<h2 id="see_also">See also</h2>
<div class="level2">

<p>
The links about and around <span class="curid"><a href="#" class="wikilink1" title="Table of Contents">e_menu</a></span>:
</p>

<ul>
<li class="level1"><div class="li"> <a
href="https://github.com/phase1geo/tke/tree/master/plugins/e_menu/" rel="nofollow">e_menu plugin of TKE</a></div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <a href="../pave/index.html" title="Description of apave" rel="nofollow">apave docs</a></div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <a
href="../mulster/index.html" title="Description of mulster" rel="nofollow">mulster docs</a></div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <a href="bin4hg.html">How to minimize the Mercurial SCM history of binary files</a></div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <a href="files/mild-dark.kateschema">mild-dark color scheme</a> for <abbr title="Kate, text editor for KDE">Kate</abbr></div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <a href="files/mild-dark2.conf">mild-dark color scheme</a> for <abbr title="A fast and lightweight IDE">Geany</abbr></div>
</li>
</ul>

<ul>
<li class="level1"><div class="li">sort of history:</a></div>

<ul>
<li class="level1"><div class="li"> <a href="https://github.com/geany/geany/issues/1807" rel="nofollow">https://github.com/geany/geany/issues/1807</a></div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <a href="https://github.com/geany/geany/issues/1808" rel="nofollow">https://github.com/geany/geany/issues/1808</a></div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <a href="https://github.com/geany/geany/issues/1836" rel="nofollow">https://github.com/geany/geany/issues/1836</a></div>
</li>
</ul>

<ul>
<li class="level1"><div class="li"> <a
href="https://wiki.geany.org/howtos/using_with_tcl_tk"
rel="nofollow">e_menu wiki at wiki.geany.org</a></div>
</li>
</ul>
</li>
</ul>

</section>

<script>
  writeFooter('<a href="#" class="wikilink1" title="Table of Contents">e_menu</a> - a menu system bound to an edit session');
</script>

</div>
</body>
</html>
