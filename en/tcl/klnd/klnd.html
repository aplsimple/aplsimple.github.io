<!DOCTYPE html><html><head><meta charset="utf-8"/>
<link rel="stylesheet" href="../../../zoo/sh/styles/aplsimple.css">
<title>::klnd reference</title>
<style>
/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,button,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,var,optgroup{font-style:inherit;font-weight:inherit;}del,ins{text-decoration:none;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:baseline;}sub{vertical-align:baseline;}legend{color:#000;}input,button,textarea,select,optgroup,option{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;}input,button,textarea,select{*font-size:100%;}body{font:13px/1.231 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small;}select,input,button,textarea,button{font:99% arial,helvetica,clean,sans-serif;}table{font-size:inherit;font:100%;}pre,code,kbd,samp,tt{font-family:Consolas,"Courier New",monospace;font-size:100%;line-height:100%;}body{text-align:center;}#doc,#doc2,#doc3,#doc4,.yui-t1,.yui-t2,.yui-t3,.yui-t4,.yui-t5,.yui-t6,.yui-t7{margin:auto;text-align:left;width:57.69em;*width:56.25em;}#doc2{width:73.076em;*width:71.25em;}#doc3{margin:auto 10px;width:auto;}#doc4{width:74.923em;*width:73.05em;}.yui-b{position:relative;}.yui-b{_position:static;}#yui-main .yui-b{position:static;}#yui-main,.yui-g .yui-u .yui-g{width:100%;}.yui-t1 #yui-main,.yui-t2 #yui-main,.yui-t3 #yui-main{float:right;margin-left:-25em;}.yui-t4 #yui-main,.yui-t5 #yui-main,.yui-t6 #yui-main{float:left;margin-right:-25em;}.yui-t1 .yui-b{float:left;width:12.30769em;*width:12.00em;}.yui-t1 #yui-main .yui-b{margin-left:13.30769em;*margin-left:13.05em;}.yui-t2 .yui-b{float:left;width:9.8461em;*width:13.50em;}.yui-t2 #yui-main .yui-b{margin-left:10.8461em;*margin-left:14.55em;}.yui-t3 .yui-b{float:left;width:23.0769em;*width:22.50em;}.yui-t3 #yui-main .yui-b{margin-left:24.0769em;*margin-left:23.62em;}.yui-t4 .yui-b{float:right;width:13.8456em;*width:13.50em;}.yui-t4 #yui-main .yui-b{margin-right:14.8456em;*margin-right:14.55em;}.yui-t5 .yui-b{float:right;width:18.4615em;*width:18.00em;}.yui-t5 #yui-main .yui-b{margin-right:19.4615em;*margin-right:19.125em;}.yui-t6 .yui-b{float:right;width:23.0769em;*width:22.50em;}.yui-t6 #yui-main .yui-b{margin-right:24.0769em;*margin-right:23.62em;}.yui-t7 #yui-main .yui-b{display:block;margin:0 0 1em 0;}#yui-main .yui-b{float:none;width:auto;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf,.yui-gc .yui-u,.yui-gd .yui-g,.yui-g .yui-gc .yui-u,.yui-ge .yui-u,.yui-ge .yui-g,.yui-gf .yui-g,.yui-gf .yui-u{float:right;}.yui-g div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first,.yui-ge div.first,.yui-gf div.first,.yui-g .yui-gc div.first,.yui-g .yui-ge div.first,.yui-gc div.first div.first{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf{width:49.1%;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{width:32%;margin-left:1.99%;}.yui-gb .yui-u{*margin-left:1.9%;*width:31.9%;}.yui-gc div.first,.yui-gd .yui-u{width:66%;}.yui-gd div.first{width:32%;}.yui-ge div.first,.yui-gf .yui-u{width:74.2%;}.yui-ge .yui-u,.yui-gf div.first{width:24%;}.yui-g .yui-gb div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first{margin-left:0;}.yui-g .yui-g .yui-u,.yui-gb .yui-g .yui-u,.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u,.yui-ge .yui-g .yui-u,.yui-gf .yui-g .yui-u{width:49%;*width:48.1%;*margin-left:0;}.yui-g .yui-g .yui-u{width:48.1%;}.yui-g .yui-gb div.first,.yui-gb .yui-gb div.first{*margin-right:0;*width:32%;_width:31.7%;}.yui-g .yui-gc div.first,.yui-gd .yui-g{width:66%;}.yui-gb .yui-g div.first{*margin-right:4%;_margin-right:1.3%;}.yui-gb .yui-gc div.first,.yui-gb .yui-gd div.first{*margin-right:0;}.yui-gb .yui-gb .yui-u,.yui-gb .yui-gc .yui-u{*margin-left:1.8%;_margin-left:4%;}.yui-g .yui-gb .yui-u{_margin-left:1.0%;}.yui-gb .yui-gd .yui-u{*width:66%;_width:61.2%;}.yui-gb .yui-gd div.first{*width:31%;_width:29.5%;}.yui-g .yui-gc .yui-u,.yui-gb .yui-gc .yui-u{width:32%;_float:right;margin-right:0;_margin-left:0;}.yui-gb .yui-gc div.first{width:66%;*float:left;*margin-left:0;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf .yui-u{margin:0;}.yui-gb .yui-gb .yui-u{_margin-left:.7%;}.yui-gb .yui-g div.first,.yui-gb .yui-gb div.first{*margin-left:0;}.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u{*width:48.1%;*margin-left:0;}.yui-gb .yui-gd div.first{width:32%;}.yui-g .yui-gd div.first{_width:29.9%;}.yui-ge .yui-g{width:24%;}.yui-gf .yui-g{width:74.2%;}.yui-gb .yui-ge div.yui-u,.yui-gb .yui-gf div.yui-u{float:right;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf div.first{float:left;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf div.first{*width:24%;_width:20%;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf .yui-u{*width:73.5%;_width:65.5%;}.yui-ge div.first .yui-gd .yui-u{width:65%;}.yui-ge div.first .yui-gd div.first{width:32%;}#hd:after,#bd:after,#ft:after,.yui-g:after,.yui-gb:after,.yui-gc:after,.yui-gd:after,.yui-ge:after,.yui-gf:after{content:".";display:block;height:0;clear:both;visibility:hidden;}#hd,#bd,#ft,.yui-g,.yui-gb,.yui-gc,.yui-gd,.yui-ge,.yui-gf{zoom:0;}

body{margin:10px;}h1{font-size:138.5%;}h2{font-size:123.1%;}h3{font-size:108%;}h1,h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6,strong,dt{font-weight:bold;}optgroup{font-weight:normal;}abbr,acronym{border-bottom:1px dotted #000;cursor:help;}em{font-style:italic;}del{text-decoration:line-through;}blockquote,ul,ol,dl{margin:1em;}ol,ul,dl{margin-left:2em;}ol li{list-style:decimal outside;}ul li{list-style:disc outside;}dl dd{margin-left:1em;}th,td{border:1px solid #000;padding:.5em;}th{font-weight:bold;text-align:center;}caption{margin-bottom:.5em;text-align:center;}sup{vertical-align:super;}sub{vertical-align:sub;}p,fieldset,table,pre{margin-bottom:1em;}button,input[type="checkbox"],input[type="radio"],input[type="reset"],input[type="submit"]{padding:1px;}

/* Ruff default CSS */

body {
  /*max-width: 70em;*/
  margin: 0;
}

h1,h2 {
  color: #888888;
  margin-bottom: 0.5em;
  margin-top: 0em;
}

#ft { font-size: x-small; font-family: Arial, sans-serif;
  text-align: left;
  border-top: 1px solid #0B3467;
  color: #888888;
  margin-top: 10px;
}

.banner h2 {
  color: #0B3467;
}

#hd.banner {
 font-family: "Times New Roman", serif;
 font-size: 200%;
 line-height: 64px;
 border-bottom: thin solid #0B3467;
 color: #0B3467;
}

p.linkline {
  text-align: right;
  font-size: smaller;
  /*    margin-top: -1em; */
  margin-bottom: 0;
}

.tinylink {
  font-size: x-small;
  font-variant: normal;
  font-family: Arial, sans-serif;
  float: right;
  padding:2px;
}

h1 .tinylink a {
  color: white;
}

#bd {
font-family: Arial, sans-serif;
/*font-size: 108%;*/
}

div.navbox {
  /* margin-top: 1em; */
  background-color: #0B3467;
  color: white;
  padding: 3px 4px 2px 4px;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

div.navbox:hover {
  overflow: visible;
}

/* Note .navbox header css should be based on $header_levels */
.navbox h1, .navbox h2, .navbox h3, .navbox h4, .navbox h5 {
  font-size: 85%;
  margin: 0px;
  font-weight: normal;
}
.navbox h1 {
  font-weight: bold; /* Override */
}
.navbox h2 {
  padding-left: 1em;
}
.navbox h3 {
  padding-left: 2em;
}
.navbox h4 {
  padding-left: 2.5em;
  font-weight: normal;
}
.navbox h5 {
  padding-left: 3em;
  font-weight: normal;
}
.navbox hr {
  color: white;
  margin-top:0.1em;
  margin-bottom:0.1em;
}

.navbox a:link, .navbox a:visited, .navbox a:hover {
  text-decoration: none;
  color: white;
  background-color: #0B3467;
}

.navbox a:hover {
   font-weight: bold;
}

/* Tooltip text - see https://www.w3schools.com/css/css_tooltip.asp */
.tooltip {
  position: relative;
  /* display: inline-block; */
}

.tooltip .tooltiptext {
  width: 100%;
  font-weight: bold;
  background-color: white;
  color: #0B3467;
  text-align: left;
  border: 1px solid #0B3467;
  /* border-radius: 4px; */
  position: absolute;
  z-index: 1;
  margin-left: 4px;
  padding: 2px 3px;
  visibility: hidden;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}

span.ns_scope {
  color: #aaaaaa;
}

span.ns_scope a:link, span.ns_scope a:visited {
  text-decoration: none;
  color: #aaaaaa;

}

li {
  margin-top: 0.5em;
}

span.ns_scope a:hover {
  text-decoration: none;
  color: #666666;
}

table {
  margin: 1em;
  margin-top: 0.5em;
  border: thin solid;
  border-collapse: collapse;
  border-color: #808080;
  padding: 4px;
}

td {
  border: thin solid;
  border-color: #808080;
  vertical-align: top;
  font-size: 93%;
  padding: 0.3em;
  padding-top: 0.1em;
}
th {
  border: thin solid;
  border-color: #808080;
  padding: 0.3em;
  padding-top: 0.1em;
  background-color: #CCCCCC;
}

dt, dd {
   font-size: 93%;
}

h1.ruff {
  background-color: #0B3467;
  color: #ffffff;
  padding-left: 0.2em;
  font-family: "Times New Roman", serif;
}
h2.ruff {
  font-variant: small-caps;
  color: #0B3467;
  font-weight: bold;
  font-family: "Times New Roman", serif;
}

h3.ruff, h4.ruff, h5.ruff, h6.ruff {
  color: #0B3467;
}
h5.ruff {
  font-style: italic;
  font-weight: normal;
}
h6.ruff {
  font-weight: normal;
}
h3.ruffclass, h3.ruffproc, h3.ruffmethod,
h4.ruffclass, h4.ruffproc, h4.ruffmethod,
h5.ruffclass, h5.ruffproc, h5.ruffmethod {
  border-bottom: thin solid #0B3467;
  color: #0B3467;
  margin-bottom: 0.2em;
}

pre {
  background-color: #f9f9f9;
  margin-top: 1em;
  margin-left: 1em;
  padding: 5px;
  font-family: Consolas, "Courier New", monospace;
  /* width: max-content; --- to leave footsteps */ overflow: auto;
  line-height: 1.2em;
}

.ruff_dyn_src {
  display: none; /* Displayed via JS */
}

.ruff_synopsis {
  border: thin solid #cccccc;
  background: #f9f9f9;
  font-family: Consolas, "Courier New", monospace;
  padding: 5px;
  margin: 0em 2em 1em;
}
.ruff_const, .ruff_cmd, ruff_defitem {
  font-weight: bold;
  font-family: Consolas, "Courier New", monospace;
}
.ruff_arg {
  font-style: italic;
  font-family: Consolas, "Courier New", monospace;
}

.ruff_source_link {
  font-size: smaller;
}

.ruff_index {
  font-size: small;
  color: grey;
  line-height: 1;
}

.ruff_index ul li {
  list-style-type: none;
}

.ruff_index ul li a {
  text-decoration: none;
}
</style>
<script>function toggleSource( id )
{
  /* Copied from Rails */
  var elem
  var link

  if( document.getElementById )
  {
      elem = document.getElementById( id )
      link = document.getElementById( "l_" + id )
  }
  else if ( document.all )
  {
      elem = eval( "document.all." + id )
      link = eval( "document.all.l_" + id )
  }
  else
      return false;

  if( elem.style.display == "block" )
  {
      elem.style.display = "none"
      link.innerHTML = "Show source"
  }
  else
  {
      elem.style.display = "block"
      link.innerHTML = "Hide source"
  }
}
</script></head>
<meta name="author" content="aplsimple">
<meta name="description" content="aplsimple's home page">
<meta name="keywords" content="aplsimple,home">
<link rel="stylesheet" href="../../../en/zoo/style.css">
<style>
table{
background-color: #f9f9f9;
margin: 0%;
margin-bottom: 2%;
padding: 0%;
box-shadow: none;
filter: none;
}
pre{
margin: 0%;
margin-bottom: 2%;
padding: 0%;
}
</style>
<link rel="icon" type="image/jpg" href="../../../zoo/favicon.jpg">
<body>
<div id="wrapper">
<div name="divd1" ALIGN="CENTER"> <FONT SIZE=5em color=#b01c20><B>
<noscript>THIS PAGE IS NOT WORKING WITHOUT JAVASCRIPT!
<BR>
<BR>PLEASE, SWITCH ON JAVASCRIPT IN SETTINGS OF YOUR BROWSER AND RELOAD THE PAGE.
</noscript>
</B></FONT></div>
<div id='doc3' class='yui-t2'>
<script src="../../../zoo/funcs.js"></script>
<script src="../../../en/zoo/this.js"></script>
<section id=sec2>
<div id='hd' class='banner'>
<a name='klnd.html'>::klnd reference</a>
</div>
<div id='bd'><div id='yui-main'><div class='yui-b'><h1 class='ruff'><a name='::klnd'></a>::klnd<span class='tinylink'><a href='#top'>Top</a></span></h1>
<div style='clear:both;'></div>
<p class='ruff'>The <em>klnd</em> package provides a calendar widget to use along with <a href="../pave/index.html" >apave</a> package.</p>
<p class='ruff'>Features:</p>
<ul class='ruff'>
<li>displays localized days' and months' names</li>
<li>gets a chosen day through <code>-value</code> or <code>-tvar</code> (variable name) option</li>
<li>uses arrow keys to navigate through days, months and years</li>
<li>provides hot keys to navigate through months and years</li>
<li>provides buttons to navigate through months and years</li>
<li>provides a button and a hot key to set a current date</li>
<li>buttons' tips</li>
<li>shown at +X+Y coordinates / under a widget / in a parent's center / in a screen's center or under the mouse pointer</li>
<li>customizable title, date format, first week day (Sunday/Monday)</li>
<li>themeable (with ttk and <a href="../pave/index.html" >apave</a> themes)</li>
<li>may be a modal (by default) or non-modal window</li>
</ul>
<p class='ruff'>The calendar looks like this:</p>
<p class='ruff'><img src="../pave/files/widgdat2.png" class="media" alt=""></p>
<p class='ruff'><hr></p>
<p class='ruff'>To directly call the calendar, use the following commands:</p>
<pre class='ruff'><br><code class="tcl"><b><font color=#3a6797>package</font></b> require klnd
klnd::calendar ?-option value ... ?

<i><font color=#4b5d50># or this way</font></i>
<b><font color=#3a6797>source</font></b> [<b><font color=#3a6797>file</font></b> join <font color=#1b1baa>$::apave::apaveDir</font> pickers klnd klnd.tcl]
klnd::calendar ?-option value ... ?
<br></code></pre>
<p class='ruff'>where <code>option</code> may be:</p>
<table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>-value</code></td><td class='ruff_defitem'>sets an input date (omittable)</td></tr>
<tr><td class='ruff_defitem'><code>-tvar</code></td><td class='ruff_defitem'>sets a variable name to hold the input/output value (omittable)</td></tr>
<tr><td class='ruff_defitem'><code>-dateformat</code></td><td class='ruff_defitem'>sets the input/output date format (%D by default)</td></tr>
<tr><td class='ruff_defitem'><code>-weekday</code></td><td class='ruff_defitem'>sets a first week day: %w for Sunday, %u for Monday (default)</td></tr>
<tr><td class='ruff_defitem'><code>-modal</code></td><td class='ruff_defitem'><code>yes</code> if the calendar should be a modal window (default)</td></tr>
<tr><td class='ruff_defitem'><code>-title</code></td><td class='ruff_defitem'>sets the calendar's title</td></tr>
<tr><td class='ruff_defitem'><code>-geometry</code></td><td class='ruff_defitem'>sets the calendar's geometry</td></tr>
<tr><td class='ruff_defitem'><code>-entry</code></td><td class='ruff_defitem'>sets a widget's path to show the calendar under</td></tr>
<tr><td class='ruff_defitem'><code>-parent</code></td><td class='ruff_defitem'>sets a parent toplevel window to center the calendar in</td></tr>
<tr><td class='ruff_defitem'><code>-centerme</code></td><td class='ruff_defitem'><code>yes</code> if the calendar should be centered in the screen</td></tr>
</table>
<p class='ruff'>If <code>-value</code> and <code>-tvar</code> options are both set, the <code>-tvar</code> is preferred. If both omitted, a current system date is used as input.</p>
<p class='ruff'>The calendar returns a chosen date (setting also the <code>-tvar</code> variable if any) or &quot;&quot; at no choice.</p>
<p class='ruff'>The priority of geometry options: <code>-geometry, -entry, -parent, -centerme</code>. At no geometry option given, the calendar is shown under the mouse pointer.</p>
<p class='ruff'>The <code>-parent</code> option may be used along with <code>-geometry, -entry</code>, as it allows a child window to inherit the parent's attributes.</p>
<p class='ruff'><hr></p>
<p class='ruff'>The calendar provides the hotkeys Left, Right, Up, Down, PageUp, PageDown, Home, End and F3 to navigate through days, months and years.</p>
<p class='ruff'>The Enter / Space keys or Double-Click are used to pick a date.</p>
<br><h2 class='ruff'><a name='::klnd-Usage in apave package'></a>Usage in apave package<span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<p class='ruff'>With <a href="../pave/index.html" >apave</a> package, the calendar can be used in two forms: <em>date picker</em> and <em>embedded calendar</em>:</p>
<ul class='ruff'>
<li><em>date picker</em> presents an entry field to hold an input/output date and a button to choose a date from the picker</li>
<li><em>embedded calendar</em> presents a full set of widgets to display a selected month of year</li>
</ul>
<p class='ruff'>An example of using <em>date picker</em> for <a href="../pave/index.html" >apave</a> layout:</p>
<pre class='ruff'><br><code class="tcl">{dat1 labDat1 L 1 1 {} {<font color=#6c3e67>-tvar</font> ::N::dat1 <font color=#6c3e67>-title</font> {Date of the event} <font color=#6c3e67>-dateformat</font> %d.%m.%Y <font color=#6c3e67>-weekday</font> %w}}
<br></code></pre>
<p class='ruff'>This example includes <code>-tvar</code> option meaning a variable name to hold the date.</p>
<p class='ruff'>The <em>embedded calendar</em> differs from this with <code>daT</code> type of widget used instead of <code>dat</code>. Also, this form of calendar doesn't allow using the keyboard; only the mouse is used in it.</p>
<p class='ruff'>The below example is taken from <a href="../alited/index.html" >alited</a>'s source:</p>
<pre class='ruff'><br><code class="tcl">{.daT - - - - {<b><font color=#134070>pack</font></b> <font color=#6c3e67>-fill</font> both} {<font color=#6c3e67>-tvar</font> alited::project::klnddata(date) <font color=#6c3e67>-com</font> {alited::project::KlndUpdate} <font color=#6c3e67>-dateformat</font> <font color=#1b1baa>$alited::project::klnddata(dateformat)</font> <font color=#6c3e67>-tip</font> {alited::project::KlndTip %W %D}}}
<br></code></pre>
<p class='ruff'>This example includes <code>-com</code> option to run a command at clicking a day. This command can use <code>::klnd::update</code> to highlight some days in the calendar. In <a href="../alited/index.html" >alited</a> these days contain  reminders of TODOs being dead-lines.</p>
<p class='ruff'>Options of embedded calendar:</p>
<table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>-com, -command</code></td><td class='ruff_defitem'>a command to run at left-click</td></tr>
<tr><td class='ruff_defitem'><code>-popup</code></td><td class='ruff_defitem'>a command to run at right-click</td></tr>
<tr><td class='ruff_defitem'><code>-currentmonth</code></td><td class='ruff_defitem'>a current month to display, in form of &quot;year/month&quot;</td></tr>
<tr><td class='ruff_defitem'><code>-united</code></td><td class='ruff_defitem'>if yes, means &quot;united&quot; calendars</td></tr>
<tr><td class='ruff_defitem'><code>-daylist</code></td><td class='ruff_defitem'>a list of selected days for &quot;united&quot; calendars</td></tr>
<tr><td class='ruff_defitem'><code>-hllist</code></td><td class='ruff_defitem'>a list of highlighted days</td></tr>
<tr><td class='ruff_defitem'><code>-tip</code></td><td class='ruff_defitem'>a command to get a day's tip</td></tr>
</table>
<p class='ruff'>A command of <code>-com, -command, -popup</code> options can use wildcards: %y, %m, %d for year, month, day, %X, %Y for mouse pointer's coordinates.</p>
<p class='ruff'>A command of <code>-tip</code> option can use wildcards: %W for a day widget's path, %D for a day.</p>
<p class='ruff'>UI procedures of embedded calendar:</p>
<table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>::klnd::labelPath</code></td><td class='ruff_defitem'>gets a title label's path, to change its attributes</td></tr>
<tr><td class='ruff_defitem'><code>::klnd::selectedDay</code></td><td class='ruff_defitem'>gets a selected day</td></tr>
<tr><td class='ruff_defitem'><code>::klnd::getDaylist</code></td><td class='ruff_defitem'>gets a list of selected days (for united calendars)</td></tr>
<tr><td class='ruff_defitem'><code>::klnd::update</code></td><td class='ruff_defitem'>redraws a calendar for a month</td></tr>
</table>
<p class='ruff'>The procedures use <code>obj</code> argument, which is just an index of a calendar (beginning with 1). If omitted or equal to {}, <code>obj</code> means a last created calendar.</p>
<p class='ruff'>The multiple embedded calendars may be united with <code>-united yes</code> option, so that a user can select a list of days inside them.</p>
<br><h2 class='ruff'><a name='::klnd-Commands'></a>Commands<span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><br><br><h4 class='ruffproc'><a name='::klnd::blinking'>blinking</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Makes a calendar label blink.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>blinking</span> <span class='ruff_arg'>doit</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>doit</code></code></td><td class='ruff_defitem'>if yes, starts blinking, else stops it</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_1' href="javascript:toggleSource('1')">Show source</a></p>
<div id='1' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::blinking {doit} {

  <i><font color=#4b5d50># Makes a calendar label blink.</font></i>
  <i><font color=#4b5d50>#   doit - if yes, starts blinking, else stops it</font></i>

  <b><font color=#3a6797>lassign</font></b> [::apave::obj csGet] - fgnorm - bgnorm
  <b><font color=#3a6797>lassign</font></b> [::apave::obj csGet 45] - - - - - bgblink fgblink
  <b><font color=#3a6797>set</font></b> lab [::klnd::labelPath]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$doit</font>} {
    <b><font color=#3a6797>after</font></b> idle <font color=#7d1a1a>&quot;::apave::blinkWidget <font color=#1b1baa>$</font>lab <font color=#1b1baa>$</font>fgnorm <font color=#1b1baa>$</font>bgnorm <font color=#1b1baa>$</font>fgblink <font color=#1b1baa>$</font>bgblink 100 4&quot;</font>
  } <b><font color=#3a6797>else</font></b> {
    ::apave::blinkWidget <font color=#1b1baa>$lab</font> <font color=#1b1baa>$fgnorm</font> <font color=#1b1baa>$bgnorm</font>
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::calendar'>calendar</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>The main procedure of the calendar's toplevel.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>calendar</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>options of the calendar</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_2' href="javascript:toggleSource('2')">Show source</a></p>
<div id='2' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::calendar {args} {

  <i><font color=#4b5d50># The main procedure of the calendar's toplevel.</font></i>
  <i><font color=#4b5d50>#   args - options of the calendar</font></i>

  <b><font color=#3a6797>variable</font></b> my::p
  <b><font color=#3a6797>set</font></b> my::p(isWidget) no
  <i><font color=#4b5d50># get options and initialize the calendar's settings</font></i>
  <b><font color=#3a6797>lassign</font></b> [my::InitCalendar {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>] title datevalue tvar parent centerme geo entry
  <b><font color=#3a6797>set</font></b> args [clearArgs {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
  <i><font color=#4b5d50># priority of geometry options: -geometry, -entry, -parent, -centerme</font></i>
  <i><font color=#4b5d50># if no geometry option, show the calendar under the mouse pointer</font></i>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$geo</font> ne {}} {
    <b><font color=#3a6797>set</font></b> geo <font color=#7d1a1a>&quot;-geometry <font color=#1b1baa>$</font>geo&quot;</font>
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$entry</font> ne {}} {
    <b><font color=#3a6797>set</font></b> x [<b><font color=#134070>winfo</font></b> rootx <font color=#1b1baa>$entry</font>]
    <b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> {[<b><font color=#134070>winfo</font></b> rooty <font color=#1b1baa>$entry</font>]+32}]
    <b><font color=#3a6797>set</font></b> geo <font color=#7d1a1a>&quot;-geometry +<font color=#1b1baa>$</font>x+<font color=#1b1baa>$</font>y&quot;</font>
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$parent</font> ne {}} {
    <b><font color=#3a6797>set</font></b> geo <font color=#7d1a1a>&quot;-centerme <font color=#1b1baa>$</font>parent&quot;</font>    ;<i><font color=#4b5d50># to center in a toplevel window</font></i>
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$centerme</font> ne {}} {
    <b><font color=#3a6797>set</font></b> geo <font color=#7d1a1a>&quot;-centerme <font color=#1b1baa>$</font>centerme&quot;</font>  ;<i><font color=#4b5d50># it's an option of apave's</font></i>
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> geo <font color=#7d1a1a>&quot;-geometry +<font color=#1b1baa>[</font>expr <font color=#1b1baa>{[</font>winfo pointerx .<font color=#1b1baa>]</font>+10<font color=#1b1baa>}]</font>+<font color=#1b1baa>[</font>expr <font color=#1b1baa>{[</font>winfo pointery .<font color=#1b1baa>]</font>+10<font color=#1b1baa>}]</font>&quot;</font>
  }
  <b><font color=#3a6797>set</font></b> parent [<b><font color=#3a6797>string</font></b> trimright <font color=#1b1baa>$parent</font> .]
  <b><font color=#3a6797>set</font></b> win [<b><font color=#3a6797>set</font></b> my::p(win) <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>parent._apave_CALENDAR_&quot;</font>]
  <b><font color=#3a6797>catch</font></b> {<font color=#1b1baa>$my::p(obj)</font> destroy}
  <i><font color=#4b5d50># create apave object and layout its window</font></i>
  <b><font color=#3a6797>set</font></b> my::p(obj) [::apave::APaveInput create APAVE_CLND <font color=#1b1baa>$win</font>]
  <font color=#1b1baa>$my::p(obj)</font> makeWindow <font color=#1b1baa>$win</font>.fra <font color=#1b1baa>$title</font>
  <font color=#1b1baa>$my::p(obj)</font> paveWindow <font color=#1b1baa>$win</font>.fra [<b><font color=#3a6797>list</font></b>  {<b><font color=#3a6797>*</font></b>}[my::MainWidgets]  {seh fra T 1 7 {<font color=#6c3e67>-pady</font> 4}}  {fraBottom seh T 1 7 {<font color=#6c3e67>-st</font> ew}}  {fraBottom.h_ - - - - {<b><font color=#134070>pack</font></b> <font color=#6c3e67>-fill</font> both <font color=#6c3e67>-expand</font> 1 <font color=#6c3e67>-side</font> left} {}}  {fraBottom.But_KLNDCLOSE - - - - {<b><font color=#134070>pack</font></b> <font color=#6c3e67>-side</font> left} {<font color=#6c3e67>-t</font> <font color=#7d1a1a>&quot;Close&quot;</font> <font color=#6c3e67>-com</font> <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>::klnd::my::p(obj) res <font color=#1b1baa>$</font>win 0&quot;</font>}}  ]
  <i><font color=#4b5d50># binds for day buttons and 'Close'</font></i>
  <b><font color=#3a6797>foreach</font></b> {ev prc} { &lt;Home&gt; <font color=#7d1a1a>&quot;::klnd::my::GoYear -1 yes&quot;</font> &lt;End&gt; <font color=#7d1a1a>&quot;::klnd::my::GoYear 1 yes&quot;</font>  &lt;Prior&gt; <font color=#7d1a1a>&quot;::klnd::my::GoMonth -1 yes&quot;</font> &lt;Next&gt; <font color=#7d1a1a>&quot;::klnd::my::GoMonth 1 yes&quot;</font>} {
    <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;38} {<b><font color=#3a6797>incr</font></b> i} {
      <b><font color=#3a6797>set</font></b> but [<font color=#1b1baa>$my::p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$i</font>]
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$but</font> <font color=#1b1baa>$ev</font> <font color=#1b1baa>$prc</font>
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$but</font> &lt;FocusIn&gt; <font color=#7d1a1a>&quot;::klnd::my::Enter <font color=#1b1baa>$</font>i&quot;</font>
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$but</font> &lt;KeyPress&gt; <font color=#7d1a1a>&quot;::klnd::my::KeyPress <font color=#1b1baa>$</font>i %K&quot;</font>
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$but</font> &lt;Double-1&gt; <font color=#7d1a1a>&quot;::klnd::my::DoubleClick <font color=#1b1baa>$</font>win <font color=#1b1baa>$</font>i&quot;</font>
    }
    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>bind</font></b> [<font color=#1b1baa>$my::p(obj)</font> But_KLNDCLOSE] <font color=#1b1baa>$ev</font> <font color=#1b1baa>$prc</font>}
  }
  <b><font color=#134070>bind</font></b> <font color=#1b1baa>$win</font> &lt;F3&gt; ::klnd::my::SetCurrentDay
  <b><font color=#134070>bind</font></b> <font color=#1b1baa>$win</font> &lt;KeyPress&gt; <font color=#7d1a1a>&quot;::klnd::my::Leave&quot;</font>
  <i><font color=#4b5d50># show and work with the calendar</font></i>
  <b><font color=#3a6797>after</font></b> idle <font color=#7d1a1a>&quot;::klnd::my::ShowMonth <font color=#1b1baa>$</font>my::p(m) <font color=#1b1baa>$</font>my::p(y)&quot;</font>
  <b><font color=#3a6797>set</font></b> res [<font color=#1b1baa>$my::p(obj)</font> showModal <font color=#1b1baa>$win</font> <font color=#6c3e67>-resizable</font> {0 0} {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$geo</font>]
  <i><font color=#4b5d50># get the result of the selection if any</font></i>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$res</font> && <font color=#1b1baa>$my::p(dvis)</font>} {
    <b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#1b1baa>$my::p(mvis)</font>/<font color=#1b1baa>$my::p(dvis)</font>/<font color=#1b1baa>$my::p(yvis)</font> <font color=#6c3e67>-format</font> %D] <font color=#6c3e67>-format</font> <font color=#1b1baa>$my::p(dformat)</font>]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tvar</font> ne {}} {<b><font color=#3a6797>set</font></b> <font color=#1b1baa>$tvar</font> <font color=#1b1baa>$res</font>}
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> res {}
  }
  <font color=#1b1baa>$my::p(obj)</font> destroy
  <b><font color=#134070>destroy</font></b> <font color=#1b1baa>$win</font>
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::calendar2'>calendar2</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>The main procedure of the calendar embedded widget.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>calendar2</span> <span class='ruff_arg'>pobj w ownname ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>pobj</code></code></td><td class='ruff_defitem'>apave object</td></tr>
<tr><td class='ruff_defitem'><code><code>w</code></code></td><td class='ruff_defitem'>container widget for <em>ownname</em></td></tr>
<tr><td class='ruff_defitem'><code><code>ownname</code></code></td><td class='ruff_defitem'>frame widget for calendar</td></tr>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>options of the calendar</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of widgets for apave layout.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_3' href="javascript:toggleSource('3')">Show source</a></p>
<div id='3' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::calendar2 {pobj w ownname args} {

  <i><font color=#4b5d50># The main procedure of the calendar embedded widget.</font></i>
  <i><font color=#4b5d50>#   pobj - apave object</font></i>
  <i><font color=#4b5d50>#   w - container widget for *ownname*</font></i>
  <i><font color=#4b5d50>#   ownname - frame widget for calendar</font></i>
  <i><font color=#4b5d50>#   args - options of the calendar</font></i>
  <i><font color=#4b5d50># Returns a list of widgets for apave layout.</font></i>

  <b><font color=#3a6797>variable</font></b> my::p
  <b><font color=#3a6797>set</font></b> obj [<b><font color=#3a6797>incr</font></b> my::p(objNUM)]
  <b><font color=#3a6797>set</font></b> my::p(<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$pobj</font>
  my::InitSettings
  my::InitCalendar {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$my::p(currentmonth)</font> eq {}} {
    <b><font color=#3a6797>lassign</font></b> [::klnd::currentYearMonthDay] year month day
    <b><font color=#3a6797>set</font></b> my::p(currentmonth) <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>year/<font color=#1b1baa>$</font>month&quot;</font>
    <b><font color=#3a6797>set</font></b> my::p(currentdate) <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>year/<font color=#1b1baa>$</font>month/<font color=#1b1baa>$</font>day&quot;</font>
  }
  <i><font color=#4b5d50># save options for current calendar</font></i>
  <b><font color=#3a6797>foreach</font></b> opt {weekday months days loc yvis mvis dvis  com tvar dformat united currentmonth daylist popup hllist tip} {
    <b><font color=#3a6797>set</font></b> my::p(<font color=#1b1baa>$opt$obj</font>) <font color=#1b1baa>$my::p($opt)</font>
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$my::p(daylist)</font> ne {-} && <font color=#1b1baa>$my::p(united)</font>} {
    <i><font color=#4b5d50># for calendars united, initialize day lists per month</font></i>
    <b><font color=#3a6797>set</font></b> my::p(daylist<font color=#1b1baa>$obj</font>) [<b><font color=#3a6797>list</font></b>]
    <b><font color=#3a6797>foreach</font></b> date <font color=#1b1baa>$my::p(daylist)</font> {
      <b><font color=#3a6797>set</font></b> d [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#1b1baa>$date</font> <font color=#6c3e67>-format</font> <font color=#1b1baa>$my::p(dformat)</font>] <font color=#6c3e67>-format</font> %Y/%N/%d]
      <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>split</font></b> <font color=#1b1baa>$d</font> /] y m
      <b><font color=#3a6797>set</font></b> m [<b><font color=#3a6797>string</font></b> trim <font color=#1b1baa>$m</font>]
      <b><font color=#3a6797>lappend</font></b> my::p(daylist<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$date</font>
    }
  }
  <i><font color=#4b5d50># if calendars are united, it's selected at start</font></i>
  <i><font color=#4b5d50># and saved as previously selected one</font></i>
  <b><font color=#3a6797>set</font></b> my::p(olddate<font color=#1b1baa>$obj</font>) {}
  <i><font color=#4b5d50># binds for day buttons and show and work with the calendar</font></i>
  <b><font color=#3a6797>after</font></b> idle <font color=#7d1a1a>&quot;::klnd::my::BindButtons2 <font color=#1b1baa>$</font>obj;  ::klnd::my::ShowMonth2 <font color=#1b1baa>$</font>obj <font color=#1b1baa>$</font>my::p(m) <font color=#1b1baa>$</font>my::p(y) yes yes&quot;</font>
  <b><font color=#3a6797>set</font></b> res [my::MainWidgets2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$ownname</font>]
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::clearArgs'>clearArgs</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Removes specific options from args.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>clearArgs</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>list of options</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_4' href="javascript:toggleSource('4')">Show source</a></p>
<div id='4' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::clearArgs {args} {

  <i><font color=#4b5d50># Removes specific options from args.</font></i>
  <i><font color=#4b5d50>#   args - list of options</font></i>

  <b><font color=#ca14ca>return</font></b> [::apave::removeOptions <font color=#1b1baa>$args</font> <font color=#6c3e67>-title</font> <font color=#6c3e67>-value</font> <font color=#6c3e67>-tvar</font> <font color=#6c3e67>-locale</font> <font color=#6c3e67>-parent</font> <font color=#6c3e67>-dateformat</font> <font color=#6c3e67>-weekday</font> <font color=#6c3e67>-com</font> <font color=#6c3e67>-command</font> <font color=#6c3e67>-currentmonth</font> <font color=#6c3e67>-united</font> <font color=#6c3e67>-daylist</font> <font color=#6c3e67>-hllist</font> <font color=#6c3e67>-popup</font> <font color=#6c3e67>-tip</font>]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::currentYearMonthDay'>currentYearMonthDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets current year, month, day. Return a list of  current year, month, day.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>currentYearMonthDay</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_5' href="javascript:toggleSource('5')">Show source</a></p>
<div id='5' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::currentYearMonthDay {} {

  <i><font color=#4b5d50># Gets current year, month, day.</font></i>
  <i><font color=#4b5d50># Return a list of  current year, month, day.</font></i>

  <b><font color=#3a6797>set</font></b> ym [<b><font color=#3a6797>clock</font></b> seconds]
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> {<b><font color=#3a6797>*</font></b>}&quot; [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$ym</font> <font color=#6c3e67>-format</font> %Y]  [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$ym</font> <font color=#6c3e67>-format</font> %N]  [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$ym</font> <font color=#6c3e67>-format</font> %e]&quot;]
  ]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::getDaylist'>getDaylist</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a day list which was set initially and possibly changed by a user.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>getDaylist</span> <span class='ruff_arg'>pobj ?min? ?max?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>pobj</code></code></td><td class='ruff_defitem'>apave object</td></tr>
<tr><td class='ruff_defitem'><code><code>min</code></code></td><td class='ruff_defitem'>minimal index of calendar widget; <i>optional, default</i> <code>0</code></td></tr>
<tr><td class='ruff_defitem'><code><code>max</code></code></td><td class='ruff_defitem'>maximal index of calendar widget; <i>optional, default</i> <code>9999999</code></td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The pobj is the same as passed to klnd::calendar2.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="klnd.html#::klnd::calendar2" title="calendar2" class='ruff_cmd'>calendar2</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_6' href="javascript:toggleSource('6')">Show source</a></p>
<div id='6' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::getDaylist {pobj {min 0} {max 9999999}} {

  <i><font color=#4b5d50># Gets a day list which was set initially and possibly changed by a user.</font></i>
  <i><font color=#4b5d50>#   pobj - apave object</font></i>
  <i><font color=#4b5d50>#   min - minimal index of calendar widget</font></i>
  <i><font color=#4b5d50>#   max - maximal index of calendar widget</font></i>
  <i><font color=#4b5d50># The pobj is the same as passed to klnd::calendar2.</font></i>
  <i><font color=#4b5d50># See also: calendar2</font></i>

  <b><font color=#3a6797>variable</font></b> my::p
  <b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>list</font></b>]
  <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> objNUM <font color=#1b1baa>$my::p(objNUM)</font>}]} {
    <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> obj 0} {<font color=#1b1baa>$obj</font>&lt;<font color=#1b1baa>$objNUM</font>} {} {
      <b><font color=#3a6797>incr</font></b> obj
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$my::p($obj)</font> eq <font color=#1b1baa>$pobj</font> && [<b><font color=#3a6797>info</font></b> exist my::p(daylist<font color=#1b1baa>$obj</font>)]} {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$my::p(daylist$obj)</font> ne {-} && <font color=#1b1baa>$min</font>&lt;=<font color=#1b1baa>$obj</font> && <font color=#1b1baa>$obj</font>&lt;=<font color=#1b1baa>$max</font>} {
          <b><font color=#3a6797>foreach</font></b> d <font color=#1b1baa>$my::p(daylist$obj)</font> {
            <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>lsearch</font></b> <font color=#6c3e67>-exact</font> <font color=#1b1baa>$res</font> <font color=#1b1baa>$d</font>]&lt;0} {
              <b><font color=#3a6797>lappend</font></b> res <font color=#1b1baa>$d</font>
            }
          }
        }
      }
    }
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::labelPath'>labelPath</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a title label path.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>labelPath</span> <span class='ruff_arg'>?obj?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of the calendar; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Useful to change the label's attributes. If <em>obj</em> omitted, returns a path of last created label.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_7' href="javascript:toggleSource('7')">Show source</a></p>
<div id='7' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::labelPath {{obj {}}} {

  <i><font color=#4b5d50># Gets a title label path.</font></i>
  <i><font color=#4b5d50>#   obj - index of the calendar</font></i>
  <i><font color=#4b5d50># Useful to change the label's attributes.</font></i>
  <i><font color=#4b5d50># If *obj* omitted, returns a path of last created label.</font></i>

  <b><font color=#3a6797>variable</font></b> my::p
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$obj</font> eq {}} {<b><font color=#3a6797>set</font></b> obj <font color=#1b1baa>$my::p(objNUM)</font>}
  <b><font color=#ca14ca>return</font></b> [<font color=#1b1baa>$my::p($obj)</font> LabMonth<font color=#1b1baa>$obj</font>]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::maxYear'>maxYear</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets maximal year that is correct.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>maxYear</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_8' href="javascript:toggleSource('8')">Show source</a></p>
<div id='8' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::maxYear {} {

  <i><font color=#4b5d50># Gets maximal year that is correct.</font></i>

  <b><font color=#ca14ca>return</font></b> 9999
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::minYear'>minYear</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets minimal year that is correct.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>minYear</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_9' href="javascript:toggleSource('9')">Show source</a></p>
<div id='9' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::minYear {} {

  <i><font color=#4b5d50># Gets minimal year that is correct.</font></i>

  <b><font color=#ca14ca>return</font></b> 1753
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::months'>months</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a list of months according to a locale.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>months</span> <span class='ruff_arg'>?loc?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>loc</code></code></td><td class='ruff_defitem'>the locale; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_10' href="javascript:toggleSource('10')">Show source</a></p>
<div id='10' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::months {{loc {}}} {

  <i><font color=#4b5d50># Gets a list of months according to a locale.</font></i>
  <i><font color=#4b5d50>#   loc - the locale</font></i>

  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$loc</font> eq {}} {<b><font color=#3a6797>set</font></b> loc [my::DefaultLocale]}
  <b><font color=#3a6797>set</font></b> months [<b><font color=#3a6797>list</font></b>]
  <b><font color=#3a6797>foreach</font></b> i {01 02 03 04 05 06 07 08 09 10 11 12} {
    <b><font color=#3a6797>lappend</font></b> months [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>i/01/2021&quot;</font>  <font color=#6c3e67>-format</font> %D <font color=#6c3e67>-locale</font> <font color=#1b1baa>$loc</font>] <font color=#6c3e67>-format</font> %B <font color=#6c3e67>-locale</font> <font color=#1b1baa>$loc</font>]
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$months</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::selectedDay'>selectedDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a selected day.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>selectedDay</span> <span class='ruff_arg'>?obj? ?y? ?m? ?d?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of the calendar; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
<tr><td class='ruff_defitem'><code><code>y</code></code></td><td class='ruff_defitem'>year; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
<tr><td class='ruff_defitem'><code><code>m</code></code></td><td class='ruff_defitem'>month; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
<tr><td class='ruff_defitem'><code><code>d</code></code></td><td class='ruff_defitem'>day; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>If y/m/d are set, they define currently selected date.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of year, month, day</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_11' href="javascript:toggleSource('11')">Show source</a></p>
<div id='11' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::selectedDay {{obj {}} {y {}} {m {}} {d {}}} {

  <i><font color=#4b5d50># Gets a selected day.</font></i>
  <i><font color=#4b5d50>#   obj - index of the calendar</font></i>
  <i><font color=#4b5d50>#   y - year</font></i>
  <i><font color=#4b5d50>#   m - month</font></i>
  <i><font color=#4b5d50>#   d - day</font></i>
  <i><font color=#4b5d50># If y/m/d are set, they define currently selected date.</font></i>
  <i><font color=#4b5d50># Returns a list of year, month, day</font></i>

  <b><font color=#3a6797>variable</font></b> my::p
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$obj</font> eq {}} {<b><font color=#3a6797>set</font></b> obj <font color=#1b1baa>$my::p(objNUM)</font>}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$y</font> ne {}} {
    <b><font color=#3a6797>set</font></b> my::p(yvis<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$y</font>
    <b><font color=#3a6797>set</font></b> my::p(mvis<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$m</font>
    <b><font color=#3a6797>set</font></b> my::p(dvis<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$d</font>
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$my::p(tvar$obj)</font> ne {}} {
      <b><font color=#3a6797>set</font></b> p(olddate<font color=#1b1baa>$obj</font>) [my::FormatDay2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$m</font> <font color=#1b1baa>$d</font>]
      <b><font color=#3a6797>set</font></b> <font color=#1b1baa>$my::p(tvar$obj)</font> <font color=#1b1baa>$p(olddate$obj)</font>
    }
    <b><font color=#3a6797>set</font></b> my::p(currentmonth<font color=#1b1baa>$obj</font>) <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>y/<font color=#1b1baa>$</font>m&quot;</font>
    <b><font color=#3a6797>after</font></b> idle <font color=#7d1a1a>&quot;::klnd::my::ShowMonth2 <font color=#1b1baa>$</font>obj <font color=#1b1baa>$</font>m <font color=#1b1baa>$</font>y yes yes; ::klnd::blinking yes&quot;</font>
  }
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$my::p(yvis$obj)</font> <font color=#1b1baa>$my::p(mvis$obj)</font> <font color=#1b1baa>$my::p(dvis$obj)</font>]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::update'>update</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Redraws a calendar.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>update</span> <span class='ruff_arg'>?obj? ?year? ?month? ?hllist?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of the calendar; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
<tr><td class='ruff_defitem'><code><code>year</code></code></td><td class='ruff_defitem'>year to redraw; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
<tr><td class='ruff_defitem'><code><code>month</code></code></td><td class='ruff_defitem'>month to redraw; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
<tr><td class='ruff_defitem'><code><code>hllist</code></code></td><td class='ruff_defitem'>Not documented; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_12' href="javascript:toggleSource('12')">Show source</a></p>
<div id='12' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::update {{obj {}} {year {}} {month {}} {hllist {}}} {

  <i><font color=#4b5d50># Redraws a calendar.</font></i>
  <i><font color=#4b5d50>#   obj - index of the calendar</font></i>
  <i><font color=#4b5d50>#   year - year to redraw</font></i>
  <i><font color=#4b5d50>#   month - month to redraw</font></i>

  <b><font color=#3a6797>variable</font></b> my::p
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$obj</font> eq {}} {
    <b><font color=#3a6797>set</font></b> obj <font color=#1b1baa>$my::p(objNUM)</font>
    <b><font color=#3a6797>set</font></b> year <font color=#1b1baa>$my::p(yvis$obj)</font>
    <b><font color=#3a6797>set</font></b> month <font color=#1b1baa>$my::p(mvis$obj)</font>
    <b><font color=#3a6797>set</font></b> my::p(hllist<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$hllist</font>
  }
  my::ShowMonth2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$month</font> <font color=#1b1baa>$year</font> yes yes
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::weekdays'>weekdays</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a list of week days according to a locale.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>weekdays</span> <span class='ruff_arg'>?loc?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>loc</code></code></td><td class='ruff_defitem'>the locale; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Return list of weekdays and week format (%u or %w)</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_13' href="javascript:toggleSource('13')">Show source</a></p>
<div id='13' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::weekdays {{loc {}}} {

  <i><font color=#4b5d50># Gets a list of week days according to a locale.</font></i>
  <i><font color=#4b5d50>#   loc - the locale</font></i>
  <i><font color=#4b5d50># Return list of weekdays and week format (%u or %w)</font></i>

  <b><font color=#3a6797>variable</font></b> my::locales
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$loc</font> eq {}} {<b><font color=#3a6797>set</font></b> loc [my::DefaultLocale]}
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>array</font></b> names my::locales <font color=#1b1baa>$loc</font>] ne {}} {
    <b><font color=#3a6797>set</font></b> wformat <font color=#1b1baa>$my::locales($loc)</font>
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> wformat %u  ;<i><font color=#4b5d50># by default, 1st day of week is Monday</font></i>
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$wformat</font> eq {%u}} {  ;<i><font color=#4b5d50># Sunday be the last day of week</font></i>
    <b><font color=#3a6797>set</font></b> wdays {1 2 3 4 5 6 7}
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> wdays {0 1 2 3 4 5 6}
  }
  <b><font color=#3a6797>set</font></b> days [<b><font color=#3a6797>list</font></b>]
  <b><font color=#3a6797>foreach</font></b> i <font color=#1b1baa>$wdays</font> {
    <b><font color=#3a6797>lappend</font></b> days [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#7d1a1a>&quot;03/<font color=#1b1baa>[</font>expr <font color=#1b1baa>{</font>14+<font color=#1b1baa>$</font>i<font color=#1b1baa>}]</font>/2021&quot;</font>  <font color=#6c3e67>-format</font> %D <font color=#6c3e67>-locale</font> <font color=#1b1baa>$loc</font>] <font color=#6c3e67>-format</font> %a <font color=#6c3e67>-locale</font> <font color=#1b1baa>$loc</font>]
  }
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$days</font> <font color=#1b1baa>$wformat</font>]
}<br><br></code></pre></div>
</div><br><br><h1 class='ruff'><a name='::klnd::my'></a>::klnd::my<span class='tinylink'><a href='#top'>Top</a></span></h1>
<div style='clear:both;'></div>
<p class='ruff'>The <code>::klnd::my</code> namespace contains procedures for the &quot;internal&quot; usage by <em>klnd</em> package.</p>
<p class='ruff'>All of them are upper-cased, in contrast with the UI procedures of <code>klnd</code> namespace.</p>
<br><h2 class='ruff'><a name='::klnd::my-Commands'></a>Commands<span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><br><br><h4 class='ruffproc'><a name='::klnd::my::BindButtons2'>BindButtons2</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Binds events to buttons of a calendar.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>BindButtons2</span> <span class='ruff_arg'>obj</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_14' href="javascript:toggleSource('14')">Show source</a></p>
<div id='14' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::BindButtons2 {obj} {

  <i><font color=#4b5d50># Binds events to buttons of a calendar.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;38} {<b><font color=#3a6797>incr</font></b> i} {
    <b><font color=#3a6797>set</font></b> but [<font color=#1b1baa>$::klnd::my::p($obj)</font> BuT<font color=#1b1baa>$obj</font>-<font color=#1b1baa>${i}</font>KLND]
    <b><font color=#134070>bind</font></b> <font color=#1b1baa>$but</font> &lt;Button-1&gt; <font color=#7d1a1a>&quot;::klnd::my::Enter2 <font color=#1b1baa>$</font>obj <font color=#1b1baa>$</font>i 1&quot;</font>
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::ButtonTip'>ButtonTip</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a button's tip.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>ButtonTip</span> <span class='ruff_arg'>obj tipcom w</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
<tr><td class='ruff_defitem'><code><code>tipcom</code></code></td><td class='ruff_defitem'>a caller's command returning a tip</td></tr>
<tr><td class='ruff_defitem'><code><code>w</code></code></td><td class='ruff_defitem'>current day button's path</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The tipcom command can include wildcards:</p>
<table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>%W</code></td><td class='ruff_defitem'>a current day button's path</td></tr>
<tr><td class='ruff_defitem'><code>%D</code></td><td class='ruff_defitem'>a current day's value as Y/M/D</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_15' href="javascript:toggleSource('15')">Show source</a></p>
<div id='15' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::ButtonTip {obj tipcom w} {

  <i><font color=#4b5d50># Gets a button's tip.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>
  <i><font color=#4b5d50>#   tipcom - a caller's command returning a tip</font></i>
  <i><font color=#4b5d50>#   w - current day button's path</font></i>
  <i><font color=#4b5d50># The tipcom command can include wildcards:</font></i>
  <i><font color=#4b5d50>#   %W - a current day button's path</font></i>
  <i><font color=#4b5d50>#   %D - a current day's value as Y/M/D</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> res {}
  <b><font color=#3a6797>catch</font></b> {
    <b><font color=#3a6797>set</font></b> y <font color=#1b1baa>$p(yvis$obj)</font>
    <b><font color=#3a6797>set</font></b> m <font color=#1b1baa>$p(mvis$obj)</font>
    <b><font color=#3a6797>set</font></b> d [<b><font color=#3a6797>string</font></b> trim [<font color=#1b1baa>$w</font> cget <font color=#6c3e67>-text</font>]]
    <b><font color=#3a6797>set</font></b> d [::klnd::my::FormatDay2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$m</font> <font color=#1b1baa>$d</font>]
    <b><font color=#3a6797>set</font></b> tipcom [<b><font color=#3a6797>string</font></b> map [<b><font color=#3a6797>list</font></b> %W <font color=#1b1baa>$w</font> %D <font color=#1b1baa>$d</font>] <font color=#1b1baa>$tipcom</font>]
    <b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>eval</font></b> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$tipcom</font>]
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::CurrentDate'>CurrentDate</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the current date.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>CurrentDate</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_16' href="javascript:toggleSource('16')">Show source</a></p>
<div id='16' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::CurrentDate {} {

  <i><font color=#4b5d50># Gets the current date.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> sec [<b><font color=#3a6797>clock</font></b> seconds]
  <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>split</font></b> [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$sec</font> <font color=#6c3e67>-format</font> <font color=#1b1baa>$p(FINT)</font>] /] p(y) p(m) p(d)
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$sec</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::DefaultLocale'>DefaultLocale</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a default locale currently used in a system.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>DefaultLocale</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_17' href="javascript:toggleSource('17')">Show source</a></p>
<div id='17' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::DefaultLocale {} {

  <i><font color=#4b5d50># Gets a default locale currently used in a system.</font></i>

  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>lindex</font></b> [::msgcat::mcpreferences] 0]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::DoubleClick'>DoubleClick</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Processes double-clicking a button (to choose or ignore).</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>DoubleClick</span> <span class='ruff_arg'>win i</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>win</code></code></td><td class='ruff_defitem'>window's path</td></tr>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_18' href="javascript:toggleSource('18')">Show source</a></p>
<div id='18' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::DoubleClick {win i} {

  <i><font color=#4b5d50># Processes double-clicking a button (to choose or ignore).</font></i>
  <i><font color=#4b5d50>#   win - window's path</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>if</font></b> {[IsDay <font color=#1b1baa>$i</font>]} {<font color=#1b1baa>$p(obj)</font> res <font color=#1b1baa>$win</font> 1}
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::Enter'>Enter</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights a button and makes it current.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Enter</span> <span class='ruff_arg'>i ?focusin?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index</td></tr>
<tr><td class='ruff_defitem'><code><code>focusin</code></code></td><td class='ruff_defitem'>yes, if the button is clicked and focused; <i>optional, default</i> <code>0</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_19' href="javascript:toggleSource('19')">Show source</a></p>
<div id='19' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::Enter {i {focusin 0}} {

  <i><font color=#4b5d50># Highlights a button and makes it current.</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>
  <i><font color=#4b5d50>#   focusin - yes, if the button is clicked and focused</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>if</font></b> {![IsDay <font color=#1b1baa>$i</font>]} <b><font color=#ca14ca>return</font></b>
  Leave
  [<b><font color=#3a6797>set</font></b> w [<font color=#1b1baa>$p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$i</font>]] configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$p(fgsel)</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bgsel)</font>
  <b><font color=#3a6797>set</font></b> p(ienter) <font color=#1b1baa>$i</font>
  <b><font color=#3a6797>set</font></b> p(dvis) [<font color=#1b1baa>$w</font> cget <font color=#6c3e67>-text</font>]
  <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel <font color=#1b1baa>$p(after2)</font>}
  <b><font color=#3a6797>set</font></b> p(after2) [<b><font color=#3a6797>after</font></b> 10 <font color=#7d1a1a>&quot;if \[winfo exists <font color=#1b1baa>$</font>w\] <font color=#1b1baa>{</font>focus -force <font color=#1b1baa>$</font>w<font color=#1b1baa>}</font>&quot;</font>]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$focusin</font> && <font color=#1b1baa>$p(com)</font> ne {}} {<b><font color=#3a6797>eval</font></b> <font color=#1b1baa>$p(com)</font>}
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::Enter2'>Enter2</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights a button and makes it current.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Enter2</span> <span class='ruff_arg'>obj i ?focusin?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index</td></tr>
<tr><td class='ruff_defitem'><code><code>focusin</code></code></td><td class='ruff_defitem'>yes, if the button is clicked and focused; <i>optional, default</i> <code>0</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_20' href="javascript:toggleSource('20')">Show source</a></p>
<div id='20' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::Enter2 {obj i {focusin 0}} {

  <i><font color=#4b5d50># Highlights a button and makes it current.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>
  <i><font color=#4b5d50>#   focusin - yes, if the button is clicked and focused</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> isday [IsDay2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$i</font>]}]} {<b><font color=#3a6797>set</font></b> isday no}
  <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$isday</font>} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>set</font></b> w [<font color=#1b1baa>$p($obj)</font> BuT<font color=#1b1baa>$obj</font>-<font color=#1b1baa>${i}</font>KLND]
  <b><font color=#3a6797>set</font></b> p(dvis<font color=#1b1baa>$obj</font>) [<font color=#1b1baa>$w</font> cget <font color=#6c3e67>-text</font>]
  <b><font color=#3a6797>set</font></b> date [FormatDay2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$p(yvis$obj)</font> <font color=#1b1baa>$p(mvis$obj)</font> <font color=#1b1baa>$p(dvis$obj)</font>]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$focusin</font>} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(daylist$obj)</font> ne {-}} {
      <i><font color=#4b5d50># add/delete the date to/from the list of selected days</font></i>
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> di [<b><font color=#3a6797>lsearch</font></b> <font color=#6c3e67>-exact</font> <font color=#1b1baa>$p(daylist$obj)</font> <font color=#1b1baa>$date</font>]]&gt;-1} {
        <b><font color=#3a6797>set</font></b> p(daylist<font color=#1b1baa>$obj</font>) [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$p(daylist$obj)</font> <font color=#1b1baa>$di</font> <font color=#1b1baa>$di</font>]
        ShowMonth2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$p(mvis$obj)</font> <font color=#1b1baa>$p(yvis$obj)</font> no
        <b><font color=#ca14ca>return</font></b>
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#3a6797>lappend</font></b> p(daylist<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$date</font>
      }
    }
  }
  ShowMonth2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$p(mvis$obj)</font> <font color=#1b1baa>$p(yvis$obj)</font> no
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$focusin</font>} {
    <b><font color=#3a6797>set</font></b> p(olddate<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$date</font>
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(united$obj)</font>} {
      <i><font color=#4b5d50># if calendars are linked with united, unselect previously selected COMMON day</font></i>
      <i><font color=#4b5d50># and then highlight the current date</font></i>
      <b><font color=#3a6797>catch</font></b> {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(daylist$obj)</font> eq {-}} {
          <font color=#1b1baa>$p(wunited)</font> configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$p(fg1)</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bg1)</font>
        }
        <b><font color=#3a6797>if</font></b> {[<font color=#1b1baa>$p(wcurr$obj)</font> cget <font color=#6c3e67>-bg</font>] ne <font color=#1b1baa>$p(bgsel)</font>} {
          <b><font color=#3a6797>set</font></b> fg [fgMayHL <font color=#1b1baa>$obj</font> <font color=#1b1baa>$p(fg2)</font> <font color=#1b1baa>$p(yvis$obj)</font> <font color=#1b1baa>$p(mvis$obj)</font> <font color=#1b1baa>$p(dvis$obj)</font>]
          <font color=#1b1baa>$p(wcurr$obj)</font> configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$fg</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bg2)</font>
        }
      }
    }
  }
  <b><font color=#3a6797>set</font></b> p(ienter) <font color=#1b1baa>$i</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(tvar$obj)</font> ne {}} {
    <b><font color=#3a6797>set</font></b> <font color=#1b1baa>$p(tvar$obj)</font> <font color=#1b1baa>$date</font>
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(olddate$obj)</font> eq <font color=#1b1baa>$date</font>} {
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(daylist$obj)</font> ne {-}} {
        ShowMonth2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$p(mvis$obj)</font> <font color=#1b1baa>$p(yvis$obj)</font> no
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#3a6797>catch</font></b> {
          <i><font color=#4b5d50># unselect previously selected day of THIS month</font></i>
          <b><font color=#3a6797>if</font></b> {![HighlightCurrentDay2 <font color=#1b1baa>$obj</font>]} {
            <font color=#1b1baa>$p(wunited$obj)</font> configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$p(fg1)</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bg1)</font>
          }
        }
        <i><font color=#4b5d50># show selected day</font></i>
        <b><font color=#3a6797>set</font></b> fg [fgMayHL <font color=#1b1baa>$obj</font> <font color=#1b1baa>$p(fgsel)</font> <font color=#1b1baa>$p(yvis$obj)</font> <font color=#1b1baa>$p(mvis$obj)</font> <font color=#1b1baa>$p(dvis$obj)</font>]
        <font color=#1b1baa>$w</font> configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$fg</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bgsel)</font>
      }
      <i><font color=#4b5d50># save the selected widget for THIS month</font></i>
      <i><font color=#4b5d50># and as COMMON for calendars linked with united</font></i>
      <b><font color=#3a6797>set</font></b> p(wunited<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$w</font>
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(united$obj)</font>} {<b><font color=#3a6797>set</font></b> p(wunited) <font color=#1b1baa>$w</font>}
    }
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$focusin</font> && <font color=#1b1baa>$p(com$obj)</font> ne {}} {
    <b><font color=#3a6797>eval</font></b> [MapYMD <font color=#1b1baa>$p(com$obj)</font> <font color=#1b1baa>$p(yvis$obj)</font> <font color=#1b1baa>$p(mvis$obj)</font> <font color=#1b1baa>$p(dvis$obj)</font>]
  }
  HighlightCurrentDay2 <font color=#1b1baa>$obj</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::fgMayHL'>fgMayHL</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a foreground color (possibly highlighting).</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>fgMayHL</span> <span class='ruff_arg'>obj fg y m d</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>fg</code></code></td><td class='ruff_defitem'>default foreground color</td></tr>
<tr><td class='ruff_defitem'><code><code>y</code></code></td><td class='ruff_defitem'>year</td></tr>
<tr><td class='ruff_defitem'><code><code>m</code></code></td><td class='ruff_defitem'>month</td></tr>
<tr><td class='ruff_defitem'><code><code>d</code></code></td><td class='ruff_defitem'>day</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_21' href="javascript:toggleSource('21')">Show source</a></p>
<div id='21' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::fgMayHL {obj fg y m d} {

  <i><font color=#4b5d50># Gets a foreground color (possibly highlighting).</font></i>
  <i><font color=#4b5d50>#   fg - default foreground color</font></i>
  <i><font color=#4b5d50>#   y - year</font></i>
  <i><font color=#4b5d50>#   m - month</font></i>
  <i><font color=#4b5d50>#   d - day</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>foreach</font></b> item <font color=#1b1baa>$p(hllist$obj)</font> {
    <i><font color=#4b5d50># date format for highlighting is %Y/%m/%d</font></i>
    <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>split</font></b> [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$item</font> 0] /] yh mh dh
    <b><font color=#3a6797>set</font></b> dh [<b><font color=#3a6797>string</font></b> trimleft <font color=#1b1baa>$dh</font> { 0}]
    <b><font color=#3a6797>set</font></b> mh [<b><font color=#3a6797>string</font></b> trimleft <font color=#1b1baa>$mh</font> { 0}]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$y</font>==<font color=#1b1baa>$yh</font> && <font color=#1b1baa>$m</font>==<font color=#1b1baa>$mh</font> && <font color=#1b1baa>$d</font>==<font color=#1b1baa>$dh</font>} {
      <b><font color=#3a6797>set</font></b> fg red
      <b><font color=#3a6797>break</font></b>
    }
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$fg</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::FormatDay2'>FormatDay2</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a date formatted according to a current format.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>FormatDay2</span> <span class='ruff_arg'>obj y m d</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
<tr><td class='ruff_defitem'><code><code>y</code></code></td><td class='ruff_defitem'>year of the date</td></tr>
<tr><td class='ruff_defitem'><code><code>m</code></code></td><td class='ruff_defitem'>month of the date</td></tr>
<tr><td class='ruff_defitem'><code><code>d</code></code></td><td class='ruff_defitem'>day of the date</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_22' href="javascript:toggleSource('22')">Show source</a></p>
<div id='22' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::FormatDay2 {obj y m d} {

  <i><font color=#4b5d50># Gets a date formatted according to a current format.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>
  <i><font color=#4b5d50>#   y - year of the date</font></i>
  <i><font color=#4b5d50>#   m - month of the date</font></i>
  <i><font color=#4b5d50>#   d - day of the date</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#1b1baa>$m</font>/<font color=#1b1baa>$d</font>/<font color=#1b1baa>$y</font> <font color=#6c3e67>-format</font> %D] <font color=#6c3e67>-format</font> <font color=#1b1baa>$p(dformat$obj)</font> <font color=#6c3e67>-locale</font> <font color=#1b1baa>$p(loc$obj)</font>]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::GoMonth'>GoMonth</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Shifts the month backward/forward.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>GoMonth</span> <span class='ruff_arg'>i ?dobreak?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>increment for the current month</td></tr>
<tr><td class='ruff_defitem'><code><code>dobreak</code></code></td><td class='ruff_defitem'>yes when called from 'bind'; <i>optional, default</i> <code>no</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_23' href="javascript:toggleSource('23')">Show source</a></p>
<div id='23' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::GoMonth {i {dobreak no}} {

  <i><font color=#4b5d50># Shifts the month backward/forward.</font></i>
  <i><font color=#4b5d50>#   i - increment for the current month</font></i>
  <i><font color=#4b5d50>#   dobreak - yes when called from 'bind'</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> m [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$p(mvis)</font>+(<font color=#1b1baa>$i</font>)}]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$m</font>&gt;12} {<b><font color=#3a6797>set</font></b> m 1; <b><font color=#3a6797>incr</font></b> p(yvis)}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$m</font>&lt;1} {<b><font color=#3a6797>set</font></b> m 12; <b><font color=#3a6797>incr</font></b> p(yvis) -1}
  ShowMonth <font color=#1b1baa>$m</font> <font color=#1b1baa>$p(yvis)</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dobreak</font>} {<b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break}
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::GoMonth2'>GoMonth2</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Shifts the month backward/forward.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>GoMonth2</span> <span class='ruff_arg'>obj i ?dobreak?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>increment for the current month</td></tr>
<tr><td class='ruff_defitem'><code><code>dobreak</code></code></td><td class='ruff_defitem'>yes when called from 'bind'; <i>optional, default</i> <code>no</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_24' href="javascript:toggleSource('24')">Show source</a></p>
<div id='24' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::GoMonth2 {obj i {dobreak no}} {

  <i><font color=#4b5d50># Shifts the month backward/forward.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>
  <i><font color=#4b5d50>#   i - increment for the current month</font></i>
  <i><font color=#4b5d50>#   dobreak - yes when called from 'bind'</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> m [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$p(mvis$obj)</font>+(<font color=#1b1baa>$i</font>)}]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$m</font>&gt;12} {<b><font color=#3a6797>set</font></b> m 1; <b><font color=#3a6797>incr</font></b> p(yvis<font color=#1b1baa>$obj</font>)}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$m</font>&lt;1} {<b><font color=#3a6797>set</font></b> m 12; <b><font color=#3a6797>incr</font></b> p(yvis<font color=#1b1baa>$obj</font>) -1}
  ShowMonth2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$m</font> <font color=#1b1baa>$p(yvis$obj)</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dobreak</font>} {<b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break}
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::GoYear'>GoYear</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Shifts the year backward/forward.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>GoYear</span> <span class='ruff_arg'>i ?dobreak?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>increment for the current year</td></tr>
<tr><td class='ruff_defitem'><code><code>dobreak</code></code></td><td class='ruff_defitem'>yes when called from 'bind'; <i>optional, default</i> <code>no</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_25' href="javascript:toggleSource('25')">Show source</a></p>
<div id='25' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::GoYear {i {dobreak no}} {

  <i><font color=#4b5d50># Shifts the year backward/forward.</font></i>
  <i><font color=#4b5d50>#   i - increment for the current year</font></i>
  <i><font color=#4b5d50>#   dobreak - yes when called from 'bind'</font></i>

  <b><font color=#3a6797>variable</font></b> p
  ShowMonth <font color=#1b1baa>$p(mvis)</font> [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$p(yvis)</font>+(<font color=#1b1baa>$i</font>)}]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dobreak</font>} {<b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break}
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::GoYear2'>GoYear2</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Shifts the year backward/forward.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>GoYear2</span> <span class='ruff_arg'>obj i ?dobreak?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>increment for the current year</td></tr>
<tr><td class='ruff_defitem'><code><code>dobreak</code></code></td><td class='ruff_defitem'>yes when called from 'bind'; <i>optional, default</i> <code>no</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_26' href="javascript:toggleSource('26')">Show source</a></p>
<div id='26' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::GoYear2 {obj i {dobreak no}} {

  <i><font color=#4b5d50># Shifts the year backward/forward.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>
  <i><font color=#4b5d50>#   i - increment for the current year</font></i>
  <i><font color=#4b5d50>#   dobreak - yes when called from 'bind'</font></i>

  <b><font color=#3a6797>variable</font></b> p
  ShowMonth2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$p(mvis$obj)</font> [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$p(yvis$obj)</font>+(<font color=#1b1baa>$i</font>)}]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dobreak</font>} {<b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break}
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::HighlightCurrentDay'>HighlightCurrentDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights the current day's button.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>HighlightCurrentDay</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_27' href="javascript:toggleSource('27')">Show source</a></p>
<div id='27' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::HighlightCurrentDay {} {

  <i><font color=#4b5d50># Highlights the current day's button.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>catch</font></b> {[<font color=#1b1baa>$p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$p(icurr)</font>] configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$p(fg2)</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bg2)</font>}
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::HighlightCurrentDay2'>HighlightCurrentDay2</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights the current day's button.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>HighlightCurrentDay2</span> <span class='ruff_arg'>obj</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_28' href="javascript:toggleSource('28')">Show source</a></p>
<div id='28' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::HighlightCurrentDay2 {obj} {

  <i><font color=#4b5d50># Highlights the current day's button.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(currentmonth$obj)</font> eq <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>p(yvis<font color=#1b1baa>$</font>obj)/<font color=#1b1baa>$</font>p(mvis<font color=#1b1baa>$</font>obj)&quot;</font>} {
    <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>info</font></b> exists p(wcurr<font color=#1b1baa>$obj</font>)]} {
      <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> p(wcurr<font color=#1b1baa>$obj</font>) [<font color=#1b1baa>$p($obj)</font> BuT<font color=#1b1baa>$obj</font>-<font color=#1b1baa>$p(icurr$obj)</font>KLND]}
    }
    <b><font color=#3a6797>catch</font></b> {
      <b><font color=#3a6797>if</font></b> {[<font color=#1b1baa>$p(wcurr$obj)</font> cget <font color=#6c3e67>-bg</font>] ne <font color=#1b1baa>$p(bgsel)</font>} {
        <b><font color=#3a6797>set</font></b> day [<font color=#1b1baa>$p(wcurr$obj)</font> cget <font color=#6c3e67>-text</font>]
        <b><font color=#3a6797>set</font></b> fg [fgMayHL <font color=#1b1baa>$obj</font> <font color=#1b1baa>$p(fg2)</font> <font color=#1b1baa>$p(yvis$obj)</font> <font color=#1b1baa>$p(mvis$obj)</font> <font color=#1b1baa>$day</font>]
        <font color=#1b1baa>$p(wcurr$obj)</font> configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$fg</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bg2)</font>
      }
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(united$obj)</font>} {
        <i><font color=#4b5d50># if calendars are linked with united, one COMMON day selected for all</font></i>
        <b><font color=#3a6797>set</font></b> p(wcurrdate) <font color=#1b1baa>$p(wcurr$obj)</font>
      }
    }
    <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>expr</font></b> {[<b><font color=#3a6797>info</font></b> exists p(wunited<font color=#1b1baa>$obj</font>)] && [<b><font color=#3a6797>info</font></b> exists p(wcurr<font color=#1b1baa>$obj</font>)] &&  <font color=#1b1baa>$p(wunited$obj)</font> eq <font color=#1b1baa>$p(wcurr$obj)</font>}]
  }
  <b><font color=#ca14ca>return</font></b> no
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::InitCalendar'>InitCalendar</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Initializes the settings of the calendar.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>InitCalendar</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>Optional arguments.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_29' href="javascript:toggleSource('29')">Show source</a></p>
<div id='29' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::InitCalendar {args} {

  <i><font color=#4b5d50># Initializes the settings of the calendar.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>variable</font></b> locales
  InitSettings
  <b><font color=#3a6797>lassign</font></b> [::apave::parseOptions <font color=#1b1baa>$args</font>  <font color=#6c3e67>-title</font> {} <font color=#6c3e67>-value</font> {} <font color=#6c3e67>-tvar</font> {} <font color=#6c3e67>-locale</font> {} <font color=#6c3e67>-parent</font> {} <font color=#6c3e67>-dateformat</font> %D  <font color=#6c3e67>-weekday</font> {} <font color=#6c3e67>-centerme</font> {} <font color=#6c3e67>-geometry</font> {} <font color=#6c3e67>-entry</font> {} <font color=#6c3e67>-com</font> {} <font color=#6c3e67>-command</font> {}  <font color=#6c3e67>-currentmonth</font> {} <font color=#6c3e67>-united</font> no <font color=#6c3e67>-daylist</font> {-} <font color=#6c3e67>-hllist</font> {} <font color=#6c3e67>-popup</font> {} <font color=#6c3e67>-tip</font> {}]  title datevalue tvar loc parent p(dformat)  p(weekday) centerme geo entry com1 com2  p(currentmonth) p(united) p(daylist) p(hllist) p(popup) p(tip)
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$com2</font> eq {}} {<b><font color=#3a6797>set</font></b> p(com) <font color=#1b1baa>$com1</font>} {<b><font color=#3a6797>set</font></b> p(com) <font color=#1b1baa>$com2</font>}
  <i><font color=#4b5d50># get localized week day names</font></i>
  <b><font color=#3a6797>lassign</font></b> [::klnd::weekdays <font color=#1b1baa>$loc</font>] p(days) p(weekday)
  <i><font color=#4b5d50># get localized month names</font></i>
  <b><font color=#3a6797>set</font></b> p(months) [::klnd::months <font color=#1b1baa>$loc</font>]
  <b><font color=#3a6797>set</font></b> p(loc) <font color=#1b1baa>$loc</font>
  <b><font color=#3a6797>set</font></b> p(tvar) <font color=#1b1baa>$tvar</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tvar</font> ne {}} {
    <b><font color=#3a6797>set</font></b> datevalue [<b><font color=#3a6797>set</font></b> <font color=#1b1baa>$tvar</font>]
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$p(daylist)</font> ne {-}} {
    <b><font color=#3a6797>set</font></b> datevalue [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$p(daylist)</font> 0]
  }
  <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>unset</font></b> p(after)} ;<i><font color=#4b5d50># to pause more at start</font></i>
  <i><font color=#4b5d50># colors to be used</font></i>
  CurrentDate
  <b><font color=#3a6797>set</font></b> p(yvis) <font color=#1b1baa>$p(y)</font>  ;<i><font color=#4b5d50># by default, the selected date = the current date</font></i>
  <b><font color=#3a6797>set</font></b> p(mvis) <font color=#1b1baa>$p(m)</font>
  <b><font color=#3a6797>set</font></b> p(dvis) <font color=#1b1baa>$p(d)</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$title</font> eq {}} {<b><font color=#3a6797>set</font></b> title [::msgcat::mc Calendar]}
  <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> p(dformat) [<b><font color=#3a6797>subst</font></b> <font color=#1b1baa>$p(dformat)</font>]}
  <i><font color=#4b5d50># get the day to display at start</font></i>
  <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> ym [<b><font color=#3a6797>clock</font></b> scan <font color=#1b1baa>$datevalue</font> <font color=#6c3e67>-format</font> <font color=#1b1baa>$p(dformat)</font>]}]} {
    <b><font color=#3a6797>set</font></b> p(m) [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$ym</font> <font color=#6c3e67>-format</font> %N]
    <b><font color=#3a6797>set</font></b> p(y) [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$ym</font> <font color=#6c3e67>-format</font> %Y]
    <b><font color=#3a6797>set</font></b> p(dvis) [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$ym</font> <font color=#6c3e67>-format</font> %e]
  }
  ::apave::obj untouchWidgets *KLND*
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$title</font> <font color=#1b1baa>$datevalue</font> <font color=#1b1baa>$tvar</font> <font color=#1b1baa>$parent</font> <font color=#1b1baa>$centerme</font> <font color=#1b1baa>$geo</font> <font color=#1b1baa>$entry</font>]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::InitSettings'>InitSettings</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets initial settings, once only.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>InitSettings</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_30' href="javascript:toggleSource('30')">Show source</a></p>
<div id='30' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::InitSettings {} {

  <i><font color=#4b5d50># Gets initial settings, once only.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>variable</font></b> msgdir
  <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>info</font></b> exists :klnd::my::prevY]} {
    <b><font color=#3a6797>foreach</font></b> {i icon} {0 date 1 previous2 2 previous 3 next 4 next2} {
      <b><font color=#134070>image</font></b> create photo IM_KLND_<font color=#1b1baa>$i</font> <font color=#6c3e67>-data</font> [::apave::iconData <font color=#1b1baa>$icon</font> small]
    }
    <b><font color=#3a6797>lassign</font></b> [::apave::obj csGet] p(fg0) p(fg1) p(bg0) p(bg1) - p(bgsel) p(fgsel) - - p(fgh) - - - - p(fg2) p(bg2)
    <i><font color=#4b5d50># localized stuff</font></i>
    <b><font color=#3a6797>catch</font></b> {::msgcat::mcload <font color=#1b1baa>$msgdir</font>}
    <b><font color=#3a6797>set</font></b> ::klnd::my::prevY [::msgcat::mc {Previous year}]
    <b><font color=#3a6797>set</font></b> ::klnd::my::prevM [::msgcat::mc {Previous month}]
    <b><font color=#3a6797>set</font></b> ::klnd::my::nextY [::msgcat::mc {Next year}]
    <b><font color=#3a6797>set</font></b> ::klnd::my::nextM [::msgcat::mc {Next month}]
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::IsDay'>IsDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Check if a button shows a day.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>IsDay</span> <span class='ruff_arg'>i</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_31' href="javascript:toggleSource('31')">Show source</a></p>
<div id='31' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::IsDay {i} {

  <i><font color=#4b5d50># Check if a button shows a day.</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>expr</font></b> {![<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> w [<font color=#1b1baa>$p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$i</font>]}] && [<font color=#1b1baa>$w</font> cget <font color=#6c3e67>-takefocus</font>]}]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::IsDay2'>IsDay2</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Check if a button shows a day.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>IsDay2</span> <span class='ruff_arg'>obj i</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_32' href="javascript:toggleSource('32')">Show source</a></p>
<div id='32' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::IsDay2 {obj i} {

  <i><font color=#4b5d50># Check if a button shows a day.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>expr</font></b> {![<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> w [<font color=#1b1baa>$p($obj)</font> BuT<font color=#1b1baa>$obj</font>-<font color=#1b1baa>${i}</font>KLND]}] &&  [<b><font color=#3a6797>string</font></b> length [<b><font color=#3a6797>string</font></b> trim [<font color=#1b1baa>$w</font> cget <font color=#6c3e67>-text</font>]]]}]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::KeyPress'>KeyPress</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Processes the key presses on buttons.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>KeyPress</span> <span class='ruff_arg'>i K</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index</td></tr>
<tr><td class='ruff_defitem'><code><code>K</code></code></td><td class='ruff_defitem'>pressed key</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_33' href="javascript:toggleSource('33')">Show source</a></p>
<div id='33' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::KeyPress {i K} {

  <i><font color=#4b5d50># Processes the key presses on buttons.</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>
  <i><font color=#4b5d50>#   K - pressed key</font></i>

  <b><font color=#3a6797>variable</font></b> p
  Leave <font color=#1b1baa>$i</font>
  <b><font color=#3a6797>switch</font></b> <font color=#6c3e67>-glob</font> <font color=#1b1baa>$K</font> {
    Left {<b><font color=#3a6797>set</font></b> n [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$i</font>-1}]}
    Right {<b><font color=#3a6797>set</font></b> n [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$i</font>+1}]}
    Up {<b><font color=#3a6797>set</font></b> n [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$i</font>-7}]}
    Down {<b><font color=#3a6797>set</font></b> n [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$i</font>+7}]}
    Enter - Return - space {<font color=#1b1baa>$p(obj)</font> res <font color=#1b1baa>$p(win)</font> 1; <b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break}
    *Tab* {Leave; <b><font color=#134070>focus</font></b> [<font color=#1b1baa>$p(obj)</font> But_KLNDCLOSE]; <b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break}
    <b><font color=#3a6797>default</font></b> {Enter <font color=#1b1baa>$i</font>; <b><font color=#ca14ca>return</font></b>}
  }
  <b><font color=#3a6797>if</font></b> {[IsDay <font color=#1b1baa>$n</font>]} {
    Enter <font color=#1b1baa>$n</font>
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$K</font> in {Left Up}} {
    GoMonth -1
  } <b><font color=#3a6797>else</font></b> {
    GoMonth 1
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::Leave'>Leave</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Unhighlights a button.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Leave</span> <span class='ruff_arg'>?i?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index; <i>optional, default</i> <code>0</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_34' href="javascript:toggleSource('34')">Show source</a></p>
<div id='34' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::Leave {{i 0}} {

  <i><font color=#4b5d50># Unhighlights a button.</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font> && ![[<font color=#1b1baa>$p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$i</font>] cget <font color=#6c3e67>-takefocus</font>]} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>foreach</font></b> n [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$i</font> <font color=#1b1baa>$p(ienter)</font>] {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$n</font>} {[<font color=#1b1baa>$p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$n</font>] configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$p(fg1)</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bg1)</font>}
  }
  HighlightCurrentDay
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::MainWidgets'>MainWidgets</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Forms main widgets of calendar.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>MainWidgets</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_35' href="javascript:toggleSource('35')">Show source</a></p>
<div id='35' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::MainWidgets {} {

  <i><font color=#4b5d50># Forms main widgets of calendar.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(tip)</font> eq {}} {
    <b><font color=#3a6797>set</font></b> ::klnd::TMPTIP {}
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> tip [<b><font color=#3a6797>string</font></b> map [<b><font color=#3a6797>list</font></b> \{ ( \} )] <font color=#1b1baa>$p(tip)</font>] ;<i><font color=#4b5d50># for a possible bad list</font></i>
    <b><font color=#3a6797>set</font></b> ::klnd::TMPTIP <font color=#7d1a1a>&quot;-tip <font color=#1b1baa>{$</font>tip<font color=#1b1baa>}</font>&quot;</font>
  }
  <b><font color=#ca14ca>return</font></b> {
    {fra - - 1 7 {<font color=#6c3e67>-st</font> new} {}}  {.fraTool - - 1 7 {<font color=#6c3e67>-st</font> new} {}}
    {.fraTool.tool - - - - {<b><font color=#134070>pack</font></b> <font color=#6c3e67>-side</font> top} {<font color=#6c3e67>-array</font> {
      IM_KLND_0 {::klnd::my::SetCurrentDay} sev 6
      IM_KLND_1 {{::klnd::my::GoYear -1} <font color=#6c3e67>-tip</font> <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>::klnd::my::prevY\n(Home)@@-under 5&quot;</font>} h_ 2
      IM_KLND_2 {{::klnd::my::GoMonth -1} <font color=#6c3e67>-tip</font> <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>::klnd::my::prevM\n(PageUp)@@-under 5&quot;</font>} h_ 3
      LabMonth {<font color=#7d1a1a>&quot;&quot;</font> {<font color=#6c3e67>-fill</font> x <font color=#6c3e67>-expand</font> 1} {<font color=#6c3e67>-anchor</font> center <font color=#6c3e67>-w</font> 14}} h_ 2
      IM_KLND_3 {{::klnd::my::GoMonth 1} <font color=#6c3e67>-tip</font> <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>::klnd::my::nextM\n(PageDown)@@-under 5&quot;</font>} h_ 3
      IM_KLND_4 {{::klnd::my::GoYear 1} <font color=#6c3e67>-tip</font> <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>::klnd::my::nextY\n(End)@@-under 5&quot;</font>} h_ 2
    }}}
    {.fraDays .fraTool T - - {<font color=#6c3e67>-st</font> nsew}}
    {.fraDays.tcl {
      <i><font color=#4b5d50># make headers and buttons of days</font></i>
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$::tcl_platform(platform)</font> eq <font color=#7d1a1a>&quot;windows&quot;</font>} {
        <b><font color=#3a6797>set</font></b> att <font color=#7d1a1a>&quot;-highlightthickness 1 -w 6&quot;</font>
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#3a6797>set</font></b> att <font color=#7d1a1a>&quot;-highlightthickness 0 -w 3&quot;</font>
      }
      <b><font color=#3a6797>set</font></b> wt -
      <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;50} {<b><font color=#3a6797>incr</font></b> i} {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font>&lt;8} {<b><font color=#3a6797>set</font></b> cur <font color=#7d1a1a>&quot;.fraDays.LabDay<font color=#1b1baa>$</font>i&quot;</font>} {<b><font color=#3a6797>set</font></b> cur <font color=#7d1a1a>&quot;.fraDays.BuT_KLNDSTD<font color=#1b1baa>[</font>expr <font color=#1b1baa>{$</font>i-7<font color=#1b1baa>}]</font>&quot;</font>}
        <b><font color=#3a6797>if</font></b> {(<font color=#1b1baa>$i</font>%7)!=1} {<b><font color=#3a6797>set</font></b> p L; <b><font color=#3a6797>set</font></b> pw <font color=#1b1baa>$pr</font>} {<b><font color=#3a6797>set</font></b> p T; <b><font color=#3a6797>set</font></b> pw <font color=#1b1baa>$wt</font>; <b><font color=#3a6797>set</font></b> wt <font color=#1b1baa>$cur</font>}
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font>&lt;8} {
          <b><font color=#3a6797>set</font></b> lwid <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>cur <font color=#1b1baa>$</font>pw <font color=#1b1baa>$</font>p 1 1 <font color=#1b1baa>{</font>-st ew<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>-anchor center -foreground <font color=#1b1baa>$</font>::klnd::my::p(fgh)<font color=#1b1baa>}</font>&quot;</font>
        } <b><font color=#3a6797>else</font></b> {
          <b><font color=#3a6797>set</font></b> lwid <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>cur <font color=#1b1baa>$</font>pw <font color=#1b1baa>$</font>p 1 1 <font color=#1b1baa>{</font>-st ew<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>-relief flat -overrelief flat -bd 0 -takefocus 0 -padx 8 -pady 4 -font <font color=#1b1baa>{$</font>::apave::FONTMAIN<font color=#1b1baa>}</font> -com <font color=#1b1baa>{</font>::klnd::my::Enter <font color=#1b1baa>[</font>expr <font color=#1b1baa>{$</font>i-7<font color=#1b1baa>}]</font> 1<font color=#1b1baa>}</font> <font color=#1b1baa>$</font>::klnd::TMPTIP <font color=#1b1baa>$</font>att<font color=#1b1baa>}</font>&quot;</font>
        }
        %C <font color=#1b1baa>$lwid</font>
        <b><font color=#3a6797>set</font></b> pr <font color=#1b1baa>$cur</font>
      }
    }}
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::MainWidgets2'>MainWidgets2</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Forms main widgets of calendar.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>MainWidgets2</span> <span class='ruff_arg'>obj ownname</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
<tr><td class='ruff_defitem'><code><code>ownname</code></code></td><td class='ruff_defitem'>frame for calendar</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_36' href="javascript:toggleSource('36')">Show source</a></p>
<div id='36' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::MainWidgets2 {obj ownname} {

  <i><font color=#4b5d50># Forms main widgets of calendar.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>
  <i><font color=#4b5d50>#   ownname - frame for calendar</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> ::klnd::TMPTIP {}
  <b><font color=#3a6797>catch</font></b> {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(tip$obj)</font> ne {}} {
      <b><font color=#3a6797>set</font></b> tipcom [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$p(tip)</font>] ;<i><font color=#4b5d50># possible bad list</font></i>
      <b><font color=#3a6797>set</font></b> ::klnd::TMPTIP  <font color=#7d1a1a>&quot;-tip <font color=#1b1baa>{</font> -BALTIP %W -COMMAND <font color=#1b1baa>{</font>::klnd::my::ButtonTip <font color=#1b1baa>$</font>obj <font color=#1b1baa>{$</font>tipcom<font color=#1b1baa>}</font> %w<font color=#1b1baa>}</font> <font color=#1b1baa>}</font>&quot;</font>
    }
  }
  <b><font color=#3a6797>set</font></b> p(tipF3<font color=#1b1baa>$obj</font>)  <font color=#7d1a1a>&quot;<font color=#1b1baa>[</font>::msgcat::mc <font color=#1b1baa>{</font>Current date<font color=#1b1baa>}]</font>:  <font color=#1b1baa>[</font>clock format <font color=#1b1baa>[</font>CurrentDate<font color=#1b1baa>]</font> -format <font color=#1b1baa>$</font>p(dformat<font color=#1b1baa>$</font>obj) -locale <font color=#1b1baa>$</font>p(loc<font color=#1b1baa>$</font>obj)<font color=#1b1baa>]</font>&quot;</font>
  <b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>list</font></b> <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>ownname.fra - - 1 10 <font color=#1b1baa>{</font>-st new<font color=#1b1baa>}</font> <font color=#1b1baa>{}</font>&quot;</font>]
  <i><font color=#4b5d50># if calendars are united, no display of tool bar</font></i>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(united$obj)</font>} {
    <b><font color=#3a6797>lappend</font></b> res  <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>ownname.fra.LabMonth<font color=#1b1baa>$</font>obj - - - - <font color=#1b1baa>{</font>pack -fill x -expand 1<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>-anchor center -w 14<font color=#1b1baa>}</font>&quot;</font>
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>lappend</font></b> res  <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>ownname.fra.tool - - - - <font color=#1b1baa>{</font>pack -side top<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>-array <font color=#1b1baa>{</font>  IM_KLND_0 <font color=#1b1baa>{{</font>::klnd::my::SetCurrentDay2 <font color=#1b1baa>$</font>obj<font color=#1b1baa>}</font> -tip <font color=#1b1baa>{$</font>::klnd::my::p(tipF3<font color=#1b1baa>$</font>obj)@@-under 5<font color=#1b1baa>}}</font> sev 6  IM_KLND_1 <font color=#1b1baa>{{</font>::klnd::my::GoYear2 <font color=#1b1baa>$</font>obj -1<font color=#1b1baa>}</font> -tip <font color=#1b1baa>{$</font>::klnd::my::prevY\n(Home)@@-under 5<font color=#1b1baa>}}</font> h_ 2  IM_KLND_2 <font color=#1b1baa>{{</font>::klnd::my::GoMonth2 <font color=#1b1baa>$</font>obj -1<font color=#1b1baa>}</font> -tip <font color=#1b1baa>{$</font>::klnd::my::prevM\n(PageUp)@@-under 5<font color=#1b1baa>}}</font> h_ 3  LabMonth<font color=#1b1baa>$</font>obj <font color=#1b1baa>{{}</font> <font color=#1b1baa>{</font>-fill x -expand 1<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>-anchor center -w 14<font color=#1b1baa>}}</font> h_ 2  IM_KLND_3 <font color=#1b1baa>{{</font>::klnd::my::GoMonth2 <font color=#1b1baa>$</font>obj 1<font color=#1b1baa>}</font> -tip <font color=#1b1baa>{$</font>::klnd::my::nextM\n(PageDown)@@-under 5<font color=#1b1baa>}}</font> h_ 3  IM_KLND_4 <font color=#1b1baa>{{</font>::klnd::my::GoYear2 <font color=#1b1baa>$</font>obj 1<font color=#1b1baa>}</font> -tip <font color=#1b1baa>{$</font>::klnd::my::nextY\n(End)@@-under 5<font color=#1b1baa>}}</font> h_ 2  <font color=#1b1baa>}}</font>&quot;</font>
  }
  <b><font color=#3a6797>lappend</font></b> res <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>ownname.fraDays <font color=#1b1baa>$</font>ownname.fra T - - <font color=#1b1baa>{</font>-st nsew<font color=#1b1baa>}</font>&quot;</font>
  <b><font color=#3a6797>lappend</font></b> res  [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$ownname</font>.fraDays.tcl <font color=#7d1a1a>&quot;  if <font color=#1b1baa>{{$</font>::tcl_platform(platform)<font color=#1b1baa>}</font> eq <font color=#1b1baa>{</font>windows<font color=#1b1baa>}}</font> <font color=#1b1baa>{</font>  set att <font color=#1b1baa>{</font>-highlightthickness 1 -w 6<font color=#1b1baa>}</font>  <font color=#1b1baa>}</font> else <font color=#1b1baa>{</font>  set att <font color=#1b1baa>{</font>-highlightthickness 0 -w 3<font color=#1b1baa>}</font>  <font color=#1b1baa>}</font> ;  set wt - ;  for <font color=#1b1baa>{</font>set i 1<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>\$i&lt;50<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>incr i<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>  if <font color=#1b1baa>{</font>\$i&lt;8<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>set cur <font color=#1b1baa>$</font>ownname.fraDays.LabDay<font color=#1b1baa>$</font>obj\$i<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>set cur <font color=#1b1baa>$</font>ownname.fraDays.BuT<font color=#1b1baa>$</font>obj-\[expr <font color=#1b1baa>{</font>\$i-7<font color=#1b1baa>}</font>\]KLND<font color=#1b1baa>}</font> ;  if <font color=#1b1baa>{</font>(\$i%7)!=1<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>set p L; set pw \$pr<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>set p T; set pw \$wt; set wt \$cur<font color=#1b1baa>}</font> ;  if <font color=#1b1baa>{</font>\$i&lt;8<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>  set lwid \&quot;\$cur \$pw \$p 1 1 <font color=#1b1baa>{</font>-st ew<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>-anchor center -foreground <font color=#1b1baa>$</font>::klnd::my::p(fgh)<font color=#1b1baa>}</font>\&quot;  <font color=#1b1baa>}</font> else <font color=#1b1baa>{</font>  set lwid \&quot;\$cur \$pw \$p 1 1 <font color=#1b1baa>{</font>-st ew<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>-relief flat -overrelief flat -bd 0 -takefocus 0  -padx 8 -pady 4 -font <font color=#1b1baa>{$</font>::apave::FONTMAIN<font color=#1b1baa>}</font> -com <font color=#1b1baa>{</font>::klnd::my::Enter2 <font color=#1b1baa>$</font>obj \[expr <font color=#1b1baa>{</font>\$i-7<font color=#1b1baa>}</font>\]<font color=#1b1baa>}</font> <font color=#1b1baa>$</font>::klnd::TMPTIP \$att<font color=#1b1baa>}</font>\&quot;  <font color=#1b1baa>}</font> ;  %C \$lwid ;  set pr \$cur  <font color=#1b1baa>}</font>&quot;</font>
    ]
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::MapYMD'>MapYMD</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a script with %y, %m, %d wildcards.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>MapYMD</span> <span class='ruff_arg'>script y m d</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>script</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>y</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>m</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>d</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_37' href="javascript:toggleSource('37')">Show source</a></p>
<div id='37' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::MapYMD {script y m d} {

  <i><font color=#4b5d50># Gets a script with %y, %m, %d wildcards.</font></i>

  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>string</font></b> map [<b><font color=#3a6797>list</font></b> %y <font color=#1b1baa>$y</font> %m <font color=#1b1baa>$m</font> %d <font color=#1b1baa>$d</font>] <font color=#1b1baa>$script</font>]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::SetCurrentDay'>SetCurrentDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Goes to the current date.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>SetCurrentDay</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_38' href="javascript:toggleSource('38')">Show source</a></p>
<div id='38' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::SetCurrentDay {} {

  <i><font color=#4b5d50># Goes to the current date.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> p(dvis) 0
  ShowMonth <font color=#1b1baa>$p(m)</font> <font color=#1b1baa>$p(y)</font>
  Enter <font color=#1b1baa>$p(icurr)</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::SetCurrentDay2'>SetCurrentDay2</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Goes to the current date.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>SetCurrentDay2</span> <span class='ruff_arg'>obj</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_39' href="javascript:toggleSource('39')">Show source</a></p>
<div id='39' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::SetCurrentDay2 {obj} {

  <i><font color=#4b5d50># Goes to the current date.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> p(dvis<font color=#1b1baa>$obj</font>) 0
  ShowMonth2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$p(m)</font> <font color=#1b1baa>$p(y)</font>
  Enter2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$p(icurr$obj)</font> 1
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::ShowMonth'>ShowMonth</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Displays a month's days.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>ShowMonth</span> <span class='ruff_arg'>m y</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>m</code></code></td><td class='ruff_defitem'>month y -year</td></tr>
<tr><td class='ruff_defitem'><code><code>y</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_40' href="javascript:toggleSource('40')">Show source</a></p>
<div id='40' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::ShowMonth {m y} {

  <i><font color=#4b5d50># Displays a month's days.</font></i>
  <i><font color=#4b5d50>#   m - month</font></i>
  <i><font color=#4b5d50>#   y -year</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> sec [CurrentDate]
  <b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> {max(<font color=#1b1baa>$y</font>,1753)}]
  ::baltip::tip [<font color=#1b1baa>$p(obj)</font> BuT_IM_KLND_0]  <font color=#7d1a1a>&quot;<font color=#1b1baa>[</font>::msgcat::mc <font color=#1b1baa>{</font>Current date<font color=#1b1baa>}]</font>: <font color=#1b1baa>[</font>clock format <font color=#1b1baa>$</font>sec -format <font color=#1b1baa>$</font>p(dformat)<font color=#1b1baa>]</font>\n(F3)&quot;</font> <font color=#6c3e67>-under</font> 5
  <i><font color=#4b5d50># display month & year</font></i>
  [<font color=#1b1baa>$p(obj)</font> LabMonth] configure <font color=#6c3e67>-text</font>  <font color=#7d1a1a>&quot;<font color=#1b1baa>[</font>lindex <font color=#1b1baa>$</font>p(months) <font color=#1b1baa>[</font>expr <font color=#1b1baa>{$</font>m-1<font color=#1b1baa>}]]</font> <font color=#1b1baa>$</font>y&quot;</font>  <font color=#6c3e67>-font</font> [::apave::obj boldDefFont [<b><font color=#3a6797>expr</font></b> {[::apave::obj basicFontSize]+2}]]
  <i><font color=#4b5d50># display day names</font></i>
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;8} {<b><font color=#3a6797>incr</font></b> i} {
    [<font color=#1b1baa>$p(obj)</font> LabDay<font color=#1b1baa>$i</font>] configure <font color=#6c3e67>-text</font> <font color=#7d1a1a>&quot; <font color=#1b1baa>[</font>lindex <font color=#1b1baa>$</font>p(days) <font color=#1b1baa>$</font>i-1<font color=#1b1baa>]</font> &quot;</font>
  }
  <i><font color=#4b5d50># 1st day of the month's first week:</font></i>
  <b><font color=#3a6797>set</font></b> i0 [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>m/1/<font color=#1b1baa>$</font>y&quot;</font> <font color=#6c3e67>-format</font> %D] <font color=#6c3e67>-format</font> %w]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(weekday)</font> eq <font color=#7d1a1a>&quot;%u&quot;</font>} {<b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i0</font>} {<b><font color=#3a6797>incr</font></b> i0 -1} {<b><font color=#3a6797>set</font></b> i0 6}}
  <i><font color=#4b5d50># get the last day of month</font></i>
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> yl <font color=#1b1baa>$y</font>] && [<b><font color=#3a6797>set</font></b> ml <font color=#1b1baa>$m</font>]==12} {<b><font color=#3a6797>set</font></b> ml 1; <b><font color=#3a6797>incr</font></b> yl}
  <b><font color=#3a6797>set</font></b> lday [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#7d1a1a>&quot;<font color=#1b1baa>[</font>incr ml<font color=#1b1baa>]</font>/1/<font color=#1b1baa>$</font>yl 1 day ago&quot;</font>] <font color=#6c3e67>-format</font> %d]
  <b><font color=#3a6797>set</font></b> iday [<b><font color=#3a6797>set</font></b> p(icurr) 0]
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;43} {<b><font color=#3a6797>incr</font></b> i} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font>&lt;=<font color=#1b1baa>$i0</font> || <font color=#1b1baa>$iday</font>&gt;=<font color=#1b1baa>$lday</font>} {
      <b><font color=#3a6797>set</font></b> att <font color=#7d1a1a>&quot;-takefocus 0 -text <font color=#1b1baa>{</font>    <font color=#1b1baa>}</font> -activebackground <font color=#1b1baa>$</font>p(bg1)&quot;</font>
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>set</font></b> att <font color=#7d1a1a>&quot;-takefocus 1 -text <font color=#1b1baa>{[</font>incr iday<font color=#1b1baa>]}</font> -activeforeground <font color=#1b1baa>$</font>p(fg0) -activebackground <font color=#1b1baa>$</font>p(bg0)&quot;</font>
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$iday</font>==<font color=#1b1baa>$p(dvis)</font> || (<font color=#1b1baa>$iday</font>==<font color=#1b1baa>$lday</font> && <font color=#1b1baa>$iday</font>&lt;<font color=#1b1baa>$p(dvis)</font>)} {
        <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists p(after)]} {<b><font color=#3a6797>set</font></b> af 20} {<b><font color=#3a6797>set</font></b> af 200} ;<i><font color=#4b5d50># less at key pressing tight</font></i>
        <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel <font color=#1b1baa>$p(after)</font>}
        <b><font color=#3a6797>set</font></b> p(after) [<b><font color=#3a6797>after</font></b> <font color=#1b1baa>$af</font> <font color=#7d1a1a>&quot;::klnd::my::Enter <font color=#1b1baa>$</font>i; ::klnd::my::HighlightCurrentDay&quot;</font>]
      }
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$iday</font>==1} {<b><font color=#3a6797>set</font></b> p(d1st) <font color=#1b1baa>$i</font>}
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$y</font>==<font color=#1b1baa>$p(y)</font> && <font color=#1b1baa>$m</font>==<font color=#1b1baa>$p(m)</font> && <font color=#1b1baa>$iday</font>==<font color=#1b1baa>$p(d)</font>} {
        <b><font color=#3a6797>set</font></b> p(icurr) <font color=#1b1baa>$i</font>  ;<i><font color=#4b5d50># button's index of the current date</font></i>
      }
    }
    [<font color=#1b1baa>$p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$i</font>] configure {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$att</font> <font color=#6c3e67>-fg</font> <font color=#1b1baa>$p(fg1)</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bg1)</font> <font color=#6c3e67>-relief</font> flat <font color=#6c3e67>-overrelief</font> flat
  }
  <b><font color=#3a6797>set</font></b> p(mvis) <font color=#1b1baa>$m</font>  ;<i><font color=#4b5d50># month & year currently visible</font></i>
  <b><font color=#3a6797>set</font></b> p(yvis) <font color=#1b1baa>$y</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::ShowMonth2'>ShowMonth2</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Displays a month's days.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>ShowMonth2</span> <span class='ruff_arg'>obj m y ?doenter? ?dopopup?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>obj</code></code></td><td class='ruff_defitem'>index of calendar</td></tr>
<tr><td class='ruff_defitem'><code><code>m</code></code></td><td class='ruff_defitem'>month</td></tr>
<tr><td class='ruff_defitem'><code><code>y</code></code></td><td class='ruff_defitem'>year</td></tr>
<tr><td class='ruff_defitem'><code><code>doenter</code></code></td><td class='ruff_defitem'>yes, if perform Enter2 proc; <i>optional, default</i> <code>yes</code></td></tr>
<tr><td class='ruff_defitem'><code><code>dopopup</code></code></td><td class='ruff_defitem'>yes, if bind a popup menu; <i>optional, default</i> <code>no</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_41' href="javascript:toggleSource('41')">Show source</a></p>
<div id='41' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::ShowMonth2 {obj m y {doenter yes} {dopopup no}} {

  <i><font color=#4b5d50># Displays a month's days.</font></i>
  <i><font color=#4b5d50>#   obj - index of calendar</font></i>
  <i><font color=#4b5d50>#   m - month</font></i>
  <i><font color=#4b5d50>#   y - year</font></i>
  <i><font color=#4b5d50>#   doenter - yes, if perform Enter2 proc</font></i>
  <i><font color=#4b5d50>#   dopopup - yes, if bind a popup menu</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> {max(<font color=#1b1baa>$y</font>,[::klnd::minYear])}]
  <i><font color=#4b5d50># if calendars are linked with united, no display of year in a title</font></i>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(united$obj)</font>} {<b><font color=#3a6797>set</font></b> yd {}} {<b><font color=#3a6797>set</font></b> yd <font color=#7d1a1a>&quot; <font color=#1b1baa>$</font>y&quot;</font>}
  [<font color=#1b1baa>$p($obj)</font> LabMonth<font color=#1b1baa>$obj</font>] configure <font color=#6c3e67>-text</font>  <font color=#7d1a1a>&quot;<font color=#1b1baa>[</font>lindex <font color=#1b1baa>$</font>p(months<font color=#1b1baa>$</font>obj) <font color=#1b1baa>[</font>expr <font color=#1b1baa>{$</font>m-1<font color=#1b1baa>}]]$</font>yd&quot;</font>  <font color=#6c3e67>-font</font> [::apave::obj boldDefFont [<b><font color=#3a6797>expr</font></b> {[::apave::obj basicFontSize]+2}]]
  <i><font color=#4b5d50># highlight color</font></i>
  <b><font color=#3a6797>set</font></b> hlcolor red ;<i><font color=#4b5d50>#[lindex [::apave::obj csGet] 17]</font></i>
  <i><font color=#4b5d50># display day names</font></i>
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;8} {<b><font color=#3a6797>incr</font></b> i} {
    [<font color=#1b1baa>$p($obj)</font> LabDay<font color=#1b1baa>$obj$i</font>] configure <font color=#6c3e67>-text</font> <font color=#7d1a1a>&quot; <font color=#1b1baa>[</font>lindex <font color=#1b1baa>$</font>p(days<font color=#1b1baa>$</font>obj) <font color=#1b1baa>$</font>i-1<font color=#1b1baa>]</font> &quot;</font>
  }
  <i><font color=#4b5d50># 1st day of the month's first week:</font></i>
  <b><font color=#3a6797>set</font></b> i0 [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>m/1/<font color=#1b1baa>$</font>y&quot;</font> <font color=#6c3e67>-format</font> %D] <font color=#6c3e67>-format</font> %w]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(weekday$obj)</font> eq {%u}} {<b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i0</font>} {<b><font color=#3a6797>incr</font></b> i0 -1} {<b><font color=#3a6797>set</font></b> i0 6}}
  <i><font color=#4b5d50># get the last day of month</font></i>
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> yl <font color=#1b1baa>$y</font>] && [<b><font color=#3a6797>set</font></b> ml <font color=#1b1baa>$m</font>]==12} {<b><font color=#3a6797>set</font></b> ml 1; <b><font color=#3a6797>incr</font></b> yl}
  <b><font color=#3a6797>set</font></b> lday [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#7d1a1a>&quot;<font color=#1b1baa>[</font>incr ml<font color=#1b1baa>]</font>/1/<font color=#1b1baa>$</font>yl 1 day ago&quot;</font>] <font color=#6c3e67>-format</font> %d]
  <b><font color=#3a6797>set</font></b> iday [<b><font color=#3a6797>set</font></b> p(icurr<font color=#1b1baa>$obj</font>) 0]
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;43} {<b><font color=#3a6797>incr</font></b> i} {
    <b><font color=#3a6797>set</font></b> fg <font color=#1b1baa>$p(fg1)</font>
    <b><font color=#3a6797>set</font></b> bg <font color=#1b1baa>$p(bg1)</font>
    <b><font color=#3a6797>set</font></b> wbut [<font color=#1b1baa>$p($obj)</font> BuT<font color=#1b1baa>$obj</font>-<font color=#1b1baa>${i}</font>KLND]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font>&lt;=<font color=#1b1baa>$i0</font> || <font color=#1b1baa>$iday</font>&gt;=<font color=#1b1baa>$lday</font>} {
      <b><font color=#3a6797>set</font></b> att <font color=#7d1a1a>&quot;-takefocus 0 -text <font color=#1b1baa>{</font>    <font color=#1b1baa>}</font> -activebackground <font color=#1b1baa>$</font>p(bg1)&quot;</font>
      <b><font color=#3a6797>set</font></b> script {}
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>set</font></b> att <font color=#7d1a1a>&quot;-takefocus 0 -text <font color=#1b1baa>{[</font>incr iday<font color=#1b1baa>]}</font> -activeforeground <font color=#1b1baa>$</font>p(fg0) -activebackground <font color=#1b1baa>$</font>p(bg0)&quot;</font>
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$doenter</font> && (<font color=#1b1baa>$iday</font>==<font color=#1b1baa>$p(dvis$obj)</font> || (<font color=#1b1baa>$iday</font>==<font color=#1b1baa>$lday</font> && <font color=#1b1baa>$iday</font>&lt;<font color=#1b1baa>$p(dvis$obj)</font>))} {
        <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel <font color=#1b1baa>$p(after$obj)</font>}
        <b><font color=#3a6797>set</font></b> p(after<font color=#1b1baa>$obj</font>) [<b><font color=#3a6797>after</font></b> idle  <font color=#7d1a1a>&quot;::klnd::my::Enter2 <font color=#1b1baa>$</font>obj <font color=#1b1baa>$</font>i; ::klnd::my::HighlightCurrentDay2 <font color=#1b1baa>$</font>obj&quot;</font>]
      }
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$iday</font>==1} {<b><font color=#3a6797>set</font></b> p(d1st) <font color=#1b1baa>$i</font>}
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$y</font>==<font color=#1b1baa>$p(y)</font> && <font color=#1b1baa>$m</font>==<font color=#1b1baa>$p(m)</font> && <font color=#1b1baa>$iday</font>==<font color=#1b1baa>$p(d)</font>} {
        <b><font color=#3a6797>set</font></b> p(icurr<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$i</font>  ;<i><font color=#4b5d50># button's index of the current date</font></i>
      }
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(daylist$obj)</font> ne {-}} {
        <b><font color=#3a6797>set</font></b> dt [FormatDay2 <font color=#1b1baa>$obj</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$m</font> <font color=#1b1baa>$iday</font>]
        <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>lsearch</font></b> <font color=#6c3e67>-exact</font> <font color=#1b1baa>$p(daylist$obj)</font> <font color=#1b1baa>$dt</font>]&gt;-1} {
          <b><font color=#3a6797>set</font></b> fg <font color=#1b1baa>$p(fgsel)</font>
          <b><font color=#3a6797>set</font></b> bg <font color=#1b1baa>$p(bgsel)</font>
        } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$p(currentdate)</font> eq <font color=#7d1a1a>&quot;<font color=#1b1baa>$</font>y/<font color=#1b1baa>$</font>m/<font color=#1b1baa>$</font>iday&quot;</font>} {
          <b><font color=#3a6797>set</font></b> fg <font color=#1b1baa>$p(fg2)</font>
          <b><font color=#3a6797>set</font></b> bg <font color=#1b1baa>$p(bg2)</font>
        }
      }
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dopopup</font>} {
        <b><font color=#3a6797>set</font></b> script [MapYMD <font color=#1b1baa>$p(popup$obj)</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$m</font> <font color=#1b1baa>$iday</font>]
      }
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dopopup</font> && <font color=#1b1baa>$p(popup$obj)</font> ne {}} {
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$wbut</font> &lt;Button-3&gt; <font color=#1b1baa>$script</font>
    }
    <i><font color=#4b5d50># as last refuge: highlighting fg by hllist</font></i>
    <b><font color=#3a6797>set</font></b> fg [fgMayHL <font color=#1b1baa>$obj</font> <font color=#1b1baa>$fg</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$m</font> <font color=#1b1baa>$iday</font>]
    <font color=#1b1baa>$wbut</font> configure {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$att</font> <font color=#6c3e67>-relief</font> flat <font color=#6c3e67>-overrelief</font> flat <font color=#6c3e67>-fg</font> <font color=#1b1baa>$fg</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$bg</font>
  }
  <b><font color=#3a6797>set</font></b> p(mvis<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$m</font>  ;<i><font color=#4b5d50># month & year currently visible</font></i>
  <b><font color=#3a6797>set</font></b> p(yvis<font color=#1b1baa>$obj</font>) <font color=#1b1baa>$y</font>
}<br><br></code></pre></div>
</div></div></div><div class='yui-b navbox' ><h1><a href='#::klnd'>klnd</a></h1><h2><a href='#::klnd-Usage in apave package'>Usage in apave package</a></h2><h2><a href='#::klnd-Commands'>Commands</a></h2><h4 class='tooltip'><a href='klnd.html#::klnd::blinking'>blinking</a><span class='tooltiptext'>Makes a calendar label blink.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::calendar'>calendar</a><span class='tooltiptext'>The main procedure of the calendar's toplevel.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::calendar2'>calendar2</a><span class='tooltiptext'>The main procedure of the calendar embedded widget.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::clearArgs'>clearArgs</a><span class='tooltiptext'>Removes specific options from args.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::currentYearMonthDay'>currentYearMonthDay</a><span class='tooltiptext'>Gets current year, month, day. Return a list of  current year, month, day.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::getDaylist'>getDaylist</a><span class='tooltiptext'>Gets a day list which was set initially and possibly changed by a user.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::labelPath'>labelPath</a><span class='tooltiptext'>Gets a title label path.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::maxYear'>maxYear</a><span class='tooltiptext'>Gets maximal year that is correct.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::minYear'>minYear</a><span class='tooltiptext'>Gets minimal year that is correct.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::months'>months</a><span class='tooltiptext'>Gets a list of months according to a locale.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::selectedDay'>selectedDay</a><span class='tooltiptext'>Gets a selected day.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::update'>update</a><span class='tooltiptext'>Redraws a calendar.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::weekdays'>weekdays</a><span class='tooltiptext'>Gets a list of week days according to a locale.
</span></h4><h1><a href='#::klnd::my'>klnd::my</a></h1><h2><a href='#::klnd::my-Commands'>Commands</a></h2><h4 class='tooltip'><a href='klnd.html#::klnd::my::BindButtons2'>BindButtons2</a><span class='tooltiptext'>Binds events to buttons of a calendar.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::ButtonTip'>ButtonTip</a><span class='tooltiptext'>Gets a button's tip.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::CurrentDate'>CurrentDate</a><span class='tooltiptext'>Gets the current date.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::DefaultLocale'>DefaultLocale</a><span class='tooltiptext'>Gets a default locale currently used in a system.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::DoubleClick'>DoubleClick</a><span class='tooltiptext'>Processes double-clicking a button (to choose or ignore).
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::Enter'>Enter</a><span class='tooltiptext'>Highlights a button and makes it current.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::Enter2'>Enter2</a><span class='tooltiptext'>Highlights a button and makes it current.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::fgMayHL'>fgMayHL</a><span class='tooltiptext'>Gets a foreground color (possibly highlighting).
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::FormatDay2'>FormatDay2</a><span class='tooltiptext'>Gets a date formatted according to a current format.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::GoMonth'>GoMonth</a><span class='tooltiptext'>Shifts the month backward/forward.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::GoMonth2'>GoMonth2</a><span class='tooltiptext'>Shifts the month backward/forward.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::GoYear'>GoYear</a><span class='tooltiptext'>Shifts the year backward/forward.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::GoYear2'>GoYear2</a><span class='tooltiptext'>Shifts the year backward/forward.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::HighlightCurrentDay'>HighlightCurrentDay</a><span class='tooltiptext'>Highlights the current day's button.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::HighlightCurrentDay2'>HighlightCurrentDay2</a><span class='tooltiptext'>Highlights the current day's button.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::InitCalendar'>InitCalendar</a><span class='tooltiptext'>Initializes the settings of the calendar.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::InitSettings'>InitSettings</a><span class='tooltiptext'>Gets initial settings, once only.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::IsDay'>IsDay</a><span class='tooltiptext'>Check if a button shows a day.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::IsDay2'>IsDay2</a><span class='tooltiptext'>Check if a button shows a day.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::KeyPress'>KeyPress</a><span class='tooltiptext'>Processes the key presses on buttons.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::Leave'>Leave</a><span class='tooltiptext'>Unhighlights a button.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::MainWidgets'>MainWidgets</a><span class='tooltiptext'>Forms main widgets of calendar.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::MainWidgets2'>MainWidgets2</a><span class='tooltiptext'>Forms main widgets of calendar.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::MapYMD'>MapYMD</a><span class='tooltiptext'>Gets a script with %y, %m, %d wildcards.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::SetCurrentDay'>SetCurrentDay</a><span class='tooltiptext'>Goes to the current date.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::SetCurrentDay2'>SetCurrentDay2</a><span class='tooltiptext'>Goes to the current date.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::ShowMonth'>ShowMonth</a><span class='tooltiptext'>Displays a month's days.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::ShowMonth2'>ShowMonth2</a><span class='tooltiptext'>Displays a month's days.
</span></h4></div></div><div id='ft'><div style='float: right;'>Document generated by <a href='https://ruff.magicsplat.com'>Ruff!</a></div></div>
</div></body></html>
