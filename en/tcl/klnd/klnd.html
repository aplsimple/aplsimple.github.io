<!DOCTYPE html><html><head><meta charset="utf-8"/>
<link rel="stylesheet" href="../../../zoo/sh/styles/aplsimple.css">
<title>::klnd reference</title>
<style>
/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,button,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,var,optgroup{font-style:inherit;font-weight:inherit;}del,ins{text-decoration:none;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:baseline;}sub{vertical-align:baseline;}legend{color:#000;}input,button,textarea,select,optgroup,option{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;}input,button,textarea,select{*font-size:100%;}body{font:13px/1.231 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small;}select,input,button,textarea,button{font:99% arial,helvetica,clean,sans-serif;}table{font-size:inherit;font:100%;}pre,code,kbd,samp,tt{font-family:Consolas,"Courier New",monospace;font-size:100%;line-height:100%;}body{text-align:center;}#doc,#doc2,#doc3,#doc4,.yui-t1,.yui-t2,.yui-t3,.yui-t4,.yui-t5,.yui-t6,.yui-t7{margin:auto;text-align:left;width:57.69em;*width:56.25em;}#doc2{width:73.076em;*width:71.25em;}#doc3{margin:auto;width:auto;}#doc4{width:74.923em;*width:73.05em;}.yui-b{position:relative;}.yui-b{_position:static;}#yui-main .yui-b{position:static;}#yui-main,.yui-g .yui-u .yui-g{width:100%;}.yui-t1 #yui-main,.yui-t2 #yui-main,.yui-t3 #yui-main{float:right;margin-left:-25em;}.yui-t4 #yui-main,.yui-t5 #yui-main,.yui-t6 #yui-main{float:left;margin-right:-25em;}.yui-t1 .yui-b{float:left;width:12.30769em;*width:12.00em;}.yui-t1 #yui-main .yui-b{margin-left:13.30769em;*margin-left:13.05em;}.yui-t2 .yui-b{float:left;width:9.8461em;*width:13.50em;}.yui-t2 #yui-main .yui-b{margin-left:10.8461em;*margin-left:14.55em;}.yui-t3 .yui-b{float:left;width:23.0769em;*width:22.50em;}.yui-t3 #yui-main .yui-b{margin-left:24.0769em;*margin-left:23.62em;}.yui-t4 .yui-b{float:right;width:13.8456em;*width:13.50em;}.yui-t4 #yui-main .yui-b{margin-right:14.8456em;*margin-right:14.55em;}.yui-t5 .yui-b{float:right;width:18.4615em;*width:18.00em;}.yui-t5 #yui-main .yui-b{margin-right:19.4615em;*margin-right:19.125em;}.yui-t6 .yui-b{float:right;width:23.0769em;*width:22.50em;}.yui-t6 #yui-main .yui-b{margin-right:24.0769em;*margin-right:23.62em;}.yui-t7 #yui-main .yui-b{display:block;margin:0 0 1em 0;}#yui-main .yui-b{float:none;width:auto;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf,.yui-gc .yui-u,.yui-gd .yui-g,.yui-g .yui-gc .yui-u,.yui-ge .yui-u,.yui-ge .yui-g,.yui-gf .yui-g,.yui-gf .yui-u{float:right;}.yui-g div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first,.yui-ge div.first,.yui-gf div.first,.yui-g .yui-gc div.first,.yui-g .yui-ge div.first,.yui-gc div.first div.first{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf{width:49.1%;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{width:32%;margin-left:1.99%;}.yui-gb .yui-u{*margin-left:1.9%;*width:31.9%;}.yui-gc div.first,.yui-gd .yui-u{width:66%;}.yui-gd div.first{width:32%;}.yui-ge div.first,.yui-gf .yui-u{width:74.2%;}.yui-ge .yui-u,.yui-gf div.first{width:24%;}.yui-g .yui-gb div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first{margin-left:0;}.yui-g .yui-g .yui-u,.yui-gb .yui-g .yui-u,.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u,.yui-ge .yui-g .yui-u,.yui-gf .yui-g .yui-u{width:49%;*width:48.1%;*margin-left:0;}.yui-g .yui-g .yui-u{width:48.1%;}.yui-g .yui-gb div.first,.yui-gb .yui-gb div.first{*margin-right:0;*width:32%;_width:31.7%;}.yui-g .yui-gc div.first,.yui-gd .yui-g{width:66%;}.yui-gb .yui-g div.first{*margin-right:4%;_margin-right:1.3%;}.yui-gb .yui-gc div.first,.yui-gb .yui-gd div.first{*margin-right:0;}.yui-gb .yui-gb .yui-u,.yui-gb .yui-gc .yui-u{*margin-left:1.8%;_margin-left:4%;}.yui-g .yui-gb .yui-u{_margin-left:1.0%;}.yui-gb .yui-gd .yui-u{*width:66%;_width:61.2%;}.yui-gb .yui-gd div.first{*width:31%;_width:29.5%;}.yui-g .yui-gc .yui-u,.yui-gb .yui-gc .yui-u{width:32%;_float:right;margin-right:0;_margin-left:0;}.yui-gb .yui-gc div.first{width:66%;*float:left;*margin-left:0;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf .yui-u{margin:0;}.yui-gb .yui-gb .yui-u{_margin-left:.7%;}.yui-gb .yui-g div.first,.yui-gb .yui-gb div.first{*margin-left:0;}.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u{*width:48.1%;*margin-left:0;}.yui-gb .yui-gd div.first{width:32%;}.yui-g .yui-gd div.first{_width:29.9%;}.yui-ge .yui-g{width:24%;}.yui-gf .yui-g{width:74.2%;}.yui-gb .yui-ge div.yui-u,.yui-gb .yui-gf div.yui-u{float:right;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf div.first{float:left;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf div.first{*width:24%;_width:20%;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf .yui-u{*width:73.5%;_width:65.5%;}.yui-ge div.first .yui-gd .yui-u{width:65%;}.yui-ge div.first .yui-gd div.first{width:32%;}#hd:after,#bd:after,#ft:after,.yui-g:after,.yui-gb:after,.yui-gc:after,.yui-gd:after,.yui-ge:after,.yui-gf:after{content:".";display:block;height:0;clear:both;visibility:hidden;}#hd,#bd,#ft,.yui-g,.yui-gb,.yui-gc,.yui-gd,.yui-ge,.yui-gf{zoom:0;}

body{margin:10px;}h1{font-size:138.5%;}h2{font-size:123.1%;}h3{font-size:108%;}h1,h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6,strong,dt{font-weight:bold;}optgroup{font-weight:normal;}abbr,acronym{border-bottom:1px dotted #000;cursor:help;}em{font-style:italic;}del{text-decoration:line-through;}blockquote,ul,ol,dl{margin:1em;}ol,ul,dl{margin-left:2em;}ol li{list-style:decimal outside;}ul li{list-style:disc outside;}dl dd{margin-left:1em;}th,td{border:1px solid #000;padding:.5em;}th{font-weight:bold;text-align:center;}caption{margin-bottom:.5em;text-align:center;}sup{vertical-align:super;}sub{vertical-align:sub;}p,fieldset,table,pre{margin-bottom:1em;}button,input[type="checkbox"],input[type="radio"],input[type="reset"],input[type="submit"]{padding:1px;}

/* Ruff default CSS */

body {
  /*max-width: 70em;*/
  margin: 0;
}

h1,h2 {
  color: #888888;
  margin-bottom: 0.5em;
  margin-top: 0em;
}

#ft { font-size: x-small; font-family: Arial, sans-serif;
  text-align: left;
  border-top: 1px solid #0B3467;
  color: #888888;
  margin-top: 10px;
}

.banner h2 {
  color: #0B3467;
}

#hd.banner {
 font-family: "Times New Roman", serif;
 font-size: 200%;
 line-height: 64px;
 border-bottom: thin solid #0B3467;
 color: #0B3467;
}

p.linkline {
  text-align: right;
  font-size: smaller;
  /*    margin-top: -1em; */
  margin-bottom: 0;
}

.tinylink {
  font-size: x-small;
  font-variant: normal;
  font-family: Arial, sans-serif;
  float: right;
  padding:2px;
}

h1 .tinylink a {
  color: white;
}

#bd {
font-family: Arial, sans-serif;
/*font-size: 108%;*/
}

div.navbox {
  /* margin-top: 1em; */
  background-color: #0B3467;
  color: white;
  padding: 3px 4px 2px 4px;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

div.navbox:hover {
  overflow: visible;
}

/* Note .navbox header css should be based on $header_levels */
.navbox h1, .navbox h2, .navbox h3, .navbox h4, .navbox h5 {
  font-size: 85%;
  margin: 0px;
  font-weight: normal;
}
.navbox h1 {
  font-weight: bold; /* Override */
}
.navbox h2 {
  padding-left: 1em;
}
.navbox h3 {
  padding-left: 2em;
}
.navbox h4 {
  padding-left: 2.5em;
  font-weight: normal;
}
.navbox h5 {
  padding-left: 3em;
  font-weight: normal;
}
.navbox hr {
  color: white;
  margin-top:0.1em;
  margin-bottom:0.1em;
}

.navbox a:link, .navbox a:visited, .navbox a:hover {
  text-decoration: none;
  color: white;
  background-color: #0B3467;
}

.navbox a:hover {
   font-weight: bold;
}

/* Tooltip text - see https://www.w3schools.com/css/css_tooltip.asp */
.tooltip {
  position: relative;
  /* display: inline-block; */
}

.tooltip .tooltiptext {
  width: 100%;
  font-weight: bold;
  background-color: white;
  color: #0B3467;
  text-align: left;
  border: 1px solid #0B3467;
  /* border-radius: 4px; */
  position: absolute;
  z-index: 1;
  margin-left: 4px;
  padding: 2px 3px;
  visibility: hidden;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}

span.ns_scope {
  color: #aaaaaa;
}

span.ns_scope a:link, span.ns_scope a:visited {
  text-decoration: none;
  color: #aaaaaa;

}

li {
  margin-top: 0.5em;
}

span.ns_scope a:hover {
  text-decoration: none;
  color: #666666;
}

table {
  margin: 1em;
  margin-top: 0.5em;
  border: thin solid;
  border-collapse: collapse;
  border-color: #808080;
  padding: 4px;
}

td {
  border: thin solid;
  border-color: #808080;
  vertical-align: top;
  font-size: 93%;
  padding: 0.3em;
  padding-top: 0.1em;
}
th {
  border: thin solid;
  border-color: #808080;
  padding: 0.3em;
  padding-top: 0.1em;
  background-color: #CCCCCC;
}

dt, dd {
   font-size: 93%;
}

h1.ruff {
  background-color: #0B3467;
  color: #ffffff;
  padding-left: 0.2em;
  font-family: "Times New Roman", serif;
}
h2.ruff {
  font-variant: small-caps;
  color: #0B3467;
  font-weight: bold;
  font-family: "Times New Roman", serif;
}

h3.ruff, h4.ruff, h5.ruff, h6.ruff {
  color: #0B3467;
}
h5.ruff {
  font-style: italic;
  font-weight: normal;
}
h6.ruff {
  font-weight: normal;
}
h3.ruffclass, h3.ruffproc, h3.ruffmethod,
h4.ruffclass, h4.ruffproc, h4.ruffmethod,
h5.ruffclass, h5.ruffproc, h5.ruffmethod {
  border-bottom: thin solid #0B3467;
  color: #0B3467;
  margin-bottom: 0.2em;
}

pre {
  background-color: #f9f9f9;
  margin-top: 1em;
  margin-left: 1em;
  padding: 5px;
  font-family: Consolas, "Courier New", monospace;
  /* width: max-content; --- to leave footsteps */ overflow: auto;
  line-height: 1.2em;
}

.ruff_dyn_src {
  display: none; /* Displayed via JS */
}

.ruff_synopsis {
  border: thin solid #cccccc;
  background: #f9f9f9;
  font-family: Consolas, "Courier New", monospace;
  padding: 5px;
  margin: 0em 2em 1em;
}
.ruff_const, .ruff_cmd, ruff_defitem {
  font-weight: bold;
  font-family: Consolas, "Courier New", monospace;
}
.ruff_arg {
  font-style: italic;
  font-family: Consolas, "Courier New", monospace;
}

.ruff_source_link {
  font-size: smaller;
}

.ruff_index {
  font-size: small;
  color: grey;
  line-height: 1;
}

.ruff_index ul li {
  list-style-type: none;
}

.ruff_index ul li a {
  text-decoration: none;
}
</style>
<script>function toggleSource( id )
{
  /* Copied from Rails */
  var elem
  var link

  if( document.getElementById )
  {
      elem = document.getElementById( id )
      link = document.getElementById( "l_" + id )
  }
  else if ( document.all )
  {
      elem = eval( "document.all." + id )
      link = eval( "document.all.l_" + id )
  }
  else
      return false;

  if( elem.style.display == "block" )
  {
      elem.style.display = "none"
      link.innerHTML = "Show source"
  }
  else
  {
      elem.style.display = "block"
      link.innerHTML = "Hide source"
  }
}
</script></head>
<meta name="author" content="aplsimple">
<meta name="description" content="aplsimple's home page">
<meta name="keywords" content="aplsimple,home">
<link rel="stylesheet" href="../../../en/zoo/style.css">
<style>
table{
background-color: #f9f9f9;
margin: 0%;
margin-bottom: 2%;
padding: 0%;
box-shadow: none;
filter: none;
}
pre{
margin: 0%;
margin-bottom: 2%;
padding: 0%;
}
</style>
<link rel="icon" type="image/jpg" href="../../../zoo/favicon.jpg">
<body>
<div id="wrapper">
<div name="divd1" ALIGN="CENTER"> <FONT SIZE=5em color=#b01c20><B>
<noscript>THIS PAGE IS NOT WORKING WITHOUT JAVASCRIPT!
<BR>
<BR>PLEASE, SWITCH ON JAVASCRIPT IN SETTINGS OF YOUR BROWSER AND RELOAD THE PAGE.
</noscript>
</B></FONT></div>
<div id='doc3' class='yui-t2'>
<script src="../../../zoo/funcs.js"></script>
<script src="../../../en/zoo/this.js"></script>
<section id=sec2>
<div id='hd' class='banner'>
<a name='klnd.html'>::klnd reference</a>
</div>
<div id='bd'><div id='yui-main'><div class='yui-b'><h1 class='ruff'><a name='::klnd'></a>::klnd<span class='tinylink'><a href='#top'>Top</a></span></h1>
<div style='clear:both;'></div>
<br><h2 class='ruff'><a name='::klnd-Commands'></a>Commands<span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><br><br><h4 class='ruffproc'><a name='::klnd::calendar'>calendar</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>The main procedure of the calendar's toplevel.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>calendar</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>options of the calendar</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_calendar' href="javascript:toggleSource('klnd_calendar')">Show source</a></p>
<div id='klnd_calendar' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::calendar {args} {
  <i><font color=#4b5d50># The main procedure of the calendar's toplevel.</font></i>
  <i><font color=#4b5d50>#   args - options of the calendar</font></i>

  <b><font color=#3a6797>variable</font></b> my::p
  <b><font color=#3a6797>set</font></b> my::p(isWidget) no
  <i><font color=#4b5d50># get options and initialize the calendar's settings</font></i>
  <b><font color=#3a6797>lassign</font></b> [my::InitCalendar {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>] title datevalue tvar parent centerme geo entry
  <b><font color=#3a6797>set</font></b> args [clearArgs {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
  <i><font color=#4b5d50># priority of geometry options: -geometry, -entry, -parent, -centerme</font></i>
  <i><font color=#4b5d50># if no geometry option, show the calendar under the mouse pointer</font></i>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$geo</font> ne {}} {
    <b><font color=#3a6797>set</font></b> geo <font color=#8b2a0e>&quot;-geometry <font color=#1b1baa>$</font>geo&quot;</font>
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$entry</font> ne {} && [<b><font color=#3a6797>string</font></b> first GEO <font color=#1b1baa>$entry</font>]&lt;0} {
    <b><font color=#3a6797>set</font></b> x [<b><font color=#134070>winfo</font></b> rootx <font color=#1b1baa>$entry</font>]
    <b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> {[<b><font color=#134070>winfo</font></b> rooty <font color=#1b1baa>$entry</font>]+32}]
    <b><font color=#3a6797>set</font></b> geo <font color=#8b2a0e>&quot;-geometry +<font color=#1b1baa>$</font>x+<font color=#1b1baa>$</font>y&quot;</font>
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$parent</font> ne {}} {
    <b><font color=#3a6797>set</font></b> geo <font color=#8b2a0e>&quot;-centerme <font color=#1b1baa>$</font>parent&quot;</font>    ;<i><font color=#4b5d50># to center in a toplevel window</font></i>
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$centerme</font> ne {}} {
    <b><font color=#3a6797>set</font></b> geo <font color=#8b2a0e>&quot;-centerme <font color=#1b1baa>$</font>centerme&quot;</font>  ;<i><font color=#4b5d50># it's an option of apave's</font></i>
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> geo <font color=#8b2a0e>&quot;-geometry +<font color=#1b1baa>[</font>expr <font color=#1b1baa>{[</font>winfo pointerx .<font color=#1b1baa>]</font>+10<font color=#1b1baa>}]</font>+<font color=#1b1baa>[</font>expr <font color=#1b1baa>{[</font>winfo pointery .<font color=#1b1baa>]</font>+10<font color=#1b1baa>}]</font>&quot;</font>
  }
  <b><font color=#3a6797>set</font></b> parent [<b><font color=#3a6797>string</font></b> trimright <font color=#1b1baa>$parent</font> .]
  <b><font color=#3a6797>set</font></b> win [<b><font color=#3a6797>set</font></b> my::p(win) <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>parent._apave_CALENDAR_&quot;</font>]
  <b><font color=#3a6797>catch</font></b> {<font color=#1b1baa>$my::p(obj)</font> destroy}
  <i><font color=#4b5d50># create apave object and layout its window</font></i>
  <b><font color=#3a6797>set</font></b> my::p(obj) [::apave::APave create APAVE_CLND <font color=#1b1baa>$win</font>]
  <font color=#1b1baa>$my::p(obj)</font> makeWindow <font color=#1b1baa>$win</font>.fra <font color=#1b1baa>$title</font>
  <font color=#1b1baa>$my::p(obj)</font> paveWindow <font color=#1b1baa>$win</font>.fra [<b><font color=#3a6797>list</font></b>  {<b><font color=#3a6797>*</font></b>}[my::MainWidgets]  {seh fra T 1 7 {<font color=#6c3e67>-pady</font> 0}}  {fraBottom seh T 1 7 {<font color=#6c3e67>-st</font> ew <font color=#6c3e67>-pady</font> 1}}  {fraBottom.h_ - - - - {<b><font color=#134070>pack</font></b> <font color=#6c3e67>-fill</font> both <font color=#6c3e67>-expand</font> 1 <font color=#6c3e67>-side</font> left} {}}  {fraBottom.ButOK - - - - {<b><font color=#134070>pack</font></b> <font color=#6c3e67>-side</font> left} {<font color=#6c3e67>-t</font> OK <font color=#6c3e67>-com</font> ::klnd::my::PickDay}}  {fraBottom.ButClose - - - - {<b><font color=#134070>pack</font></b> <font color=#6c3e67>-side</font> left} {<font color=#6c3e67>-t</font> <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>my::Close&quot;</font> <font color=#6c3e67>-com</font> <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>my::p(obj) res <font color=#1b1baa>$</font>win 0&quot;</font>}}  ]
  <b><font color=#3a6797>unset</font></b> <font color=#6c3e67>-nocomplain</font> ::klnd::TMPTIP
  <b><font color=#3a6797>unset</font></b> <font color=#6c3e67>-nocomplain</font> ::klnd::TMPPACKW
  <i><font color=#4b5d50># binds for day buttons and 'Close'</font></i>
  <b><font color=#3a6797>foreach</font></b> {ev prc} { &lt;Home&gt; <font color=#8b2a0e>&quot;::klnd::my::GoYear -1 yes&quot;</font> &lt;End&gt; <font color=#8b2a0e>&quot;::klnd::my::GoYear 1 yes&quot;</font>  &lt;Prior&gt; <font color=#8b2a0e>&quot;::klnd::my::GoMonth -1 yes&quot;</font> &lt;Next&gt; <font color=#8b2a0e>&quot;::klnd::my::GoMonth 1 yes&quot;</font>} {
    <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;38} {<b><font color=#3a6797>incr</font></b> i} {
      <b><font color=#3a6797>set</font></b> but [<font color=#1b1baa>$my::p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$i</font>]
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$but</font> <font color=#1b1baa>$ev</font> <font color=#1b1baa>$prc</font>
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$but</font> &lt;FocusIn&gt; <font color=#8b2a0e>&quot;::klnd::my::Enter <font color=#1b1baa>$</font>i&quot;</font>
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$but</font> &lt;Button-1&gt; <font color=#8b2a0e>&quot;::klnd::my::Enter <font color=#1b1baa>$</font>i 0 <font color=#1b1baa>{</font>-code break<font color=#1b1baa>}</font>&quot;</font>
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$but</font> &lt;KeyPress&gt; <font color=#8b2a0e>&quot;::klnd::my::KeyPress <font color=#1b1baa>$</font>i %K %s&quot;</font>
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$but</font> &lt;Double-1&gt; <font color=#8b2a0e>&quot;::klnd::my::PickDay <font color=#1b1baa>$</font>i <font color=#1b1baa>{</font>-code break<font color=#1b1baa>}</font>&quot;</font>
    }
    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>bind</font></b> [<font color=#1b1baa>$my::p(obj)</font> ButClose] <font color=#1b1baa>$ev</font> <font color=#1b1baa>$prc</font>}
  }
  <b><font color=#134070>bind</font></b> <font color=#1b1baa>$win</font> &lt;F3&gt; ::klnd::my::SetCurrentDay
  <b><font color=#134070>bind</font></b> <font color=#1b1baa>$win</font> &lt;KeyPress&gt; <font color=#8b2a0e>&quot;::klnd::my::Leave&quot;</font>
  <b><font color=#3a6797>set</font></b> bok [<font color=#1b1baa>$my::p(obj)</font> ButOK]
  <b><font color=#134070>bind</font></b> <font color=#1b1baa>$bok</font> &lt;FocusIn&gt; {::klnd::my::ChosenDay yes}
  <b><font color=#134070>bind</font></b> <font color=#1b1baa>$bok</font> &lt;FocusOut&gt; <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>bok configure -text OK&quot;</font>
  <i><font color=#4b5d50># show and work with the calendar</font></i>
  <b><font color=#3a6797>after</font></b> idle <font color=#8b2a0e>&quot;::klnd::my::ShowMonth <font color=#1b1baa>$</font>my::p(m) <font color=#1b1baa>$</font>my::p(y) yes&quot;</font>
  <b><font color=#3a6797>set</font></b> res [<font color=#1b1baa>$my::p(obj)</font> showModal <font color=#1b1baa>$win</font> <font color=#6c3e67>-resizable</font> no {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$geo</font>]
  <i><font color=#4b5d50># get the result of the selection if any</font></i>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$res</font> && <font color=#1b1baa>$my::p(dvis)</font>} {
    <b><font color=#3a6797>set</font></b> res [my::ChosenDay]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tvar</font> ne {}} {<b><font color=#3a6797>set</font></b> <font color=#1b1baa>$tvar</font> <font color=#1b1baa>$res</font>}
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> res {}
  }
  <b><font color=#3a6797>catch</font></b> {<font color=#1b1baa>$my::p(obj)</font> destroy}
  <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>destroy</font></b> <font color=#1b1baa>$win</font>}
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::clearArgs'>clearArgs</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Removes specific options from args.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>clearArgs</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>list of options</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_clearArgs' href="javascript:toggleSource('klnd_clearArgs')">Show source</a></p>
<div id='klnd_clearArgs' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::clearArgs {args} {
  <i><font color=#4b5d50># Removes specific options from args.</font></i>
  <i><font color=#4b5d50>#   args - list of options</font></i>

  ::apave::removeOptions <font color=#1b1baa>$args</font> <font color=#6c3e67>-title</font> <font color=#6c3e67>-value</font> <font color=#6c3e67>-tvar</font> <font color=#6c3e67>-locale</font> <font color=#6c3e67>-parent</font>  <font color=#6c3e67>-dateformat</font> <font color=#6c3e67>-weekday</font> <font color=#6c3e67>-com</font> <font color=#6c3e67>-command</font> <font color=#6c3e67>-currentmonth</font> <font color=#6c3e67>-united</font> <font color=#6c3e67>-daylist</font>  <font color=#6c3e67>-hllist</font> <font color=#6c3e67>-popup</font> <font color=#6c3e67>-tip</font> <font color=#6c3e67>-weeks</font> <font color=#6c3e67>-hlweeks</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::clearup'>clearup</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Clearance for klnd data (variable my::p).</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>clearup</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_clearup' href="javascript:toggleSource('klnd_clearup')">Show source</a></p>
<div id='klnd_clearup' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::clearup {} {
  <i><font color=#4b5d50># Clearance for klnd data (variable my::p).</font></i>

  <b><font color=#3a6797>variable</font></b> my::p
  <b><font color=#3a6797>array</font></b> unset my::p *
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::currentYearMonthDay'>currentYearMonthDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets current year, month, day.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>currentYearMonthDay</span> </div>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of current year, month, day.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_currentYearMonthDay' href="javascript:toggleSource('klnd_currentYearMonthDay')">Show source</a></p>
<div id='klnd_currentYearMonthDay' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::currentYearMonthDay {} {
  <i><font color=#4b5d50># Gets current year, month, day.</font></i>
  <i><font color=#4b5d50># Returns a list of current year, month, day.</font></i>

  <b><font color=#3a6797>set</font></b> cl [<b><font color=#3a6797>clock</font></b> seconds]
  <b><font color=#3a6797>foreach</font></b> d {Y N e} {<b><font color=#3a6797>lappend</font></b> res {<b><font color=#3a6797>*</font></b>}[<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$cl</font> <font color=#6c3e67>-format</font> %<font color=#1b1baa>$d</font>]}
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::maxYear'>maxYear</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets maximal year that is correct.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>maxYear</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_maxYear' href="javascript:toggleSource('klnd_maxYear')">Show source</a></p>
<div id='klnd_maxYear' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::maxYear {} {
  <i><font color=#4b5d50># Gets maximal year that is correct.</font></i>

  <b><font color=#ca14ca>return</font></b> 9999
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::minYear'>minYear</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets minimal year that is correct.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>minYear</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_minYear' href="javascript:toggleSource('klnd_minYear')">Show source</a></p>
<div id='klnd_minYear' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::minYear {} {
  <i><font color=#4b5d50># Gets minimal year that is correct.</font></i>

  <b><font color=#ca14ca>return</font></b> 1753
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::months'>months</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a list of months according to a locale.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>months</span> <span class='ruff_arg'>?loc?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>loc</code></code></td><td class='ruff_defitem'>the locale; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_months' href="javascript:toggleSource('klnd_months')">Show source</a></p>
<div id='klnd_months' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::months {{loc {}}} {
  <i><font color=#4b5d50># Gets a list of months according to a locale.</font></i>
  <i><font color=#4b5d50>#   loc - the locale</font></i>

  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$loc</font> eq {}} {<b><font color=#3a6797>set</font></b> loc [my::DefaultLocale]}
  <b><font color=#3a6797>set</font></b> months [<b><font color=#3a6797>list</font></b>]
  <b><font color=#3a6797>foreach</font></b> i {01 02 03 04 05 06 07 08 09 10 11 12} {
    <b><font color=#3a6797>lappend</font></b> months [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>i/01/2021&quot;</font>  <font color=#6c3e67>-format</font> %D <font color=#6c3e67>-locale</font> <font color=#1b1baa>$loc</font>] <font color=#6c3e67>-format</font> %B <font color=#6c3e67>-locale</font> <font color=#1b1baa>$loc</font>]
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$months</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::weekdays'>weekdays</a><span class='ns_scope'> [<a href="klnd.html#::klnd" title="::klnd" class='ruff_cmd'>::klnd</a>]</span><span class='tinylink'><a href='klnd.html#::klnd'>klnd</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a list of week days according to a locale.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>weekdays</span> <span class='ruff_arg'>?loc?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>loc</code></code></td><td class='ruff_defitem'>the locale; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Return list of weekdays and week format (%u or %w)</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_weekdays' href="javascript:toggleSource('klnd_weekdays')">Show source</a></p>
<div id='klnd_weekdays' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::weekdays {{loc {}}} {
  <i><font color=#4b5d50># Gets a list of week days according to a locale.</font></i>
  <i><font color=#4b5d50>#   loc - the locale</font></i>
  <i><font color=#4b5d50># Return list of weekdays and week format (%u or %w)</font></i>

  <b><font color=#3a6797>variable</font></b> my::locales
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$loc</font> eq {}} {<b><font color=#3a6797>set</font></b> loc [my::DefaultLocale]}
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>array</font></b> names my::locales <font color=#1b1baa>$loc</font>] ne {}} {
    <b><font color=#3a6797>set</font></b> wformat <font color=#1b1baa>$my::locales($loc)</font>
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> wformat %u  ;<i><font color=#4b5d50># by default, 1st day of week is Monday</font></i>
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$wformat</font> eq {%u}} {  ;<i><font color=#4b5d50># Sunday be the last day of week</font></i>
    <b><font color=#3a6797>set</font></b> wdays {1 2 3 4 5 6 7}
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> wdays {0 1 2 3 4 5 6}
  }
  <b><font color=#3a6797>set</font></b> days [<b><font color=#3a6797>list</font></b>]
  <b><font color=#3a6797>foreach</font></b> i <font color=#1b1baa>$wdays</font> {
    <b><font color=#3a6797>lappend</font></b> days [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#8b2a0e>&quot;03/<font color=#1b1baa>[</font>expr <font color=#1b1baa>{</font>14+<font color=#1b1baa>$</font>i<font color=#1b1baa>}]</font>/2021&quot;</font>  <font color=#6c3e67>-format</font> %D <font color=#6c3e67>-locale</font> <font color=#1b1baa>$loc</font>] <font color=#6c3e67>-format</font> %a <font color=#6c3e67>-locale</font> <font color=#1b1baa>$loc</font>]
  }
  <b><font color=#3a6797>list</font></b> <font color=#1b1baa>$days</font> <font color=#1b1baa>$wformat</font>
}<br><br></code></pre></div>
</div><br><br><h1 class='ruff'><a name='::klnd::my'></a>::klnd::my<span class='tinylink'><a href='#top'>Top</a></span></h1>
<div style='clear:both;'></div>
<br><h2 class='ruff'><a name='::klnd::my-Commands'></a>Commands<span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><br><br><h4 class='ruffproc'><a name='::klnd::my::ChosenDay'>ChosenDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Formats a chosen day and displays it at need.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>ChosenDay</span> <span class='ruff_arg'>?show?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>show</code></code></td><td class='ruff_defitem'>if yes, displays the result; <i>optional, default</i> <code>no</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_ChosenDay' href="javascript:toggleSource('klnd_my_ChosenDay')">Show source</a></p>
<div id='klnd_my_ChosenDay' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::ChosenDay {{show no}} {
  <i><font color=#4b5d50># Formats a chosen day and displays it at need.</font></i>
  <i><font color=#4b5d50>#   show - if yes, displays the result</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> res {}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(dvis)</font>} {
    <b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#1b1baa>$p(mvis)</font>/<font color=#1b1baa>$p(dvis)</font>/<font color=#1b1baa>$p(yvis)</font> <font color=#6c3e67>-format</font> %D] <font color=#6c3e67>-format</font> <font color=#1b1baa>$p(dformat)</font>]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$show</font>} {[<font color=#1b1baa>$p(obj)</font> ButOK] configure <font color=#6c3e67>-text</font> <font color=#1b1baa>$res</font>}
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::CurrentDate'>CurrentDate</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the current date.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>CurrentDate</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_CurrentDate' href="javascript:toggleSource('klnd_my_CurrentDate')">Show source</a></p>
<div id='klnd_my_CurrentDate' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::CurrentDate {} {
  <i><font color=#4b5d50># Gets the current date.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> sec [<b><font color=#3a6797>clock</font></b> seconds]
  <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>split</font></b> [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$sec</font> <font color=#6c3e67>-format</font> <font color=#1b1baa>$p(FINT)</font>] /] p(y) p(m) p(d)
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$sec</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::DefaultLocale'>DefaultLocale</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a default locale currently used in a system.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>DefaultLocale</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_DefaultLocale' href="javascript:toggleSource('klnd_my_DefaultLocale')">Show source</a></p>
<div id='klnd_my_DefaultLocale' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::DefaultLocale {} {
  <i><font color=#4b5d50># Gets a default locale currently used in a system.</font></i>

  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>lindex</font></b> [::msgcat::mcpreferences] 0]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::Enter'>Enter</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights a button and makes it current.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Enter</span> <span class='ruff_arg'>i ?focusin? ?ret?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index</td></tr>
<tr><td class='ruff_defitem'><code><code>focusin</code></code></td><td class='ruff_defitem'>yes, if the button is clicked and focused; <i>optional, default</i> <code>0</code></td></tr>
<tr><td class='ruff_defitem'><code><code>ret</code></code></td><td class='ruff_defitem'>&quot;return -code&quot; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_Enter' href="javascript:toggleSource('klnd_my_Enter')">Show source</a></p>
<div id='klnd_my_Enter' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::Enter {i {focusin 0} {ret {}}} {
  <i><font color=#4b5d50># Highlights a button and makes it current.</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>
  <i><font color=#4b5d50>#   focusin - yes, if the button is clicked and focused</font></i>
  <i><font color=#4b5d50>#   ret - &quot;return -code&quot;</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>if</font></b> {![IsDay <font color=#1b1baa>$i</font>]} {<b><font color=#ca14ca>return</font></b> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$ret</font>}
  Leave
  <b><font color=#3a6797>lassign</font></b> [fgHL <font color=#1b1baa>$i</font> <font color=#1b1baa>$p(fgsel)</font>] w fg fg2
  <font color=#1b1baa>$w</font> configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$fg</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bgsel)</font>
  <b><font color=#3a6797>set</font></b> p(ienter) <font color=#1b1baa>$i</font>
  <b><font color=#3a6797>set</font></b> p(dvis) [<font color=#1b1baa>$w</font> cget <font color=#6c3e67>-text</font>]
  <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel <font color=#1b1baa>$p(after2)</font>}
  <b><font color=#3a6797>set</font></b> p(after2) [<b><font color=#3a6797>after</font></b> 10 <font color=#8b2a0e>&quot;if \[winfo exists <font color=#1b1baa>$</font>w\] <font color=#1b1baa>{</font>focus -force <font color=#1b1baa>$</font>w<font color=#1b1baa>}</font>&quot;</font>]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$focusin</font> && <font color=#1b1baa>$p(com)</font> ne {}} {
    <b><font color=#3a6797>eval</font></b> [MapYMD <font color=#1b1baa>$p(com)</font> <font color=#1b1baa>$p(yvis)</font> <font color=#1b1baa>$p(mvis)</font> <font color=#1b1baa>$p(dvis)</font>]
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::fgHL'>fgHL</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights day from -hllist option.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>fgHL</span> <span class='ruff_arg'>n fg</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>n</code></code></td><td class='ruff_defitem'>day button's index</td></tr>
<tr><td class='ruff_defitem'><code><code>fg</code></code></td><td class='ruff_defitem'>default fg color</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns list of button path, fg for day, fg for week</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_fgHL' href="javascript:toggleSource('klnd_my_fgHL')">Show source</a></p>
<div id='klnd_my_fgHL' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::fgHL {n fg} {
  <i><font color=#4b5d50># Highlights day from -hllist option.</font></i>
  <i><font color=#4b5d50>#   n - day button's index</font></i>
  <i><font color=#4b5d50>#   fg - default fg color</font></i>
  <i><font color=#4b5d50># Returns list of button path, fg for day, fg for week</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> but [<font color=#1b1baa>$p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$n</font>]
  <b><font color=#3a6797>set</font></b> d [<font color=#1b1baa>$but</font> cget <font color=#6c3e67>-text</font>]
  <b><font color=#3a6797>lassign</font></b> [fgMayHL <font color=#1b1baa>$fg</font> <font color=#1b1baa>$p(yvis)</font> <font color=#1b1baa>$p(mvis)</font> <font color=#1b1baa>$d</font>] fg fg2
  <b><font color=#3a6797>list</font></b> <font color=#1b1baa>$but</font> <font color=#1b1baa>$fg</font> <font color=#1b1baa>$fg2</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::fgMayHL'>fgMayHL</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets -fg option for day cell &amp; week number.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>fgMayHL</span> <span class='ruff_arg'>fg1 y m d</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>fg1</code></code></td><td class='ruff_defitem'>default fg color</td></tr>
<tr><td class='ruff_defitem'><code><code>y</code></code></td><td class='ruff_defitem'>year</td></tr>
<tr><td class='ruff_defitem'><code><code>m</code></code></td><td class='ruff_defitem'>month</td></tr>
<tr><td class='ruff_defitem'><code><code>d</code></code></td><td class='ruff_defitem'>day</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_fgMayHL' href="javascript:toggleSource('klnd_my_fgMayHL')">Show source</a></p>
<div id='klnd_my_fgMayHL' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::fgMayHL {fg1 y m d} {
  <i><font color=#4b5d50># Gets -fg option for day cell & week number.</font></i>
  <i><font color=#4b5d50>#   fg1 - default fg color</font></i>
  <i><font color=#4b5d50>#   y - year</font></i>
  <i><font color=#4b5d50>#   m - month</font></i>
  <i><font color=#4b5d50>#   d - day</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> fg [<b><font color=#3a6797>set</font></b> fgw <font color=#1b1baa>$fg1</font>]
  <b><font color=#3a6797>set</font></b> d [<b><font color=#3a6797>string</font></b> trim <font color=#1b1baa>$d</font>]
  <b><font color=#3a6797>set</font></b> m [<b><font color=#3a6797>string</font></b> trim <font color=#1b1baa>$m</font>]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$d</font> ni {0 <font color=#8b2a0e>&quot;&quot;</font>}} {
    <b><font color=#3a6797>set</font></b> fmt %Y/%N/%e
    <b><font color=#3a6797>set</font></b> day1 <font color=#1b1baa>$y</font>/<font color=#1b1baa>$m</font>/<font color=#1b1baa>$d</font>
    <b><font color=#3a6797>set</font></b> week1 [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#1b1baa>$y</font>/<font color=#1b1baa>$m</font>/<font color=#1b1baa>$d</font> <font color=#6c3e67>-format</font> <font color=#1b1baa>$fmt</font>] <font color=#6c3e67>-format</font> %V]
    <b><font color=#3a6797>foreach</font></b> day <font color=#1b1baa>$p(hllist)</font> {
      <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>split</font></b> <font color=#1b1baa>$day</font> /] y2 m2 d2
      <b><font color=#3a6797>set</font></b> y2 [<b><font color=#3a6797>string</font></b> range 20<font color=#1b1baa>$y2</font> end-3 end]
      <b><font color=#3a6797>set</font></b> m2 [<b><font color=#3a6797>string</font></b> trimleft <font color=#1b1baa>$m2</font> 0]
      <b><font color=#3a6797>set</font></b> d2 [<b><font color=#3a6797>string</font></b> trimleft <font color=#1b1baa>$d2</font> 0]
      <b><font color=#3a6797>set</font></b> day2 <font color=#1b1baa>$y2</font>/<font color=#1b1baa>$m2</font>/<font color=#1b1baa>$d2</font>
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(hlweeks)</font>} {
        <b><font color=#3a6797>set</font></b> week2 [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#1b1baa>$day2</font> <font color=#6c3e67>-format</font> <font color=#1b1baa>$fmt</font>] <font color=#6c3e67>-format</font> %V]
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$week1</font> eq <font color=#1b1baa>$week2</font>} {
          <b><font color=#3a6797>set</font></b> fgw red
          <b><font color=#ca14ca>break</font></b>
        }
      } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$day1</font> eq <font color=#1b1baa>$day2</font>} {
        <b><font color=#3a6797>set</font></b> fg red
        <b><font color=#ca14ca>break</font></b>
      }
    }
  }
  <b><font color=#3a6797>list</font></b> <font color=#1b1baa>$fg</font> <font color=#1b1baa>$fgw</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::GoMonth'>GoMonth</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Shifts the month backward/forward.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>GoMonth</span> <span class='ruff_arg'>i ?dobreak?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>increment for the current month</td></tr>
<tr><td class='ruff_defitem'><code><code>dobreak</code></code></td><td class='ruff_defitem'>yes when called from 'bind'; <i>optional, default</i> <code>no</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_GoMonth' href="javascript:toggleSource('klnd_my_GoMonth')">Show source</a></p>
<div id='klnd_my_GoMonth' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::GoMonth {i {dobreak no}} {
  <i><font color=#4b5d50># Shifts the month backward/forward.</font></i>
  <i><font color=#4b5d50>#   i - increment for the current month</font></i>
  <i><font color=#4b5d50>#   dobreak - yes when called from 'bind'</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> m [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$p(mvis)</font>+(<font color=#1b1baa>$i</font>)}]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$m</font>&gt;12} {<b><font color=#3a6797>set</font></b> m 1; <b><font color=#3a6797>incr</font></b> p(yvis)}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$m</font>&lt;1} {<b><font color=#3a6797>set</font></b> m 12; <b><font color=#3a6797>incr</font></b> p(yvis) -1}
  ShowMonth <font color=#1b1baa>$m</font> <font color=#1b1baa>$p(yvis)</font> yes
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dobreak</font>} {<b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break}
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::GoYear'>GoYear</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Shifts the year backward/forward.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>GoYear</span> <span class='ruff_arg'>i ?dobreak?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>increment for the current year</td></tr>
<tr><td class='ruff_defitem'><code><code>dobreak</code></code></td><td class='ruff_defitem'>yes when called from 'bind'; <i>optional, default</i> <code>no</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_GoYear' href="javascript:toggleSource('klnd_my_GoYear')">Show source</a></p>
<div id='klnd_my_GoYear' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::GoYear {i {dobreak no}} {
  <i><font color=#4b5d50># Shifts the year backward/forward.</font></i>
  <i><font color=#4b5d50>#   i - increment for the current year</font></i>
  <i><font color=#4b5d50>#   dobreak - yes when called from 'bind'</font></i>

  <b><font color=#3a6797>variable</font></b> p
  ShowMonth <font color=#1b1baa>$p(mvis)</font> [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$p(yvis)</font>+(<font color=#1b1baa>$i</font>)}] yes
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dobreak</font>} {<b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break}
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::HighlightCurrentDay'>HighlightCurrentDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights the current day's button.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>HighlightCurrentDay</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_HighlightCurrentDay' href="javascript:toggleSource('klnd_my_HighlightCurrentDay')">Show source</a></p>
<div id='klnd_my_HighlightCurrentDay' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::HighlightCurrentDay {} {
  <i><font color=#4b5d50># Highlights the current day's button.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>catch</font></b> {
    <b><font color=#3a6797>lassign</font></b> [fgHL <font color=#1b1baa>$p(icurr)</font> <font color=#1b1baa>$p(fg2)</font>] but fg fg2
    <font color=#1b1baa>$but</font> configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$fg</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bg2)</font>
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::InitCalendar'>InitCalendar</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Initializes the settings of the calendar.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>InitCalendar</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>Optional arguments.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_InitCalendar' href="javascript:toggleSource('klnd_my_InitCalendar')">Show source</a></p>
<div id='klnd_my_InitCalendar' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::InitCalendar {args} {
  <i><font color=#4b5d50># Initializes the settings of the calendar.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>variable</font></b> locales
  InitSettings
  <b><font color=#3a6797>lassign</font></b> [::apave::parseOptions <font color=#1b1baa>$args</font> <font color=#6c3e67>-locale</font> [::msgcat::mclocale]  <font color=#6c3e67>-title</font> {} <font color=#6c3e67>-value</font> {} <font color=#6c3e67>-tvar</font> {} <font color=#6c3e67>-parent</font> {} <font color=#6c3e67>-dateformat</font> %D <font color=#6c3e67>-weeks</font> 0  <font color=#6c3e67>-weekday</font> {} <font color=#6c3e67>-centerme</font> {} <font color=#6c3e67>-geometry</font> {} <font color=#6c3e67>-entry</font> {} <font color=#6c3e67>-com</font> {} <font color=#6c3e67>-command</font> {}  <font color=#6c3e67>-currentmonth</font> {} <font color=#6c3e67>-united</font> no <font color=#6c3e67>-daylist</font> {-} <font color=#6c3e67>-hllist</font> {} <font color=#6c3e67>-popup</font> {} <font color=#6c3e67>-tip</font> {}  <font color=#6c3e67>-width</font> 2 <font color=#6c3e67>-hlweeks</font> 0]  loc title datevalue tvar parent p(dformat) p(weeks)  p(weekday) centerme geo entry com1 com2  p(currentmonth) p(united) p(daylist) p(hllist) p(popup) p(tip)  p(width) p(hlweeks)
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$com2</font> eq {}} {<b><font color=#3a6797>set</font></b> p(com) <font color=#1b1baa>$com1</font>} {<b><font color=#3a6797>set</font></b> p(com) <font color=#1b1baa>$com2</font>}
  <i><font color=#4b5d50># get localized week day names</font></i>
  <b><font color=#3a6797>lassign</font></b> [::klnd::weekdays <font color=#1b1baa>$loc</font>] p(days) p(weekday)
  <i><font color=#4b5d50># get localized month names</font></i>
  <b><font color=#3a6797>set</font></b> p(months) [::klnd::months <font color=#1b1baa>$loc</font>]
  <b><font color=#3a6797>set</font></b> p(loc) <font color=#1b1baa>$loc</font>
  <b><font color=#3a6797>set</font></b> p(tvar) <font color=#1b1baa>$tvar</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tvar</font> ne {}} {
    <b><font color=#3a6797>set</font></b> datevalue [<b><font color=#3a6797>set</font></b> <font color=#1b1baa>$tvar</font>]
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$p(daylist)</font> ne {-}} {
    <b><font color=#3a6797>set</font></b> datevalue [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$p(daylist)</font> 0]
  }
  <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>unset</font></b> p(after)} ;<i><font color=#4b5d50># to pause more at start</font></i>
  <i><font color=#4b5d50># colors to be used</font></i>
  CurrentDate
  <b><font color=#3a6797>set</font></b> p(yvis) <font color=#1b1baa>$p(y)</font>  ;<i><font color=#4b5d50># by default, the selected date = the current date</font></i>
  <b><font color=#3a6797>set</font></b> p(mvis) <font color=#1b1baa>$p(m)</font>
  <b><font color=#3a6797>set</font></b> p(dvis) <font color=#1b1baa>$p(d)</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$title</font> eq {}} {<b><font color=#3a6797>set</font></b> title [::msgcat::mc Calendar]}
  <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> p(dformat) [<b><font color=#3a6797>subst</font></b> <font color=#1b1baa>$p(dformat)</font>]}
  <i><font color=#4b5d50># get the day to display at start</font></i>
  <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> ym [<b><font color=#3a6797>clock</font></b> scan <font color=#1b1baa>$datevalue</font> <font color=#6c3e67>-format</font> <font color=#1b1baa>$p(dformat)</font>]}]} {
    <b><font color=#3a6797>set</font></b> p(m) [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$ym</font> <font color=#6c3e67>-format</font> %N]
    <b><font color=#3a6797>set</font></b> p(y) [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$ym</font> <font color=#6c3e67>-format</font> %Y]
    <b><font color=#3a6797>set</font></b> p(dvis) [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$ym</font> <font color=#6c3e67>-format</font> %e]
  }
  ::apave::obj untouchWidgets *KLND*
  <b><font color=#3a6797>list</font></b> <font color=#1b1baa>$title</font> <font color=#1b1baa>$datevalue</font> <font color=#1b1baa>$tvar</font> <font color=#1b1baa>$parent</font> <font color=#1b1baa>$centerme</font> <font color=#1b1baa>$geo</font> <font color=#1b1baa>$entry</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::InitSettings'>InitSettings</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets initial settings, once only.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>InitSettings</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_InitSettings' href="javascript:toggleSource('klnd_my_InitSettings')">Show source</a></p>
<div id='klnd_my_InitSettings' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::InitSettings {} {
  <i><font color=#4b5d50># Gets initial settings, once only.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>variable</font></b> msgdir
  <b><font color=#3a6797>array</font></b> set p [<b><font color=#3a6797>list</font></b> FINT %Y/%N/%e days {} months {}  d 0 m 0 y 0 dvis 0 mvis 0 yvis 0 icurr 0 ienter 0 weekday {}  d1st 1 width 2 loc en_uk]
  <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>info</font></b> exists :klnd::my::prevY]} {
    <b><font color=#3a6797>foreach</font></b> {i icon} {0 home 1 previous2 2 previous 3 next 4 next2} {
      <b><font color=#134070>image</font></b> create photo IM_KLND_<font color=#1b1baa>$i</font> <font color=#6c3e67>-data</font> [::apave::iconData <font color=#1b1baa>$icon</font> small]
    }
    <b><font color=#3a6797>lassign</font></b> [::apave::obj csGet] p(fg0) p(fg1) p(bg0) p(bg1) - p(bgsel) p(fgsel) - - p(fgh) - - - - p(fg2) p(bg2)
    <i><font color=#4b5d50># localized stuff</font></i>
    <b><font color=#3a6797>catch</font></b> {::msgcat::mcload <font color=#1b1baa>$msgdir</font>}
    <b><font color=#3a6797>set</font></b> ::klnd::my::prevY [::msgcat::mc {Previous year}]
    <b><font color=#3a6797>set</font></b> ::klnd::my::prevM [::msgcat::mc {Previous month}]
    <b><font color=#3a6797>set</font></b> ::klnd::my::nextY [::msgcat::mc {Next year}]
    <b><font color=#3a6797>set</font></b> ::klnd::my::nextM [::msgcat::mc {Next month}]
    <b><font color=#3a6797>set</font></b> ::klnd::my::Close [::msgcat::mc Close]
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::IsDay'>IsDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Check if a button shows a day.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>IsDay</span> <span class='ruff_arg'>i</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_IsDay' href="javascript:toggleSource('klnd_my_IsDay')">Show source</a></p>
<div id='klnd_my_IsDay' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::IsDay {i} {
  <i><font color=#4b5d50># Check if a button shows a day.</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>expr</font></b> {![<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> w [<font color=#1b1baa>$p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$i</font>]}] && [<font color=#1b1baa>$w</font> cget <font color=#6c3e67>-takefocus</font>]}]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::KeyPress'>KeyPress</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Processes the key presses on buttons.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>KeyPress</span> <span class='ruff_arg'>i K s</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index</td></tr>
<tr><td class='ruff_defitem'><code><code>K</code></code></td><td class='ruff_defitem'>pressed key</td></tr>
<tr><td class='ruff_defitem'><code><code>s</code></code></td><td class='ruff_defitem'>key's state</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_KeyPress' href="javascript:toggleSource('klnd_my_KeyPress')">Show source</a></p>
<div id='klnd_my_KeyPress' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::KeyPress {i K s} {
  <i><font color=#4b5d50># Processes the key presses on buttons.</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>
  <i><font color=#4b5d50>#   K - pressed key</font></i>
  <i><font color=#4b5d50>#   s - key's state</font></i>

  <b><font color=#3a6797>variable</font></b> p
  Leave <font color=#1b1baa>$i</font>
  <b><font color=#3a6797>switch</font></b> <font color=#6c3e67>-glob</font> <font color=#1b1baa>$K</font> {
    Left {<b><font color=#3a6797>incr</font></b> i -1}
    Right {<b><font color=#3a6797>incr</font></b> i}
    Up {<b><font color=#3a6797>incr</font></b> i -7}
    Down {<b><font color=#3a6797>incr</font></b> i 7}
    Enter - Return - space {<font color=#1b1baa>$p(obj)</font> res <font color=#1b1baa>$p(win)</font> 1}
    F3 {SetCurrentDay; <b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break}
    *Tab* {
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$s</font>%2} {<b><font color=#3a6797>set</font></b> b Close} {<b><font color=#3a6797>set</font></b> b OK}
      <b><font color=#134070>focus</font></b> [<font color=#1b1baa>$p(obj)</font> But<font color=#1b1baa>$b</font>]
      <b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break
    }
    <b><font color=#3a6797>default</font></b> {Enter <font color=#1b1baa>$i</font>; <b><font color=#ca14ca>return</font></b>}
  }
  <b><font color=#3a6797>if</font></b> {[IsDay <font color=#1b1baa>$i</font>]} {
    Enter <font color=#1b1baa>$i</font>
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$K</font> in {Left Up}} {
    GoMonth -1
  } <b><font color=#3a6797>else</font></b> {
    GoMonth 1
  }
  <b><font color=#ca14ca>return</font></b> <font color=#6c3e67>-code</font> break
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::Leave'>Leave</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Unhighlights a button.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Leave</span> <span class='ruff_arg'>?i?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index; <i>optional, default</i> <code>0</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_Leave' href="javascript:toggleSource('klnd_my_Leave')">Show source</a></p>
<div id='klnd_my_Leave' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::Leave {{i 0}} {
  <i><font color=#4b5d50># Unhighlights a button.</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font> && ![[<font color=#1b1baa>$p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$i</font>] cget <font color=#6c3e67>-takefocus</font>]} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>foreach</font></b> n [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$i</font> <font color=#1b1baa>$p(ienter)</font>] {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$n</font>} {
      <b><font color=#3a6797>lassign</font></b> [fgHL <font color=#1b1baa>$n</font> <font color=#1b1baa>$p(fg1)</font>] but fg fg2
      <font color=#1b1baa>$but</font> configure <font color=#6c3e67>-fg</font> <font color=#1b1baa>$fg</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bg1)</font>
    }
  }
  HighlightCurrentDay
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::MainWidgets'>MainWidgets</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Forms main widgets of calendar.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>MainWidgets</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_MainWidgets' href="javascript:toggleSource('klnd_my_MainWidgets')">Show source</a></p>
<div id='klnd_my_MainWidgets' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::MainWidgets {} {
  <i><font color=#4b5d50># Forms main widgets of calendar.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(tip)</font> eq {}} {
    <b><font color=#3a6797>set</font></b> ::klnd::TMPTIP {}
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> tip [<b><font color=#3a6797>string</font></b> map [<b><font color=#3a6797>list</font></b> \{ ( \} )] <font color=#1b1baa>$p(tip)</font>] ;<i><font color=#4b5d50># for a possible bad list</font></i>
    <b><font color=#3a6797>set</font></b> ::klnd::TMPTIP <font color=#8b2a0e>&quot;-tip <font color=#1b1baa>{$</font>tip<font color=#1b1baa>}</font>&quot;</font>
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(weeks)</font>} {<b><font color=#3a6797>set</font></b> ::klnd::TMPPACKW {}} {<b><font color=#3a6797>set</font></b> ::klnd::TMPPACKW forget}
  <b><font color=#3a6797>if</font></b> {[::iswindows]} {<b><font color=#3a6797>set</font></b> pady 2} {<b><font color=#3a6797>set</font></b> pady 1}
  <b><font color=#3a6797>set</font></b> ::klnd::TMPATTW <font color=#8b2a0e>&quot;-font <font color=#1b1baa>{$</font>::apave::FONTMAIN<font color=#1b1baa>}</font> -padx 0 -pady <font color=#1b1baa>$</font>pady  -activeforeground <font color=#1b1baa>$</font>p(fgh) -activebackground <font color=#1b1baa>$</font>p(bg1) -foreground <font color=#1b1baa>$</font>p(fgh)  -relief flat -overrelief flat -takefocus 0 -highlightthickness 0 -width 2&quot;</font>
  <b><font color=#ca14ca>return</font></b> {
    {fra - - 1 7 {<font color=#6c3e67>-st</font> new} {}}  {.frATool - - 1 7 {<font color=#6c3e67>-st</font> new} {<font color=#6c3e67>-bg</font> <font color=#1b1baa>$::klnd::my::p(bg1)</font>}}
    {.frATool.tool - - - - {<b><font color=#134070>pack</font></b> <font color=#6c3e67>-side</font> top} {<font color=#6c3e67>-array</font> {
      IM_KLND_0 {::klnd::my::SetCurrentDay} sev 2
      IM_KLND_1 {{::klnd::my::GoYear -1} <font color=#6c3e67>-tip</font> <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>::klnd::my::prevY\n(Home)@@-under 5&quot;</font>} h_ 1
      IM_KLND_2 {{::klnd::my::GoMonth -1} <font color=#6c3e67>-tip</font> <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>::klnd::my::prevM\n(PageUp)@@-under 5&quot;</font>} h_ 2
      LabMonth {<font color=#8b2a0e>&quot;&quot;</font> {<font color=#6c3e67>-fill</font> x <font color=#6c3e67>-expand</font> 1} {<font color=#6c3e67>-anchor</font> center <font color=#6c3e67>-w</font> 14}} h_ 1
      IM_KLND_3 {{::klnd::my::GoMonth 1} <font color=#6c3e67>-tip</font> <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>::klnd::my::nextM\n(PageDown)@@-under 5&quot;</font>} h_ 2
      IM_KLND_4 {{::klnd::my::GoYear 1} <font color=#6c3e67>-tip</font> <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>::klnd::my::nextY\n(End)@@-under 5&quot;</font>}
      }}}
    {.frAW .frATool T - - {<font color=#6c3e67>-padx</font> 0} {<font color=#6c3e67>-bg</font> <font color=#1b1baa>$::klnd::my::p(bg1)</font> <font color=#6c3e67>-w</font> 0 <font color=#6c3e67>-borderwidth</font> 0}}
    {.frAW.labw - - 1 1 {<b><font color=#134070>pack</font></b> <font color=#6c3e67>-pady</font> 1}}
    {.frAW.BuTW1 + T 1 1 {<b><font color=#134070>pack</font></b> <font color=#1b1baa>$::klnd::TMPPACKW</font> <font color=#6c3e67>-pady</font> 1} {<font color=#1b1baa>$::klnd::TMPATTW</font>}}
    {.frAW.BuTW2 + T 1 1 {<b><font color=#134070>pack</font></b> <font color=#1b1baa>$::klnd::TMPPACKW</font> <font color=#6c3e67>-pady</font> 1} {<font color=#1b1baa>$::klnd::TMPATTW</font>}}
    {.frAW.BuTW3 + T 1 1 {<b><font color=#134070>pack</font></b> <font color=#1b1baa>$::klnd::TMPPACKW</font> <font color=#6c3e67>-pady</font> 1} {<font color=#1b1baa>$::klnd::TMPATTW</font>}}
    {.frAW.BuTW4 + T 1 1 {<b><font color=#134070>pack</font></b> <font color=#1b1baa>$::klnd::TMPPACKW</font> <font color=#6c3e67>-pady</font> 1} {<font color=#1b1baa>$::klnd::TMPATTW</font>}}
    {.frAW.BuTW5 + T 1 1 {<b><font color=#134070>pack</font></b> <font color=#1b1baa>$::klnd::TMPPACKW</font> <font color=#6c3e67>-pady</font> 1} {<font color=#1b1baa>$::klnd::TMPATTW</font>}}
    {.frAW.BuTW6 + T 1 1 {<b><font color=#134070>pack</font></b> <font color=#1b1baa>$::klnd::TMPPACKW</font> <font color=#6c3e67>-pady</font> 1} {<font color=#1b1baa>$::klnd::TMPATTW</font>}}
    {.frADays .frAW L 1 1 {<font color=#6c3e67>-st</font> nsew} {<font color=#6c3e67>-bg</font> <font color=#1b1baa>$::klnd::my::p(bg1)</font>}}
    {.frADays.tcl {
      <i><font color=#4b5d50># make headers and buttons of days</font></i>
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$::tcl_platform(platform)</font> eq {windows}} {
        <b><font color=#3a6797>set</font></b> att {<font color=#6c3e67>-highlightthickness</font> 1}
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#3a6797>set</font></b> att {<font color=#6c3e67>-highlightthickness</font> 0}
      }
      <b><font color=#3a6797>set</font></b> wt -
      <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;45} {<b><font color=#3a6797>incr</font></b> i} {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font>&lt;8} {<b><font color=#3a6797>set</font></b> cur <font color=#8b2a0e>&quot;.frADays.LabDay<font color=#1b1baa>$</font>i&quot;</font>} {<b><font color=#3a6797>set</font></b> cur <font color=#8b2a0e>&quot;.frADays.BuT_KLNDSTD<font color=#1b1baa>[</font>expr <font color=#1b1baa>{$</font>i-7<font color=#1b1baa>}]</font>&quot;</font>}
        <b><font color=#3a6797>if</font></b> {(<font color=#1b1baa>$i</font>%7)!=1} {<b><font color=#3a6797>set</font></b> p L; <b><font color=#3a6797>set</font></b> pw <font color=#1b1baa>$pr</font>} {<b><font color=#3a6797>set</font></b> p T; <b><font color=#3a6797>set</font></b> pw <font color=#1b1baa>$wt</font>; <b><font color=#3a6797>set</font></b> wt <font color=#1b1baa>$cur</font>}
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font>&lt;8} {
          <b><font color=#3a6797>set</font></b> lwid <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>cur <font color=#1b1baa>$</font>pw <font color=#1b1baa>$</font>p 1 1 <font color=#1b1baa>{</font>-st ew<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>-anchor center -foreground <font color=#1b1baa>$</font>::klnd::my::p(fgh) -background <font color=#1b1baa>$</font>::klnd::my::p(bg1)<font color=#1b1baa>}</font>&quot;</font>
        } <b><font color=#3a6797>else</font></b> {
          <b><font color=#3a6797>set</font></b> lwid <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>cur <font color=#1b1baa>$</font>pw <font color=#1b1baa>$</font>p 1 1 <font color=#1b1baa>{</font>-st ew<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>-relief flat -overrelief raised -takefocus 0 -padx 8 -pady 1 -font <font color=#1b1baa>{$</font>::apave::FONTMAIN<font color=#1b1baa>}</font> -com <font color=#1b1baa>{</font>::klnd::my::Enter <font color=#1b1baa>[</font>expr <font color=#1b1baa>{$</font>i-7<font color=#1b1baa>}]</font> 1<font color=#1b1baa>}</font> <font color=#1b1baa>$</font>::klnd::TMPTIP <font color=#1b1baa>$</font>att -w 2 -background <font color=#1b1baa>$</font>::klnd::my::p(bg1)<font color=#1b1baa>}</font>&quot;</font>
        }
        %C <font color=#1b1baa>$lwid</font>
        <b><font color=#3a6797>set</font></b> pr <font color=#1b1baa>$cur</font>
      }
    }}
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::MapYMD'>MapYMD</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a script with %y, %m, %d wildcards.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>MapYMD</span> <span class='ruff_arg'>script y m d</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>script</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>y</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>m</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>d</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_MapYMD' href="javascript:toggleSource('klnd_my_MapYMD')">Show source</a></p>
<div id='klnd_my_MapYMD' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::MapYMD {script y m d} {
  <i><font color=#4b5d50># Gets a script with %y, %m, %d wildcards.</font></i>

  <b><font color=#3a6797>string</font></b> map [<b><font color=#3a6797>list</font></b> %y <font color=#1b1baa>$y</font> %m <font color=#1b1baa>$m</font> %d <font color=#1b1baa>$d</font>] <font color=#1b1baa>$script</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::PickDay'>PickDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Processes choosing a button.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>PickDay</span> <span class='ruff_arg'>?i? ?ret?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>button index; <i>optional, default</i> <code>-1</code></td></tr>
<tr><td class='ruff_defitem'><code><code>ret</code></code></td><td class='ruff_defitem'>returned &quot;-code break&quot;, for double-click; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_PickDay' href="javascript:toggleSource('klnd_my_PickDay')">Show source</a></p>
<div id='klnd_my_PickDay' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::PickDay {{i -1} {ret {}}} {
  <i><font color=#4b5d50># Processes choosing a button.</font></i>
  <i><font color=#4b5d50>#   i - button index</font></i>
  <i><font color=#4b5d50>#   ret - returned &quot;-code break&quot;, for double-click</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font>==-1} {<b><font color=#3a6797>set</font></b> i <font color=#1b1baa>$p(ienter)</font>}
  <b><font color=#3a6797>if</font></b> {[IsDay <font color=#1b1baa>$i</font>]} {<font color=#1b1baa>$p(obj)</font> res <font color=#1b1baa>$p(win)</font> 1}
  <b><font color=#ca14ca>return</font></b> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$ret</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::SetCurrentDay'>SetCurrentDay</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Goes to the current date.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>SetCurrentDay</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_SetCurrentDay' href="javascript:toggleSource('klnd_my_SetCurrentDay')">Show source</a></p>
<div id='klnd_my_SetCurrentDay' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::SetCurrentDay {} {
  <i><font color=#4b5d50># Goes to the current date.</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> p(dvis) 0
  ShowMonth <font color=#1b1baa>$p(m)</font> <font color=#1b1baa>$p(y)</font>
  Enter <font color=#1b1baa>$p(icurr)</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::ShowMonth'>ShowMonth</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Displays a month's days.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>ShowMonth</span> <span class='ruff_arg'>m y ?dopopup?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>m</code></code></td><td class='ruff_defitem'>month y -year</td></tr>
<tr><td class='ruff_defitem'><code><code>y</code></code></td><td class='ruff_defitem'>Not documented.</td></tr>
<tr><td class='ruff_defitem'><code><code>dopopup</code></code></td><td class='ruff_defitem'>yes, if bind a popup menu; <i>optional, default</i> <code>no</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_ShowMonth' href="javascript:toggleSource('klnd_my_ShowMonth')">Show source</a></p>
<div id='klnd_my_ShowMonth' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::ShowMonth {m y {dopopup no}} {
  <i><font color=#4b5d50># Displays a month's days.</font></i>
  <i><font color=#4b5d50>#   m - month</font></i>
  <i><font color=#4b5d50>#   y -year</font></i>
  <i><font color=#4b5d50>#   dopopup - yes, if bind a popup menu</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> sec [CurrentDate]
  <b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> {max(<font color=#1b1baa>$y</font>,1753)}]
  ::baltip::tip [<font color=#1b1baa>$p(obj)</font> BuT_IM_KLND_0]  <font color=#8b2a0e>&quot;<font color=#1b1baa>[</font>::msgcat::mc <font color=#1b1baa>{</font>Current date<font color=#1b1baa>}]</font>: <font color=#1b1baa>[</font>clock format <font color=#1b1baa>$</font>sec -format <font color=#1b1baa>$</font>p(dformat) -locale <font color=#1b1baa>$</font>p(loc)<font color=#1b1baa>]</font>\n(F3)&quot;</font> <font color=#6c3e67>-under</font> 5
  <i><font color=#4b5d50># display month & year</font></i>
  [<font color=#1b1baa>$p(obj)</font> LabMonth] configure <font color=#6c3e67>-text</font>  <font color=#8b2a0e>&quot;<font color=#1b1baa>[</font>lindex <font color=#1b1baa>$</font>p(months) <font color=#1b1baa>[</font>expr <font color=#1b1baa>{$</font>m-1<font color=#1b1baa>}]]</font> <font color=#1b1baa>$</font>y&quot;</font>  <font color=#6c3e67>-font</font> [::apave::obj boldDefFont [<b><font color=#3a6797>expr</font></b> {[::apave::obj basicFontSize]+2}]]
  <i><font color=#4b5d50># display day names</font></i>
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;8} {<b><font color=#3a6797>incr</font></b> i} {
    [<font color=#1b1baa>$p(obj)</font> LabDay<font color=#1b1baa>$i</font>] configure <font color=#6c3e67>-text</font> <font color=#8b2a0e>&quot; <font color=#1b1baa>[</font>lindex <font color=#1b1baa>$</font>p(days) <font color=#1b1baa>$</font>i-1<font color=#1b1baa>]</font> &quot;</font>
  }
  <i><font color=#4b5d50># 1st day of the month's first week:</font></i>
  <b><font color=#3a6797>set</font></b> day1st [<b><font color=#3a6797>clock</font></b> scan <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>m/1/<font color=#1b1baa>$</font>y&quot;</font> <font color=#6c3e67>-format</font> %D]
  <b><font color=#3a6797>set</font></b> i0 [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$day1st</font> <font color=#6c3e67>-format</font> %w]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(weekday)</font> eq <font color=#8b2a0e>&quot;%u&quot;</font>} {<b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i0</font>} {<b><font color=#3a6797>incr</font></b> i0 -1} {<b><font color=#3a6797>set</font></b> i0 6}}
  <i><font color=#4b5d50># get the last day of month</font></i>
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> yl <font color=#1b1baa>$y</font>] && [<b><font color=#3a6797>set</font></b> ml <font color=#1b1baa>$m</font>]==12} {<b><font color=#3a6797>set</font></b> ml 1; <b><font color=#3a6797>incr</font></b> yl}
  <b><font color=#3a6797>set</font></b> lday [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> scan <font color=#8b2a0e>&quot;<font color=#1b1baa>[</font>incr ml<font color=#1b1baa>]</font>/1/<font color=#1b1baa>$</font>yl 1 day ago&quot;</font>] <font color=#6c3e67>-format</font> %d]
  <b><font color=#3a6797>set</font></b> iday [<b><font color=#3a6797>set</font></b> p(icurr) 0]
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;38} {<b><font color=#3a6797>incr</font></b> i} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font>&lt;=<font color=#1b1baa>$i0</font> || <font color=#1b1baa>$iday</font>&gt;=<font color=#1b1baa>$lday</font>} {
      <b><font color=#3a6797>set</font></b> ttl {    }
      <b><font color=#3a6797>set</font></b> att <font color=#8b2a0e>&quot;-takefocus 0 -activebackground <font color=#1b1baa>$</font>p(bg1) -overrelief flat&quot;</font>
      <b><font color=#3a6797>set</font></b> script {}
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>set</font></b> ttl [<b><font color=#3a6797>incr</font></b> iday]
      <b><font color=#3a6797>set</font></b> att <font color=#8b2a0e>&quot;-takefocus 1 -activeforeground <font color=#1b1baa>$</font>p(fg0) -activebackground <font color=#1b1baa>$</font>p(bg0) -overrelief raised&quot;</font>
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$iday</font>==<font color=#1b1baa>$p(dvis)</font> || (<font color=#1b1baa>$iday</font>==<font color=#1b1baa>$lday</font> && <font color=#1b1baa>$iday</font>&lt;<font color=#1b1baa>$p(dvis)</font>)} {
        <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists p(after)]} {<b><font color=#3a6797>set</font></b> af 20} {<b><font color=#3a6797>set</font></b> af 200} ;<i><font color=#4b5d50># less at key pressing tight</font></i>
        <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel <font color=#1b1baa>$p(after)</font>}
        <b><font color=#3a6797>set</font></b> p(after) [<b><font color=#3a6797>after</font></b> <font color=#1b1baa>$af</font> <font color=#8b2a0e>&quot;::klnd::my::Enter <font color=#1b1baa>$</font>i; ::klnd::my::HighlightCurrentDay&quot;</font>]
      }
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$iday</font>==1} {<b><font color=#3a6797>set</font></b> p(d1st) <font color=#1b1baa>$i</font>}
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$y</font>==<font color=#1b1baa>$p(y)</font> && <font color=#1b1baa>$m</font>==<font color=#1b1baa>$p(m)</font> && <font color=#1b1baa>$iday</font>==<font color=#1b1baa>$p(d)</font>} {
        <b><font color=#3a6797>set</font></b> p(icurr) <font color=#1b1baa>$i</font>  ;<i><font color=#4b5d50># button's index of the current date</font></i>
      }
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dopopup</font>} {
        <b><font color=#3a6797>set</font></b> script [MapYMD <font color=#1b1baa>$p(popup)</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$m</font> <font color=#1b1baa>$iday</font>]
      }
    }
    <b><font color=#3a6797>lappend</font></b> ttls [<b><font color=#3a6797>string</font></b> trim <font color=#1b1baa>$ttl</font>]
    <b><font color=#3a6797>lassign</font></b> [fgMayHL <font color=#1b1baa>$p(fg1)</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$m</font> <font color=#1b1baa>$iday</font>] fg fg2
    <b><font color=#3a6797>append</font></b> weeksfg([<b><font color=#3a6797>expr</font></b> {(<font color=#1b1baa>$i</font>-1)/7}]) <font color=#1b1baa>$fg2</font>
    <b><font color=#3a6797>set</font></b> wbut [<font color=#1b1baa>$p(obj)</font> BuT_KLNDSTD<font color=#1b1baa>$i</font>]
    <font color=#1b1baa>$wbut</font> configure {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$att</font> <font color=#6c3e67>-fg</font> <font color=#1b1baa>$fg</font> <font color=#6c3e67>-bg</font> <font color=#1b1baa>$p(bg1)</font> <font color=#6c3e67>-relief</font> flat <font color=#6c3e67>-text</font> <font color=#1b1baa>$ttl</font>
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dopopup</font> && <font color=#1b1baa>$p(popup)</font> ne {}} {
      <b><font color=#134070>bind</font></b> <font color=#1b1baa>$wbut</font> &lt;Button-3&gt; <font color=#1b1baa>$script</font>
    }
  }
  <b><font color=#3a6797>set</font></b> wnums [WeekNumbers <font color=#1b1baa>$day1st</font> <font color=#1b1baa>$ttls</font>]
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 0} {<font color=#1b1baa>$i</font>&lt;6} {} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(hlweeks)</font> && [<b><font color=#3a6797>string</font></b> match *red* <font color=#1b1baa>$weeksfg($i)</font>]} {
      <b><font color=#3a6797>set</font></b> fg red
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>set</font></b> fg <font color=#1b1baa>$p(fgh)</font>
    }
    <b><font color=#3a6797>set</font></b> wnum [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$wnums</font> <font color=#1b1baa>$i</font>]
    <b><font color=#3a6797>set</font></b> wbut [<font color=#1b1baa>$p(obj)</font> BuTW[<b><font color=#3a6797>incr</font></b> i]]
    <font color=#1b1baa>$wbut</font> configure {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$::klnd::TMPATTW</font> <font color=#6c3e67>-text</font> <font color=#1b1baa>$wnum</font> <font color=#6c3e67>-foreground</font> <font color=#1b1baa>$fg</font>
  }
  <b><font color=#3a6797>set</font></b> p(mvis) <font color=#1b1baa>$m</font>  ;<i><font color=#4b5d50># month & year currently visible</font></i>
  <b><font color=#3a6797>set</font></b> p(yvis) <font color=#1b1baa>$y</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::TrimN'>TrimN</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Strips day/month of leading 0 and space.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>TrimN</span> <span class='ruff_arg'>n</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>n</code></code></td><td class='ruff_defitem'>day/month</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_TrimN' href="javascript:toggleSource('klnd_my_TrimN')">Show source</a></p>
<div id='klnd_my_TrimN' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::TrimN {n} {
  <i><font color=#4b5d50># Strips day/month of leading 0 and space.</font></i>
  <i><font color=#4b5d50>#   n - day/month</font></i>

  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>string</font></b> trimleft <font color=#1b1baa>$n</font> { 0}]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::klnd::my::WeekNumbers'>WeekNumbers</a><span class='ns_scope'> [<a href="klnd.html#::klnd::my" title="::klnd::my" class='ruff_cmd'>::klnd::my</a>]</span><span class='tinylink'><a href='klnd.html#::klnd::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets the list of week numbers for a month.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>WeekNumbers</span> <span class='ruff_arg'>day1st ttls</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>day1st</code></code></td><td class='ruff_defitem'>1st day of months</td></tr>
<tr><td class='ruff_defitem'><code><code>ttls</code></code></td><td class='ruff_defitem'>list of calender button's titles</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_klnd_my_WeekNumbers' href="javascript:toggleSource('klnd_my_WeekNumbers')">Show source</a></p>
<div id='klnd_my_WeekNumbers' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::klnd::my::WeekNumbers {day1st ttls} {
  <i><font color=#4b5d50># Gets the list of week numbers for a month.</font></i>
  <i><font color=#4b5d50>#   day1st - 1st day of months</font></i>
  <i><font color=#4b5d50>#   ttls - list of calender button's titles</font></i>

  <b><font color=#3a6797>variable</font></b> p
  <b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>list</font></b>]
  <b><font color=#3a6797>set</font></b> secw <font color=#1b1baa>$day1st</font>
  <b><font color=#3a6797>set</font></b> incd 0
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;7} {<b><font color=#3a6797>incr</font></b> i} {
    <b><font color=#3a6797>set</font></b> dtext [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$secw</font> <font color=#6c3e67>-format</font> %V]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p(weeks)</font>==2} {
      <i><font color=#4b5d50># 2nd (vulgar) mode of week numeration</font></i>
      <b><font color=#3a6797>set</font></b> month [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$secw</font> <font color=#6c3e67>-format</font> %m]
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$secw</font> <font color=#6c3e67>-format</font> %Y]&gt;[<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$day1st</font> <font color=#6c3e67>-format</font> %Y]} {
        <b><font color=#3a6797>set</font></b> dtext {}
      } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$i</font>==1 && <font color=#1b1baa>$month</font> eq {01} && <font color=#1b1baa>$dtext</font> ne {01}} {
        <b><font color=#3a6797>set</font></b> dtext {01}
        <b><font color=#3a6797>set</font></b> incd 1
      } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$month</font>==12 && <font color=#1b1baa>$dtext</font> eq {01}} {
        <b><font color=#3a6797>set</font></b> dtext [<b><font color=#3a6797>incr</font></b> dtextprev]
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#3a6797>set</font></b> dtext [<b><font color=#3a6797>string</font></b> range 0[<b><font color=#3a6797>expr</font></b> {[<b><font color=#3a6797>string</font></b> trimleft <font color=#1b1baa>$dtext</font> 0]+<font color=#1b1baa>$incd</font>}] end-1 end]
      }
      <b><font color=#3a6797>set</font></b> dtextprev <font color=#1b1baa>$dtext</font>
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font>==5 && [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$ttls</font> 28] eq {} || <font color=#1b1baa>$i</font>==6 && [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$ttls</font> 35] eq {}} {
      <b><font color=#3a6797>set</font></b> dtext {}
    }
    <b><font color=#3a6797>lappend</font></b> res <font color=#1b1baa>$dtext</font>
    <b><font color=#3a6797>set</font></b> w [<b><font color=#3a6797>clock</font></b> format <font color=#1b1baa>$secw</font> <font color=#6c3e67>-format</font> %w]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$w</font>} {<b><font color=#3a6797>set</font></b> w [<b><font color=#3a6797>expr</font></b> {8-<font color=#1b1baa>$w</font>}]} {<b><font color=#3a6797>set</font></b> w 1}
    <b><font color=#3a6797>set</font></b> secw [<b><font color=#3a6797>clock</font></b> add <font color=#1b1baa>$secw</font> <font color=#1b1baa>$w</font> days]
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}<br><br></code></pre></div>
</div></div></div><div class='yui-b navbox' ><h1><a href='#::klnd'>klnd</a></h1><h2><a href='#::klnd-Commands'>Commands</a></h2><h4 class='tooltip'><a href='klnd.html#::klnd::calendar'>calendar</a><span class='tooltiptext'>The main procedure of the calendar's toplevel.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::clearArgs'>clearArgs</a><span class='tooltiptext'>Removes specific options from args.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::clearup'>clearup</a><span class='tooltiptext'>Clearance for klnd data (variable my::p).
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::currentYearMonthDay'>currentYearMonthDay</a><span class='tooltiptext'>Gets current year, month, day.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::maxYear'>maxYear</a><span class='tooltiptext'>Gets maximal year that is correct.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::minYear'>minYear</a><span class='tooltiptext'>Gets minimal year that is correct.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::months'>months</a><span class='tooltiptext'>Gets a list of months according to a locale.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::weekdays'>weekdays</a><span class='tooltiptext'>Gets a list of week days according to a locale.
</span></h4><h1><a href='#::klnd::my'>klnd::my</a></h1><h2><a href='#::klnd::my-Commands'>Commands</a></h2><h4 class='tooltip'><a href='klnd.html#::klnd::my::ChosenDay'>ChosenDay</a><span class='tooltiptext'>Formats a chosen day and displays it at need.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::CurrentDate'>CurrentDate</a><span class='tooltiptext'>Gets the current date.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::DefaultLocale'>DefaultLocale</a><span class='tooltiptext'>Gets a default locale currently used in a system.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::Enter'>Enter</a><span class='tooltiptext'>Highlights a button and makes it current.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::fgHL'>fgHL</a><span class='tooltiptext'>Highlights day from -hllist option.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::fgMayHL'>fgMayHL</a><span class='tooltiptext'>Gets -fg option for day cell &amp; week number.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::GoMonth'>GoMonth</a><span class='tooltiptext'>Shifts the month backward/forward.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::GoYear'>GoYear</a><span class='tooltiptext'>Shifts the year backward/forward.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::HighlightCurrentDay'>HighlightCurrentDay</a><span class='tooltiptext'>Highlights the current day's button.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::InitCalendar'>InitCalendar</a><span class='tooltiptext'>Initializes the settings of the calendar.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::InitSettings'>InitSettings</a><span class='tooltiptext'>Gets initial settings, once only.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::IsDay'>IsDay</a><span class='tooltiptext'>Check if a button shows a day.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::KeyPress'>KeyPress</a><span class='tooltiptext'>Processes the key presses on buttons.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::Leave'>Leave</a><span class='tooltiptext'>Unhighlights a button.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::MainWidgets'>MainWidgets</a><span class='tooltiptext'>Forms main widgets of calendar.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::MapYMD'>MapYMD</a><span class='tooltiptext'>Gets a script with %y, %m, %d wildcards.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::PickDay'>PickDay</a><span class='tooltiptext'>Processes choosing a button.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::SetCurrentDay'>SetCurrentDay</a><span class='tooltiptext'>Goes to the current date.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::ShowMonth'>ShowMonth</a><span class='tooltiptext'>Displays a month's days.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::TrimN'>TrimN</a><span class='tooltiptext'>Strips day/month of leading 0 and space.
</span></h4><h4 class='tooltip'><a href='klnd.html#::klnd::my::WeekNumbers'>WeekNumbers</a><span class='tooltiptext'>Gets the list of week numbers for a month.
</span></h4></div></div><div id='ft'><div style='float: right;'>Document generated by <a href='https://ruff.magicsplat.com'>Ruff!</a></div></div>
</div></body></html>
