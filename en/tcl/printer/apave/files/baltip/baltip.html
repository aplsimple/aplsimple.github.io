<!DOCTYPE html><html><head><meta charset="utf-8"/>
<meta name="author" content="aplsimple">
<meta name="description" content="aplsimple's home page">
<meta name="keywords" content="aplsimple,home">
</head>
<style>
table{
background-color: #f9f9f9;
margin: 0%;
margin-bottom: 2%;
padding: 0%;
box-shadow: none;
filter: none;
}
pre{
margin: 0%;
margin-bottom: 2%;
padding: 0%;
}
</style>
<script>
function homeLINK() {
  homelink = document.baseURI;
  ilen = 19
  ibase = homelink.indexOf('aplsimple.github');
  if (ibase<0) { ibase = homelink.indexOf('aplsimple_github'); ilen += 10 };
  if (ibase>=0) { homelink = homelink.substring(0,ibase+ilen) };
  return homelink;
};
document.write(' \
<link rel="stylesheet" href="'+homeLINK()+'/en/tcl/printer/zoo/style.css">');
document.write(' \
<link rel="icon" type="image/jpg" href="'+homeLINK()+'/zoo/favicon.jpg">');
document.write('<'+'script src="'+homeLINK()+'/zoo/funcs.js">'+'<'+'/script>');
document.write('<'+'script src="'+homeLINK()+'/en/tcl/printer/zoo/this.js">'+'<'+'/script>');
</script>
<body>
<div id="wrapper">
<div name="divd1" ALIGN="CENTER"> <FONT SIZE=5em color=#b01c20><B>
<noscript>THIS PAGE IS NOT WORKING WITHOUT JAVASCRIPT!
<BR>
<BR>PLEASE, SWITCH ON JAVASCRIPT IN SETTINGS OF YOUR BROWSER AND RELOAD THE PAGE.
</noscript>
</B></FONT></div>
<div id='doc3' class='yui-t2'>
<section id=sec2>
<div id='hd' class='banner'>

<title>baltip.tcl</title>

<table border=0 cellPadding=4 cellSpacing=0 width=100%>  <td border=0 bgColor=#87bcd3><div style=text-align:center>  <a href="../../index.html"><font color=#1a1a1a size=6>  <b>README.md</b></font></div></td></table>

<div id="bodyContent" class="dokuwiki">
<div id="dw__toc" class="dw__toc">
<h3 class="toggle open" style="cursor: pointer;">baltip.tcl</h3>
<div aria-expanded="true" style="">

<ul class="toc">
<li><b><a href="#baltip.tcl">baltip.tcl</a></b></li>
<li><b><a href="#Variables">Variables</a></b></li>
<li><b><a href="#UI">UI</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#baltip::configure">configure</a><span class=tooltiptext> baltip::configure : Configurates the tip for all widgets or for a widget.
args - options ("name value" pairs)
If *args* begins with a widget path, then
args is "w -opt val ?-opt val?", so the widget tip options are set.
Returns the list of special options' values or a widget's tip options.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::cget">cget</a><span class=tooltiptext> baltip::cget : Gets global option values or a widget's option value.
args - option names (if empty, returns all options)
If *args* begins with a widget path, then args is "w -option",
so the widget tip option's value is returned (e.g. for -text option).
Returns a list of "name value" pairs or an option value of a widget's tip.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::optionlist">optionlist</a><span class=tooltiptext> baltip::optionlist : All options of baltip.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::tippath">tippath</a><span class=tooltiptext> baltip::tippath : Gets a tip window's path.
w - widget's path</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::tip">tip</a><span class=tooltiptext> baltip::tip : Creates a tip for a widget.
w - the parent widget's path
text - the tip text
args - options ("name value" pairs)
If *text* is equal to "-BALTIPGET", returns options of widget's tip
If *text* is equal to "-BALTIPSET", sets options of widget's tip</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::update">update</a><span class=tooltiptext> baltip::update : Updates tip's text and settings.
w - widget's path
text - tip's text
args - tip's settings</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::repaint">repaint</a><span class=tooltiptext> baltip::repaint : Repaints a tip immediately.
w - widget's path
args - options (incl. -index/-tag)</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::hide">hide</a><span class=tooltiptext> baltip::hide : Destroys the tip's window.
w - widget's path
doit - yes, if do hide by force
Returns 1, if the window was really hidden.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::clear">clear</a><span class=tooltiptext> baltip::clear : Removes tip bindings for a widget.
w - widget's path</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::sleep">sleep</a><span class=tooltiptext> baltip::sleep : Disables tips for a while.
msec - time to sleep, in msec
This is useful esp. before calling a popup menu on listbox/treeview.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::showBalloon">showBalloon</a><span class=tooltiptext> baltip::showBalloon : Shows a balloon under the pointer or according to -geometry option.
tip - text of tip
args - miscellaneous options of baltip
Can be used to show tips on clicking, timeout, processing etc.
If there is -geometry in args, shows the balloon
with this geometry and a minimal pause.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#baltip::showTip">showTip</a><span class=tooltiptext> baltip::showTip : Shows a tip under the pointer, for a specific widget.
tip - text of tip
args - miscellaneous options of baltip
Can be used to show tips on clicking the widget
that has no "normal" tips on hovering it.</span></div></li></ul>
<li><b><a href="#Internals">Internals</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#my::CGet">CGet</a><span class=tooltiptext> my::CGet : Gets options' values, using local (args) and global (ttdata) settings.
args - local settings ("name value" pairs)
Returns the full list of settings ("name value" pairs, "name" without "-") \</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::WidCoord">WidCoord</a><span class=tooltiptext> my::WidCoord : Gets widget's coordinate data.
w - path to the widget
Returns a list of:
x - X coordinate
y - Y coordinate
inside - flag "mouse pointer is inside the widget"</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::Clonename">Clonename</a><span class=tooltiptext> my::Clonename : Gets a clone name of a menu.
mnu - the menu's path
This procedure is borrowed from BWidget's utils.tcl.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::OptionsFromText">OptionsFromText</a><span class=tooltiptext> my::OptionsFromText : Extracts options from "text" argument of baltip::tip.
w - widget's path
txt - "-text" option's value
Options can be set in the "text" argument as uppercased-name / value pairs:
"-BALTIP {True tip's text} -MAXEXP 1 -COMMAND {::mycom %i %c}"
In this case, *txt* must be a correct list of name/value sequences.
Returns an original *txt* or a value of -BALTIP option from *txt*.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::Eternal">Eternal</a><span class=tooltiptext> my::Eternal : Checks if the tip is shown till clicking.
w - tip/widget's path</span></div></li></ul>
<li><b><a href="#Binds">&nbsp;&nbsp;Binds</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#my::BindToEvent">BindToEvent</a><span class=tooltiptext> my::BindToEvent : Binds an event on a widget to a command.
w - the widget's path
event - the event
args - the command
The command can be ended with " ; break".</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::BindTextagToEvent">BindTextagToEvent</a><span class=tooltiptext> my::BindTextagToEvent : Binds an event on a text tag to a command.
w - the widget's path
tag - the tag
event - the event
args - the command
The command can be ended with " ; break".</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::BindCantagToEvent">BindCantagToEvent</a><span class=tooltiptext> my::BindCantagToEvent : Binds an event on a canvas tag to a command.
w - the widget's path
tag - the tag
event - the event
args - the command
The command can be ended with " ; break".</span></div></li></ul>
<li><b><a href="#Shows">&nbsp;&nbsp;Shows</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#my::Command">Command</a><span class=tooltiptext> my::Command : Executes a command set for a window.
w - the widget's path
text - the tip text
The command allows wildcards:
%w - window's path
%t - text of the tip
Returns: list of "yes/no" and a result of the command.
The result of the command can be a new tip if "yes" and the result ne {}.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::ShowWindow">ShowWindow</a><span class=tooltiptext> my::ShowWindow : Shows a window of tip.
win - the tip's window</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::Show">Show</a><span class=tooltiptext> my::Show : Creates and shows the tip's window.
w - the widget's path
text - the tip text
force - if true, re-displays the existing tip
geo - being +X+Y, sets the tip coordinates
optvals - settings ("option value" pairs)
See also: Fade, ShowWindow, ::baltip::update</span></div></li></ul>
<li><b><a href="#Fade">&nbsp;&nbsp;Fade</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#my::Fade">Fade</a><span class=tooltiptext> my::Fade : Fades/unfades the tip's window.
win - the tip's window
aint - interval for 'after'
fint - interval for fading
icount - counter of intervals
Un - if equal to "Un", unfades the tip
alpha - value of -alpha option
show - flag "show the window"
geo - coordinates (+X+Y) of balloon
geos - saved coordinates (+X+Y) of shown tip
w - a host window
See also: FadeNext, UnFadeNext</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::FadeNext">FadeNext</a><span class=tooltiptext> my::FadeNext : A step to fade the tip's window.
w - the tip's window
aint - interval for 'after'
fint - interval for fading
icount - counter of intervals
alpha - value of -alpha option
show - flag "show the window"
geo - coordinates (+X+Y) of balloon
geos - saved coordinates (+X+Y) of shown tip
See also: Fade</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::UnFadeNext">UnFadeNext</a><span class=tooltiptext> my::UnFadeNext : A step to unfade the balloon's window.
w - the tip's window
aint - interval for 'after'
fint - interval for fading
icount - counter of intervals
alpha - value of -alpha option
show - not used (here just for compliance with Fade)
geo - not used (here just for compliance with Fade)
geos - not used (here just for compliance with Fade)
See also: Fade</span></div></li></ul>
<li><b><a href="#Specific_widgets">&nbsp;&nbsp;Specific widgets</a></b></li>
<li><b><a href="#Tags">&nbsp;&nbsp;&nbsp;&nbsp;Tags</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#my::TagTip">TagTip</a><span class=tooltiptext> my::TagTip : Shows a text tag's tip.
w - the text's path
tag - the tag's name
optvals - settings of tip</span></div></li></ul>
<li><b><a href="#Menu">&nbsp;&nbsp;&nbsp;&nbsp;Menu</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#my::MenuTip">MenuTip</a><span class=tooltiptext> my::MenuTip : Shows a menu's tip.
wt - the menu's path (incl. cloned menu)</span></div></li></ul>
<li><b><a href="#Notebook">&nbsp;&nbsp;&nbsp;&nbsp;Notebook</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#my::NbkInfo">NbkInfo</a><span class=tooltiptext> my::NbkInfo : Gets/sets a notebook tab's data.
w - the notebook's path
x - X coordinate of pointer
y - Y coordinate of pointer
tab - a current tab
When getting, returns a list of a current tab and a saved tab.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::ShowNbkTip">ShowNbkTip</a><span class=tooltiptext> my::ShowNbkTip : Shows a tip for a notebook tab.
w - the notebook's path
tip - text of tip</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::PrepareNbkTip">PrepareNbkTip</a><span class=tooltiptext> my::PrepareNbkTip : Prepares a tip for a notebook tab.
w - the notebook's path
x - X coordinate of pointer
y - Y coordinate of pointer
The baltip isn't directly usable with notebook tabs
because they have not Enter/Leave event bindings.
This proc tries to imitate those events, with binding to <Motion> event.</span></div></li></ul>
<li><b><a href="#Listbox">&nbsp;&nbsp;&nbsp;&nbsp;Listbox</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#my::LbxCoord">LbxCoord</a><span class=tooltiptext> my::LbxCoord : Gets listbox's coordinate data.
w - path to the listbox
Returns a list of:
x - X coordinate
y - Y coordinate
idx - index of listbox's item
inside - flag "mouse pointer is inside the listbox"</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::LbxTip">LbxTip</a><span class=tooltiptext> my::LbxTip : Gets a text of a listbox' tip.
w - the listbox's path
idx - index of listbox's item
whole - flag "tip for a whole listbox, not per item"</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::ShowLbxTip">ShowLbxTip</a><span class=tooltiptext> my::ShowLbxTip : Shows a tip for a listbox.
w - the listbox's path
optid - option name for saving *idx*
idx - index of listbox's item
whole - flag "tip for a whole listbox, not per item"</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::PrepareLbxTip">PrepareLbxTip</a><span class=tooltiptext> my::PrepareLbxTip : Prepares a tip for a listbox.
w - the listbox's path
x - X coordinate of pointer
y - Y coordinate of pointer
Imitates Enter/Leave events per items, with binding to <Motion> event.
If "-text" of tip doesn't contain %i, the tip is for a whole listbox.
If "-text" of tip contains %i, the tip is a callback with %i as item index.</span></div></li></ul>
<li><b><a href="#Treeview">&nbsp;&nbsp;&nbsp;&nbsp;Treeview</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#my::TreCoord">TreCoord</a><span class=tooltiptext> my::TreCoord : Gets treeview's coordinate data.
w - path to the treeview
whole - flag "tip for a whole treeview, not per item"
Returns a list of:
x - X coordinate
y - Y coordinate
id - ID of item
c - column of item
inside - flag "mouse pointer is inside the treeview"</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::TreTip">TreTip</a><span class=tooltiptext> my::TreTip : Gets a text of a treeview' tip.
w - the treeview's path
id - ID of item
c - column of item
whole - flag "tip for a whole treeview, not per item"</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::ShowTreTip">ShowTreTip</a><span class=tooltiptext> my::ShowTreTip : Shows a tip for a treeview.
w - the treeview's path
optid - option name for saving *id*
id - ID of item
whole - flag "tip for a whole treeview, not per item"</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#my::PrepareTreTip">PrepareTreTip</a><span class=tooltiptext> my::PrepareTreTip : Prepares a tip for a treeview.
w - the treeview's path
x - X coordinate of pointer
y - Y coordinate of pointer
Imitates Enter/Leave events per items, with binding to <Motion> event.
If "-text" of tip doesn't contain %i, the tip is for a whole treeview.
If "-text" of tip contains %i, the tip is a callback with %i as item index.</span></div></li></ul>
<li><b><a href="#EOF">EOF</a></b></li>

</ul>

</div>
</div>
</div>
<!-- TOC END -->

It's a Tcl/Tk tip widget inspired by:
</p><p>
<li><a href="https://wiki.tcl-lang.org/page/Tklib+tooltip">https://wiki.tcl-lang.org/page/Tklib+tooltip</a></li>
</p><p>
<li><a href="https://wiki.tcl-lang.org/page/balloon+help">https://wiki.tcl-lang.org/page/balloon+help</a></li>
</p><p>
The original code has been modified to make the tip:
</p><p>
<li>be faded/destroyed after an interval defined by a caller</li>
<li>be enabled/disabled for all or specific widgets</li>
<li>be disabled for a while ("sleep")</li>
<li>be usable with labels, menus, text/canvas tags, notebook tabs, listbox/treeview items etc.</li>
<li>be displayed at the screen's edges</li>
<li>be displayed under the host widget</li>
<li>be displayed with a shift (on X and Y) relative to the mouse pointer</li>
<li>be displayed as a stand-alone balloon message at given coordinates</li>
<li>be displayed with given font, colors, paddings, border, relief, opacity, bell</li>
<li>have <code><font color=#653760>-image</font></code> and <code><font color=#653760>-compound</font></code> options to display images</li>
<li>have <code><font color=#653760>-command</font></code> option to be displayed in a status bar instead of a balloon</li>
<li>have <code><font color=#653760>-command</font></code> option to be changed dynamically, with each tip's exposition</li>
<li>have <code><font color=#653760>-maxexp</font></code> option to limit the number of tip's expositions</li>
<li>have configure/cget etc. wrapped in Tcl ensemble for convenience</li>
</p><p>
The video introduction to <i><font color=#1b1baa>baltip</font></i> is presented by
 <a href="https://github.com/aplsimple/baltip/releases/download/baltip-1.3.1/baltip-1.3.1.mp4">baltip-1.3.1.mp4</a> (17 Mb).
</p><p>
Below are several pictures just to glance at <i><font color=#1b1baa>baltip</font></i>.
</p><p>
<i><font color=#1b1baa>Under the mouse pointer</font></i>. By default, the tips are displayed just under the mouse pointer.
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip3.png" class="media" alt="">
</p><p>
<i><font color=#1b1baa>Under the widget</font></i>. This button's tip is configured to be just under the button. As well as the text's tip. This feature is well fit for widgets positioned in a row (e.g. in toolbar, tabbar etc.).
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip1.png" class="media" alt="">
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip2.png" class="media" alt="">
</p><p>
<i><font color=#1b1baa>Tips of text tags</font></i>. The text tags can have their own tips.
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip4.png" class="media" alt="">
</p><p>
The <i><font color=#1b1baa>tags of canvas</font></i> have tips too.
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip12.png" class="media" alt="">
</p><p>
<i><font color=#1b1baa>Tips of menu items</font></i>. The menu items can have their own tips. The popup menus may be <i><font color=#1b1baa>tear-off</font></i> at that.
</p><p>
The menu tips are useful e.g. when the items are displayed as short names, while
the tips are wanted to be full names.
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip6.png" class="media" alt="">
</p><p>
<i><font color=#1b1baa>Label of danger</font></i>. The labels are also tipped. This one is configured to be an alert shown "eternally" (i.e. till hovering over it).
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip7.png" class="media" alt="">
</p><p>
The <i><font color=#1b1baa>tabs of notebook</font></i> are also supplied with tips.
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip13.png" class="media" alt="">
</p><p>
The <code><b><font color=#134070>listbox</font></b></code> can have tips per item as well as for a whole listbox widget.
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip14.png" class="media" alt="">
</p><p>
The <code><b><font color=#134070>ttk::treeview</font></b></code> can have tips per item and/or column as well as for a whole treeview widget.
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip15.png" class="media" alt="">
</p><p>
The <code><font color=#653760>-command</font></code> option allows to display tips in a status bar instead of a balloon.
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip16.png" class="media" alt="">
</p><p>
<i><font color=#1b1baa>Configurable tips</font></i>. The tip configuration can be global or local (for a specific tip).
</p><p>
The configuring can include: font, colors, paddings, border, relief, exposition time, opacity, image (with <code><font color=#653760>-compound</font></code> option), bell.
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip9.png" class="media" alt="">
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip11.png" class="media" alt="">
</p><p>
<i><font color=#1b1baa>Balloon</font></i>. The balloon messages aren't related to any widgets. This one is configurated to appear at the top right corner, disappearing after a while.
</p><p>
 <img src="https://aplsimple.github.io/en/tcl/baltip/files/btip10.png" class="media" alt="">
</p><p>
<h1><font color=#ca14ca> Usage</font></h1>
</p><p>
The <i><font color=#1b1baa>baltip</font></i> usage is rather straightforward. Firstly we need <code><b><font color=#3a6797>package</font></b> require</code>:
<pre class="code"><b><font color=#3a6797>lappend</font></b> auto_path <font color=#8b2a0e>&quot;dir_of_baltip&quot;</font>
<b><font color=#3a6797>package</font></b> require baltip</pre>Then we set tips with <code>::baltip::tip</code> command for each appropriate widget:
<pre class="code">::baltip::tip widgetpath text ?-option value?
<i><font color=#4b5d50># or this way:</font></i>
::baltip tip widgetpath text ?-option value?</pre>For example, having a button <code>.win.but1</code>, we can set its tip this way:
<pre class="code">::baltip tip .win.but1 <font color=#8b2a0e>&quot;It's a tip.\n2nd line of it.\n3rd.&quot;</font></pre>To get all or specific settings of <i><font color=#1b1baa>baltip</font></i>:
<pre class="code">::baltip::cget ?-option?
<i><font color=#4b5d50># or this way:</font></i>
::baltip cget ?-option?</pre>To get a specific widget's tip option:
<pre class="code">::baltip::cget widgetpath <font color=#653760>-option</font>
<i><font color=#4b5d50># or this way:</font></i>
::baltip cget widgetpath <font color=#653760>-option</font></pre>To set some options:
<pre class="code">::baltip::configure <font color=#653760>-option</font> value ?-option value?
<i><font color=#4b5d50># or this way:</font></i>
::baltip config <font color=#653760>-option</font> value ?-option value?</pre>To set a specific widget's tip option:
<pre class="code">::baltip::configure widgetpath <font color=#653760>-option</font> value ?-option value?
<i><font color=#4b5d50># or this way:</font></i>
::baltip config widgetpath <font color=#653760>-option</font> value ?-option value?</pre><b><font color=#1b1baa>Note</font></b>: the options set with <code>configure</code> command are <i><font color=#1b1baa>global</font></i>, i.e. active for all tips.
The options set with <code>tip</code> command are <i><font color=#1b1baa>local</font></i>, i.e. active for the specific tip.
</p><p>
To disable all tips:
<pre class="code">::baltip::configure <font color=#653760>-on</font> false</pre>To disable some specific tip:
<pre class="code">::baltip::tip widgetpath <font color=#8b2a0e>&quot;&quot;</font>
<i><font color=#4b5d50># or this way:</font></i>
::baltip::tip widgetpath <font color=#8b2a0e>&quot;old tip&quot;</font> <font color=#653760>-on</font> false</pre>To hide some specific (suspended) tip forcedly:
<pre class="code">::baltip::hide widgetpath</pre>To update a tip's text and options:
<pre class="code">::baltip::update widgetpath text ?options?</pre>To show a tip for a widget that has no "normal" tip, still needs a tip (e.g. on clicking):
<pre class="code">::baltip::showTip path text ?options?</pre>By default, <code>::baltip::showTip</code> displays the tip under the mouse pointer. At that it regards <code><font color=#653760>-geometry</font></code> option and ignores <code><font color=#653760>-under</font>, <font color=#653760>-shiftX</font>, <font color=#653760>-shiftY</font></code> options.
</p><p>
When you click on a widget with its tip being displayed, the tip is hidden. It is the default behavior of <i><font color=#1b1baa>baltip</font></i>, but sometimes you need to re-display the hidden tip. If the widget is a button, you can include the following command in <code><font color=#653760>-command</font></code> of the button:
<pre class="code">::baltip::repaint widgetpath</pre><h1><font color=#ca14ca> Some special tips</font></h1>
</p><p>
The "text" for <code><b><font color=#134070>listbox</font></b></code> can contain <code>%i</code> wildcard - and in such cases the text means a callback receiving a current index of item to tip:
<pre class="code"><b><font color=#ca14ca>proc</font></b> ::lbxTip {idx} {
  <b><font color=#3a6797>set</font></b> item [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$::lbxlist</font> <font color=#1b1baa>$idx</font>]
  <b><font color=#ca14ca>return</font></b> <font color=#8b2a0e>&quot;Tip for \&quot;<font color=#1b1baa>$</font>item\&quot;\nindex=<font color=#1b1baa>$</font>idx&quot;</font>
}
::baltip tip .listbox {::lbxTip %i}</pre>The "text" for <code><b><font color=#134070>ttk::treeview</font></b></code> can contain <code>%i</code> and/or <code>%c</code> wildcards - and in such cases the text means a callback receiving ID of item and/or column of item to tip:
<pre class="code"><b><font color=#ca14ca>proc</font></b> ::treTip {id c} {
  <b><font color=#3a6797>set</font></b> item [.treeview item <font color=#1b1baa>$id</font> <font color=#653760>-text</font>]
  <b><font color=#ca14ca>return</font></b> <font color=#8b2a0e>&quot;Tip for \&quot;<font color=#1b1baa>$</font>item\&quot;\nID=<font color=#1b1baa>$</font>id, column=<font color=#1b1baa>$</font>c&quot;</font>
}
::baltip::tip .treeview {::treTip %i %c}</pre>If a tip for listbox and treeview widgets doesn't contain <code>%i</code> nor <code>%c</code>, it means a usual tip for a whole widget. At that, if those wildcards still need to be displayed, use <code>%%i</code> and <code>%%c</code> instead.
</p><p>
If you need to switch between "per item" and "per widget" tip of listbox and treeview , use <code>::baltip::tip</code> with <code><font color=#653760>-reset</font> yes</code> option:
<pre class="code">::baltip::tip .treeview {Common tip} <font color=#653760>-reset</font> yes      ;<i><font color=#4b5d50># sets a usual tip</font></i>
::baltip::tip .treeview {::treTip %i %c} <font color=#653760>-reset</font> yes  ;<i><font color=#4b5d50># sets a callback</font></i></pre>Some GUI objects (notebook tabs, listbox items, treeview items) have not <a href="&lt;">&lt;</a>Enter<a href="&gt;">&gt;</a> nor <a href="&lt;">&lt;</a>Leave<a href="&gt;">&gt;</a> event bindings, so that those bindings are imitated by <i><font color=#1b1baa>baltip</font></i>. Hence a problem with popup menus: when you right-click those GUI objects, <code>baltip::tip</code> and <code><b><font color=#134070>tk_popup</font></b></code> might both fire, which results in a mess.
</p><p>
To avoid this, use <code>::baltip::sleep</code> before <code><b><font color=#134070>tk_popup</font></b></code>, for example:
<pre class="code">::baltip::sleep 1000        ;<i><font color=#4b5d50># disables tips for 1000 milliseconds</font></i>
<b><font color=#134070>tk_popup</font></b> <font color=#1b1baa>$popupmenu</font> <font color=#1b1baa>$X</font> <font color=#1b1baa>$Y</font>   ;<i><font color=#4b5d50># calls a popup menu at $X $Y coordinates</font></i></pre>As for <a href="https://wiki.tcl-lang.org/page/tablelist">tablelist</a> widget, I would like to cite an advice by <a href="https://www.nemethi.de/">Csaba Nemethi</a> :
<pre class="code">The support for tablelist is a special case, don't waste your time with
it.  I have already tested that the built-in tooltip support of
Tablelist will work just fine when replacing tklib's tooltip package
with baltip (after fixing the reported bugs), and I intend to extend the
description of the <font color=#653760>-tooltipaddcommand</font> option by hints showing how to use
this option with baltip instead of BWidget and tklib's tooltip.</pre><h1><font color=#ca14ca> Balloon</font></h1>
</p><p>
The <i><font color=#1b1baa>normal</font></i> tip has no <code><font color=#653760>-geometry</font></code> option because it's calculated by <i><font color=#1b1baa>baltip</font></i>, to position the tip under its host widget.
</p><p>
By means of <code><font color=#653760>-geometry</font></code> option you get a balloon message unrelated to any visible widget: it's parented by the toplevel window. The <code><font color=#653760>-geometry</font></code> option has +X+Y form where X and Y are coordinates of the balloon.
</p><p>
For example:
<pre class="code">::baltip::tip .win <font color=#8b2a0e>&quot;It's a balloon at +1+100 (+X+Y) coordinates&quot;</font> \
  <font color=#653760>-geometry</font> +1+100 <font color=#653760>-font</font> {<font color=#653760>-weight</font> bold <font color=#653760>-size</font> 12} \
  <font color=#653760>-alpha</font> 0.8 <font color=#653760>-fg</font> white <font color=#653760>-bg</font> black <font color=#653760>-per10</font> 3000 <font color=#653760>-pause</font> 1500 <font color=#653760>-fade</font> 1500</pre>The <code><font color=#653760>-pause</font></code> and <code><font color=#653760>-fade</font></code> options make the balloon fade at appearing and disappearing.
</p><p>
The <code><font color=#653760>-per10</font></code> option means "milliseconds per 10 characters", so it defines the balloon's duration: the more the longer.
</p><p>
The <code><font color=#653760>-per10</font></code> option is weird a little: while it is active (i.e. while <i><font color=#1b1baa>baltip</font></i>'s clock is counting down according to <code><font color=#653760>-per10</font></code>), other tips are locked. So, <code><font color=#653760>-per10</font> 10000000</code> is a bad idea for balloons, use <code><font color=#653760>-eternal</font> 1</code> instead. If <code><font color=#653760>-eternal</font> 1</code> option is set, <code><font color=#653760>-per10</font> 1</code> is set by force to unlock other tips immediately.
</p><p>
The <code><font color=#653760>-geometry</font></code> value can include <code>W</code> and <code>H</code> <i><font color=#1b1baa>wildcards</font></i> meaning the width and the height of the balloon. This may be useful when you need to show a balloon at a window's edge and should use the balloon's dimensions which are available only after its creation. The X and Y coordinates are calculated by <i><font color=#1b1baa>baltip</font></i> as normal expressions. Of course, they should not include the "+" divider, but this restriction (if any) is easily overcome.
</p><p>
For example:
<pre class="code"><b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>split</font></b> [<b><font color=#134070>winfo</font></b> geometry .win] x+] w h x y
<b><font color=#3a6797>set</font></b> geom <font color=#8b2a0e>&quot;+(<font color=#1b1baa>[</font>expr <font color=#1b1baa>{$</font>w+<font color=#1b1baa>$</font>x<font color=#1b1baa>}]</font>-W-4)+<font color=#1b1baa>$</font>y&quot;</font>
<b><font color=#3a6797>set</font></b> text <font color=#8b2a0e>&quot;The balloon at the right edge of the window&quot;</font>
::baltip tip .win <font color=#1b1baa>$text</font> <font color=#653760>-geometry</font> <font color=#1b1baa>$geom</font> <font color=#653760>-pause</font> 2000 <font color=#653760>-fade</font> 2000</pre>To show a balloon under the mouse pointer, e.g. on clicking, timeout, processing etc., the following call is used:
<pre class="code">::baltip::showBalloon text ?options?</pre>By default, <code>::baltip::showBalloon</code> displays the balloon under the mouse pointer. At that it regards <code><font color=#653760>-geometry</font></code> option and ignores <code><font color=#653760>-under</font>, <font color=#653760>-shiftX</font>, <font color=#653760>-shiftY</font></code> options.
</p><p>

<h1><font color=#ca14ca> Command</font></h1>
</p><p>
The <code><font color=#653760>-command</font></code> option allows to display tips in other places, for example in a status bar. At that, the command can include <code>%t</code> and <code>%w</code> wildcards, meaning "text" and "widget path". Such tips are well fit for menu items, as seen in <i><font color=#1b1baa>test.tcl</font></i>.
</p><p>
The command of this option must return {}, if no tips should be displayed.
</p><p>
Also, it can return a new tip to display as a usual balloon tip, which fits for "dynamic tips" that are changed <i><font color=#1b1baa>at each exposition</font></i> of a tip.
</p><p>
For example:
<pre class="code"><b><font color=#ca14ca>proc</font></b> ::Status {tip} {
  .labelstatus configure <font color=#653760>-text</font> <font color=#1b1baa>$tip</font>
  <b><font color=#ca14ca>return</font></b> {}  ;<i><font color=#4b5d50># no redefining the tip</font></i>
}
::baltip::tip .menu <font color=#8b2a0e>&quot;File actions&quot;</font> <font color=#653760>-index</font> 0 <font color=#653760>-command</font> {::Status %t}
::baltip::tip .menu <font color=#8b2a0e>&quot;Help, hints, Q&A, about etc.&quot;</font> <font color=#653760>-index</font> 1 <font color=#653760>-command</font> {::Status %t}</pre>Also, this option can be used if you need to fire some code when the mouse pointer enters or leaves a GUI object.
</p><p>
<b><font color=#1b1baa>Note</font></b>: the <i><font color=#1b1baa>baltip</font></i> is available for a few of GUI objects that have not <a href="&lt;">&lt;</a>Enter<a href="&gt;">&gt;</a> nor <a href="&lt;">&lt;</a>Leave<a href="&gt;">&gt;</a> bindings.
</p><p>
The only line
<pre class="code">baltip::tip <font color=#1b1baa>$w</font> <font color=#1b1baa>$tip</font> <font color=#653760>-command</font> <font color=#1b1baa>$command</font></pre>might save you other lines to fire the command at entering/leaving a GUI object. E.g. the command might highlight a GUI object entered, save its ID and unhighlight the object at leaving it.
</p><p>
For example:
<pre class="code"><b><font color=#ca14ca>proc</font></b> ::SomeProc {tip} {
  <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>split</font></b> <font color=#1b1baa>$tip</font>] obj ID column
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists ::OBJsaved]} {
    <b><font color=#3a6797>puts</font></b> <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>::OBJsaved object ID=<font color=#1b1baa>[</font>set ::IDsaved<font color=#1b1baa>]</font> is left... unhighlighted...&quot;</font>
    <b><font color=#3a6797>unset</font></b> ::OBJsaved
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$obj</font> eq {}} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>set</font></b> ::OBJsaved <font color=#1b1baa>$obj</font>
  <b><font color=#3a6797>set</font></b> ::IDsaved <font color=#1b1baa>$ID</font>
  <b><font color=#3a6797>puts</font></b> <font color=#8b2a0e>&quot;Now processing <font color=#1b1baa>$</font>obj object with ID=<font color=#1b1baa>$</font>ID column=<font color=#1b1baa>$</font>column&quot;</font>
  <b><font color=#ca14ca>return</font></b> {}  ;<i><font color=#4b5d50># means the proc executed and no tip needed</font></i>
}
::baltip::tip .listbox {Listbox %i} <font color=#653760>-command</font> {::SomeProc {%t}}
::baltip::tip .treeview {Treeview %i %c} <font color=#653760>-command</font> {::SomeProc {%t}}</pre><h1><font color=#ca14ca> Options</font></h1>
</p><p>
Below are listed the <i><font color=#1b1baa>baltip</font></i> options that are set with <code>tip</code> and <code>configure</code> and got with <code>cget</code>:
</p><p>
<li><code><font color=#653760>-on</font></code> - switches all tips on/off;</li>
<li><code><font color=#653760>-per10</font></code> - a time of exposition per 10 characters (in millisec.);</li>
<li><code><font color=#653760>-fade</font></code> - a time of fading (in millisec.);</li>
<li><code><font color=#653760>-pause</font></code> - a pause before displaying tips (in millisec.);</li>
<li><code><font color=#653760>-alpha</font></code> - an opacity (from 0.0 to 1.0);</li>
<li><code><font color=#653760>-fg</font></code> - foreground of tip;</li>
<li><code><font color=#653760>-bg</font></code> - background of tip;</li>
<li><code><font color=#653760>-bd</font></code> - borderwidth of tip;</li>
<li><code><font color=#653760>-font</font></code> - font attributes;</li>
<li><code><font color=#653760>-padx</font></code> - X padding for text;</li>
<li><code><font color=#653760>-pady</font></code> - Y padding for text;</li>
<li><code><font color=#653760>-padding</font></code> - padding for pack;</li>
<li><code><font color=#653760>-under</font></code> - if >= 0, sets the tip under the widget, else under the pointer;</li>
<li><code><font color=#653760>-shiftX</font></code> - a horizontal shift relative to the mouse pointer</li>
<li><code><font color=#653760>-shiftY</font></code> - a vertical shift relative to the mouse pointer</li>
<li><code><font color=#653760>-image</font></code> - image option;</li>
<li><code><font color=#653760>-compound</font></code> - compound option;</li>
<li><code><font color=#653760>-relief</font></code> - relief option;</li>
<li><code><font color=#653760>-bell</font></code> - if true, rings at displaying;</li>
<li><code><font color=#653760>-eternal</font></code> - if true, makes a tip "eternal", i.e. visible till clicking.</li>
</p><p>
The following options are special:
</p><p>
<li><code><font color=#653760>-global</font></code> - if true, applies the settings to all registered tips;</li>
<li><code><font color=#653760>-force</font></code> - if true, forces the display by 'tip' command;</li>
<li><code><font color=#653760>-index</font></code> - index of menu item to tip;</li>
<li><code><font color=#653760>-tag</font></code> - name of text tag to tip;</li>
<li><code><font color=#653760>-ctag</font></code> - name of canvas tag to tip;</li>
<li><code><font color=#653760>-nbktab</font></code> - path to ttk::notebook tab to tip;</li>
<li><code><font color=#653760>-geometry</font></code> - geometry (+X+Y) of the balloon;</li>
<li><code><font color=#653760>-reset</font></code> - "-reset true" may be useful to set a new tip (callback or text) for listbox and treeview;</li>
<li><code><font color=#653760>-command</font></code> - a command to be executed, with <code>%t</code> (tip's text) and <code>%w</code> (widget's path) wildcards;</li>
<li><code><font color=#653760>-maxexp</font></code> - maximum number of tip's expositions.</li>
<li><code><font color=#653760>-focus</font></code> - path to widget to set focus on, after showing a tip</li>
</p><p>
If <code><font color=#653760>-global</font> yes</code> option is used alone, it applies all global options to all registered tips. If <code><font color=#653760>-global</font> yes</code> option is used along with other options, only those options are applied to all registered tips.
</p><p>
Of course, all global options will be applied to all tips to be created after <code>::baltip configuration</code>. For example:
<pre class="code">::baltip config <font color=#653760>-global</font> yes  ;<i><font color=#4b5d50># applies all global options to all registered and to-be-created tips</font></i>
::baltip config <font color=#653760>-global</font> yes <font color=#653760>-per10</font> 2000  ;<i><font color=#4b5d50># applies `-per10` to all registered and to-be-created tips</font></i></pre>The <code><font color=#653760>-index</font></code> option may have numeric (0, 1, 2...) or symbolic form (active, end, none) to indicate a menu entry, e.g. in <code><font color=#653760>-command</font></code> option. For example:
<pre class="code">::baltip repaint .win.popupMenu <font color=#653760>-index</font> active
::baltip::tip .menu <font color=#8b2a0e>&quot;File actions&quot;</font> <font color=#653760>-index</font> 0</pre>There may be useful to define options in <i><font color=#1b1baa>text</font></i> argument of <i><font color=#1b1baa>::baltip::tip</font></i>.
</p><p>
For this, provide the <i><font color=#1b1baa>text</font></i> argument as a list of pairs of uppercased options' name / value including <i><font color=#1b1baa>-BALTIP</font></i> option for <i><font color=#1b1baa>tip</font></i>. For example:
<pre class="code">::baltip tip .text <font color=#8b2a0e>&quot;-BALTIP <font color=#1b1baa>{</font>Sort of diary, todos etc.<font color=#1b1baa>}</font> -MAXEXP 1&quot;</font></pre>As seen in the above examples, <i><font color=#1b1baa>baltip</font></i> can be used as Tcl ensemble, so that the commands may be shortened.
</p><p>
See more examples in <i><font color=#1b1baa>test.tcl</font></i> of <a href="https://chiselapp.com/user/aplsimple/repository/baltip/download">baltip.zip</a>.
</p><p>
Also, you can test <i><font color=#1b1baa>baltip</font></i> with <i><font color=#1b1baa>test2_pave.tcl</font></i> of <a href="https://chiselapp.com/user/aplsimple/repository/pave/download">apave package</a>.
</p><p>
<h1><font color=#ca14ca> Acknowledgements</font></h1>
</p><p>
The <i><font color=#1b1baa>baltip</font></i> package has been developed with help of these kind people:
</p><p>
<li><a href="https://github.com/sl1200mk2">Nicolas Bats</a> prompted to add canvas tags' tips, baltip::show procedure and tested <i><font color=#1b1baa>baltip</font></i> in MacOS</li>
</p><p>
<li><a href="https://www.nemethi.de/">Csaba Nemethi</a> sent several bug fixes and advices, especially on listbox, treeview and menu tips</li>
</p><p>
<h1><font color=#ca14ca> Links</font></h1>
</p><p>
<li><a href="https://chiselapp.com/user/aplsimple/repository/baltip/download">Source at chiselapp</a> (baltip.zip)</li>
</p><p>
<li><a href="https://github.com/aplsimple/baltip">Source at github</a></li>
</p><p>
<li><a href="https://aplsimple.github.io/en/tcl/baltip/baltip.html">Reference</a></li>
</p><p>
<li><a href="https://github.com/aplsimple/baltip/releases/download/baltip-1.3.1/baltip-1.3.1.mp4">Demo of baltip v1.3.1</a></li>
</p><p>

</p>

<table border=0 cellPadding=4 cellSpacing=0 width=100%>  <td border=0 bgColor=#87bcd3><div style=text-align:center>  <a href="../../index.html"><font color=#1a1a1a size=6>  <b>baltip.tcl</b></font></div></td></table>

<pre class="code"><i><font color=#4b5d50>###########################################################<a id=baltip.tcl></a></font></i>
<i><font color=#4b5d50># Name:    baltip.tcl</font></i>
<i><font color=#4b5d50># Author:  Alex Plotnikov  (aplsimple@gmail.com)</font></i>
<i><font color=#4b5d50># Date:    12/01/2021</font></i>
<i><font color=#4b5d50># Brief:   Handles Tcl/Tk tip widget.</font></i>
<i><font color=#4b5d50># License: MIT.</font></i>
<i><font color=#4b5d50>###########################################################</font></i>

<b><font color=#3a6797>package</font></b> provide baltip 1.6.2
<a id=Variables></a>
<i><font color=#4b5d50># ________________________ Variables _________________________ #</font></i>

<b><font color=#ca14ca>namespace</font></b> eval ::baltip {

  <b><font color=#3a6797>namespace</font></b> export configure cget tip update hide repaint \
    optionlist tippath clear sleep showBalloon showTip
  <b><font color=#3a6797>namespace</font></b> ensemble create

  <b><font color=#ca14ca>namespace</font></b> eval my {
    <b><font color=#3a6797>variable</font></b> ttdata; <b><font color=#3a6797>array</font></b> set ttdata [<b><font color=#3a6797>list</font></b>]
    <b><font color=#3a6797>set</font></b> ttdata(on) yes
    <b><font color=#3a6797>set</font></b> ttdata(per10) 1600
    <b><font color=#3a6797>set</font></b> ttdata(fade) 300
    <b><font color=#3a6797>set</font></b> ttdata(pause) 1000
    <b><font color=#3a6797>set</font></b> ttdata(fg) black
    <b><font color=#3a6797>set</font></b> ttdata(bg) #FBFB95
    <b><font color=#3a6797>set</font></b> ttdata(bd) 1
    <b><font color=#3a6797>set</font></b> ttdata(padx) 4
    <b><font color=#3a6797>set</font></b> ttdata(pady) 3
    <b><font color=#3a6797>set</font></b> ttdata(padding) 0
    <b><font color=#3a6797>set</font></b> ttdata(alpha) 1.0
    <b><font color=#3a6797>set</font></b> ttdata(bell) no
    <b><font color=#3a6797>set</font></b> ttdata(font) [<b><font color=#134070>font</font></b> actual TkTooltipFont]
    <b><font color=#3a6797>set</font></b> ttdata(under) -16
    <b><font color=#3a6797>set</font></b> ttdata(image) {}
    <b><font color=#3a6797>set</font></b> ttdata(compound) {}
    <b><font color=#3a6797>set</font></b> ttdata(relief) {}
    <b><font color=#3a6797>set</font></b> ttdata(shiftX) {}
    <b><font color=#3a6797>set</font></b> ttdata(shiftY) {}
    <b><font color=#3a6797>set</font></b> ttdata(ontop) no
    <b><font color=#3a6797>set</font></b> ttdata(balloon) -
  }
}
<a id=UI></a>
<i><font color=#4b5d50># _________________________ UI ______________________ #</font></i>
<a id=baltip::configure></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::configure {args} {
  <i><font color=#4b5d50># Configurates the tip for all widgets or for a widget.</font></i>
  <i><font color=#4b5d50>#   args - options (&quot;name value&quot; pairs)</font></i>
  <i><font color=#4b5d50># If *args* begins with a widget path, then</font></i>
  <i><font color=#4b5d50># args is &quot;w -opt val ?-opt val?&quot;, so the widget tip options are set.</font></i>
  <i><font color=#4b5d50># Returns the list of special options' values or a widget's tip options.</font></i>

  <b><font color=#3a6797>variable</font></b> my::ttdata
  <b><font color=#3a6797>set</font></b> w [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$args</font> 0]
  <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$w</font>]} {
    <i><font color=#4b5d50># configure a widget's tip</font></i>
    <b><font color=#ca14ca>return</font></b> [tip <font color=#1b1baa>$w</font> <font color=#653760>-BALTIPSET</font> {<b><font color=#3a6797>*</font></b>}[<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$args</font> 1 end]]
  }
  <b><font color=#3a6797>set</font></b> force no
  <b><font color=#3a6797>set</font></b> index -1
  <b><font color=#3a6797>lassign</font></b> {} geometry tag ctag nbktab reset command maxexp focus
  <b><font color=#3a6797>set</font></b> global [<b><font color=#3a6797>expr</font></b> {[<b><font color=#3a6797>dict</font></b> exists <font color=#1b1baa>$args</font> <font color=#653760>-global</font>] && [<b><font color=#3a6797>dict</font></b> get <font color=#1b1baa>$args</font> <font color=#653760>-global</font>]}]
  <b><font color=#3a6797>foreach</font></b> {n v} <font color=#1b1baa>$args</font> {
    <b><font color=#3a6797>set</font></b> n1 [<b><font color=#3a6797>string</font></b> range <font color=#1b1baa>$n</font> 1 end]
    <b><font color=#3a6797>switch</font></b> <font color=#653760>-glob</font> -- <font color=#1b1baa>$n</font> {
      <font color=#653760>-SPECTIP</font>* -
      <font color=#653760>-per10</font> - <font color=#653760>-fade</font> - <font color=#653760>-pause</font> - <font color=#653760>-fg</font> - <font color=#653760>-bg</font> - <font color=#653760>-bd</font> - <font color=#653760>-alpha</font> - <font color=#653760>-text</font> - <font color=#653760>-relief</font> - \
      <font color=#653760>-on</font> - <font color=#653760>-padx</font> - <font color=#653760>-pady</font> - <font color=#653760>-padding</font> - <font color=#653760>-bell</font> - <font color=#653760>-under</font> - <font color=#653760>-font</font> - <font color=#653760>-image</font> - <font color=#653760>-compound</font> - \
      <font color=#653760>-shiftX</font> - <font color=#653760>-shiftY</font> - <font color=#653760>-ontop</font> - <font color=#653760>-eternal</font> {
        <b><font color=#3a6797>set</font></b> my::ttdata(<font color=#1b1baa>$n1</font>) <font color=#1b1baa>$v</font>
      }
      <font color=#653760>-force</font> - <font color=#653760>-geometry</font> - <font color=#653760>-index</font> - <font color=#653760>-tag</font> - <font color=#653760>-global</font> - <font color=#653760>-ctag</font> - <font color=#653760>-nbktab</font> - <font color=#653760>-reset</font> - \
      <font color=#653760>-command</font> - <font color=#653760>-maxexp</font> - <font color=#653760>-focus</font> {
        <b><font color=#3a6797>set</font></b> <font color=#1b1baa>$n1</font> <font color=#1b1baa>$v</font>
      }
      <b><font color=#3a6797>default</font></b> {<b><font color=#ca14ca>return</font></b> <font color=#653760>-code</font> error <font color=#8b2a0e>&quot;baltip: invalid option \&quot;<font color=#1b1baa>$</font>n\&quot;&quot;</font>}
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$global</font> && (<font color=#1b1baa>$n</font> ne {<font color=#653760>-global</font>} || [<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$args</font>]==2)} {
      <b><font color=#3a6797>foreach</font></b> k [<b><font color=#3a6797>array</font></b> names my::ttdata <font color=#653760>-glob</font> on,*] {
        <b><font color=#3a6797>set</font></b> w [<b><font color=#3a6797>lindex</font></b> [<b><font color=#3a6797>split</font></b> <font color=#1b1baa>$k</font> ,] 1]
        <b><font color=#3a6797>set</font></b> my::ttdata(<font color=#1b1baa>$n1</font>,<font color=#1b1baa>$w</font>) <font color=#1b1baa>$v</font>
      }
    }
  }
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> \
    <font color=#1b1baa>$force</font> <font color=#1b1baa>$geometry</font> <font color=#1b1baa>$index</font> <font color=#1b1baa>$tag</font> <font color=#1b1baa>$ctag</font> <font color=#1b1baa>$nbktab</font> <font color=#1b1baa>$reset</font> <font color=#1b1baa>$command</font> <font color=#1b1baa>$maxexp</font> <font color=#1b1baa>$focus</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::cget></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::cget {args} {
  <i><font color=#4b5d50># Gets global option values or a widget's option value.</font></i>
  <i><font color=#4b5d50>#   args - option names (if empty, returns all options)</font></i>
  <i><font color=#4b5d50># If *args* begins with a widget path, then args is &quot;w -option&quot;,</font></i>
  <i><font color=#4b5d50># so the widget tip option's value is returned (e.g. for -text option).</font></i>
  <i><font color=#4b5d50># Returns a list of &quot;name value&quot; pairs or an option value of a widget's tip.</font></i>

  <b><font color=#3a6797>variable</font></b> my::ttdata
  <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$args</font>]} {
    <b><font color=#3a6797>lappend</font></b> args {<b><font color=#3a6797>*</font></b>}[optionlist]
  }
  <b><font color=#3a6797>set</font></b> w [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$args</font> 0]
  <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$w</font>]} {
    <b><font color=#3a6797>set</font></b> dic [tip <font color=#1b1baa>$w</font> <font color=#653760>-BALTIPGET</font>]
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> opt [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$args</font> 1]] ne {}} {
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>dict</font></b> exists <font color=#1b1baa>$dic</font> <font color=#1b1baa>$opt</font>]} {
        <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>dict</font></b> get <font color=#1b1baa>$dic</font> <font color=#1b1baa>$opt</font>]
      }
      <b><font color=#ca14ca>return</font></b> {}
    }
    <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$dic</font>
  }
  <b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>list</font></b>]
  <b><font color=#3a6797>foreach</font></b> n <font color=#1b1baa>$args</font> {
    <b><font color=#3a6797>set</font></b> n [<b><font color=#3a6797>string</font></b> range <font color=#1b1baa>$n</font> 1 end]
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists my::ttdata(<font color=#1b1baa>$n</font>)]} {
      <b><font color=#3a6797>lappend</font></b> res -<font color=#1b1baa>$n</font> <font color=#1b1baa>$my::ttdata($n)</font>
    }
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::optionlist></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::optionlist {} {
  <i><font color=#4b5d50># All options of baltip.</font></i>

  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> <font color=#653760>-on</font> <font color=#653760>-per10</font> <font color=#653760>-fade</font> <font color=#653760>-pause</font> <font color=#653760>-fg</font> <font color=#653760>-bg</font> <font color=#653760>-bd</font> <font color=#653760>-padx</font> <font color=#653760>-pady</font> <font color=#653760>-padding</font> <font color=#653760>-font</font> \
    <font color=#653760>-alpha</font> <font color=#653760>-text</font> <font color=#653760>-index</font> <font color=#653760>-tag</font> <font color=#653760>-bell</font> <font color=#653760>-under</font> <font color=#653760>-image</font> <font color=#653760>-compound</font> <font color=#653760>-relief</font> <font color=#653760>-ctag</font> \
    <font color=#653760>-nbktab</font> <font color=#653760>-reset</font> <font color=#653760>-command</font> <font color=#653760>-maxexp</font> <font color=#653760>-focus</font> <font color=#653760>-shiftX</font> <font color=#653760>-shiftY</font> <font color=#653760>-ontop</font> <font color=#653760>-eternal</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::tippath></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::tippath {w} {
  <i><font color=#4b5d50># Gets a tip window's path.</font></i>
  <i><font color=#4b5d50>#   w - widget's path</font></i>

  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>string</font></b> trimright <font color=#1b1baa>$w</font> .].w__BALTIP
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::tip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::tip {w {<b><font color=#134070>text</font></b> <font color=#8b2a0e>&quot;-BALTIPGET&quot;</font>} args} {
  <i><font color=#4b5d50># Creates a tip for a widget.</font></i>
  <i><font color=#4b5d50>#   w - the parent widget's path</font></i>
  <i><font color=#4b5d50>#   text - the tip text</font></i>
  <i><font color=#4b5d50>#   args - options (&quot;name value&quot; pairs)</font></i>
  <i><font color=#4b5d50># If *text* is equal to &quot;-BALTIPGET&quot;, returns options of widget's tip</font></i>
  <i><font color=#4b5d50># If *text* is equal to &quot;-BALTIPSET&quot;, sets options of widget's tip</font></i>

  <b><font color=#3a6797>variable</font></b> my::ttdata
  <b><font color=#3a6797>array</font></b> unset my::ttdata winGEO*
  <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$w</font>] || <font color=#1b1baa>$w</font> eq {}} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$text</font> in {<font color=#653760>-BALTIPGET</font> <font color=#653760>-BALTIPSET</font>}} {
      <i><font color=#4b5d50># &quot;-BALTIPGET&quot; is the same as &quot;-BALTIPSET&quot;, just supposed not to include args</font></i>
      <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>info</font></b> exists my::ttdata(optvals,<font color=#1b1baa>$w</font>)]} {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$text</font> eq {<font color=#653760>-BALTIPGET</font>}} {<b><font color=#ca14ca>return</font></b> {}}
        <b><font color=#3a6797>set</font></b> my::ttdata(optvals,<font color=#1b1baa>$w</font>) [<b><font color=#3a6797>dict</font></b> create]
      }
      <b><font color=#3a6797>set</font></b> my::ttdata(optvals,<font color=#1b1baa>$w</font>) [<b><font color=#3a6797>dict</font></b> replace <font color=#1b1baa>$my::ttdata(optvals,$w)</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$text</font> eq {<font color=#653760>-BALTIPGET</font>}} {
        <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$my::ttdata(optvals,$w)</font>
      }
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> text [<b><font color=#3a6797>dict</font></b> get <font color=#1b1baa>$my::ttdata(optvals,$w)</font> <font color=#653760>-text</font>]}]} {
        <b><font color=#ca14ca>return</font></b> {}
      }
    }
    <b><font color=#3a6797>set</font></b> arrsaved [<b><font color=#3a6797>array</font></b> get my::ttdata]
    <b><font color=#3a6797>set</font></b> optvals [::baltip::my::CGet {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
    <i><font color=#4b5d50># block of related lines for special options</font></i>
    <b><font color=#3a6797>set</font></b> specopt {forced geo index ttag ctag nbktab reset command maxexp focus}
    <b><font color=#3a6797>lassign</font></b> <font color=#1b1baa>$optvals</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$specopt</font>
    <b><font color=#3a6797>set</font></b> optArgs [<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$optvals</font> [<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$specopt</font>] end] ;<i><font color=#4b5d50># get rid of spec.options</font></i>
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> optvals <font color=#1b1baa>$my::ttdata(optvals,$w)</font>}]} {
      <b><font color=#3a6797>set</font></b> optvals <font color=#1b1baa>$optArgs</font>
    }
    <i><font color=#4b5d50># end of block</font></i>
    <b><font color=#3a6797>set</font></b> my::ttdata(global,<font color=#1b1baa>$w</font>) no
    <i><font color=#4b5d50># no redefining a command once set</font></i>
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists ttdata(command,<font color=#1b1baa>$w</font>)] && [<b><font color=#3a6797>string</font></b> is false <font color=#1b1baa>$reset</font>]} {
      <b><font color=#3a6797>set</font></b> command <font color=#1b1baa>$my::ttdata(command,$w)</font>
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>set</font></b> my::ttdata(command,<font color=#1b1baa>$w</font>) <font color=#1b1baa>$command</font>
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$command</font> ne {}} {::baltip::update <font color=#1b1baa>$w</font> <font color=#1b1baa>$text</font>}
    <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>info</font></b> exists my::ttdata(maxexp,<font color=#1b1baa>$w</font>)]} {
      <b><font color=#3a6797>set</font></b> my::ttdata(maxexp,<font color=#1b1baa>$w</font>) <font color=#1b1baa>$maxexp</font>
    }
    <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$focus</font>]} {
      <b><font color=#3a6797>set</font></b> my::ttdata(focus,<font color=#1b1baa>$w</font>) <font color=#1b1baa>$focus</font>
    }
    <b><font color=#3a6797>set</font></b> text [my::OptionsFromText <font color=#1b1baa>$w</font> <font color=#1b1baa>$text</font>]  ;<i><font color=#4b5d50># may reset -command and -maxexp</font></i>
    <b><font color=#3a6797>set</font></b> ontags [<b><font color=#3a6797>string</font></b> length <font color=#1b1baa>$nbktab$ctag$ttag</font>]
    <b><font color=#3a6797>set</font></b> onopt [<b><font color=#3a6797>expr</font></b> {[<b><font color=#3a6797>string</font></b> length <font color=#1b1baa>$text</font>] && <font color=#1b1baa>$my::ttdata(on)</font> || <font color=#1b1baa>$ontags</font>}]
    <b><font color=#3a6797>set</font></b> optArgs [<b><font color=#3a6797>dict</font></b> replace <font color=#1b1baa>$optArgs</font> <font color=#653760>-text</font> <font color=#1b1baa>$text</font>]
    <b><font color=#3a6797>set</font></b> optvals [<b><font color=#3a6797>dict</font></b> replace <font color=#1b1baa>$optvals</font> <font color=#653760>-text</font> <font color=#1b1baa>$text</font>]
    <b><font color=#3a6797>set</font></b> et 0
    <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> et [<b><font color=#3a6797>dict</font></b> get <font color=#1b1baa>$args</font> <font color=#653760>-eternal</font>]}
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> my::ttdata(eternal,<font color=#1b1baa>$w</font>) <font color=#1b1baa>$et</font>]} {<b><font color=#3a6797>lappend</font></b> optvals <font color=#653760>-per10</font> 1}
    <b><font color=#3a6797>set</font></b> my::ttdata(optvals,<font color=#1b1baa>$w</font>) <font color=#1b1baa>$optvals</font>
    <b><font color=#3a6797>set</font></b> my::ttdata(on,<font color=#1b1baa>$w</font>) <font color=#1b1baa>$onopt</font>
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$text</font> ne {} || <font color=#1b1baa>$ontags</font>} {
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$forced</font> || <font color=#1b1baa>$geo</font> ne {}} {::baltip::my::Show <font color=#1b1baa>$w</font> <font color=#1b1baa>$text</font> yes <font color=#1b1baa>$geo</font> <font color=#1b1baa>$optvals</font>}
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$geo</font> ne {}} {
        <i><font color=#4b5d50># balloon popup message</font></i>
        <b><font color=#3a6797>array</font></b> set my::ttdata <font color=#1b1baa>$arrsaved</font>
        <b><font color=#3a6797>set</font></b> my::ttdata(balloon) <font color=#1b1baa>$w</font>
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#3a6797>set</font></b> widgetclass [<b><font color=#134070>winfo</font></b> class <font color=#1b1baa>$w</font>]
        <b><font color=#3a6797>set</font></b> tags [<b><font color=#134070>bindtags</font></b> <font color=#1b1baa>$w</font>]
        <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-exact</font> <font color=#1b1baa>$tags</font> <font color=#8b2a0e>&quot;Tooltip<font color=#1b1baa>$</font>w&quot;</font>] == -1} {
          <b><font color=#134070>bindtags</font></b> <font color=#1b1baa>$w</font> [<b><font color=#3a6797>linsert</font></b> <font color=#1b1baa>$tags</font> end <font color=#8b2a0e>&quot;Tooltip<font color=#1b1baa>$</font>w&quot;</font>]
        }
        <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;Any-Leave&gt;    <font color=#8b2a0e>&quot;::baltip::hide <font color=#1b1baa>$</font>w&quot;</font>
        <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;Any-KeyPress&gt; <font color=#8b2a0e>&quot;::baltip::hide <font color=#1b1baa>$</font>w&quot;</font>
        <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;Any-Button&gt;   <font color=#8b2a0e>&quot;::baltip::hide <font color=#1b1baa>$</font>w&quot;</font>
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$index</font>&gt;-1} {
          <i><font color=#4b5d50># tip for menu items</font></i>
          <b><font color=#3a6797>set</font></b> my::ttdata(LASTMITEM) {}
          <b><font color=#3a6797>set</font></b> wt [my::Clonename <font color=#1b1baa>$w</font>]
          <b><font color=#3a6797>foreach</font></b> w2 [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$w</font> <font color=#1b1baa>$wt</font>] {
            <b><font color=#3a6797>set</font></b> my::ttdata(on,<font color=#1b1baa>$w2</font>) <font color=#1b1baa>$onopt</font>
            <b><font color=#3a6797>set</font></b> my::ttdata(<font color=#1b1baa>$w2</font>,<font color=#1b1baa>$index</font>) <font color=#1b1baa>$optArgs</font>
            <b><font color=#3a6797>set</font></b> my::ttdata(command,<font color=#1b1baa>$w2</font>) <font color=#1b1baa>$command</font>
            <b><font color=#3a6797>set</font></b> my::ttdata(global,<font color=#1b1baa>$w2</font>) no
          }
          my::BindToEvent Menu &lt;&lt;MenuSelect&gt;&gt; ::baltip::my::MenuTip %W
        } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$ttag</font> ne {}} {
          <i><font color=#4b5d50># tip for text tags</font></i>
          <b><font color=#3a6797>set</font></b> my::ttdata(<font color=#1b1baa>$w</font>,<font color=#1b1baa>$ttag</font>) <font color=#1b1baa>$text</font>
          my::BindTextagToEvent <font color=#1b1baa>$w</font> <font color=#1b1baa>$ttag</font> &lt;Enter&gt; ::baltip::my::TagTip <font color=#1b1baa>$w</font> <font color=#1b1baa>$ttag</font> <font color=#1b1baa>$optArgs</font>
          <b><font color=#3a6797>foreach</font></b> event {Leave KeyPress Button} {
            my::BindTextagToEvent <font color=#1b1baa>$w</font> <font color=#1b1baa>$ttag</font> &lt;<font color=#1b1baa>$event</font>&gt; ::baltip::my::TagTip <font color=#1b1baa>$w</font>
          }
        } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$ctag</font> ne {}} {
          <i><font color=#4b5d50># tip for canvas tags</font></i>
          <b><font color=#3a6797>set</font></b> my::ttdata(<font color=#1b1baa>$w</font>,<font color=#1b1baa>$ctag</font>) <font color=#1b1baa>$text</font>
          my::BindCantagToEvent <font color=#1b1baa>$w</font> <font color=#1b1baa>$ctag</font> &lt;Enter&gt; ::baltip::my::TagTip <font color=#1b1baa>$w</font> <font color=#1b1baa>$ctag</font> <font color=#1b1baa>$optArgs</font>
          my::BindCantagToEvent <font color=#1b1baa>$w</font> <font color=#1b1baa>$ctag</font> &lt;Leave&gt; ::baltip::my::TagTip <font color=#1b1baa>$w</font>
        } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$nbktab</font> ne {}} {
          <i><font color=#4b5d50># tip for notebook tabs</font></i>
          configure <font color=#653760>-SPECTIP</font><font color=#1b1baa>$nbktab</font> <font color=#1b1baa>$text</font>
          <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;Button-1&gt; <font color=#8b2a0e>&quot;::baltip::my::NbkInfo <font color=#1b1baa>$</font>w %x %y -&quot;</font>
          <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;Motion&gt; <font color=#8b2a0e>&quot;::baltip::my::PrepareNbkTip <font color=#1b1baa>$</font>w %x %y&quot;</font>
        } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$widgetclass</font> eq {Listbox}} {
          <i><font color=#4b5d50># tip for listbox items</font></i>
          <b><font color=#3a6797>if</font></b> {[cget <font color=#653760>-SPECTIP</font><font color=#1b1baa>$w</font>] eq {} || [<b><font color=#3a6797>string</font></b> is true <font color=#653760>-strict</font> <font color=#1b1baa>$reset</font>]} {
            configure <font color=#653760>-SPECTIP</font><font color=#1b1baa>$w</font> <font color=#1b1baa>$text</font>
          }
          <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;Any-Leave&gt; \
            <font color=#8b2a0e>&quot;::baltip hide <font color=#1b1baa>$</font>w; ::baltip configure -SPECTIPid<font color=#1b1baa>$</font>w <font color=#1b1baa>{}</font>&quot;</font>
          <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;Motion&gt; <font color=#8b2a0e>&quot;::baltip::my::PrepareLbxTip <font color=#1b1baa>$</font>w %x %y&quot;</font>
        } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$widgetclass</font> eq {Treeview}} {
          <i><font color=#4b5d50># tip for treeview items</font></i>
          <b><font color=#3a6797>if</font></b> {[cget <font color=#653760>-SPECTIP</font><font color=#1b1baa>$w</font>] eq {} || [<b><font color=#3a6797>string</font></b> is true <font color=#653760>-strict</font> <font color=#1b1baa>$reset</font>]} {
            configure <font color=#653760>-SPECTIP</font><font color=#1b1baa>$w</font> <font color=#1b1baa>$text</font>
          }
          <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;Any-Leave&gt; \
            <font color=#8b2a0e>&quot;::baltip hide <font color=#1b1baa>$</font>w; ::baltip configure -SPECTIPid<font color=#1b1baa>$</font>w <font color=#1b1baa>{}</font>&quot;</font>
          <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;Motion&gt; <font color=#8b2a0e>&quot;::baltip::my::PrepareTreTip <font color=#1b1baa>$</font>w %x %y&quot;</font>
        } <b><font color=#3a6797>else</font></b> {
          <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;Enter&gt; [<b><font color=#3a6797>list</font></b> ::baltip::my::Show %W <font color=#1b1baa>$text</font> no <font color=#1b1baa>$geo</font> <font color=#1b1baa>$optvals</font>]
        }
      }
    }
  }
  <b><font color=#ca14ca>return</font></b> {}
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::update></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::update {w text args} {
  <i><font color=#4b5d50># Updates tip's text and settings.</font></i>
  <i><font color=#4b5d50>#  w - widget's path</font></i>
  <i><font color=#4b5d50>#  text - tip's text</font></i>
  <i><font color=#4b5d50>#  args - tip's settings</font></i>

  <b><font color=#3a6797>variable</font></b> my::ttdata
  <b><font color=#3a6797>set</font></b> my::ttdata(text,<font color=#1b1baa>$w</font>) <font color=#1b1baa>$text</font>
  <b><font color=#3a6797>foreach</font></b> {k v} <font color=#1b1baa>$args</font> {<b><font color=#3a6797>set</font></b> my::ttdata([<b><font color=#3a6797>string</font></b> range <font color=#1b1baa>$k</font> 1 end],<font color=#1b1baa>$w</font>) <font color=#1b1baa>$v</font>}
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::repaint></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::repaint {w args} {
  <i><font color=#4b5d50># Repaints a tip immediately.</font></i>
  <i><font color=#4b5d50>#   w - widget's path</font></i>
  <i><font color=#4b5d50>#  args - options (incl. -index/-tag)</font></i>

  <b><font color=#3a6797>variable</font></b> my::ttdata
  <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$w</font>] && [<b><font color=#3a6797>info</font></b> exists my::ttdata(optvals,<font color=#1b1baa>$w</font>)] && \
  [<b><font color=#3a6797>dict</font></b> exists <font color=#1b1baa>$my::ttdata(optvals,$w)</font> <font color=#653760>-text</font>]} {
    <b><font color=#3a6797>set</font></b> optvals <font color=#1b1baa>$my::ttdata(optvals,$w)</font>
    <b><font color=#3a6797>lappend</font></b> optvals {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
    <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel <font color=#1b1baa>$my::ttdata(after)</font>}
    <b><font color=#3a6797>set</font></b> win [tippath <font color=#1b1baa>$w</font>] ;<i><font color=#4b5d50># the tip's window</font></i>
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists my::ttdata(winGEO,<font color=#1b1baa>$win</font>)]} {
      <b><font color=#3a6797>set</font></b> geo <font color=#1b1baa>$my::ttdata(winGEO,$win)</font>
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>set</font></b> geo {}
    }
    <b><font color=#3a6797>set</font></b> my::ttdata(after) [<b><font color=#3a6797>after</font></b> idle [<b><font color=#3a6797>list</font></b> ::baltip::my::Show <font color=#1b1baa>$w</font> \
      [<b><font color=#3a6797>dict</font></b> get <font color=#1b1baa>$my::ttdata(optvals,$w)</font> <font color=#653760>-text</font>] yes <font color=#1b1baa>$geo</font> <font color=#1b1baa>$optvals</font>]]
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::hide></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::hide {{w <font color=#8b2a0e>&quot;&quot;</font>} {doit no}} {
  <i><font color=#4b5d50># Destroys the tip's window.</font></i>
  <i><font color=#4b5d50>#   w - widget's path</font></i>
  <i><font color=#4b5d50>#   doit - yes, if do hide by force</font></i>
  <i><font color=#4b5d50># Returns 1, if the window was really hidden.</font></i>

  <b><font color=#3a6797>variable</font></b> my::ttdata
  my::Command <font color=#1b1baa>$w</font> {}
  <b><font color=#3a6797>set</font></b> res 1
  <b><font color=#3a6797>if</font></b> {(![my::Eternal <font color=#1b1baa>$w</font>] && <font color=#1b1baa>$my::ttdata(balloon)</font> ne <font color=#1b1baa>$w</font>) || <font color=#1b1baa>$doit</font>} {
    <b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>expr</font></b> {![<b><font color=#3a6797>catch</font></b> {<b><font color=#134070>destroy</font></b> [tippath <font color=#1b1baa>$w</font>]}]}]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$w</font> eq <font color=#1b1baa>$my::ttdata(balloon)</font>} {<b><font color=#3a6797>set</font></b> my::ttdata(balloon) -}
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::clear></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::clear {w args} {
  <i><font color=#4b5d50># Removes tip bindings for a widget.</font></i>
  <i><font color=#4b5d50>#   w - widget's path</font></i>

  <b><font color=#3a6797>variable</font></b> my::ttdata
  <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>unset</font></b> my::ttdata(optvals,<font color=#1b1baa>$w</font>)}
  <b><font color=#3a6797>catch</font></b> {hide <font color=#1b1baa>$w</font>}
  <b><font color=#3a6797>foreach</font></b> ev {Any-Leave Any-KeyPress Any-Button Motion Any-Enter Leave Enter} {
    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$w</font> &lt;<font color=#1b1baa>$ev</font>&gt; {}}
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::sleep></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::sleep {msec} {
  <i><font color=#4b5d50># Disables tips for a while.</font></i>
  <i><font color=#4b5d50>#   msec - time to sleep, in msec</font></i>
  <i><font color=#4b5d50># This is useful esp. before calling a popup menu on listbox/treeview.</font></i>

  configure <font color=#653760>-on</font> no
  <b><font color=#3a6797>after</font></b> <font color=#1b1baa>$msec</font> <font color=#8b2a0e>&quot;::baltip::configure -on yes&quot;</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::showBalloon></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::showBalloon {tip args} {
  <i><font color=#4b5d50># Shows a balloon under the pointer or according to -geometry option.</font></i>
  <i><font color=#4b5d50>#   tip - text of tip</font></i>
  <i><font color=#4b5d50>#   args - miscellaneous options of baltip</font></i>
  <i><font color=#4b5d50># Can be used to show tips on clicking, timeout, processing etc.</font></i>
  <i><font color=#4b5d50># If there is -geometry in args, shows the balloon</font></i>
  <i><font color=#4b5d50># with this geometry and a minimal pause.</font></i>

  <b><font color=#3a6797>variable</font></b> my::ttdata
  <b><font color=#3a6797>set</font></b> w .
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> isgeo [<b><font color=#3a6797>dict</font></b> exists <font color=#1b1baa>$args</font> <font color=#653760>-geometry</font>]]} {
    <b><font color=#3a6797>lappend</font></b> args <font color=#653760>-pause</font> 10
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>lassign</font></b> [<b><font color=#134070>winfo</font></b> pointerxy <font color=#1b1baa>$w</font>] x y
    <b><font color=#3a6797>lappend</font></b> args <font color=#653760>-geometry</font> \
      +[<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$x</font>-int(<font color=#1b1baa>$my::ttdata(under)</font>/2)}]+[<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$y</font>-<font color=#1b1baa>$my::ttdata(under)</font>}]
  }
  tip <font color=#1b1baa>$w</font> <font color=#1b1baa>$tip</font> <font color=#653760>-pause</font> 100 <font color=#653760>-fade</font> 100 {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$isgeo</font>} {
    <b><font color=#3a6797>after</font></b> 20
    ::update
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=baltip::showTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::showTip {w tip args} {
  <i><font color=#4b5d50># Shows a tip under the pointer, for a specific widget.</font></i>
  <i><font color=#4b5d50>#   tip - text of tip</font></i>
  <i><font color=#4b5d50>#   args - miscellaneous options of baltip</font></i>
  <i><font color=#4b5d50># Can be used to show tips on clicking the widget</font></i>
  <i><font color=#4b5d50># that has no &quot;normal&quot; tips on hovering it.</font></i>

  my::BindToEvent <font color=#1b1baa>$w</font> &lt;Leave&gt; ::baltip hide .
  showBalloon <font color=#1b1baa>$tip</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
}
<a id=Internals></a>
<i><font color=#4b5d50># _____________________ Internals ____________________ #</font></i>
<a id=my::CGet></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::CGet {args} {
  <i><font color=#4b5d50># Gets options' values, using local (args) and global (ttdata) settings.</font></i>
  <i><font color=#4b5d50>#   args - local settings (&quot;name value&quot; pairs)</font></i>
  <i><font color=#4b5d50># Returns the full list of settings (&quot;name value&quot; pairs, &quot;name&quot; without &quot;-&quot;) \</font></i>
<i><font color=#4b5d50>   in which special options go first.</font></i>
  <i><font color=#4b5d50># See also: cget, configure</font></i>

  <b><font color=#3a6797>variable</font></b> ttdata
  <b><font color=#3a6797>set</font></b> saved [<b><font color=#3a6797>array</font></b> get ttdata]
  <b><font color=#3a6797>set</font></b> res [::baltip::configure {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
  <b><font color=#3a6797>lappend</font></b> res {<b><font color=#3a6797>*</font></b>}[::baltip::cget]
  <b><font color=#3a6797>array</font></b> set ttdata <font color=#1b1baa>$saved</font>
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::WidCoord></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::WidCoord {w} {
  <i><font color=#4b5d50># Gets widget's coordinate data.</font></i>
  <i><font color=#4b5d50>#   w - path to the widget</font></i>
  <i><font color=#4b5d50># Returns a list of:</font></i>
  <i><font color=#4b5d50>#   x - X coordinate</font></i>
  <i><font color=#4b5d50>#   y - Y coordinate</font></i>
  <i><font color=#4b5d50>#   inside - flag &quot;mouse pointer is inside the widget&quot;</font></i>

  <b><font color=#3a6797>set</font></b> x [<b><font color=#3a6797>expr</font></b> {[<b><font color=#134070>winfo</font></b> pointerx <font color=#1b1baa>$w</font>]-[<b><font color=#134070>winfo</font></b> rootx <font color=#1b1baa>$w</font>]}]
  <b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> {[<b><font color=#134070>winfo</font></b> pointery <font color=#1b1baa>$w</font>]-[<b><font color=#134070>winfo</font></b> rooty <font color=#1b1baa>$w</font>]}]
  <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>split</font></b> [<b><font color=#134070>winfo</font></b> geometry <font color=#1b1baa>$w</font>] x+] width height
  <b><font color=#3a6797>set</font></b> inside [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$x</font>&gt;-1 && <font color=#1b1baa>$x</font>&lt;<font color=#1b1baa>$width</font> && <font color=#1b1baa>$y</font>&gt;-1 && <font color=#1b1baa>$y</font>&lt;<font color=#1b1baa>$height</font>}]
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$inside</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::Clonename></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::Clonename {mnu} {
  <i><font color=#4b5d50># Gets a clone name of a menu.</font></i>
  <i><font color=#4b5d50>#   mnu - the menu's path</font></i>
  <i><font color=#4b5d50># This procedure is borrowed from BWidget's utils.tcl.</font></i>

  <b><font color=#3a6797>set</font></b> path [<b><font color=#3a6797>set</font></b> menupath {}]
  <b><font color=#3a6797>set</font></b> found 0
  <b><font color=#3a6797>foreach</font></b> widget [<b><font color=#3a6797>lrange</font></b> [<b><font color=#3a6797>split</font></b> <font color=#1b1baa>$mnu</font> .] 1 end] {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$found</font> || [<b><font color=#134070>winfo</font></b> class <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>path.<font color=#1b1baa>$</font>widget&quot;</font>] eq {Menu}} {
      <b><font color=#3a6797>set</font></b> found 1
      <b><font color=#3a6797>append</font></b> menupath # <font color=#1b1baa>$widget</font>
      <b><font color=#3a6797>append</font></b> path . <font color=#1b1baa>$menupath</font>
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>append</font></b> menupath # <font color=#1b1baa>$widget</font>
      <b><font color=#3a6797>append</font></b> path . <font color=#1b1baa>$widget</font>
    }
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$path</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::OptionsFromText></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::OptionsFromText {w txt} {
  <i><font color=#4b5d50># Extracts options from &quot;text&quot; argument of baltip::tip.</font></i>
  <i><font color=#4b5d50>#   w - widget's path</font></i>
  <i><font color=#4b5d50>#   txt - &quot;-text&quot; option's value</font></i>
  <i><font color=#4b5d50># Options can be set in the &quot;text&quot; argument as uppercased-name / value pairs:</font></i>
  <i><font color=#4b5d50>#   &quot;-BALTIP {True tip's text} -MAXEXP 1 -COMMAND {::mycom %i %c}&quot;</font></i>
  <i><font color=#4b5d50># In this case, *txt* must be a correct list of name/value sequences.</font></i>
  <i><font color=#4b5d50># Returns an original *txt* or a value of -BALTIP option from *txt*.</font></i>

  <b><font color=#3a6797>variable</font></b> ttdata
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>string</font></b> first {<font color=#653760>-BALTIP</font> } <font color=#1b1baa>$txt</font>] &gt;-1 && \
  !([<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> lst [<b><font color=#3a6797>list</font></b> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$txt</font>]}] || [<b><font color=#3a6797>expr</font></b> {[<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$lst</font>] % 2 }])} {
    <b><font color=#3a6797>set</font></b> ol [::baltip::optionlist]
    <b><font color=#3a6797>lappend</font></b> ol <font color=#653760>-baltip</font>
    <b><font color=#3a6797>foreach</font></b> o <font color=#1b1baa>$ol</font> {<b><font color=#3a6797>lappend</font></b> OL [<b><font color=#3a6797>string</font></b> toupper <font color=#1b1baa>$o</font>]}
    <b><font color=#3a6797>foreach</font></b> {o v} <font color=#1b1baa>$lst</font> {
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> i [<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-exact</font> <font color=#1b1baa>$OL</font> <font color=#1b1baa>$o</font>]]&gt;-1} {
        <b><font color=#3a6797>set</font></b> n1 [<b><font color=#3a6797>string</font></b> range [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$ol</font> <font color=#1b1baa>$i</font>] 1 end]
        <b><font color=#3a6797>set</font></b> ttdata(<font color=#1b1baa>$n1</font>,<font color=#1b1baa>$w</font>) <font color=#1b1baa>$v</font>
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$o</font> eq {<font color=#653760>-BALTIP</font>}} {<b><font color=#3a6797>set</font></b> txt <font color=#1b1baa>$v</font>}
      }
    }
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>winfo</font></b> exists ttdata(optvals,<font color=#1b1baa>$w</font>)]} {
      <b><font color=#3a6797>catch</font></b> {
        <b><font color=#3a6797>set</font></b> txt [<b><font color=#3a6797>dict</font></b> get <font color=#1b1baa>$ttdata(optvals,$w)</font> <font color=#653760>-text</font>]
      }
    }
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$txt</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::Eternal></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::Eternal {w} {
  <i><font color=#4b5d50># Checks if the tip is shown till clicking.</font></i>
  <i><font color=#4b5d50>#   w - tip/widget's path</font></i>

  <b><font color=#3a6797>variable</font></b> ttdata
  <b><font color=#3a6797>set</font></b> res no
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> res <font color=#1b1baa>$ttdata(eternal,$w)</font>}]} {
    <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> res <font color=#1b1baa>$ttdata(eternal,[<b><font color=#134070>winfo</font></b> parent $w])</font>}
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}
<a id=Binds></a>
<i><font color=#4b5d50>## ________________________ Binds _________________________ ##</font></i>
<a id=my::BindToEvent></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::BindToEvent {w event args} {
  <i><font color=#4b5d50># Binds an event on a widget to a command.</font></i>
  <i><font color=#4b5d50>#   w - the widget's path</font></i>
  <i><font color=#4b5d50>#   event - the event</font></i>
  <i><font color=#4b5d50>#   args - the command</font></i>
  <i><font color=#4b5d50># The command can be ended with &quot; ; break&quot;.</font></i>

  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> bound [<b><font color=#134070>bind</font></b> <font color=#1b1baa>$w</font> <font color=#1b1baa>$event</font>]}]} {<b><font color=#3a6797>set</font></b> bound {}}
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>string</font></b> first <font color=#1b1baa>$args</font> <font color=#1b1baa>$bound</font>]&lt;0} {
    <b><font color=#3a6797>catch</font></b> {
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$args</font> end-1 end] eq <font color=#8b2a0e>&quot;<font color=#1b1baa>{</font>;<font color=#1b1baa>}</font> break&quot;</font>} {
        <b><font color=#3a6797>set</font></b> com [<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$args</font> 0 end-2]
        <b><font color=#134070>bind</font></b> <font color=#1b1baa>$w</font> <font color=#1b1baa>$event</font> <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>com ; break&quot;</font>
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#134070>bind</font></b> <font color=#1b1baa>$w</font> <font color=#1b1baa>$event</font> [<b><font color=#3a6797>list</font></b> + {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
      }
    }
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::BindTextagToEvent></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::BindTextagToEvent {w tag event args} {
  <i><font color=#4b5d50># Binds an event on a text tag to a command.</font></i>
  <i><font color=#4b5d50>#   w - the widget's path</font></i>
  <i><font color=#4b5d50>#   tag - the tag</font></i>
  <i><font color=#4b5d50>#   event - the event</font></i>
  <i><font color=#4b5d50>#   args - the command</font></i>
  <i><font color=#4b5d50># The command can be ended with &quot; ; break&quot;.</font></i>

  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> bound [<font color=#1b1baa>$w</font> tag bind <font color=#1b1baa>$tag</font>]}]} {<b><font color=#3a6797>set</font></b> bound {}}
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>string</font></b> first <font color=#1b1baa>$args</font> <font color=#1b1baa>$bound</font>]&lt;0} {
    <b><font color=#3a6797>catch</font></b> {
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$args</font> end-1 end] eq <font color=#8b2a0e>&quot;<font color=#1b1baa>{</font>;<font color=#1b1baa>}</font> break&quot;</font>} {
        <b><font color=#3a6797>set</font></b> com [<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$args</font> 0 end-2]
        <font color=#1b1baa>$w</font> tag bind <font color=#1b1baa>$tag</font> <font color=#1b1baa>$event</font> <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>com ; break&quot;</font>
      } <b><font color=#3a6797>else</font></b> {
        <font color=#1b1baa>$w</font> tag bind <font color=#1b1baa>$tag</font> <font color=#1b1baa>$event</font> [<b><font color=#3a6797>list</font></b> + {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
      }
    }
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::BindCantagToEvent></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::BindCantagToEvent {w tag event args} {
  <i><font color=#4b5d50># Binds an event on a canvas tag to a command.</font></i>
  <i><font color=#4b5d50>#   w - the widget's path</font></i>
  <i><font color=#4b5d50>#   tag - the tag</font></i>
  <i><font color=#4b5d50>#   event - the event</font></i>
  <i><font color=#4b5d50>#   args - the command</font></i>
  <i><font color=#4b5d50># The command can be ended with &quot; ; break&quot;.</font></i>

  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> bound [<font color=#1b1baa>$w</font> bind <font color=#1b1baa>$tag</font> <font color=#1b1baa>$event</font>]}]} {<b><font color=#3a6797>set</font></b> bound {}}
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>string</font></b> first <font color=#1b1baa>$args</font> <font color=#1b1baa>$bound</font>]&lt;0} {
    <b><font color=#3a6797>catch</font></b> {
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$args</font> end-1 end] eq <font color=#8b2a0e>&quot;<font color=#1b1baa>{</font>;<font color=#1b1baa>}</font> break&quot;</font>} {
        <b><font color=#3a6797>set</font></b> com [<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$args</font> 0 end-2]
        <font color=#1b1baa>$w</font> bind <font color=#1b1baa>$tag</font> <font color=#1b1baa>$event</font> <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>com ; break&quot;</font>
      } <b><font color=#3a6797>else</font></b> {
        <font color=#1b1baa>$w</font> bind <font color=#1b1baa>$tag</font> <font color=#1b1baa>$event</font> [<b><font color=#3a6797>list</font></b> + {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
      }
    }
  }
}
<a id=Shows></a>
<i><font color=#4b5d50>## ________________________ Shows _________________________ ##</font></i>
<a id=my::Command></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::Command {w text} {
  <i><font color=#4b5d50># Executes a command set for a window.</font></i>
  <i><font color=#4b5d50>#   w - the widget's path</font></i>
  <i><font color=#4b5d50>#   text - the tip text</font></i>
  <i><font color=#4b5d50># The command allows wildcards:</font></i>
  <i><font color=#4b5d50>#   %w - window's path</font></i>
  <i><font color=#4b5d50>#   %t - text of the tip</font></i>
  <i><font color=#4b5d50># Returns: list of &quot;yes/no&quot; and a result of the command.</font></i>
  <i><font color=#4b5d50># The result of the command can be a new tip if &quot;yes&quot; and the result ne {}.</font></i>

  <b><font color=#3a6797>variable</font></b> ttdata
  <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>info</font></b> exists ttdata(command,<font color=#1b1baa>$w</font>)] || <font color=#1b1baa>$ttdata(command,$w)</font> eq {}} {<b><font color=#ca14ca>return</font></b> no}
  <b><font color=#3a6797>set</font></b> com [<b><font color=#3a6797>string</font></b> map [<b><font color=#3a6797>list</font></b> %w <font color=#1b1baa>$w</font> %t <font color=#8b2a0e>&quot;<font color=#1b1baa>{$</font>text<font color=#1b1baa>}</font>&quot;</font>] <font color=#1b1baa>$ttdata(command,$w)</font>]
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>eval</font></b> <font color=#1b1baa>$com</font>]} e]} {<b><font color=#ca14ca>return</font></b> no}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$text</font> ne {}} {
    <b><font color=#3a6797>set</font></b> ttdata(text,<font color=#1b1baa>$w</font>) <font color=#1b1baa>$res</font>
  }
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> yes <font color=#1b1baa>$res</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::ShowWindow></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::ShowWindow {win} {
  <i><font color=#4b5d50># Shows a window of tip.</font></i>
  <i><font color=#4b5d50>#   win - the tip's window</font></i>

  <b><font color=#3a6797>variable</font></b> ttdata
  <b><font color=#3a6797>if</font></b> {![<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$win</font>] || ![<b><font color=#3a6797>info</font></b> exists ttdata(winGEO,<font color=#1b1baa>$win</font>)]} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>set</font></b> geo <font color=#1b1baa>$ttdata(winGEO,$win)</font>
  <b><font color=#3a6797>set</font></b> under <font color=#1b1baa>$ttdata(winUNDER,$win)</font>
  <b><font color=#3a6797>set</font></b> shiftX <font color=#1b1baa>$ttdata(winSHIFTX,$win)</font>
  <b><font color=#3a6797>set</font></b> shiftY <font color=#1b1baa>$ttdata(winSHIFTY,$win)</font>
  <b><font color=#3a6797>set</font></b> w [<b><font color=#134070>winfo</font></b> parent <font color=#1b1baa>$win</font>]
  <b><font color=#3a6797>set</font></b> px [<b><font color=#134070>winfo</font></b> pointerx .]
  <b><font color=#3a6797>set</font></b> py [<b><font color=#134070>winfo</font></b> pointery .]
  <b><font color=#3a6797>set</font></b> width [<b><font color=#134070>winfo</font></b> reqwidth <font color=#1b1baa>$win</font>.label]
  <b><font color=#3a6797>set</font></b> height [<b><font color=#134070>winfo</font></b> reqheight <font color=#1b1baa>$win</font>.label]
  <b><font color=#3a6797>set</font></b> ady 0
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> wheight [<b><font color=#134070>winfo</font></b> height <font color=#1b1baa>$w</font>]}]} {
    <b><font color=#3a6797>set</font></b> wheight 0
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 0} {<font color=#1b1baa>$i</font>&lt;<font color=#1b1baa>$wheight</font>} {<b><font color=#3a6797>incr</font></b> i} {  ;<i><font color=#4b5d50># find the widget's bottom</font></i>
      <b><font color=#3a6797>incr</font></b> py
      <b><font color=#3a6797>incr</font></b> ady
      <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>string</font></b> match <font color=#1b1baa>$w</font>* [<b><font color=#134070>winfo</font></b> containing <font color=#1b1baa>$px</font> <font color=#1b1baa>$py</font>]]} <b><font color=#ca14ca>break</font></b>
    }
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$geo</font> eq {}} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$shiftX</font> ne {}} {
      <b><font color=#3a6797>set</font></b> x [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$px</font> + <font color=#1b1baa>$shiftX</font>}]
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>set</font></b> x [<b><font color=#3a6797>expr</font></b> {max(1,<font color=#1b1baa>$px</font> - round(<font color=#1b1baa>$width</font> / 2.0))}]
    }
    <b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$under</font>&gt;=0 ? (<font color=#1b1baa>$py</font> + <font color=#1b1baa>$under</font>) : (<font color=#1b1baa>$py</font> - <font color=#1b1baa>$under</font> - <font color=#1b1baa>$ady</font>)}]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$shiftY</font> ne {}} {<b><font color=#3a6797>incr</font></b> y <font color=#1b1baa>$shiftY</font>}
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>split</font></b> <font color=#1b1baa>$geo</font> +] -&gt; x y
    <b><font color=#3a6797>set</font></b> x [<b><font color=#3a6797>expr</font></b> [<b><font color=#3a6797>string</font></b> map <font color=#8b2a0e>&quot;W <font color=#1b1baa>$</font>width&quot;</font> <font color=#1b1baa>$x</font>]]  ;<i><font color=#4b5d50># W to shift horizontally</font></i>
    <b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> [<b><font color=#3a6797>string</font></b> map <font color=#8b2a0e>&quot;H <font color=#1b1baa>$</font>height&quot;</font> <font color=#1b1baa>$y</font>]] ;<i><font color=#4b5d50># H to shift vertically</font></i>
  }
  <i><font color=#4b5d50># check for edges of screen incl. decors</font></i>
  <b><font color=#3a6797>set</font></b> scrw [<b><font color=#134070>winfo</font></b> vrootwidth .]
  <b><font color=#3a6797>set</font></b> scrh [<b><font color=#134070>winfo</font></b> vrootheight .]
  <b><font color=#3a6797>if</font></b> {(<font color=#1b1baa>$x</font> + <font color=#1b1baa>$width</font>) &gt; <font color=#1b1baa>$scrw</font>}  {<b><font color=#3a6797>set</font></b> x [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$scrw</font> - <font color=#1b1baa>$width</font> - 1}]}
  <b><font color=#3a6797>if</font></b> {(<font color=#1b1baa>$y</font> + <font color=#1b1baa>$height</font>) &gt; <font color=#1b1baa>$scrh</font>} {<b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$py</font> - <font color=#1b1baa>$height</font> - 16}]}
  <b><font color=#3a6797>set</font></b> x [<b><font color=#3a6797>expr</font></b> {max(0,<font color=#1b1baa>$x</font>)}]
  <b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> {max(0,<font color=#1b1baa>$y</font>)}]
  <b><font color=#134070>wm</font></b> geometry <font color=#1b1baa>$win</font> [<b><font color=#3a6797>join</font></b>  <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>width x <font color=#1b1baa>$</font>height + <font color=#1b1baa>$</font>x + <font color=#1b1baa>$</font>y&quot;</font> {}]
  <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>wm</font></b> deiconify <font color=#1b1baa>$win</font> ; <b><font color=#134070>raise</font></b> <font color=#1b1baa>$win</font>}
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::Show></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::Show {w text force geo optvals} {
  <i><font color=#4b5d50># Creates and shows the tip's window.</font></i>
  <i><font color=#4b5d50>#   w - the widget's path</font></i>
  <i><font color=#4b5d50>#   text - the tip text</font></i>
  <i><font color=#4b5d50>#   force - if true, re-displays the existing tip</font></i>
  <i><font color=#4b5d50>#   geo - being +X+Y, sets the tip coordinates</font></i>
  <i><font color=#4b5d50>#   optvals - settings (&quot;option value&quot; pairs)</font></i>
  <i><font color=#4b5d50># See also: Fade, ShowWindow, ::baltip::update</font></i>

  <b><font color=#3a6797>variable</font></b> ttdata
  <b><font color=#3a6797>if</font></b> {![<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$w</font>]} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>set</font></b> win [::baltip::tippath <font color=#1b1baa>$w</font>]
  <i><font color=#4b5d50># keep the label's colors untouched (for apave package)</font></i>
  <b><font color=#3a6797>catch</font></b> {::apave::obj untouchWidgets <font color=#1b1baa>$win</font>.label}
  <b><font color=#3a6797>set</font></b> px [<b><font color=#134070>winfo</font></b> pointerx .]
  <b><font color=#3a6797>set</font></b> py [<b><font color=#134070>winfo</font></b> pointery .]
  <b><font color=#3a6797>array</font></b> set data <font color=#1b1baa>$optvals</font>
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists ttdata(optvals,<font color=#1b1baa>$w</font>)]} {
    <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>array</font></b> set data [<b><font color=#3a6797>list</font></b> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$ttdata(optvals,$w)</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$optvals</font>]}
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$geo</font> ne {}} {
    <i><font color=#4b5d50># balloons not related to widgets</font></i>
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$ttdata(global,$w)</font>} {      ;<i><font color=#4b5d50># flag 'use global settings'</font></i>
    <b><font color=#3a6797>array</font></b> set data [::baltip::cget]
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>foreach</font></b> k [<b><font color=#3a6797>array</font></b> names ttdata <font color=#653760>-glob</font> *,<font color=#1b1baa>$w</font>] {
      <b><font color=#3a6797>set</font></b> n1 [<b><font color=#3a6797>lindex</font></b> [<b><font color=#3a6797>split</font></b> <font color=#1b1baa>$k</font> ,] 0]   ;<i><font color=#4b5d50># settings set by 'update'</font></i>
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$n1</font> eq {<b><font color=#134070>text</font></b>}} {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ttdata($k)</font> ne {}} {
          <b><font color=#3a6797>set</font></b> text <font color=#1b1baa>$ttdata($k)</font>         ;<i><font color=#4b5d50># tip's text</font></i>
        }
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#3a6797>set</font></b> data(-<font color=#1b1baa>$n1</font>) <font color=#1b1baa>$ttdata($k)</font>     ;<i><font color=#4b5d50># tip's options</font></i>
      }
    }
  }
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> widgetclass [<b><font color=#134070>winfo</font></b> class <font color=#1b1baa>$w</font>]}]} {
    <b><font color=#3a6797>set</font></b> widgetclass {}
  }
  <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$force</font> && <font color=#1b1baa>$geo</font> eq {}} {
    <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>info</font></b> exists ttdata(on,<font color=#1b1baa>$w</font>)] || !<font color=#1b1baa>$ttdata(on,$w)</font>} <b><font color=#ca14ca>return</font></b>
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$widgetclass</font> ne {Menu} && \
    ([<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$win</font>] || ![<b><font color=#3a6797>string</font></b> match <font color=#1b1baa>$w</font>* [<b><font color=#134070>winfo</font></b> containing <font color=#1b1baa>$px</font> <font color=#1b1baa>$py</font>]])} {
      <b><font color=#ca14ca>return</font></b>
    }
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$geo</font> eq {}} {::baltip::hide <font color=#1b1baa>$w</font>}
  <b><font color=#3a6797>set</font></b> icount [<b><font color=#3a6797>string</font></b> length [<b><font color=#3a6797>string</font></b> trim <font color=#1b1baa>$text</font>]]
  <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$icount</font> || (!<font color=#1b1baa>$ttdata(on)</font> && !<font color=#1b1baa>$data(-on)</font>)} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>lassign</font></b> [Command <font color=#1b1baa>$w</font> <font color=#1b1baa>$text</font>] ans res
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ans</font>} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$res</font> eq {}} {
      <i><font color=#4b5d50># the command displayed the tip somewhere</font></i>
      <b><font color=#ca14ca>return</font></b>
    }
    <i><font color=#4b5d50># the command redefined the tip's text</font></i>
    <b><font color=#3a6797>set</font></b> text <font color=#1b1baa>$res</font>
  }
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists ttdata(maxexp,<font color=#1b1baa>$w</font>)] && \
  [<b><font color=#3a6797>string</font></b> is integer <font color=#653760>-strict</font> <font color=#1b1baa>$ttdata(maxexp,$w)</font>]} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ttdata(maxexp,$w)</font>&lt;=0} <b><font color=#ca14ca>return</font></b>
  }
  <b><font color=#3a6797>lappend</font></b> ttdata(REGISTERED) <font color=#1b1baa>$w</font>
  <b><font color=#3a6797>foreach</font></b> wold [<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$ttdata(REGISTERED)</font> 0 end-1] {::baltip::hide <font color=#1b1baa>$wold</font>}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$data(-fg)</font> eq {}} {<b><font color=#3a6797>set</font></b> data(-fg) black}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$data(-bg)</font> eq {}} {<b><font color=#3a6797>set</font></b> data(-bg) #FBFB95}
  <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>destroy</font></b> <font color=#1b1baa>$win</font>}
  <b><font color=#134070>toplevel</font></b> <font color=#1b1baa>$win</font> <font color=#653760>-bg</font> <font color=#1b1baa>$data(-bg)</font> <font color=#653760>-class</font> Tooltip<font color=#1b1baa>$w</font>
  <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>wm</font></b> withdraw <font color=#1b1baa>$win</font>}
  <b><font color=#134070>wm</font></b> overrideredirect <font color=#1b1baa>$win</font> 1
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists data(-ontop)] && <font color=#1b1baa>$data(-ontop)</font>} {
    <b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$win</font> <font color=#653760>-topmost</font> 1
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$data(-relief)</font> eq {}} {<b><font color=#3a6797>set</font></b> data(-relief) solid}
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> imgoptions <font color=#1b1baa>$data(-image)</font>] ne {}} {
    <b><font color=#3a6797>set</font></b> imgoptions <font color=#8b2a0e>&quot;-image <font color=#1b1baa>$</font>imgoptions&quot;</font>
  }
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> cmpdoptions <font color=#1b1baa>$data(-compound)</font>] ne {}} {
    <b><font color=#3a6797>set</font></b> cmpdoptions <font color=#8b2a0e>&quot;-compound <font color=#1b1baa>$</font>cmpdoptions&quot;</font>
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$imgoptions</font> ne {} && <font color=#1b1baa>$cmpdoptions</font> eq {}} {
    <b><font color=#3a6797>set</font></b> cmpdoptions {<font color=#653760>-compound</font> left}
  }
  <b><font color=#134070>pack</font></b> [<b><font color=#134070>label</font></b> <font color=#1b1baa>$win</font>.label <font color=#653760>-text</font> <font color=#1b1baa>$text</font> <font color=#653760>-justify</font> left <font color=#653760>-relief</font> <font color=#1b1baa>$data(-relief)</font> \
    <font color=#653760>-bd</font> <font color=#1b1baa>$data(-bd)</font> <font color=#653760>-bg</font> <font color=#1b1baa>$data(-bg)</font> <font color=#653760>-fg</font> <font color=#1b1baa>$data(-fg)</font> <font color=#653760>-font</font> <font color=#1b1baa>$data(-font)</font> \
    {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$imgoptions</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$cmpdoptions</font> <font color=#653760>-padx</font> <font color=#1b1baa>$data(-padx)</font> <font color=#653760>-pady</font> <font color=#1b1baa>$data(-pady)</font>] \
    <font color=#653760>-padx</font> <font color=#1b1baa>$data(-padding)</font> <font color=#653760>-pady</font> <font color=#1b1baa>$data(-padding)</font>
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists ttdata(focus,<font color=#1b1baa>$w</font>)]} {
    <b><font color=#3a6797>set</font></b> foc <font color=#1b1baa>$ttdata(focus,$w)</font>
    <b><font color=#3a6797>after</font></b> idle <font color=#8b2a0e>&quot;catch <font color=#1b1baa>{</font>focus -force \[winfo toplevel <font color=#1b1baa>$</font>foc\]<font color=#1b1baa>}</font>; catch <font color=#1b1baa>{</font>focus <font color=#1b1baa>$</font>foc<font color=#1b1baa>}</font>&quot;</font>
  }
  <i><font color=#4b5d50># defeat rare artifact by passing mouse over a tip to destroy it</font></i>
  <b><font color=#134070>bindtags</font></b> <font color=#1b1baa>$win</font> <font color=#8b2a0e>&quot;Tooltip<font color=#1b1baa>$</font>win&quot;</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$geo</font> eq {}} {
    <i><font color=#4b5d50># balloons are hidden on click or time-out</font></i>
    <b><font color=#134070>bind</font></b> <font color=#1b1baa>$win</font> &lt;Any-Enter&gt; <font color=#8b2a0e>&quot;::baltip::hide <font color=#1b1baa>$</font>w&quot;</font>
    <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$win</font> &lt;Any-Enter&gt;  <font color=#8b2a0e>&quot;::baltip::hide <font color=#1b1baa>$</font>w&quot;</font>
  }
  <b><font color=#134070>bind</font></b> <font color=#1b1baa>$win</font> &lt;Any-Button&gt; <font color=#8b2a0e>&quot;::baltip::hide <font color=#1b1baa>$</font>w 1&quot;</font>
  <b><font color=#134070>bind</font></b> Tooltip<font color=#1b1baa>$win</font> &lt;Any-Button&gt; <font color=#8b2a0e>&quot;::baltip::hide <font color=#1b1baa>$</font>w 1&quot;</font>
  <b><font color=#3a6797>set</font></b> aint 20
  <b><font color=#3a6797>set</font></b> fint [<b><font color=#3a6797>expr</font></b> {int(<font color=#1b1baa>$data(-fade)</font>/<font color=#1b1baa>$aint</font>)}]
  <b><font color=#3a6797>set</font></b> icount [<b><font color=#3a6797>expr</font></b> {int(<font color=#1b1baa>$data(-per10)</font>/<font color=#1b1baa>$aint</font>*<font color=#1b1baa>$icount</font>/10.0)}]
  <b><font color=#3a6797>set</font></b> icount [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$data(-per10)</font> ? max(1000/<font color=#1b1baa>$aint</font>+1,<font color=#1b1baa>$icount</font>) : 0}] ;<i><font color=#4b5d50># 1 sec. minimum</font></i>
  <b><font color=#3a6797>set</font></b> ttdata(winGEO,<font color=#1b1baa>$win</font>) <font color=#1b1baa>$geo</font>
  <b><font color=#3a6797>set</font></b> ttdata(winUNDER,<font color=#1b1baa>$win</font>) <font color=#1b1baa>$data(-under)</font>
  <b><font color=#3a6797>set</font></b> ttdata(winSHIFTX,<font color=#1b1baa>$win</font>) <font color=#1b1baa>$data(-shiftX)</font>
  <b><font color=#3a6797>set</font></b> ttdata(winSHIFTY,<font color=#1b1baa>$win</font>) <font color=#1b1baa>$data(-shiftY)</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$icount</font>} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$geo</font> eq {}} {
      <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$win</font> <font color=#653760>-alpha</font> <font color=#1b1baa>$data(-alpha)</font>}
    } <b><font color=#3a6797>else</font></b> {
      Fade <font color=#1b1baa>$win</font> <font color=#1b1baa>$aint</font> [<b><font color=#3a6797>expr</font></b> {round(1.0*<font color=#1b1baa>$data(-pause)</font>/<font color=#1b1baa>$aint</font>)}] \
        0 Un <font color=#1b1baa>$data(-alpha)</font> 1 <font color=#1b1baa>$geo</font> {} <font color=#1b1baa>$w</font>
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$force</font>} {
      Fade <font color=#1b1baa>$win</font> <font color=#1b1baa>$aint</font> <font color=#1b1baa>$fint</font> <font color=#1b1baa>$icount</font> {} <font color=#1b1baa>$data(-alpha)</font> 1 <font color=#1b1baa>$geo</font> {} <font color=#1b1baa>$w</font>
    } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$widgetclass</font> ne {TNotebook}} {
      <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel <font color=#1b1baa>$ttdata(after)</font>}
      <b><font color=#3a6797>set</font></b> ttdata(after) [<b><font color=#3a6797>after</font></b> <font color=#1b1baa>$data(-pause)</font> [<b><font color=#3a6797>list</font></b> \
        ::baltip::my::Fade <font color=#1b1baa>$win</font> <font color=#1b1baa>$aint</font> <font color=#1b1baa>$fint</font> <font color=#1b1baa>$icount</font> {} <font color=#1b1baa>$data(-alpha)</font> 1 <font color=#1b1baa>$geo</font> {} <font color=#1b1baa>$w</font>]]
    }
  } <b><font color=#3a6797>else</font></b> {
    <i><font color=#4b5d50># just showing, no fading</font></i>
    <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel <font color=#1b1baa>$ttdata(after)</font>}
    <b><font color=#3a6797>set</font></b> ttdata(after) [<b><font color=#3a6797>after</font></b> <font color=#1b1baa>$data(-pause)</font> \
      <font color=#8b2a0e>&quot;::baltip::my::ShowWindow <font color=#1b1baa>$</font>win; catch <font color=#1b1baa>{</font>wm attributes <font color=#1b1baa>$</font>win -alpha <font color=#1b1baa>$</font>data(-alpha)<font color=#1b1baa>}</font>&quot;</font>]
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$data(-bell)</font>} [<b><font color=#3a6797>list</font></b> after [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$data(-pause)</font>/4}] bell]
  <b><font color=#3a6797>array</font></b> unset data
}
<a id=Fade></a>
<i><font color=#4b5d50>## ________________________ Fade _________________________ ##</font></i>
<a id=my::Fade></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::Fade {win aint fint icount Un alpha show geo {geos <font color=#8b2a0e>&quot;&quot;</font>} {w {}}} {
  <i><font color=#4b5d50># Fades/unfades the tip's window.</font></i>
  <i><font color=#4b5d50>#   win - the tip's window</font></i>
  <i><font color=#4b5d50>#   aint - interval for 'after'</font></i>
  <i><font color=#4b5d50>#   fint - interval for fading</font></i>
  <i><font color=#4b5d50>#   icount - counter of intervals</font></i>
  <i><font color=#4b5d50>#   Un - if equal to &quot;Un&quot;, unfades the tip</font></i>
  <i><font color=#4b5d50>#   alpha - value of -alpha option</font></i>
  <i><font color=#4b5d50>#   show - flag &quot;show the window&quot;</font></i>
  <i><font color=#4b5d50>#   geo - coordinates (+X+Y) of balloon</font></i>
  <i><font color=#4b5d50>#   geos - saved coordinates (+X+Y) of shown tip</font></i>
  <i><font color=#4b5d50>#   w - a host window</font></i>
  <i><font color=#4b5d50># See also: FadeNext, UnFadeNext</font></i>

  <b><font color=#3a6797>variable</font></b> ttdata
  <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$win</font>]} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$show</font> && [<b><font color=#3a6797>info</font></b> exists ttdata(maxexp,<font color=#1b1baa>$w</font>)] && \
    [<b><font color=#3a6797>string</font></b> is integer <font color=#653760>-strict</font> <font color=#1b1baa>$ttdata(maxexp,$w)</font>]} {
      <b><font color=#3a6797>incr</font></b> ttdata(maxexp,<font color=#1b1baa>$w</font>) -1
    }
    <b><font color=#3a6797>update</font></b>
    <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel <font color=#1b1baa>$ttdata(after)</font>}
    <b><font color=#3a6797>set</font></b> ttdata(after) [<b><font color=#3a6797>after</font></b> idle [<b><font color=#3a6797>list</font></b> after <font color=#1b1baa>$aint</font> \
      [<b><font color=#3a6797>list</font></b> ::baltip::my::<font color=#1b1baa>${Un}</font>FadeNext <font color=#1b1baa>$win</font> <font color=#1b1baa>$aint</font> <font color=#1b1baa>$fint</font> <font color=#1b1baa>$icount</font> <font color=#1b1baa>$alpha</font> <font color=#1b1baa>$show</font> <font color=#1b1baa>$geo</font> <font color=#1b1baa>$geos</font>]]]
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::FadeNext></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::FadeNext {w aint fint icount alpha show geo {geos <font color=#8b2a0e>&quot;&quot;</font>}} {
  <i><font color=#4b5d50># A step to fade the tip's window.</font></i>
  <i><font color=#4b5d50>#   w - the tip's window</font></i>
  <i><font color=#4b5d50>#   aint - interval for 'after'</font></i>
  <i><font color=#4b5d50>#   fint - interval for fading</font></i>
  <i><font color=#4b5d50>#   icount - counter of intervals</font></i>
  <i><font color=#4b5d50>#   alpha - value of -alpha option</font></i>
  <i><font color=#4b5d50>#   show - flag &quot;show the window&quot;</font></i>
  <i><font color=#4b5d50>#   geo - coordinates (+X+Y) of balloon</font></i>
  <i><font color=#4b5d50>#   geos - saved coordinates (+X+Y) of shown tip</font></i>
  <i><font color=#4b5d50># See also: Fade</font></i>

  <b><font color=#3a6797>variable</font></b> ttdata
  <b><font color=#3a6797>incr</font></b> icount -1
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$show</font>} {ShowWindow <font color=#1b1baa>$w</font>}
  <b><font color=#3a6797>set</font></b> show 0
  <b><font color=#3a6797>if</font></b> {![<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$w</font>]} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>split</font></b> [<b><font color=#134070>wm</font></b> geometry <font color=#1b1baa>$w</font>] +] -&gt; X Y
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$geos</font> ne {} && <font color=#1b1baa>$geos</font> ne <font color=#8b2a0e>&quot;+<font color=#1b1baa>$</font>X+<font color=#1b1baa>$</font>Y&quot;</font>} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$fint</font>&lt;=0} {<b><font color=#3a6797>set</font></b> fint 10}
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> al [<b><font color=#3a6797>expr</font></b> {min(<font color=#1b1baa>$alpha</font>,(<font color=#1b1baa>$fint</font>+<font color=#1b1baa>$icount</font>*1.5)/<font color=#1b1baa>$fint</font>)}]}]} {
    <b><font color=#3a6797>set</font></b> al 0
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$icount</font>&lt;0} {
    <b><font color=#3a6797>if</font></b> {[Eternal <font color=#1b1baa>$w</font>]} <b><font color=#ca14ca>return</font></b>
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$al</font>&gt;0} {
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$w</font> <font color=#653760>-alpha</font> <font color=#1b1baa>$al</font>}]} {<b><font color=#3a6797>set</font></b> al 0}
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$al</font>&lt;=0.001 || ![<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$w</font>]} {
      ::baltip::hide
      <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>destroy</font></b> <font color=#1b1baa>$w</font>}
      <b><font color=#ca14ca>return</font></b>
    }
  } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$al</font>&gt;0 && <font color=#1b1baa>$geo</font> eq {}} {
    <b><font color=#3a6797>if</font></b> {![Eternal <font color=#1b1baa>$ttdata(balloon)</font>] && <font color=#1b1baa>$ttdata(balloon)</font> ne {-}} {
      ::baltip::hide <font color=#1b1baa>$ttdata(balloon)</font> yes  ;<i><font color=#4b5d50># non-eternal balloon be destroyed</font></i>
    }
    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$w</font> <font color=#653760>-alpha</font> <font color=#1b1baa>$al</font>}
  }
  Fade <font color=#1b1baa>$w</font> <font color=#1b1baa>$aint</font> <font color=#1b1baa>$fint</font> <font color=#1b1baa>$icount</font> {} <font color=#1b1baa>$alpha</font> <font color=#1b1baa>$show</font> <font color=#1b1baa>$geo</font> +<font color=#1b1baa>$X</font>+<font color=#1b1baa>$Y</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::UnFadeNext></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::UnFadeNext {w aint fint icount alpha show geo {geos <font color=#8b2a0e>&quot;&quot;</font>}} {
  <i><font color=#4b5d50># A step to unfade the balloon's window.</font></i>
  <i><font color=#4b5d50>#   w - the tip's window</font></i>
  <i><font color=#4b5d50>#   aint - interval for 'after'</font></i>
  <i><font color=#4b5d50>#   fint - interval for fading</font></i>
  <i><font color=#4b5d50>#   icount - counter of intervals</font></i>
  <i><font color=#4b5d50>#   alpha - value of -alpha option</font></i>
  <i><font color=#4b5d50>#   show - not used (here just for compliance with Fade)</font></i>
  <i><font color=#4b5d50>#   geo - not used (here just for compliance with Fade)</font></i>
  <i><font color=#4b5d50>#   geos - not used (here just for compliance with Fade)</font></i>
  <i><font color=#4b5d50># See also: Fade</font></i>

  <b><font color=#3a6797>incr</font></b> icount
  <b><font color=#3a6797>set</font></b> al [<b><font color=#3a6797>expr</font></b> {min(<font color=#1b1baa>$alpha</font>,<font color=#1b1baa>$icount</font>*1.5/<font color=#1b1baa>$fint</font>)}]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$al</font>&lt;<font color=#1b1baa>$alpha</font> && [<b><font color=#3a6797>catch</font></b> {<b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$w</font> <font color=#653760>-alpha</font> <font color=#1b1baa>$al</font>}]} {<b><font color=#3a6797>set</font></b> al 1}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$show</font>} {
    ShowWindow <font color=#1b1baa>$w</font>
    <b><font color=#3a6797>set</font></b> show 0
  }
  <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$w</font>] && <font color=#1b1baa>$al</font>&lt;<font color=#1b1baa>$alpha</font>} {
    Fade <font color=#1b1baa>$w</font> <font color=#1b1baa>$aint</font> <font color=#1b1baa>$fint</font> <font color=#1b1baa>$icount</font> Un <font color=#1b1baa>$alpha</font> 0 <font color=#1b1baa>$geo</font>
  }
}
<a id=Specific_widgets></a>
<i><font color=#4b5d50>## ________________________ Specific widgets _________________________ ##</font></i>
<a id=Tags></a>
<i><font color=#4b5d50>### ________________________ Tags _________________________ ###</font></i>
<a id=my::TagTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::TagTip {w {tag <font color=#8b2a0e>&quot;&quot;</font>} {optvals <font color=#8b2a0e>&quot;&quot;</font>}} {
  <i><font color=#4b5d50># Shows a text tag's tip.</font></i>
  <i><font color=#4b5d50>#   w - the text's path</font></i>
  <i><font color=#4b5d50>#   tag - the tag's name</font></i>
  <i><font color=#4b5d50>#   optvals - settings of tip</font></i>

  <b><font color=#3a6797>variable</font></b> ttdata
  ::baltip::hide <font color=#1b1baa>$w</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tag</font> eq {}} <b><font color=#ca14ca>return</font></b>
  ::baltip::my::Show <font color=#1b1baa>$w</font> <font color=#1b1baa>$ttdata($w,$tag)</font> no {} <font color=#1b1baa>$optvals</font>
}
<a id=Menu></a>
<i><font color=#4b5d50>### ________________________ Menu _________________________ ###</font></i>
<a id=my::MenuTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::MenuTip {wt} {
  <i><font color=#4b5d50># Shows a menu's tip.</font></i>
  <i><font color=#4b5d50>#   wt - the menu's path (incl. cloned menu)</font></i>

  <b><font color=#3a6797>variable</font></b> ttdata
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>string</font></b> match .tearoff* <font color=#1b1baa>$wt</font>]} {
    <i><font color=#4b5d50># not implemented for tear-offed menus</font></i>
    <b><font color=#ca14ca>return</font></b>
  }
  ::baltip::hide <font color=#1b1baa>$wt</font>
  <b><font color=#3a6797>set</font></b> index [<font color=#1b1baa>$wt</font> index active]
  <b><font color=#3a6797>set</font></b> mit <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>wt/<font color=#1b1baa>$</font>index&quot;</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$index</font> eq {none}} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists ttdata(<font color=#1b1baa>$wt</font>,<font color=#1b1baa>$index</font>)] && ([::baltip::hide <font color=#1b1baa>$wt</font>] || \
  ![<b><font color=#3a6797>info</font></b> exists ttdata(LASTMITEM)] || <font color=#1b1baa>$ttdata(LASTMITEM)</font> ne <font color=#1b1baa>$mit</font>)} {
    <b><font color=#3a6797>set</font></b> optvals <font color=#1b1baa>$ttdata($wt,$index)</font>
    <b><font color=#3a6797>set</font></b> text [<b><font color=#3a6797>dict</font></b> get <font color=#1b1baa>$optvals</font> <font color=#653760>-text</font>]
    ::baltip::my::Show <font color=#1b1baa>$wt</font> <font color=#1b1baa>$text</font> no {} <font color=#1b1baa>$optvals</font>
  }
  <b><font color=#3a6797>set</font></b> ttdata(LASTMITEM) <font color=#1b1baa>$mit</font>
}
<a id=Notebook></a>
<i><font color=#4b5d50>### ________________________ Notebook _________________________ ###</font></i>
<a id=my::NbkInfo></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::NbkInfo {w x y {tab {}}} {
  <i><font color=#4b5d50># Gets/sets a notebook tab's data.</font></i>
  <i><font color=#4b5d50>#   w - the notebook's path</font></i>
  <i><font color=#4b5d50>#   x - X coordinate of pointer</font></i>
  <i><font color=#4b5d50>#   y - Y coordinate of pointer</font></i>
  <i><font color=#4b5d50>#   tab - a current tab</font></i>
  <i><font color=#4b5d50># When getting, returns a list of a current tab and a saved tab.</font></i>

  <b><font color=#3a6797>set</font></b> optid <font color=#653760>-SPECTIP</font><font color=#1b1baa>$w</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tab</font> eq {}} {
    <b><font color=#3a6797>set</font></b> tab [<font color=#1b1baa>$w</font> identify tab <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font>]
    <b><font color=#3a6797>set</font></b> tab2 [<b><font color=#3a6797>lindex</font></b> [::baltip cget <font color=#1b1baa>$optid</font>] 1]
    <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$tab</font> <font color=#1b1baa>$tab2</font>]
  }
  ::baltip configure <font color=#1b1baa>$optid</font> <font color=#1b1baa>$tab</font>
}

<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::ShowNbkTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::ShowNbkTip {w tip} {
  <i><font color=#4b5d50># Shows a tip for a notebook tab.</font></i>
  <i><font color=#4b5d50>#   w - the notebook's path</font></i>
  <i><font color=#4b5d50>#   tip - text of tip</font></i>

  <b><font color=#3a6797>catch</font></b> {
    <b><font color=#3a6797>set</font></b> x [<b><font color=#3a6797>expr</font></b> {[<b><font color=#134070>winfo</font></b> pointerx <font color=#1b1baa>$w</font>]-[<b><font color=#134070>winfo</font></b> rootx <font color=#1b1baa>$w</font>]}]
    <b><font color=#3a6797>set</font></b> y [<b><font color=#3a6797>expr</font></b> {[<b><font color=#134070>winfo</font></b> pointery <font color=#1b1baa>$w</font>]-[<b><font color=#134070>winfo</font></b> rooty <font color=#1b1baa>$w</font>]}]
    <b><font color=#3a6797>lassign</font></b> [NbkInfo <font color=#1b1baa>$w</font> <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font>] tab tab2
    <b><font color=#3a6797>set</font></b> wt [<b><font color=#3a6797>lindex</font></b> [<font color=#1b1baa>$w</font> tabs] <font color=#1b1baa>$tab</font>]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tab2</font> ne {-} && [<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-exact</font> [<font color=#1b1baa>$w</font> tabs] <font color=#1b1baa>$wt</font>]&gt;-1} {
      ::baltip tip <font color=#1b1baa>$w</font> <font color=#1b1baa>$tip</font> <font color=#653760>-force</font> yes
    } <b><font color=#3a6797>else</font></b> {
      ::baltip hide <font color=#1b1baa>$w</font>
    }
  }
}

<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::PrepareNbkTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::PrepareNbkTip {w x y} {
  <i><font color=#4b5d50># Prepares a tip for a notebook tab.</font></i>
  <i><font color=#4b5d50>#   w - the notebook's path</font></i>
  <i><font color=#4b5d50>#   x - X coordinate of pointer</font></i>
  <i><font color=#4b5d50>#   y - Y coordinate of pointer</font></i>
  <i><font color=#4b5d50># The baltip isn't directly usable with notebook tabs</font></i>
  <i><font color=#4b5d50># because they have not Enter/Leave event bindings.</font></i>
  <i><font color=#4b5d50># This proc tries to imitate those events, with binding to &lt;Motion&gt; event.</font></i>

  <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>string</font></b> is integer <font color=#653760>-strict</font> <font color=#1b1baa>$x</font>]} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>catch</font></b> {
    <b><font color=#3a6797>lassign</font></b> [::baltip cget <font color=#653760>-pause</font>] -&gt; pause
    <b><font color=#3a6797>lassign</font></b> [NbkInfo <font color=#1b1baa>$w</font> <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font>] tab tab2
    <b><font color=#3a6797>set</font></b> nbktab [<b><font color=#3a6797>lindex</font></b> [<font color=#1b1baa>$w</font> tabs] <font color=#1b1baa>$tab</font>]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tab</font> ne {} && <font color=#1b1baa>$tab2</font> ni <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>tab -&quot;</font>} {
      ::baltip hide <font color=#1b1baa>$w</font>
      <b><font color=#3a6797>lassign</font></b> [::baltip cget <font color=#653760>-SPECTIP</font><font color=#1b1baa>$nbktab</font>] -&gt; tip
      <b><font color=#3a6797>lassign</font></b> [Command <font color=#1b1baa>$w</font> <font color=#1b1baa>$tip</font>] ans res
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ans</font>} {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$res</font> ne {}} {
          <i><font color=#4b5d50># the command should be displayed here (not somewhere else)</font></i>
          <b><font color=#3a6797>set</font></b> <font color=#1b1baa>$ans</font> no
        }
        <i><font color=#4b5d50># the command redefined the tip's text</font></i>
        <b><font color=#3a6797>set</font></b> tip <font color=#1b1baa>$res</font>
      }
      <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$ans</font>} {
        <b><font color=#3a6797>set</font></b> optafter <font color=#653760>-SPECTIPafter</font><font color=#1b1baa>$w</font>
        <b><font color=#3a6797>catch</font></b> {
          <b><font color=#3a6797>after</font></b> cancel [<b><font color=#3a6797>lindex</font></b> [::baltip cget <font color=#1b1baa>$optafter</font>] 1]
        }
        <b><font color=#3a6797>set</font></b> aftid [<b><font color=#3a6797>after</font></b> <font color=#1b1baa>$pause</font> <font color=#8b2a0e>&quot;::baltip::my::ShowNbkTip <font color=#1b1baa>$</font>w <font color=#1b1baa>{$</font>tip<font color=#1b1baa>}</font>&quot;</font>]
        ::baltip configure <font color=#1b1baa>$optafter</font> <font color=#1b1baa>$aftid</font>
      }
    } <b><font color=#3a6797>else</font></b> {
      NbkInfo <font color=#1b1baa>$w</font> <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font> -1
    }
    NbkInfo <font color=#1b1baa>$w</font> <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$tab</font>
  }
}
<a id=Listbox></a>
<i><font color=#4b5d50>### ________________________ Listbox _________________________ ###</font></i>
<a id=my::LbxCoord></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::LbxCoord {w} {

  <i><font color=#4b5d50># Gets listbox's coordinate data.</font></i>
  <i><font color=#4b5d50>#   w - path to the listbox</font></i>
  <i><font color=#4b5d50># Returns a list of:</font></i>
  <i><font color=#4b5d50>#   x - X coordinate</font></i>
  <i><font color=#4b5d50>#   y - Y coordinate</font></i>
  <i><font color=#4b5d50>#   idx - index of listbox's item</font></i>
  <i><font color=#4b5d50>#   inside - flag &quot;mouse pointer is inside the listbox&quot;</font></i>

  <b><font color=#3a6797>lassign</font></b> [WidCoord <font color=#1b1baa>$w</font>] x y inside
  <b><font color=#3a6797>set</font></b> idx [<font color=#1b1baa>$w</font> index @<font color=#1b1baa>$x</font>,<font color=#1b1baa>$y</font>]
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$idx</font> <font color=#1b1baa>$inside</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::LbxTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::LbxTip {w idx whole} {
  <i><font color=#4b5d50># Gets a text of a listbox' tip.</font></i>
  <i><font color=#4b5d50>#   w - the listbox's path</font></i>
  <i><font color=#4b5d50>#   idx - index of listbox's item</font></i>
  <i><font color=#4b5d50>#   whole - flag &quot;tip for a whole listbox, not per item&quot;</font></i>

  <b><font color=#3a6797>lassign</font></b> [::baltip cget <font color=#653760>-SPECTIP</font><font color=#1b1baa>$w</font>] - com
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$whole</font>} {
    <b><font color=#3a6797>set</font></b> tip [<b><font color=#3a6797>string</font></b> map <font color=#8b2a0e>&quot;%%i %i&quot;</font> <font color=#1b1baa>$com</font>]
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> com [<b><font color=#3a6797>string</font></b> map [<b><font color=#3a6797>list</font></b> %i <font color=#1b1baa>$idx</font>] <font color=#1b1baa>$com</font>]
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> tip [<b><font color=#3a6797>eval</font></b> <font color=#1b1baa>$com</font>]}]} {<b><font color=#3a6797>set</font></b> tip <font color=#1b1baa>$com</font>}
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$tip</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::ShowLbxTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::ShowLbxTip {w optid idx whole} {
  <i><font color=#4b5d50># Shows a tip for a listbox.</font></i>
  <i><font color=#4b5d50>#   w - the listbox's path</font></i>
  <i><font color=#4b5d50>#   optid - option name for saving *idx*</font></i>
  <i><font color=#4b5d50>#   idx - index of listbox's item</font></i>
  <i><font color=#4b5d50>#   whole - flag &quot;tip for a whole listbox, not per item&quot;</font></i>

  <b><font color=#3a6797>catch</font></b> {
    <b><font color=#3a6797>lassign</font></b> [LbxCoord <font color=#1b1baa>$w</font>] x y idx inside
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$inside</font>} {
      <b><font color=#3a6797>set</font></b> tip [LbxTip <font color=#1b1baa>$w</font> <font color=#1b1baa>$idx</font> <font color=#1b1baa>$whole</font>]
      ::baltip configure <font color=#1b1baa>$optid</font> <font color=#1b1baa>$idx</font>
      ::baltip tip <font color=#1b1baa>$w</font> <font color=#1b1baa>$tip</font> <font color=#653760>-force</font> yes
    } <b><font color=#3a6797>else</font></b> {
      ::baltip hide <font color=#1b1baa>$w</font>
      ::baltip configure <font color=#1b1baa>$optid</font> {}
    }
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::PrepareLbxTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::PrepareLbxTip {w x y} {
  <i><font color=#4b5d50># Prepares a tip for a listbox.</font></i>
  <i><font color=#4b5d50>#   w - the listbox's path</font></i>
  <i><font color=#4b5d50>#   x - X coordinate of pointer</font></i>
  <i><font color=#4b5d50>#   y - Y coordinate of pointer</font></i>
  <i><font color=#4b5d50># Imitates Enter/Leave events per items, with binding to &lt;Motion&gt; event.</font></i>
  <i><font color=#4b5d50># If &quot;-text&quot; of tip doesn't contain %i, the tip is for a whole listbox.</font></i>
  <i><font color=#4b5d50># If &quot;-text&quot; of tip contains %i, the tip is a callback with %i as item index.</font></i>

  <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>string</font></b> is integer <font color=#653760>-strict</font> <font color=#1b1baa>$x</font>]} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>catch</font></b> {
    <b><font color=#3a6797>set</font></b> idx [<font color=#1b1baa>$w</font> index @<font color=#1b1baa>$x</font>,<font color=#1b1baa>$y</font>]
    <b><font color=#3a6797>lassign</font></b> [::baltip cget <font color=#653760>-pause</font>] -&gt; pause
    <b><font color=#3a6797>set</font></b> optid <font color=#653760>-SPECTIPid</font><font color=#1b1baa>$w</font>
    <b><font color=#3a6797>lassign</font></b> [::baltip cget <font color=#1b1baa>$optid</font>] -&gt; idx2
    <b><font color=#3a6797>lassign</font></b> [LbxCoord <font color=#1b1baa>$w</font>] x y idx inside
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$inside</font> && <font color=#1b1baa>$idx</font>!=<font color=#1b1baa>$idx2</font>} {
      <b><font color=#3a6797>lassign</font></b> [::baltip cget <font color=#653760>-SPECTIP</font><font color=#1b1baa>$w</font>] - com
      <b><font color=#3a6797>set</font></b> com [<b><font color=#3a6797>string</font></b> map <font color=#8b2a0e>&quot;%%i \u0001&quot;</font> <font color=#1b1baa>$com</font>]
      <b><font color=#3a6797>set</font></b> whole [<b><font color=#3a6797>expr</font></b> {[<b><font color=#3a6797>string</font></b> first %i <font color=#1b1baa>$com</font>]==-1}]
      <b><font color=#3a6797>set</font></b> com [<b><font color=#3a6797>string</font></b> map <font color=#8b2a0e>&quot;\u0001 %i&quot;</font> <font color=#1b1baa>$com</font>]
      <b><font color=#3a6797>set</font></b> text [LbxTip <font color=#1b1baa>$w</font> <font color=#1b1baa>$idx</font> <font color=#1b1baa>$whole</font>]
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$whole</font> && <font color=#1b1baa>$idx2</font> ne {}} {
        Command <font color=#1b1baa>$w</font> <font color=#1b1baa>$text</font>
        <b><font color=#ca14ca>return</font></b>  ;<i><font color=#4b5d50># tip for a whole listbox at entering</font></i>
      }
      ::baltip hide <font color=#1b1baa>$w</font>
      <b><font color=#3a6797>lassign</font></b> [Command <font color=#1b1baa>$w</font> <font color=#1b1baa>$text</font>] ans res
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ans</font>} {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$res</font> ne {}} {
          <i><font color=#4b5d50># the command should be displayed here (not somewhere else)</font></i>
          <b><font color=#3a6797>set</font></b> <font color=#1b1baa>$ans</font> no
        }
        <i><font color=#4b5d50># the command redefined the tip's text</font></i>
        <b><font color=#3a6797>set</font></b> text <font color=#1b1baa>$res</font>
      }
      <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$ans</font>} {
        <b><font color=#3a6797>set</font></b> optafter <font color=#653760>-SPECTIPafter</font><font color=#1b1baa>$w</font>
        <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel [<b><font color=#3a6797>lindex</font></b> [::baltip cget <font color=#1b1baa>$optafter</font>] 1]}
        <b><font color=#3a6797>set</font></b> aftid [<b><font color=#3a6797>after</font></b> <font color=#1b1baa>$pause</font> <font color=#8b2a0e>&quot;::baltip::my::ShowLbxTip <font color=#1b1baa>$</font>w <font color=#1b1baa>$</font>optid <font color=#1b1baa>$</font>idx <font color=#1b1baa>$</font>whole&quot;</font>]
        ::baltip configure <font color=#1b1baa>$optafter</font> <font color=#1b1baa>$aftid</font>
      }
      ::baltip configure <font color=#1b1baa>$optid</font> <font color=#1b1baa>$idx</font>
    }
  }
}
<a id=Treeview></a>
<i><font color=#4b5d50>### ________________________ Treeview _________________________ ###</font></i>
<a id=my::TreCoord></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::TreCoord {w whole} {
  <i><font color=#4b5d50># Gets treeview's coordinate data.</font></i>
  <i><font color=#4b5d50>#   w - path to the treeview</font></i>
  <i><font color=#4b5d50>#   whole - flag &quot;tip for a whole treeview, not per item&quot;</font></i>
  <i><font color=#4b5d50># Returns a list of:</font></i>
  <i><font color=#4b5d50>#   x - X coordinate</font></i>
  <i><font color=#4b5d50>#   y - Y coordinate</font></i>
  <i><font color=#4b5d50>#   id - ID of item</font></i>
  <i><font color=#4b5d50>#   c - column of item</font></i>
  <i><font color=#4b5d50>#   inside - flag &quot;mouse pointer is inside the treeview&quot;</font></i>

  <b><font color=#3a6797>lassign</font></b> [WidCoord <font color=#1b1baa>$w</font>] x y inside
  <b><font color=#3a6797>set</font></b> id [<font color=#1b1baa>$w</font> identify item <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font>]
  <b><font color=#3a6797>set</font></b> c [<font color=#1b1baa>$w</font> identify column <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font>]
  <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$whole</font> && [<font color=#1b1baa>$w</font> identify region <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font>] eq {heading}} {
    <b><font color=#3a6797>set</font></b> inside no
  }
  <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font> <font color=#1b1baa>$id</font> <font color=#1b1baa>$c</font> <font color=#1b1baa>$inside</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::TreTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::TreTip {w id c whole} {
  <i><font color=#4b5d50># Gets a text of a treeview' tip.</font></i>
  <i><font color=#4b5d50>#   w - the treeview's path</font></i>
  <i><font color=#4b5d50>#   id - ID of item</font></i>
  <i><font color=#4b5d50>#   c - column of item</font></i>
  <i><font color=#4b5d50>#   whole - flag &quot;tip for a whole treeview, not per item&quot;</font></i>

  <b><font color=#3a6797>lassign</font></b> [::baltip cget <font color=#653760>-SPECTIP</font><font color=#1b1baa>$w</font>] - com
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$whole</font>} {
    <b><font color=#3a6797>set</font></b> tip [<b><font color=#3a6797>string</font></b> map <font color=#8b2a0e>&quot;%%i %i %%c %c&quot;</font> <font color=#1b1baa>$com</font>]
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> tip {}
    <b><font color=#3a6797>set</font></b> com [<b><font color=#3a6797>string</font></b> map [<b><font color=#3a6797>list</font></b> %i <font color=#1b1baa>$id</font> %c <font color=#1b1baa>$c</font>] <font color=#1b1baa>$com</font>]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$id</font> ne {} && [<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> tip [<b><font color=#3a6797>eval</font></b> <font color=#1b1baa>$com</font>]}]} {<b><font color=#3a6797>set</font></b> tip <font color=#1b1baa>$com</font>}
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$tip</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::ShowTreTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::ShowTreTip {w optid id whole} {
  <i><font color=#4b5d50># Shows a tip for a treeview.</font></i>
  <i><font color=#4b5d50>#   w - the treeview's path</font></i>
  <i><font color=#4b5d50>#   optid - option name for saving *id*</font></i>
  <i><font color=#4b5d50>#   id - ID of item</font></i>
  <i><font color=#4b5d50>#   whole - flag &quot;tip for a whole treeview, not per item&quot;</font></i>

  <b><font color=#3a6797>catch</font></b> {
    <b><font color=#3a6797>lassign</font></b> [TreCoord <font color=#1b1baa>$w</font> <font color=#1b1baa>$whole</font>] x y id c inside
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$inside</font>} {
      <b><font color=#3a6797>set</font></b> tip [TreTip <font color=#1b1baa>$w</font> <font color=#1b1baa>$id</font> <font color=#1b1baa>$c</font> <font color=#1b1baa>$whole</font>]
      ::baltip configure <font color=#1b1baa>$optid</font> [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$id</font> <font color=#1b1baa>$c</font>]
      ::baltip tip <font color=#1b1baa>$w</font> <font color=#1b1baa>$tip</font> <font color=#653760>-force</font> yes
    } <b><font color=#3a6797>else</font></b> {
      ::baltip hide <font color=#1b1baa>$w</font>
      ::baltip configure <font color=#1b1baa>$optid</font> {}
    }
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=my::PrepareTreTip></a>
<b><font color=#ca14ca>proc</font></b> ::baltip::my::PrepareTreTip {w x y} {
  <i><font color=#4b5d50># Prepares a tip for a treeview.</font></i>
  <i><font color=#4b5d50>#   w - the treeview's path</font></i>
  <i><font color=#4b5d50>#   x - X coordinate of pointer</font></i>
  <i><font color=#4b5d50>#   y - Y coordinate of pointer</font></i>
  <i><font color=#4b5d50># Imitates Enter/Leave events per items, with binding to &lt;Motion&gt; event.</font></i>
  <i><font color=#4b5d50># If &quot;-text&quot; of tip doesn't contain %i, the tip is for a whole treeview.</font></i>
  <i><font color=#4b5d50># If &quot;-text&quot; of tip contains %i, the tip is a callback with %i as item index.</font></i>

  <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>string</font></b> is integer <font color=#653760>-strict</font> <font color=#1b1baa>$x</font>]} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>catch</font></b> {
    <b><font color=#3a6797>set</font></b> id [<font color=#1b1baa>$w</font> identify item <font color=#1b1baa>$x</font> <font color=#1b1baa>$y</font>]
    <b><font color=#3a6797>lassign</font></b> [::baltip cget <font color=#653760>-pause</font>] -&gt; pause
    <b><font color=#3a6797>set</font></b> optid <font color=#653760>-SPECTIPid</font><font color=#1b1baa>$w</font>
    <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>lindex</font></b> [::baltip cget <font color=#1b1baa>$optid</font>] 1] id2 c2
    <b><font color=#3a6797>lassign</font></b> [::baltip cget <font color=#653760>-SPECTIP</font><font color=#1b1baa>$w</font>] - com
    <b><font color=#3a6797>set</font></b> com [<b><font color=#3a6797>string</font></b> map <font color=#8b2a0e>&quot;%%i \u0001 %%c \u0002&quot;</font> <font color=#1b1baa>$com</font>]
    <b><font color=#3a6797>set</font></b> isid [<b><font color=#3a6797>expr</font></b> {[<b><font color=#3a6797>string</font></b> first %i <font color=#1b1baa>$com</font>]&gt;-1}]
    <b><font color=#3a6797>set</font></b> isc  [<b><font color=#3a6797>expr</font></b> {[<b><font color=#3a6797>string</font></b> first %c <font color=#1b1baa>$com</font>]&gt;-1}]
    <b><font color=#3a6797>set</font></b> whole [<b><font color=#3a6797>expr</font></b> {!<font color=#1b1baa>$isid</font> && !<font color=#1b1baa>$isc</font>}]
    <b><font color=#3a6797>set</font></b> com [<b><font color=#3a6797>string</font></b> map <font color=#8b2a0e>&quot;\u0001 %i \u0002 %c&quot;</font> <font color=#1b1baa>$com</font>]
    <b><font color=#3a6797>lassign</font></b> [TreCoord <font color=#1b1baa>$w</font> <font color=#1b1baa>$whole</font>] x y id c inside
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$whole</font> || (<font color=#1b1baa>$inside</font> && <font color=#1b1baa>$id</font> ne {} && <font color=#1b1baa>$c</font> ne {} &&
    ((<font color=#1b1baa>$isid</font> && <font color=#1b1baa>$id</font> ne <font color=#1b1baa>$id2</font>) || (<font color=#1b1baa>$isc</font> && <font color=#1b1baa>$c</font> ne <font color=#1b1baa>$c2</font>)))} {
      <b><font color=#3a6797>set</font></b> text [TreTip <font color=#1b1baa>$w</font> <font color=#1b1baa>$id</font> <font color=#1b1baa>$c</font> <font color=#1b1baa>$whole</font>]
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$whole</font> && <font color=#1b1baa>$id2</font> ne {}} {
        Command <font color=#1b1baa>$w</font> <font color=#1b1baa>$text</font>
        <b><font color=#ca14ca>return</font></b>  ;<i><font color=#4b5d50># tip for a whole treeview at entering</font></i>
      }
      <b><font color=#3a6797>lassign</font></b> [Command <font color=#1b1baa>$w</font> <font color=#1b1baa>$text</font>] ans res
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ans</font>} {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$res</font> ne {}} {
          <i><font color=#4b5d50># the command should be displayed here (not somewhere else)</font></i>
          <b><font color=#3a6797>set</font></b> <font color=#1b1baa>$ans</font> no
        }
        <i><font color=#4b5d50># the command redefined the tip's text</font></i>
        <b><font color=#3a6797>set</font></b> text <font color=#1b1baa>$res</font>
      }
      <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$ans</font>} {
        ::baltip hide <font color=#1b1baa>$w</font>
        <b><font color=#3a6797>set</font></b> optafter <font color=#653760>-SPECTIPafter</font><font color=#1b1baa>$w</font>
        <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>after</font></b> cancel [<b><font color=#3a6797>lindex</font></b> [::baltip cget <font color=#1b1baa>$optafter</font>] 1]}
        <b><font color=#3a6797>set</font></b> aftid [<b><font color=#3a6797>after</font></b> <font color=#1b1baa>$pause</font> <font color=#8b2a0e>&quot;::baltip::my::ShowTreTip <font color=#1b1baa>$</font>w <font color=#1b1baa>$</font>optid <font color=#1b1baa>{$</font>id<font color=#1b1baa>}</font> <font color=#1b1baa>$</font>whole&quot;</font>]
        ::baltip configure <font color=#1b1baa>$optafter</font> <font color=#1b1baa>$aftid</font>
      }
      ::baltip configure <font color=#1b1baa>$optid</font> [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$id</font> <font color=#1b1baa>$c</font>]
    } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$id</font> eq {}} {
      ::baltip hide <font color=#1b1baa>$w</font>
      ::baltip configure <font color=#1b1baa>$optid</font> {}
    }
  }
}
<a id=EOF></a>
<i><font color=#4b5d50># ________________________________ EOF __________________________________ #</font></i>

</pre>

<table border=0 cellPadding=4 cellSpacing=0 width=100%>  <td border=0 bgColor=#87bcd3><div style=text-align:center>  <a href="../../index.html"><font color=#1a1a1a size=6>  <b>baltip.tcl</b></font></div></td></table>

</section>
<script>
  writeFooter('Generated by <a href="'+homeLINK()+'/en/tcl/alited/index.html">alited</a> &amp; <a href="'+homeLINK()+'/en/tcl/mulster/index.html">mulster</a></a>');
</script>
</div>
</body>
</html>