<!DOCTYPE html><html><head><meta charset="utf-8"/>
<meta name="author" content="aplsimple">
<meta name="description" content="aplsimple's home page">
<meta name="keywords" content="aplsimple,home">
</head>
<style>
table{
background-color: #f9f9f9;
margin: 0%;
margin-bottom: 2%;
padding: 0%;
box-shadow: none;
filter: none;
}
pre{
margin: 0%;
margin-bottom: 2%;
padding: 0%;
}
</style>
<script>
function homeLINK() {
  homelink = document.baseURI;
  ilen = 19
  ibase = homelink.indexOf('aplsimple.github');
  if (ibase<0) { ibase = homelink.indexOf('aplsimple_github'); ilen += 10 };
  if (ibase>=0) { homelink = homelink.substring(0,ibase+ilen) };
  return homelink;
};
document.write(' \
<link rel="stylesheet" href="'+homeLINK()+'/en/tcl/printer/zoo/style.css">');
document.write(' \
<link rel="icon" type="image/jpg" href="'+homeLINK()+'/zoo/favicon.jpg">');
document.write('<'+'script src="'+homeLINK()+'/zoo/funcs.js">'+'<'+'/script>');
document.write('<'+'script src="'+homeLINK()+'/en/tcl/printer/zoo/this.js">'+'<'+'/script>');
</script>
<body>
<div id="wrapper">
<div name="divd1" ALIGN="CENTER"> <FONT SIZE=5em color=#b01c20><B>
<noscript>THIS PAGE IS NOT WORKING WITHOUT JAVASCRIPT!
<BR>
<BR>PLEASE, SWITCH ON JAVASCRIPT IN SETTINGS OF YOUR BROWSER AND RELOAD THE PAGE.
</noscript>
</B></FONT></div>
<div id='doc3' class='yui-t2'>
<section id=sec2>
<div id='hd' class='banner'>
<link rel="stylesheet" href="../css/style.css">

<title>obbit.tcl</title>

<table border=0 cellPadding=4 cellSpacing=0 width=100%>  <td border=0 bgColor=#bdd7e7><div style=text-align:center>  <a href="../index.html"><font color=#1a1a1a size=6>  <b>README.md</b></font></div></td></table>

<div id="bodyContent" class="dokuwiki">
<div id="dw__toc" class="dw__toc">
<h3 class="toggle open" style="cursor: pointer;">obbit.tcl</h3>
<div aria-expanded="true" style="">

<ul class="toc">
<li><b><a href="#obbit.tcl">obbit.tcl</a></b></li>
<li><b><a href="#apave's_global_variables">apave's global variables</a></b></li>
<li><b><a href="#CS_-_color_schemes">CS - color schemes</a></b></li>
<li><b><a href="#CS_variables">&nbsp;&nbsp;CS variables</a></b></li>
<li><b><a href="#CS_list">&nbsp;&nbsp;CS list</a></b></li>
<li><b><a href="#Common_procs">Common procs</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#apave::mc">mc</a><span class=tooltiptext> apave::mc : Gets a localized version of a message.
msg - the message</span></div></li></ul>
<li><b><a href="#Inits">&nbsp;&nbsp;Inits</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#apave::initWM">initWM</a><span class=tooltiptext> apave::initWM : Initializes Tcl/Tk session. Used to be called at the beginning of it.
args - options ("name value" pairs)
If args eq "?", return a flag "need to call initWM"</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::endWM">endWM</a><span class=tooltiptext> apave::endWM : Finishes the window management by apave, closing and clearing all.
args - if any set, means "ask if apave's WM is finished"</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::initPOP">initPOP</a><span class=tooltiptext> apave::initPOP : Initializes system popup menu (if possible) to call it in a window.
w - window's name</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::ttkToolbutton">ttkToolbutton</a><span class=tooltiptext> apave::ttkToolbutton : Initializes Toolbutton's style, depending on CS.
Creates also btt / brt / blt widget types to be paved,
with images top / right / left accordingly.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::initStyle">initStyle</a><span class=tooltiptext> apave::initStyle : Initializes a style for a widget type, e.g. button's.
wt - target widget type
wbase - base widget type
args - options of the style</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::initStyles">initStyles</a><span class=tooltiptext> apave::initStyles : Initializes miscellaneous styles, e.g. button's.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::initStylesFS">initStylesFS</a><span class=tooltiptext> apave::initStylesFS : Initializes miscellaneous styles, e.g. button's.
args - font options ("name value" pairs)</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::InitAwThemesPath">InitAwThemesPath</a><span class=tooltiptext> apave::InitAwThemesPath : Initializes the path to awthemes package.
libdir - root directory of themes (where 'theme' subdirectory is)</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::InitTheme">InitTheme</a><span class=tooltiptext> apave::InitTheme : Initializes app's theme.
intheme - name of the theme
libdir - root directory of themes (where 'theme' subdirectory is)
Returns a list of theme name and label's border (for status bar).
The returned values are used in ::apave::initWM procedure.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::iconifyOption">iconifyOption</a><span class=tooltiptext> apave::iconifyOption : Gets/sets "-iconify" option.
args - if contains no arguments, gets "-iconify" option; otherwise sets it
Option values mean:
none - do nothing: no withdraw/deiconify
Linux - do withdraw/deiconify for Linux
Windows - do withdraw/deiconify for Windows
default - do withdraw/deiconify depending on the platform
See also: withdraw, deiconify</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::withdraw">withdraw</a><span class=tooltiptext> apave::withdraw : Does 'withdraw' for a window.
w - the window's path
See also: iconifyOption</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::deiconify">deiconify</a><span class=tooltiptext> apave::deiconify : Does 'deiconify' for a window.
w - the window's path
See also: iconifyOption</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::cs_Active">cs_Active</a><span class=tooltiptext> apave::cs_Active : Gets/sets "is changing CS possible" flag for a whole application.</span></div></li></ul>
<li><b><a href="#Property">&nbsp;&nbsp;Property</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#apave::setProperty">setProperty</a><span class=tooltiptext> apave::setProperty : Sets a property's value as "application-wide".
name - name of property
args - value of property
If *args* is omitted, the method returns a property's value.
If *args* is set, the method sets a property's value as $args.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::getProperty">getProperty</a><span class=tooltiptext> apave::getProperty : Gets a property's value as "application-wide".
name - name of property
defvalue - default value
If the property had been set, the method returns its value.
Otherwise, the method returns the default value (`$defvalue`).</span></div></li></ul>
<li><b><a href="#CS_procs">&nbsp;&nbsp;CS procs</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#apave::cs_Non">cs_Non</a><span class=tooltiptext> apave::cs_Non : Gets non-existent CS index</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::cs_Min">cs_Min</a><span class=tooltiptext> apave::cs_Min : Gets a minimum index of available color schemes</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::cs_Max">cs_Max</a><span class=tooltiptext> apave::cs_Max : Gets a maximum index of available color schemes</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::cs_MaxBasic">cs_MaxBasic</a><span class=tooltiptext> apave::cs_MaxBasic : Gets a maximum index of basic color schemes</span></div></li></ul>
<li><b><a href="#Opfions">&nbsp;&nbsp;Opfions</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#apave::parseOptionsFile">parseOptionsFile</a><span class=tooltiptext> apave::parseOptionsFile : Parses argument list containing options and (possibly) a file name.
strict - if 0, 'args' options will be only counted for,
other options are skipped
strict - if 1, only 'args' options are allowed,
all the rest of inpargs to be a file name
- if 2, the 'args' options replace the
appropriate options of 'inpargs'
inpargs - list of options, values and a file name
args  - list of default options

The inpargs list contains:
- option names beginning with "-"
- option values following their names (may be missing)
- "--" denoting the end of options
- file name following the options (may be missing)

The *args* parameter contains the pairs:
- option name (e.g., "-dir")
- option default value

If the *args* option value is equal to =NONE=, the *inpargs* option
is considered to be a single option without a value and,
if present in inpargs, its value is returned as "yes".

If any option of *inpargs* is absent in *args* and strict==1,
the rest of *inpargs* is considered to be a file name.

The proc returns a list of two items:
- an option list got from args/inpargs according to 'strict'
- a file name from inpargs or {} if absent

Examples see in tests/obbit.test.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::parseOptions">parseOptions</a><span class=tooltiptext> apave::parseOptions : Parses argument list containing options.
opts - list of options and values
args - list of "option / default value" pairs
It's the same as parseOptionsFile, excluding the file name stuff.
Returns a list of options' values, according to args.
See also: parseOptionsFile</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::extractOptions">extractOptions</a><span class=tooltiptext> apave::extractOptions : Gets options' values and removes the options from the input list.
optsVar - variable name for the list of options and values
args  - list of "option / default value" pairs
Returns a list of options' values, according to args.
See also: parseOptions</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::getOption">getOption</a><span class=tooltiptext> apave::getOption : Extracts one option from an option list.
optname - option name
args - option list
Returns an option value or "".
Example:
set options [list -name some -value "any value" -tip "some tip"]
set optvalue [::apave::getOption -tip {*}$options]</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::putOption">putOption</a><span class=tooltiptext> apave::putOption : Replaces or adds one option to an option list.
optname - option name
optvalue - option value
args - option list
Returns an updated option list.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::removeOptions">removeOptions</a><span class=tooltiptext> apave::removeOptions : Removes some options from a list of options.
opts - list of options and values
args - list of option names to remove
The `opts` may contain "key value" pairs and "alone" options
without values.
To remove "key value" pairs, `key` should be an exact name.
To remove an "alone" option, `key` should be a glob pattern with `*`.</span></div></li></ul>
<li><b><a href="#Text_file">&nbsp;&nbsp;Text file</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#apave::error">error</a><span class=tooltiptext> apave::error : Gets the error's message at reading/writing.
fileName - if set, return a full error messageat opening file</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::textsplit">textsplit</a><span class=tooltiptext> apave::textsplit : Splits a text's contents by EOLs. Those inventors of EOLs...
textcont - text's contents</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::textEOL">textEOL</a><span class=tooltiptext> apave::textEOL : Gets/sets End-of-Line for text reqding/writing.
EOL - LF, CR, CRLF or {}
If EOL omitted or equals to {} or "-", return the current EOL.
If EOL equals to "translation", return -translation option or {}.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::textChanConfigure">textChanConfigure</a><span class=tooltiptext> apave::textChanConfigure : Configures a channel for text file.
channel - the channel
coding - if set, defines encoding of the file
eol - if set, defines EOL of the file</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::logName">logName</a><span class=tooltiptext> apave::logName : Sets a log file's name.
fname - file name
If fname is {}, disables logging.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::logMessage">logMessage</a><span class=tooltiptext> apave::logMessage : Logs messages to a log file.
msg - the message
lev - maximum level for [info level] to introspect calls
A log file's name is set by _PU_opts(_LOGFILE). If it's blank,
no logging is made.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::readTextFile">readTextFile</a><span class=tooltiptext> apave::readTextFile : Reads a text file.
fname - file name
varName - variable name for file content or ""
doErr - if 'true', exit at errors with error message
Returns file contents or "".</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::writeTextFile">writeTextFile</a><span class=tooltiptext> apave::writeTextFile : Writes to a text file.
fname - file name
varName - variable name for file content or ""
doErr - if 'true', exit at errors with error message
doSave - if 'true', saves an empty file, else deletes it
Returns "yes" if the file was saved successfully.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::undoIn">undoIn</a><span class=tooltiptext> apave::undoIn : Enters a block of undo/redo for a text widget.
wtxt - text widget's path
Run before massive changes of the text, to have Undo/Redo done at one blow.
See also: undoOut</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::undoOut">undoOut</a><span class=tooltiptext> apave::undoOut : Exits a block of undo/redo for a text widget.
wtxt - text widget's path
Run after massive changes of the text, to have Undo/Redo done at one blow.
See also: undoIn</span></div></li></ul>
<li><b><a href="#Binds">&nbsp;&nbsp;Binds</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#apave::bindToEvent">bindToEvent</a><span class=tooltiptext> apave::bindToEvent : Binds an event on a widget to a command.
w - the widget's path
event - the event
args - the command</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::bindTextagToEvent">bindTextagToEvent</a><span class=tooltiptext> apave::bindTextagToEvent : Binds an event on a text tag to a command.
w - the widget's path
tag - the tag
event - the event
args - the command</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::bindCantagToEvent">bindCantagToEvent</a><span class=tooltiptext> apave::bindCantagToEvent : Binds an event on a canvas tag to a command.
w - the widget's path
tag - the tag
event - the event
args - the command</span></div></li></ul>
<li><b><a href="#Helpers">&nbsp;&nbsp;Helpers</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#apave::InfoWindow">InfoWindow</a><span class=tooltiptext> apave::InfoWindow : Registers/unregisters windows. Also sets/gets 'count of open modal windows'.
val - current number of open modal windows
w - root window's path
modal - yes, if the window is modal
var - variable's name for tkwait
regist - yes or no for registering/unregistering
See also: APaveBase::showWindow</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::InfoFind">InfoFind</a><span class=tooltiptext> apave::InfoFind : Searches data of a window in a list of registered windows.
w - root window's path
modal - yes, if the window is modal
Returns: the window's path or "" if not found.
See also: InfoWindow</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::TreSelect">TreSelect</a><span class=tooltiptext> apave::TreSelect : Selects a treeview item.
w - treeview's path
idx - item index</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::LbxSelect">LbxSelect</a><span class=tooltiptext> apave::LbxSelect : Selects a listbox item.
w - listbox's path
idx - item index</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::InsertChar">InsertChar</a><span class=tooltiptext> apave::InsertChar : Inserts character(s) into a text at cursor's position.
wt - text's path
ch - character(s)</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::CursorToBEOL">CursorToBEOL</a><span class=tooltiptext> apave::CursorToBEOL : Sets the cursor to the real start/end of text line.
wt - text's path
where - where to set</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#apave::DefaultCS">DefaultCS</a><span class=tooltiptext> apave::DefaultCS : Gets default color scheme counting current background of Tk root window.</span></div></li></ul>
<li><b><a href="#ObjectProperty">ObjectProperty</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#constructor">constructor</a><span class=tooltiptext> constructor</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#destructor">destructor</a><span class=tooltiptext> destructor</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#setProperty">setProperty</a><span class=tooltiptext> setProperty : Sets a property's value as "object-wide".
name - name of property
args - value of property
If *args* is omitted, the method returns a property's value.
If *args* is set, the method sets a property's value as $args.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#getProperty">getProperty</a><span class=tooltiptext> getProperty : Gets an property's value as "object-wide".
name - name of property
defvalue - default value
If the property had been set, the method returns its value.
Otherwise, the method returns the default value (`$defvalue`).</span></div></li></ul>
<li><b><a href="#EONS_ObjectProperty">&nbsp;&nbsp;EONS ObjectProperty</a></b></li>
<li><b><a href="#ObjectTheming">ObjectTheming</a></b></li>
<li><b><a href="#Obj_theming_Inits">&nbsp;&nbsp;Obj theming Inits</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#constructor">constructor</a><span class=tooltiptext> constructor</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#destructor">destructor</a><span class=tooltiptext> destructor</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#InitCS">InitCS</a><span class=tooltiptext> InitCS : Initializes the color scheme processing.</span></div></li></ul>
<li><b><a href="#Fonts">&nbsp;&nbsp;Fonts</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#create_FontsType">create_FontsType</a><span class=tooltiptext> create_FontsType : Creates fonts used in apave, with additional options.
type - type of the created fonts
args - pairs "option value"
Returns a list of two created font names (default & mono).</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#create_Fonts">create_Fonts</a><span class=tooltiptext> create_Fonts : Creates fonts used in apave.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#basicFontSize">basicFontSize</a><span class=tooltiptext> basicFontSize : Gets/Sets a basic size of font used in apave
fs - font size
ds - incr/decr of size
If 'fs' is omitted or ==0, this method gets it.
If 'fs' >0, this method sets it.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#basicDefFont">basicDefFont</a><span class=tooltiptext> basicDefFont : Gets/Sets a basic default font.
deffont - font
If 'deffont' is omitted or =="", this method gets it.
If 'deffont' is set, this method sets it.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#basicTextFont">basicTextFont</a><span class=tooltiptext> basicTextFont : Gets/Sets a basic font used in editing/viewing text widget.
textfont - font
If 'textfont' is omitted or =="", this method gets it.
If 'textfont' is set, this method sets it.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#basicSmallFont">basicSmallFont</a><span class=tooltiptext> basicSmallFont : Gets/Sets a basic small font used in status bar etc.
smallfont - font
If 'smallfont' is omitted or =="", this method gets it.
If 'smallfont' is set, this method sets it.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#boldDefFont">boldDefFont</a><span class=tooltiptext> boldDefFont : Returns a bold default font.
fs - font size</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#boldTextFont">boldTextFont</a><span class=tooltiptext> boldTextFont : Returns a bold fixed font.
fs - font size</span></div></li></ul>
<li><b><a href="#Color_schemes">&nbsp;&nbsp;Color schemes</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#csFont">csFont</a><span class=tooltiptext> csFont : Returns attributes of CS font.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csFontMono">csFontMono</a><span class=tooltiptext> csFontMono : Returns attributes of CS monotype font.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csFontDef">csFontDef</a><span class=tooltiptext> csFontDef : Returns attributes of CS default font.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csDark">csDark</a><span class=tooltiptext> csDark : Returns a flag "a color scheme is dark"
cs - the color scheme to be checked (the current one, if not set)</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csExport">csExport</a><span class=tooltiptext> csExport : TODO</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csCurrent">csCurrent</a><span class=tooltiptext> csCurrent : Gets an index of current color scheme</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csGetName">csGetName</a><span class=tooltiptext> csGetName : Gets a color scheme's name
ncolor - index of color scheme</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csGet">csGet</a><span class=tooltiptext> csGet : Gets a color scheme's colors
ncolor - index of color scheme</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csSet">csSet</a><span class=tooltiptext> csSet : Sets a color scheme and applies it to Tk/Ttk widgets.
ncolor - index of color scheme
win - window's name
args - list of colors if ncolor=""

The `args` can be set as "-doit". In this case the method does set
the `ncolor` color scheme (otherwise it doesn't set the CS if it's
already of the same `ncolor`).
The clrtitf, clrinaf etc. had been designed for e_menu. And as such,
they can be used directly, outside of this "color scheming" UI.
They set pairs of related fb/bg:
clrtitf/clrtitb is item's fg/bg
clrinaf/clrinab is main fg/bg
clractf/clractb is active (selection) fg/bg
and separate colors:
clrhelp is "help" foreground
clrcurs is "caret" background
clrgrey is "shadowing" background
clrhotk is "hotkey/border" foreground

In color scheming, these colors are transformed to be consistent
with Tk/Ttk's color mechanics.

Additionally, "grey" color is used as "border color/disabled foreground".

Returns a list of colors used by the color scheme.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csAdd">csAdd</a><span class=tooltiptext> csAdd : Registers new color scheme in the list of CS.
newcs -  CS item
setnew - if true, sets the CS as current
Does not register the CS, if it is already registered.
Returns an index of current CS.
See also: themeWindow</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csDeleteExternal">csDeleteExternal</a><span class=tooltiptext> csDeleteExternal : Removes all external CS.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csToned">csToned</a><span class=tooltiptext> csToned : Make an external CS that has tones (hues) of colors for a CS.
cs - internal apave CS to be toned
hue - a percent to get light (> 0) or dark (< 0) tones
doit - flag "do it anyway"
This method allows only one external CS, eliminating others.
Returns: "yes" if the CS was toned</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csMainColors">csMainColors</a><span class=tooltiptext> csMainColors : Returns a list of main colors' indices of CS.
See also: csMapTheme</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csMapTheme">csMapTheme</a><span class=tooltiptext> csMapTheme : Returns a map of CS / themeWindow method colors.
The map is a list of indices in CS corresponding to themeWindow's args.
See also: themeWindow</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#csNewIndex">csNewIndex</a><span class=tooltiptext> csNewIndex : Gets a next available CS's index.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#ColorScheme">ColorScheme</a><span class=tooltiptext> ColorScheme : Gets a full record of color scheme from a list of available ones
ncolor - index of color scheme</span></div></li></ul>
<li><b><a href="#Theming">Theming</a></b></li>
<li><b><a href="#Common">&nbsp;&nbsp;Common</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#apaveTheme">apaveTheme</a><span class=tooltiptext> apaveTheme : Checks if apave color scheme is used (always for standard ttk themes).
theme - a theme to be checked (if omitted, a current ttk theme)</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#initTooltip">initTooltip</a><span class=tooltiptext> initTooltip : Configurates colors and other attributes of tooltip.
args - options of ::baltip::configure</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#thDark">thDark</a><span class=tooltiptext> thDark : Checks if a theme is dark, light or neutral.
theme - theme's name
Returns 1 for dark, 0 for light, -1 for neutral.</span></div></li></ul>
<li><b><a href="#Theme_methods">&nbsp;&nbsp;Theme methods</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#themeWindow">themeWindow</a><span class=tooltiptext> themeWindow : Changes a Tk style (theming a bit)
win - window's name
clrs - list of colors
isCS - true, if the colors are taken from a CS
args - other options

The clrs contains:
tfg1 - foreground for themed widgets (main stock)
tbg1 - background for themed widgets (main stock)
tfg2 - foreground for themed widgets (enter data stock)
tbg2 - background for themed widgets (enter data stock)
tfgS - foreground for selection
tbgS - background for selection
tfgD - foreground for disabled themed widgets
tbgD - background for disabled themed widgets
tcur - insertion cursor color
bclr - hotkey/border color
thlp - help color
tfgI - foreground for external CS
tbgI - background for external CS
tfgM - foreground for menus
tbgM - background for menus

The themeWindow can be used outside of "color scheme" UI.
E.g., in TKE editor, e_menu and add_shortcuts plugins use it to
be consistent with TKE theme.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#Ttk_style">Ttk_style</a><span class=tooltiptext> Ttk_style : Sets a new style options.
oper - command of ttk::style ("map" or "configure")
ts - type of style to be configurated
opt - option's name
val - option's value</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#Main_Style">Main_Style</a><span class=tooltiptext> Main_Style : Sets main colors of application
tfg1 - main foreground
tbg1 - main background
tfg2 - not used
tbg2 - not used
tfgS - selectforeground
tbgS - selectbackground
bclr - bordercolor
tc - troughcolor
fA - foreground active
bA - background active
bD - background disabled
The *foreground disabled* is set as `grey`.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#themeMandatory">themeMandatory</a><span class=tooltiptext> themeMandatory : Themes all that must be themed.
win - window's name
args - options
set the new options for nested widgets (menu e.g.)</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#untouchWidgets">untouchWidgets</a><span class=tooltiptext> untouchWidgets : Makes non-ttk widgets to be untouched by coloring or gets their list.
args - list of widget globs (e.g. {.em.fr.win.* .em.fr.h1 .em.fr.h2})
If args not set, returns the list of untouched widgets.
Items of *args* can have 2 components:
- widget glob
- list of option+value pairs, e.g. "*.textWidget {-fg white -bg black}"
2nd component defines additional attributes that override the defaults.
If 1st item of *args* is "clear", removes all items set with glob patterns
(e.g.: my untouchWidgets clear *BALTIP* - clears all baltip's references).
See also:
touchWidgets
themeNonThemed</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#touchWidgets">touchWidgets</a><span class=tooltiptext> touchWidgets : Makes non-ttk widgets to be touched again.
args - list of widget globs (e.g. {.em.fr.win.* .em.fr.h1 .em.fr.h2})
If args not set, returns the list of untouched widgets.
See also:
untouchWidgets
themeNonThemed</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#themeExternal">themeExternal</a><span class=tooltiptext> themeExternal : Configures an external dialogue so that its colors accord with a current CS.
args - list of untouched widgets</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#themeNonThemed">themeNonThemed</a><span class=tooltiptext> themeNonThemed : Updates the appearances of currently used widgets (non-themed).
win - window path whose children will be touched
addwid - additional widget(s) to be touched

See also:
untouchWidgets</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#NonThemedWidgets">NonThemedWidgets</a><span class=tooltiptext> NonThemedWidgets : Lists the non-themed widgets to process in apave.
selector - sets a widget group to return as a list
The `selector` can be `entry`, `button` or `all`.</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#NonTtkTheme">NonTtkTheme</a><span class=tooltiptext> NonTtkTheme : Calls themeWindow to color non-ttk widgets.
win - window's name</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#NonTtkStyle">NonTtkStyle</a><span class=tooltiptext> NonTtkStyle : Makes styling for non-ttk widgets.
typ - widget's type (the same as in "APaveBase::widgetType" method)
dsbl - `1` for disabled; `2` for readonly; otherwise for all widgets
See also: APaveBase::widgetType</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#UpdateSelectAttrs">UpdateSelectAttrs</a><span class=tooltiptext> UpdateSelectAttrs : Updates attributes for selection.
w - window's name
Some widgets (e.g. listbox) need a work-around to set
attributes for selection in run-time, namely at focusing in/out.</span></div></li></ul>
<li><b><a href="#Popup_menus">&nbsp;&nbsp;Popup menus</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#ThemePopup">ThemePopup</a><span class=tooltiptext> ThemePopup : Recursively configures popup menus.
mnu - menu's name (path)
args - options of configuration
See also: themePopup</span></div></li></ul>
<ul class=toc><li><div class=tooltip><a href="#themePopup">themePopup</a><span class=tooltiptext> themePopup : Configures a popup menu so that its colors accord with a current CS.
mnu - menu's name (path)</span></div></li></ul>
<li><b><a href="#Tk_choosers">&nbsp;&nbsp;Tk choosers</a></b></li>
<ul class=toc><li><div class=tooltip><a href="#ThemeChoosers">ThemeChoosers</a><span class=tooltiptext> ThemeChoosers : Configures file/dir choosers so that its colors accord with a current CS.</span></div></li></ul>
<li><b><a href="#EONS_ObjectTheming">&nbsp;&nbsp;EONS ObjectTheming</a></b></li>
<li><b><a href="#EOF">EOF</a></b></li>

</ul>

</div>
</div>
</div>
<!-- TOC END -->

<h1><font color=#ca14ca> apave</font></h1>
</p><p>
A library for GUI development with Tcl/Tk.
</p><p>
Docs:
</p><p>
<a href="https://aplsimple.github.io/en/tcl/pave">Full description</a>
</p><p>

</p>

<table border=0 cellPadding=4 cellSpacing=0 width=100%>  <td border=0 bgColor=#bdd7e7><div style=text-align:center>  <a href="../index.html"><font color=#1a1a1a size=6>  <b>obbit.tcl</b></font></div></td></table>

<pre class="code"><i><font color=#4b5d50># _______________________________________________________________________ #<a id=obbit.tcl></a></font></i>
<i><font color=#4b5d50>#</font></i>
<i><font color=#4b5d50># This script contains a bunch of oo::classes. A bit of it.</font></i>
<i><font color=#4b5d50>#</font></i>
<i><font color=#4b5d50># The ObjectProperty class allows to mix-in into</font></i>
<i><font color=#4b5d50># an object the getter and setter of properties.</font></i>
<i><font color=#4b5d50>#</font></i>
<i><font color=#4b5d50># The ObjectTheming class allows to change the ttk widgets' style.</font></i>
<i><font color=#4b5d50>#</font></i>
<i><font color=#4b5d50># _______________________________________________________________________ #</font></i>

<b><font color=#ca14ca>namespace</font></b> eval ::apave {
<a id=apave's_global_variables></a>
<i><font color=#4b5d50># ________________________ apave's global variables _________________________ #</font></i>

  <b><font color=#3a6797>variable</font></b> FGMAIN #000000   ;<i><font color=#4b5d50># base fg/bg</font></i>
  <b><font color=#3a6797>variable</font></b> BGMAIN #d9d9d9
  <b><font color=#3a6797>variable</font></b> FGMAIN2 #000000  ;<i><font color=#4b5d50># field fg/bg</font></i>
  <b><font color=#3a6797>variable</font></b> BGMAIN2 #ffffff

  <b><font color=#3a6797>variable</font></b> FONTMAIN [<b><font color=#134070>font</font></b> actual TkDefaultFont]
  <b><font color=#3a6797>variable</font></b> FONTMAINBOLD [<b><font color=#3a6797>list</font></b> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$::apave::FONTMAIN</font> <font color=#653760>-weight</font> bold]

  <i><font color=#4b5d50># - common options/constants of apave utils</font></i>
  <b><font color=#3a6797>variable</font></b> _PU_opts;       <b><font color=#3a6797>array</font></b> set _PU_opts [<b><font color=#3a6797>list</font></b> <font color=#653760>-NONE</font> =NONE=]
  <b><font color=#3a6797>variable</font></b> _AP_Properties; <b><font color=#3a6797>array</font></b> set _AP_Properties [<b><font color=#3a6797>list</font></b>]
  <b><font color=#3a6797>set</font></b> _PU_opts(_ERROR_) {}
  <b><font color=#3a6797>set</font></b> _PU_opts(_EOL_) {}
  <b><font color=#3a6797>set</font></b> _PU_opts(_LOGFILE) {}
  <b><font color=#3a6797>set</font></b> _PU_opts(_MODALWIN_) [<b><font color=#3a6797>list</font></b>]
  <i><font color=#4b5d50># - main color scheme data</font></i>
  <b><font color=#3a6797>variable</font></b> _C_
  <b><font color=#3a6797>array</font></b> set _C_ [<b><font color=#3a6797>list</font></b>]
  <i><font color=#4b5d50># - localized messages</font></i>
  <b><font color=#3a6797>variable</font></b> _MC_
  <b><font color=#3a6797>array</font></b> set _MC_ [<b><font color=#3a6797>list</font></b>]
  <b><font color=#ca14ca>namespace</font></b> eval ::tk { ;<i><font color=#4b5d50> # just to get localized messages</font></i>
    <b><font color=#3a6797>foreach</font></b> m {&Abort &Cancel &Copy Cu&t &Delete E&xit &Filter &Ignore &No \
    OK Open P&aste &Quit &Retry &Save {Save As} &Yes Close {To clipboard} \
    Zoom Size} {
      <b><font color=#3a6797>set</font></b> m2 [<b><font color=#3a6797>string</font></b> map {& {}} <font color=#1b1baa>$m</font>]
      <b><font color=#3a6797>set</font></b> ::apave::_MC_(<font color=#1b1baa>$m2</font>) [<b><font color=#3a6797>string</font></b> map {& {}} [msgcat::mc <font color=#1b1baa>$m</font>]]
    }
  }
<a id=CS_-_color_schemes></a>
<i><font color=#4b5d50># ________________________ CS - color schemes _________________________ #</font></i>
<a id=CS_variables></a>
  <i><font color=#4b5d50>## ________________________ CS variables _________________________ ##</font></i>

  <b><font color=#3a6797>variable</font></b> _CS_
  <b><font color=#3a6797>array</font></b> set _CS_ [<b><font color=#3a6797>list</font></b>]
  <i><font color=#4b5d50># - current color scheme data</font></i>
  <b><font color=#3a6797>set</font></b> _CS_(initall) 1
  <b><font color=#3a6797>set</font></b> _CS_(initWM) 1
  <b><font color=#3a6797>set</font></b> _CS_(isActive) 1
  <b><font color=#3a6797>set</font></b> _CS_(!FG) #000000
  <b><font color=#3a6797>set</font></b> _CS_(!BG) #b7b7b7 ;<i><font color=#4b5d50>#a8bcd2 #c3c3c3 #9cb0c6 #4a6984</font></i>
  <b><font color=#3a6797>set</font></b> _CS_(expo,tfg1) <font color=#8b2a0e>&quot;-&quot;</font>
  <b><font color=#3a6797>set</font></b> _CS_(defFont) [<b><font color=#134070>font</font></b> actual TkDefaultFont <font color=#653760>-family</font>]
  <b><font color=#3a6797>set</font></b> _CS_(textFont) [<b><font color=#134070>font</font></b> actual TkFixedFont <font color=#653760>-family</font>]
  <b><font color=#3a6797>set</font></b> _CS_(smallFont) [<b><font color=#134070>font</font></b> actual TkSmallCaptionFont]
  <b><font color=#3a6797>set</font></b> _CS_(fs) [<b><font color=#134070>font</font></b> actual TkDefaultFont <font color=#653760>-size</font>]
  <b><font color=#3a6797>set</font></b> _CS_(untouch) [<b><font color=#3a6797>list</font></b>]
  <b><font color=#3a6797>set</font></b> _CS_(NONCS) -2
  <b><font color=#3a6797>set</font></b> _CS_(MINCS) -1
  <b><font color=#3a6797>set</font></b> _CS_(old) -3
  <b><font color=#3a6797>set</font></b> _CS_(TONED) [<b><font color=#3a6797>list</font></b> -2 no]
  <b><font color=#3a6797>set</font></b> _CS_(HUE) 0
  <b><font color=#3a6797>set</font></b> _CS_(LABELBORDER) 0
  <b><font color=#3a6797>set</font></b> _CS_(CURSORWIDTH) 2
<a id=CS_list></a>
  <i><font color=#4b5d50>## ________________________ CS list _________________________ ##</font></i>

<i><font color=#4b5d50># Colors for &lt;MildDark CS&gt; : 1. meanings 2. code names</font></i>

<i><font color=#4b5d50># &lt;CS&gt;    itemfg  mainfg  itembg  mainbg  itemsHL  actbg   actfg  cursor  greyed   hot \</font></i>
<i><font color=#4b5d50>  emfg  embg   -  menubg  winfg   winbg   itemHL2 tabHL chkHL #005...reserved... #007</font></i>

<i><font color=#4b5d50># &lt;CS&gt;    clrtitf clrinaf clrtitb clrinab clrhelp clractb clractf clrcurs clrgrey clrhotk \</font></i>
<i><font color=#4b5d50>  fI     bI  --12--  bM    fW      bW     itemHL2 tabHL chkHL #005...reserved... #007</font></i>

  <b><font color=#3a6797>set</font></b> ::apave::_CS_(ALL) {
{{ 0: AwLight}        <font color=#8b2a0e>&quot;#141414&quot;</font> #151616 #dfdfde #d1d1d0 #28578a #85b4e7 #000 #444 grey #4776a9 #000 #97c6f9 - #bebebd #000 #FBFB96 #cacaca #a20000 #76b2f1 #005 #006 #007}

{{ 1: AzureLight}     <font color=#8b2a0e>&quot;#050b0d&quot;</font> #050b0d #ffffff #e1e1e1 #00516b #a2f2ff #000 #444 grey #007f99 #000 #92e2ef - #cccccc #000 #FBFB95 #e2e2e0 #ad0000 #76b2f1 #005 #006 #007}

{{ 2: ForestLight}    <font color=#8b2a0e>&quot;#050b0d&quot;</font> #050b0d #ffffff #e1e1e1 #1d5d1d #A8CCA8 #000 #185818 grey #328457 #000 #b6cbb6 - #cccccc #000 #FBFB95 #e2e2e0 #ad0000 #76b2f1 #005 #006 #007}

{{ 3: SunValleyLight} <font color=#8b2a0e>&quot;#050b0d&quot;</font> #050b0d #ffffff #e1e1e1 #1056af #74c9ff #000 #444 grey #1574cd #000 #84d9ff - #cccccc #000 #FBFB95 #e2e2e0 #950000 #76b2f1 #005 #006 #007}

{{ 4: LightBrown}     <font color=#8b2a0e>&quot;#00002f&quot;</font> #00001a #f6f4f2 #f6f4f2 #7b3e30 #edc89b #000 #682800 grey #d59e6d #000000 #deb98c - #dfdddb #000 #FBFB95 #e3e2e0 #a30000 #900000 #005 #006 #007}

{{ 5: Grey1}          <font color=#8b2a0e>&quot;#050b0d&quot;</font> #050b0d #F8F8F8 #dadad8 #933232 #b8b8b8 #000 #444 grey #843e3e #000 #AFAFAF - #caccd0 #000 #FBFB95 #e0e0d8 #a20000 #76b2f1 #005 #006 #007}

{{ 6: Grey2}          <font color=#8b2a0e>&quot;#050b0d&quot;</font> #050b0d #f4f4f4 #F8F8F8 #5c1616 #c8c8c8 #000 #444 grey #933232 #000 #c1c1c1 - #e7e7e7 #000 #FBFB95 #e5e5e5 #a20000 #76b2f1 #005 #006 #007}

{{ 7: Rosy}           <font color=#8b2a0e>&quot;#2B122A&quot;</font> #000000 #FFFFFF #F6E6E9 #712371 #d0b8d3 #000 #630063 grey #954799 #000 #ceb6d1 - #e3d3d6 #000 #FBFB95 #e5e3e1 #a20000 #76b2f1 #005 #006 #007}

{{ 8: Clay}           <font color=#8b2a0e>&quot;#000000&quot;</font> #000000 #fdf4ed #e6dbd4 #6e300d #bcaea2 #000 #444 grey #813b3b #000 #c6b4ac - #d5c9c1 #000 #FBFB95 #e1dfde #a20000 #76b2f1 #005 #006 #007}

{{ 9: Dawn}           <font color=#8b2a0e>&quot;#08085D&quot;</font> #030358 #FFFFFF #e4fafa #794545 #a3dce5 #000 #195999 grey #ae4d4d #000 #99d2db - #d3e9e9 #000 #FBFB96 #dbe9ed #a20000 #76b2f1 #005 #006 #007}

{{10: Sky}            <font color=#8b2a0e>&quot;#102433&quot;</font> #0A1D33 #d0fdff #bdf6ff #713d3d #95ced7 #000 #195999 grey #a94848 #000 #9ad3dc - #b1eaf3 #000 #FBFB95 #c0e9ef #a20000 #76b2f1 #005 #006 #007}

{{11: Florid}         <font color=#8b2a0e>&quot;#000000&quot;</font> #004000 #e4fce4 #fff #8b4545 #93e493 #0F2D0F #185818 grey #9a481a #004000 #a7f8a7 - #d8e7d8 #000 #FBFB96 #d7e6d7 #a20000 #76b2f1 #005 #006 #007}

{{12: LightGreen}     <font color=#8b2a0e>&quot;#122B05&quot;</font> #091900 #edffed #DEF8DE #764242 #A8CCA8 #000 #185818 grey #a34242 #000 #A8CCA8 - #cde7cd #000 #FBFB96 #dee9de #a20000 #76b2f1 #005 #006 #007}

{{13: InverseGreen}   <font color=#8b2a0e>&quot;#122B05&quot;</font> #091900 #e5ffe1 #d7f1d7 #6d3939 #a7cba7 #000 #185818 grey #a94848 #000 #afd3af - #c9e3c9 #000 #FBFB96 #d6e8d5 #a20000 #76b2f1 #005 #006 #007}

{{14: GreenPeace}     <font color=#8b2a0e>&quot;#001000&quot;</font> #001000 #e1ffdd #cfe4cf #733f3f #a5c3a1 #000 #185818 grey #af4e4e #000 #9cb694 - #c1dbc1 #000 #FBFB96 #d2e1d2 #a20000 #76b2f1 #005 #006 #007}

{{15: African}        <font color=#8b2a0e>&quot;#000000&quot;</font> #000000 #ffffff #ffffe7 #8a4444 #ffd797 #000 #682800 #7e7e7e #a44a2d #000 #f7bf91 - #e7e7cf #000 #fbfb74 #ededd5 #a20000 #76b2f1 #005 #006 #007}

{{16: African1}       <font color=#8b2a0e>&quot;#000000&quot;</font> #000000 #ffffff #ebebd3 #8a4444 #ebc383 #000 #682800 #7e7e7e #9d4326 #000 #f7bf91 - #dbdbc3 #000 #fbfb74 #ededd5 #a20000 #76b2f1 #005 #006 #007}

{{17: African2}       <font color=#8b2a0e>&quot;#000000&quot;</font> #000000 #f7f7dc #dedbb4 #8e4848 #f2b482 #000 #682800 grey #9f4528 #000 #e6ae80 - #ccc9a2 #000 #fbfb74 #e7e7cb #a20000 #76b2f1 #005 #006 #007}

{{18: African3}       <font color=#8b2a0e>&quot;#000000&quot;</font> #000000 #e2deb5 #ccc9a6 #813b3b #e1a97b #000 #682800 grey #a44a2d #000 #e6ae80 - #bbb895 #000 #fbfb74 #c9c9b0 #c10000 #76b2f1 #005 #006 #007}

{{19: Notebook}       <font color=#8b2a0e>&quot;#000000&quot;</font> #000000 #e9e1c8 #d2ccb8 #692323 #d59d6f #000 #682800 #7e7e7e #92381b #000 #c09c77 - #dbd5c1 #000 #eded89 #dad2b9 #a20000 #76b2f1 #005 #006 #007}

{{20: Notebook1}      <font color=#8b2a0e>&quot;#000000&quot;</font> #000000 #dad2b9 #bfb9a5 #692323 #d59d6f #000 #682800 #707070 #92381b #000 #ba9671 - #c5bfab #000 #eded89 #ccc4ab #a20000 #76b2f1 #005 #006 #007}

{{21: Notebook2}      <font color=#8b2a0e>&quot;#000000&quot;</font> #000000 #d1c9b0 #b1ab97 #692323 #d59d6f #000 #682800 #606060 #92381b #000 #c38b5d - #bdb7a3 #000 #e3e37f #c1b9a0 #980000 #76b2f1 #005 #006 #007}

{{22: Notebook3}      <font color=#8b2a0e>&quot;#000000&quot;</font> #000000 #c2baa1 #a6a08c #793333 #cb9365 #000 #682800 #505050 #973d20 #000 #d59d6f - #b3ad99 #000 #dada76 #b2aa91 #7b1010 #76b2f1 #005 #006 #007}

{{23: Dusk}           <font color=#8b2a0e>&quot;#ececec&quot;</font> #ececec #1a1f21 #262b2d #90afca #4a6984 #FFF #f4f49f #585d5f #7897b2 #fff #41607b - #363b3d #000 #9d9d60 #23282a #ffc341 #8cabc6 #005 #006 #007}

{{24: SunValleyDeep} <font color=#8b2a0e>&quot;#dfdfdf&quot;</font> #dddddd #131313 #323232 #aae2ff #2a627f #FFF #f4f49f #6f6f6f #7db5d2 #fff #245c79 - #3e3e3e #000 #9d9d60 #2a2a2a #efaf6f #4273eb #005 #006 #007}

{{25: AwDark}         <font color=#8b2a0e>&quot;#F0E8E8&quot;</font> #E7E7E7 #1f2223 #232829 #77b3f2 #215d9c #fff #f4f49f grey #5793d2 #fff #0d4988 - #313637 #000 #9d9d60 #292e2f #ffc341 #76b2f1 #005 #006 #007}

{{26: AzureDark}      <font color=#8b2a0e>&quot;#ececec&quot;</font> #c7c7c7 #272727 #393939 #56d5ff #0a89c1 #FFF #f4f49f grey #36b5ed #ffffff #0069a1 - #4a4a4a #000 #aaaa6d #383838 #ffc341 #76b2f1 #005 #006 #007}

{{27: ForestDark}     <font color=#8b2a0e>&quot;#ececec&quot;</font> #c7c7c7 #272727 #393939 #a3cda3 #217346 #FFF #42ff42 grey #84ae84 #fff #247649 - #4a4a4a #000 #aaaa6d #383838 #efaf6f #99dd99 #005 #006 #007}

{{28: SunValleyDark} <font color=#8b2a0e>&quot;#ececec&quot;</font> #c7c7c7 #272727 #323232 #aae2ff #2a627f #fff #f4f49f grey #7cb4d1 #fff #245c79 - #444444 #000 #aaaa6d #343434 #ffc341 #76b2f1 #005 #006 #007}

{{29: DarkBrown}      <font color=#8b2a0e>&quot;#e0e0e0&quot;</font> #e0e0e0 #171717 #232323 #de9e5e #6d4d29 #fff #f4f49f #616161 #aa7d3d #dfdfdf #62421e - #303030 #000 #9d9d60 #292929 #ffc341 #76b2f1 #005 #006 #007}

{{30: Dark1}          <font color=#8b2a0e>&quot;#E0D9D9&quot;</font> #C4C4C4 #212121 #292929 #de9e5e #6c6c6c #fff #f4f49f #606060 #ba8d4d #000 #767676 - #363636 #000 #9d9d60 #292929 #ffc341 #76b2f1 #005 #006 #007}

{{31: Dark2}          <font color=#8b2a0e>&quot;#bebebe&quot;</font> #bebebe #1f1f1f #262626 #de9e5e #6b6b6b #fff #f4f49f #616161 #b28545 #000 #767676 - #323232 #000 #9d9d60 #262626 #ffc341 #76b2f1 #005 #006 #007}

{{32: Oscuro}         <font color=#8b2a0e>&quot;#f1f1f1&quot;</font> #ffffff #314242 #3e5959 #f1b479 #6c8787 #fff #42ff42 #afafaf #d3a051 #fff #5b7676 - #4d6868 #000 #aaaa6d #425353 #ffc341 #94e2b8 #005 #006 #007}

{{33: Oscuro1}        <font color=#8b2a0e>&quot;#e3e3e3&quot;</font> #f7f7f7 #233434 #304b4b #e3a66b #5e7979 #fff #42ff42 #a1a1a1 #d6a354 #fff #4e6969 - #3f5a5a #000 #aaaa6d #344545 #ffcb8b #86d4aa #005 #006 #007}

{{34: Oscuro2}        <font color=#8b2a0e>&quot;#d5d5d5&quot;</font> #f1f1f1 #152626 #223d3d #d5985d #506b6b #fff #42ff42 #939393 #c69344 #fff #435e5e - #314c4c #000 #9d9d60 #263737 #ffc585 #78c69c #005 #006 #007}

{{35: Oscuro3}        <font color=#8b2a0e>&quot;#c7c7c7&quot;</font> #eaeaea #071818 #142f2f #dfa267 #425d5d #fff #42ff42 #858585 #ba8738 #fff #324d4d - #233e3e #000 #9d9d60 #182929 #e9ae6e #6ab88e #005 #006 #007}

{{36: MildDark}       <font color=#8b2a0e>&quot;#d2d2d2&quot;</font> #ffffff #223142 #2D435B #3ddbdb #517997 #fff #00ffff grey #18b6b6 #fff #3e6684 - #3a5068 #000 #aaaa6d #324152 #ffc341 #76b2f1 #005 #006 #007}

{{37: MildDark1}      <font color=#8b2a0e>&quot;#c8c8c8&quot;</font> #f7f7f7 #1a2937 #24384f #3cdada #466e8c #fff #00ffff #757575 #19b7b7 #fff #3a6280 - #31455c #000 #aaaa6d #2b3a48 #f1b171 #76b2f1 #005 #006 #007}

{{38: MildDark2}      <font color=#8b2a0e>&quot;#e2e2e2&quot;</font> #f1f1f1 #0e1d2c #1B3048 #3edddd #426a88 #fff #00ffff #6c6c6c #0ba9a9 #fff #355d7b - #2a3f57 #000 #9d9d60 #1d2c3b #f4b474 #76b2f1 #005 #006 #007}

{{39: MildDark3}      <font color=#8b2a0e>&quot;#dbdbdb&quot;</font> #eaeaea #000c1b #031830 #35d4d4 #375f7d #fff #00ffff #6c6c6c #019f9f #fff #2f5775 - #162b43 #000 #9d9d60 #0a1f37 #e5a565 #76b2f1 #005 #006 #007}

{{40: Inkpot}         <font color=#8b2a0e>&quot;#d3d3ff&quot;</font> #AFC2FF #16161f #1E1E27 #e39f51 #525293 #fff #f4f49f #6e6e6e #b57535 #fff #4d4d8e - #292936 #000 #9d9d60 #202029 #e7b070 #7a7abb #005 #006 #007}

{{41: Quiverly}       <font color=#8b2a0e>&quot;#cdd8d8&quot;</font> #cdd8d8 #2b303b #333946 #69daff #2a627f #fff #f4f49f #757575 #46b7ee #fff #306885 - #414650 #000 #aaaa6d #323742 #ffc341 #76b2f1 #005 #006 #007}

{{42: Monokai}        <font color=#8b2a0e>&quot;#f8f8f2&quot;</font> #f8f8f2 #353630 #4e5044 #ffbb6d #707070 #fff #f4f49f #9a9a9a #db9e63 #000 #777777 - #46473d #000 #b7b77a #3c3d37 #ffc888 #cd994b #005 #006 #007}

{{43: TKE Default}    <font color=#8b2a0e>&quot;#dbdbdb&quot;</font> #dbdbdb #000000 #282828 #d3a85a #0a0acc #fff #f4f49f #6a6a6a #c58545 #fff #0000d3 - #383838 #000 #9d9d60 #1b1c1c #e5a565 #76b2f1 #005 #006 #007}

{{44: Magenta}        <font color=#8b2a0e>&quot;#E8E8E8&quot;</font> #F0E8E8 #381e44 #4A2A4A #ffbb6d #846484 #fff #f4f49f grey #d6995e #000 #ad8dad - #573757 #000 #9d9d60 #42284e #ffc888 #ffafff #005 #006 #007}

{{45: Red}            <font color=#8b2a0e>&quot;#ffffff&quot;</font> #e9e9e6 #340202 #440702 #ffbb6d #b05e5e #fff #f4f49f #828282 #ce9156 #000 #ba6868 - #521514 #000 #9d9d60 #461414 #ffcf8f #ff9a9a #005 #006 #007}

{{46: Chocolate}      <font color=#8b2a0e>&quot;#d6d1ab&quot;</font> #d6d1ab #251919 #402020 #ebb474 #664D4D #fff #f4f49f #828282 #c08040 #fff #583f3f - #432a2a #000 #aaaa6d #2d2121 #eeb777 #cf9292 #005 #006 #007}

{{47: Desert}         <font color=#8b2a0e>&quot;#ffffff&quot;</font> #ffffff #47382d #5a4b40 #ffbb6d #85766b #fff #f4f49f #a2a2a2 #d4975c #fff #7f7065 - #695a4f #000 #aaaa6d #503f34 #ffc341 #ead79b #005 #006 #007}
}

  <b><font color=#3a6797>set</font></b> ::apave::_CS_(STDCS) [<b><font color=#3a6797>expr</font></b> {[<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$::apave::_CS_(ALL)</font>] - 1}]

}
<a id=Common_procs></a>
<i><font color=#4b5d50># _____________________________ Common procs ________________________________ #</font></i>
<a id=apave::mc></a>
  <b><font color=#ca14ca>proc</font></b> ::apave::mc {msg} {
    <i><font color=#4b5d50># Gets a localized version of a message.</font></i>
    <i><font color=#4b5d50>#   msg - the message</font></i>

    <b><font color=#3a6797>variable</font></b> _MC_
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists _MC_(<font color=#1b1baa>$msg</font>)]} {<b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$_MC_($msg)</font>}
    <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$msg</font>
  }
<a id=Inits></a>
<i><font color=#4b5d50>## ________________________ Inits _________________________ ##</font></i>
<a id=apave::initWM></a>
<b><font color=#ca14ca>proc</font></b> ::apave::initWM {args} {
  <i><font color=#4b5d50># Initializes Tcl/Tk session. Used to be called at the beginning of it.</font></i>
  <i><font color=#4b5d50>#   args - options (&quot;name value&quot; pairs)</font></i>
  <i><font color=#4b5d50># If args eq &quot;?&quot;, return a flag &quot;need to call initWM&quot;</font></i>

  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$args</font> eq {?}} {<b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(initWM)</font>}
  <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$::apave::_CS_(initWM)</font>} <b><font color=#ca14ca>return</font></b>
  ::apave::withdraw .
  ::apave::place . 0 0 center
  <b><font color=#3a6797>lassign</font></b> [parseOptions <font color=#1b1baa>$args</font> <font color=#653760>-cursorwidth</font> <font color=#1b1baa>$::apave::cursorwidth</font> <font color=#653760>-theme</font> default \
    <font color=#653760>-buttonwidth</font> -8 <font color=#653760>-buttonborder</font> 1 <font color=#653760>-labelborder</font> 0 <font color=#653760>-padding</font> 1 <font color=#653760>-cs</font> -2 <font color=#653760>-isbaltip</font> yes] \
    cursorwidth theme butwidth butborder labborder padding cs ::apave::ISBALTIP
  initBaltip
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$theme</font> eq {}} {<b><font color=#3a6797>set</font></b> theme default}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$cs</font>&lt;-2 || <font color=#1b1baa>$cs</font>&gt;47} {<b><font color=#3a6797>set</font></b> cs -2}
  <b><font color=#3a6797>set</font></b> ::apave::_CS_(initWM) 0
  <b><font color=#3a6797>set</font></b> ::apave::_CS_(CURSORWIDTH) <font color=#1b1baa>$cursorwidth</font>
  <b><font color=#3a6797>set</font></b> ::apave::_CS_(LABELBORDER) <font color=#1b1baa>$labborder</font>
  <i><font color=#4b5d50># for default theme: only most common settings</font></i>
  <b><font color=#3a6797>set</font></b> tfg1 <font color=#1b1baa>$::apave::_CS_(!FG)</font>
  <b><font color=#3a6797>set</font></b> tbg1 <font color=#1b1baa>$::apave::_CS_(!BG)</font>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$theme</font> ne {} && [<b><font color=#3a6797>catch</font></b> {<b><font color=#134070>ttk::style</font></b> theme use <font color=#1b1baa>$theme</font>}]} {
    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>ttk::style</font></b> theme use default}
  }
  <b><font color=#134070>ttk::style</font></b> map . \
    <font color=#653760>-selectforeground</font> [<b><font color=#3a6797>list</font></b> !focus <font color=#1b1baa>$tfg1</font> {<b><font color=#134070>focus</font></b> active} <font color=#1b1baa>$tfg1</font>] \
    <font color=#653760>-selectbackground</font> [<b><font color=#3a6797>list</font></b> !focus <font color=#1b1baa>$tbg1</font> {<b><font color=#134070>focus</font></b> active} <font color=#1b1baa>$tbg1</font>]
  <b><font color=#134070>ttk::style</font></b> configure . <font color=#653760>-selectforeground</font>	<font color=#1b1baa>$tfg1</font> <font color=#653760>-selectbackground</font>	<font color=#1b1baa>$tbg1</font>

  <i><font color=#4b5d50># configure separate widget types</font></i>
  <b><font color=#134070>ttk::style</font></b> configure TButton <font color=#653760>-anchor</font> center <font color=#653760>-width</font> <font color=#1b1baa>$butwidth</font> \
    <font color=#653760>-relief</font> raised <font color=#653760>-borderwidth</font> <font color=#1b1baa>$butborder</font> <font color=#653760>-padding</font> <font color=#1b1baa>$padding</font>
  <b><font color=#134070>ttk::style</font></b> configure TMenubutton <font color=#653760>-width</font> 0 <font color=#653760>-padding</font> 0
  <i><font color=#4b5d50># TLabel's standard style saved for occasional uses</font></i>
  initStyle TLabelSTD TLabel <font color=#653760>-anchor</font> w
  <i><font color=#4b5d50># ... TLabel new style</font></i>
  <b><font color=#134070>ttk::style</font></b> configure TLabel <font color=#653760>-borderwidth</font> <font color=#1b1baa>$labborder</font> <font color=#653760>-padding</font> <font color=#1b1baa>$padding</font>
  <i><font color=#4b5d50># ... Treeview colors</font></i>
  <b><font color=#3a6797>set</font></b> twfg [<b><font color=#134070>ttk::style</font></b> map Treeview <font color=#653760>-foreground</font>]
  <b><font color=#3a6797>set</font></b> twfg [putOption selected <font color=#1b1baa>$tfg1</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$twfg</font>]
  <b><font color=#3a6797>set</font></b> twbg [<b><font color=#134070>ttk::style</font></b> map Treeview <font color=#653760>-background</font>]
  <b><font color=#3a6797>set</font></b> twbg [putOption selected <font color=#1b1baa>$tbg1</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$twbg</font>]
  <b><font color=#134070>ttk::style</font></b> map Treeview <font color=#653760>-foreground</font> <font color=#1b1baa>$twfg</font>
  <b><font color=#134070>ttk::style</font></b> map Treeview <font color=#653760>-background</font> <font color=#1b1baa>$twbg</font>
  <i><font color=#4b5d50># ... TCombobox colors</font></i>
  <b><font color=#134070>ttk::style</font></b> map TCombobox <font color=#653760>-fieldforeground</font> [<b><font color=#3a6797>list</font></b> {active focus} <font color=#1b1baa>$tfg1</font> readonly <font color=#1b1baa>$tfg1</font> disabled grey]
  <b><font color=#134070>ttk::style</font></b> map TCombobox <font color=#653760>-fieldbackground</font> [<b><font color=#3a6797>list</font></b> {active focus} <font color=#1b1baa>$tbg1</font> {readonly focus} <font color=#1b1baa>$tbg1</font> {readonly !focus} white]
  initStyles
  initPOP .
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$cs</font>!=-2} {obj csSet <font color=#1b1baa>$cs</font>}
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::endWM></a>
<b><font color=#ca14ca>proc</font></b> ::apave::endWM {args} {
  <i><font color=#4b5d50># Finishes the window management by apave, closing and clearing all.</font></i>
  <i><font color=#4b5d50>#   args - if any set, means &quot;ask if apave's WM is finished&quot;</font></i>

  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$args</font>]} {<b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>info</font></b> exists ::apave::_CS_(endWM)]}
  <b><font color=#3a6797>set</font></b> ::apave::_CS_(endWM) yes
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::initPOP></a>
<b><font color=#ca14ca>proc</font></b> ::apave::initPOP {w} {
  <i><font color=#4b5d50># Initializes system popup menu (if possible) to call it in a window.</font></i>
  <i><font color=#4b5d50>#   w - window's name</font></i>

  <b><font color=#134070>bind</font></b> <font color=#1b1baa>$w</font> &lt;KeyPress&gt; {
    <b><font color=#3a6797>if</font></b> {<font color=#8b2a0e>&quot;%K&quot;</font> eq <font color=#8b2a0e>&quot;Menu&quot;</font>} {
      <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>winfo</font></b> exists [<b><font color=#3a6797>set</font></b> w [<b><font color=#134070>focus</font></b>]]]} {
        <b><font color=#134070>event</font></b> generate <font color=#1b1baa>$w</font> &lt;Button-3&gt; <font color=#653760>-rootx</font> [<b><font color=#134070>winfo</font></b> pointerx .] \
         <font color=#653760>-rooty</font> [<b><font color=#134070>winfo</font></b> pointery .]
      }
    }
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::ttkToolbutton></a>
<b><font color=#ca14ca>proc</font></b> ::apave::ttkToolbutton {} {
  <i><font color=#4b5d50># Initializes Toolbutton's style, depending on CS.</font></i>
  <i><font color=#4b5d50># Creates also btt / brt / blt widget types to be paved,</font></i>
  <i><font color=#4b5d50># with images top / right / left accordingly.</font></i>

  <b><font color=#3a6797>lassign</font></b> [obj csGet] fg1 - bg1
  <b><font color=#134070>ttk::style</font></b> map Toolbutton {<b><font color=#3a6797>*</font></b>}[<b><font color=#3a6797>dict</font></b> replace [<b><font color=#134070>ttk::style</font></b> map Toolbutton] \
    <font color=#653760>-foreground</font> <font color=#8b2a0e>&quot;pressed <font color=#1b1baa>$</font>fg1 active <font color=#1b1baa>$</font>fg1&quot;</font> <font color=#653760>-background</font> <font color=#8b2a0e>&quot;pressed <font color=#1b1baa>$</font>bg1 active <font color=#1b1baa>$</font>bg1&quot;</font>]
  defaultAttrs btt {} {<font color=#653760>-style</font> Toolbutton <font color=#653760>-compound</font> top <font color=#653760>-takefocus</font> 0} <b><font color=#134070>ttk::button</font></b>
  defaultAttrs brt {} {<font color=#653760>-style</font> Toolbutton <font color=#653760>-compound</font> right <font color=#653760>-takefocus</font> 0} <b><font color=#134070>ttk::button</font></b>
  defaultAttrs blt {} {<font color=#653760>-style</font> Toolbutton <font color=#653760>-compound</font> left <font color=#653760>-takefocus</font> 0} <b><font color=#134070>ttk::button</font></b>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::initStyle></a>
<b><font color=#ca14ca>proc</font></b> ::apave::initStyle {wt wbase args} {
  <i><font color=#4b5d50># Initializes a style for a widget type, e.g. button's.</font></i>
  <i><font color=#4b5d50>#   wt - target widget type</font></i>
  <i><font color=#4b5d50>#   wbase - base widget type</font></i>
  <i><font color=#4b5d50>#   args - options of the style</font></i>

  <b><font color=#134070>ttk::style</font></b> configure <font color=#1b1baa>$wt</font> {<b><font color=#3a6797>*</font></b>}[<b><font color=#134070>ttk::style</font></b> configure <font color=#1b1baa>$wbase</font>]
  <b><font color=#134070>ttk::style</font></b> configure <font color=#1b1baa>$wt</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
  <b><font color=#134070>ttk::style</font></b> map       <font color=#1b1baa>$wt</font> {<b><font color=#3a6797>*</font></b>}[<b><font color=#134070>ttk::style</font></b> map <font color=#1b1baa>$wbase</font>]
  <b><font color=#134070>ttk::style</font></b> layout    <font color=#1b1baa>$wt</font> [<b><font color=#134070>ttk::style</font></b> layout <font color=#1b1baa>$wbase</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::initStyles></a>
<b><font color=#ca14ca>proc</font></b> ::apave::initStyles {} {
  <i><font color=#4b5d50># Initializes miscellaneous styles, e.g. button's.</font></i>

  obj create_Fonts
  initStyle TButtonWest TButton <font color=#653760>-anchor</font> w <font color=#653760>-font</font> <font color=#1b1baa>$::apave::FONTMAIN</font>
  initStyle TButtonBold TButton <font color=#653760>-font</font> <font color=#1b1baa>$::apave::FONTMAINBOLD</font>
  initStyle TButtonWestBold TButton <font color=#653760>-anchor</font> w <font color=#653760>-font</font> <font color=#1b1baa>$::apave::FONTMAINBOLD</font>
  initStyle TButtonWestHL TButton <font color=#653760>-anchor</font> w <font color=#653760>-foreground</font> [<b><font color=#3a6797>lindex</font></b> [obj csGet] 4]
  initStyle TMenuButtonWest TMenubutton <font color=#653760>-anchor</font> w <font color=#653760>-font</font> <font color=#1b1baa>$::apave::FONTMAIN</font> <font color=#653760>-relief</font> raised
  initStyle TreeNoHL Treeview <font color=#653760>-borderwidth</font> 0
  <b><font color=#3a6797>lassign</font></b> [obj csGet] - - - - thlp tbgS tfgS - - bclr
  <b><font color=#134070>ttk::style</font></b> map TreeNoHL {<b><font color=#3a6797>*</font></b>}[<b><font color=#134070>ttk::style</font></b> map Treeview] \
    <font color=#653760>-foreground</font> [<b><font color=#3a6797>list</font></b> {selected focus} <font color=#1b1baa>$tfgS</font> {selected !focus} <font color=#1b1baa>$tfgS</font>] \
    <font color=#653760>-background</font> [<b><font color=#3a6797>list</font></b> {selected focus} <font color=#1b1baa>$tbgS</font> {selected !focus} <font color=#1b1baa>$tbgS</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::initStylesFS></a>
<b><font color=#ca14ca>proc</font></b> ::apave::initStylesFS {args} {
  <i><font color=#4b5d50># Initializes miscellaneous styles, e.g. button's.</font></i>
  <i><font color=#4b5d50>#   args - font options (&quot;name value&quot; pairs)</font></i>

  ::apave::obj create_Fonts
  <b><font color=#3a6797>set</font></b> font  <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>::apave::FONTMAIN <font color=#1b1baa>$</font>args&quot;</font>
  <b><font color=#3a6797>set</font></b> fontB <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>::apave::FONTMAINBOLD <font color=#1b1baa>$</font>args&quot;</font>

  initStyle TLabelFS TLabel <font color=#653760>-font</font> <font color=#1b1baa>$font</font>
  initStyle TCheckbuttonFS TCheckbutton <font color=#653760>-font</font> <font color=#1b1baa>$font</font>
  initStyle TComboboxFS TCombobox <font color=#653760>-font</font> <font color=#1b1baa>$font</font>
  initStyle TRadiobuttonFS TRadiobutton <font color=#653760>-font</font> <font color=#1b1baa>$font</font>
  initStyle TButtonWestFS TButton <font color=#653760>-anchor</font> w <font color=#653760>-font</font> <font color=#1b1baa>$font</font>
  initStyle TButtonBoldFS TButton <font color=#653760>-font</font> <font color=#1b1baa>$fontB</font>
  initStyle TButtonWestBoldFS TButton <font color=#653760>-anchor</font> w <font color=#653760>-font</font> <font color=#1b1baa>$fontB</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::InitAwThemesPath></a>
<b><font color=#ca14ca>proc</font></b> ::apave::InitAwThemesPath {libdir} {
  <i><font color=#4b5d50># Initializes the path to awthemes package.</font></i>
  <i><font color=#4b5d50>#   libdir - root directory of themes (where 'theme' subdirectory is)</font></i>

  <b><font color=#3a6797>global</font></b> auto_path
  <b><font color=#3a6797>set</font></b> awpath [<b><font color=#3a6797>file</font></b> join <font color=#1b1baa>$libdir</font> theme awthemes-10.4.0]
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$auto_path</font> 0] ne <font color=#1b1baa>$awpath</font>} {
    <b><font color=#3a6797>set</font></b> auto_path [<b><font color=#3a6797>linsert</font></b> <font color=#1b1baa>$auto_path</font> 0 <font color=#1b1baa>$awpath</font>]
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::InitTheme></a>
<b><font color=#ca14ca>proc</font></b> ::apave::InitTheme {intheme libdir} {
  <i><font color=#4b5d50># Initializes app's theme.</font></i>
  <i><font color=#4b5d50>#   intheme - name of the theme</font></i>
  <i><font color=#4b5d50>#   libdir - root directory of themes (where 'theme' subdirectory is)</font></i>
  <i><font color=#4b5d50># Returns a list of theme name and label's border (for status bar).</font></i>
  <i><font color=#4b5d50># The returned values are used in ::apave::initWM procedure.</font></i>

  <b><font color=#3a6797>set</font></b> theme {}
  <b><font color=#3a6797>switch</font></b> <font color=#653760>-glob</font> -- <font color=#1b1baa>$intheme</font> {
    azure* - sun-valley* {
      <b><font color=#3a6797>set</font></b> i [<b><font color=#3a6797>string</font></b> last - <font color=#1b1baa>$intheme</font>]
      <b><font color=#3a6797>set</font></b> name [<b><font color=#3a6797>string</font></b> range <font color=#1b1baa>$intheme</font> 0 <font color=#1b1baa>$i</font>-1]
      <b><font color=#3a6797>set</font></b> type [<b><font color=#3a6797>string</font></b> range <font color=#1b1baa>$intheme</font> <font color=#1b1baa>$i</font>+1 end]
      <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>source</font></b> [<b><font color=#3a6797>file</font></b> join <font color=#1b1baa>$libdir</font> theme <font color=#1b1baa>$name</font> <font color=#1b1baa>$name</font>.tcl]}
      <b><font color=#3a6797>catch</font></b> {
        set_theme <font color=#1b1baa>$type</font>
        <b><font color=#3a6797>set</font></b> theme <font color=#1b1baa>$intheme</font>
      }
      <b><font color=#3a6797>set</font></b> lbd 0
    }
    forest* {
      <b><font color=#3a6797>set</font></b> i [<b><font color=#3a6797>string</font></b> last - <font color=#1b1baa>$intheme</font>]
      <b><font color=#3a6797>set</font></b> name [<b><font color=#3a6797>string</font></b> range <font color=#1b1baa>$intheme</font> 0 <font color=#1b1baa>$i</font>-1]
      <b><font color=#3a6797>set</font></b> type [<b><font color=#3a6797>string</font></b> range <font color=#1b1baa>$intheme</font> <font color=#1b1baa>$i</font>+1 end]
      <b><font color=#3a6797>catch</font></b> {
        <b><font color=#3a6797>source</font></b> [<b><font color=#3a6797>file</font></b> join <font color=#1b1baa>$libdir</font> theme <font color=#1b1baa>$name</font> <font color=#1b1baa>$intheme</font>.tcl]
        <b><font color=#3a6797>set</font></b> theme <font color=#1b1baa>$intheme</font>
      }
      <b><font color=#3a6797>set</font></b> lbd 0
    }
    awdark - awlight {
      <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>package</font></b> forget ttk::theme::<font color=#1b1baa>$intheme</font>}
      <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>namespace</font></b> delete ttk::theme::<font color=#1b1baa>$intheme</font>}
      <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>package</font></b> forget awthemes}
      <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>namespace</font></b> delete awthemes}
      InitAwThemesPath <font color=#1b1baa>$libdir</font>
      <b><font color=#3a6797>package</font></b> require awthemes
      <b><font color=#3a6797>package</font></b> require ttk::theme::<font color=#1b1baa>$intheme</font>
      <b><font color=#3a6797>set</font></b> theme <font color=#1b1baa>$intheme</font>
      <b><font color=#3a6797>set</font></b> lbd 1
    }
    plastik - lightbrown - darkbrown {
      <b><font color=#3a6797>set</font></b> path [<b><font color=#3a6797>file</font></b> join <font color=#1b1baa>$libdir</font> theme <font color=#1b1baa>$intheme</font>]
      <b><font color=#3a6797>source</font></b> [<b><font color=#3a6797>file</font></b> join <font color=#1b1baa>$path</font> <font color=#1b1baa>$intheme</font>.tcl]
      <b><font color=#3a6797>set</font></b> theme <font color=#1b1baa>$intheme</font>
      <b><font color=#3a6797>set</font></b> lbd 1
    }
    <b><font color=#3a6797>default</font></b> {
      <b><font color=#3a6797>set</font></b> theme <font color=#1b1baa>$intheme</font>
      <b><font color=#3a6797>set</font></b> lbd 1
    }
  }
  <b><font color=#3a6797>list</font></b> <font color=#1b1baa>$theme</font> <font color=#1b1baa>$lbd</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::iconifyOption></a>
<b><font color=#ca14ca>proc</font></b> ::apave::iconifyOption {args} {
  <i><font color=#4b5d50># Gets/sets &quot;-iconify&quot; option.</font></i>
  <i><font color=#4b5d50>#   args - if contains no arguments, gets &quot;-iconify&quot; option; otherwise sets it</font></i>
  <i><font color=#4b5d50># Option values mean:</font></i>
  <i><font color=#4b5d50>#   none - do nothing: no withdraw/deiconify</font></i>
  <i><font color=#4b5d50>#   Linux - do withdraw/deiconify for Linux</font></i>
  <i><font color=#4b5d50>#   Windows - do withdraw/deiconify for Windows</font></i>
  <i><font color=#4b5d50>#   default - do withdraw/deiconify depending on the platform</font></i>
  <i><font color=#4b5d50># See also: withdraw, deiconify</font></i>

  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$args</font>]} {
    <b><font color=#3a6797>set</font></b> iconify [::apave::obj setShowOption <font color=#653760>-iconify</font> <font color=#1b1baa>$args</font>]
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> iconify [::apave::obj getShowOption <font color=#653760>-iconify</font>]
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$iconify</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::withdraw></a>
<b><font color=#ca14ca>proc</font></b> ::apave::withdraw {w} {
  <i><font color=#4b5d50># Does 'withdraw' for a window.</font></i>
  <i><font color=#4b5d50>#   w - the window's path</font></i>
  <i><font color=#4b5d50># See also: iconifyOption</font></i>

  <b><font color=#3a6797>switch</font></b> -- [iconifyOption] {
    none {          ;<i><font color=#4b5d50> # no withdraw/deiconify actions</font></i>
    }
    Linux {         ;<i><font color=#4b5d50> # do it for Linux</font></i>
      <b><font color=#134070>wm</font></b> withdraw <font color=#1b1baa>$w</font>
    }
    Windows {       ;<i><font color=#4b5d50> # do it for Windows</font></i>
      <b><font color=#134070>wm</font></b> withdraw <font color=#1b1baa>$w</font>
      <b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$w</font> <font color=#653760>-alpha</font> 0.0
    }
    <b><font color=#3a6797>default</font></b> {       ;<i><font color=#4b5d50> # do it depending on the platform</font></i>
      <b><font color=#134070>wm</font></b> withdraw <font color=#1b1baa>$w</font>
      <b><font color=#3a6797>if</font></b> {[::iswindows]} {
        <b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$w</font> <font color=#653760>-alpha</font> 0.0
      }
    }
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::deiconify></a>
<b><font color=#ca14ca>proc</font></b> ::apave::deiconify {w} {
  <i><font color=#4b5d50># Does 'deiconify' for a window.</font></i>
  <i><font color=#4b5d50>#   w - the window's path</font></i>
  <i><font color=#4b5d50># See also: iconifyOption</font></i>

  <b><font color=#3a6797>switch</font></b> -- [iconifyOption] {
    none {          ;<i><font color=#4b5d50> # no withdraw/deiconify actions</font></i>
    }
    Linux {         ;<i><font color=#4b5d50> # do it for Linux</font></i>
      <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>wm</font></b> deiconify <font color=#1b1baa>$w</font> ; <b><font color=#134070>raise</font></b> <font color=#1b1baa>$w</font>}
    }
    Windows {       ;<i><font color=#4b5d50> # do it for Windows</font></i>
      <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$w</font> <font color=#653760>-alpha</font>] &lt; 0.1} {<b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$w</font> <font color=#653760>-alpha</font> 1.0}
      <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>wm</font></b> deiconify <font color=#1b1baa>$w</font> ; <b><font color=#134070>raise</font></b> <font color=#1b1baa>$w</font>}
    }
    <b><font color=#3a6797>default</font></b> {       ;<i><font color=#4b5d50> # do it depending on the platform</font></i>
      <b><font color=#3a6797>if</font></b> {[::iswindows]} {
        <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$w</font> <font color=#653760>-alpha</font>] &lt; 0.1} {<b><font color=#134070>wm</font></b> attributes <font color=#1b1baa>$w</font> <font color=#653760>-alpha</font> 1.0}
      }
      <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>wm</font></b> deiconify <font color=#1b1baa>$w</font> ; <b><font color=#134070>raise</font></b> <font color=#1b1baa>$w</font>}
    }
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::cs_Active></a>
<b><font color=#ca14ca>proc</font></b> ::apave::cs_Active {{flag <font color=#8b2a0e>&quot;&quot;</font>}} {
  <i><font color=#4b5d50># Gets/sets &quot;is changing CS possible&quot; flag for a whole application.</font></i>

  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>string</font></b> is boolean <font color=#653760>-strict</font> <font color=#1b1baa>$flag</font>]} {
    <b><font color=#3a6797>set</font></b> ::apave::_CS_(isActive) <font color=#1b1baa>$flag</font>
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(isActive)</font>
}
<a id=Property></a>
<i><font color=#4b5d50>## ________________________ Property _________________________ ##</font></i>
<a id=apave::setProperty></a>
<b><font color=#ca14ca>proc</font></b> ::apave::setProperty {name args} {
  <i><font color=#4b5d50># Sets a property's value as &quot;application-wide&quot;.</font></i>
  <i><font color=#4b5d50>#   name - name of property</font></i>
  <i><font color=#4b5d50>#   args - value of property</font></i>
  <i><font color=#4b5d50># If *args* is omitted, the method returns a property's value.</font></i>
  <i><font color=#4b5d50># If *args* is set, the method sets a property's value as $args.</font></i>

  <b><font color=#3a6797>variable</font></b> _AP_Properties
  <b><font color=#3a6797>switch</font></b> <font color=#653760>-exact</font> [<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$args</font>] {
    0 {<b><font color=#ca14ca>return</font></b> [getProperty <font color=#1b1baa>$name</font>]}
    1 {<b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>set</font></b> _AP_Properties(<font color=#1b1baa>$name</font>) [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$args</font> 0]]}
  }
  <b><font color=#3a6797>puts</font></b> <font color=#653760>-nonewline</font> stderr \
    <font color=#8b2a0e>&quot;Wrong # args: should be \&quot;::apave::setProperty propertyname ?value?\&quot;&quot;</font>
  <b><font color=#ca14ca>return</font></b> <font color=#653760>-code</font> error
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::getProperty></a>
<b><font color=#ca14ca>proc</font></b> ::apave::getProperty {name {defvalue <font color=#8b2a0e>&quot;&quot;</font>}} {
  <i><font color=#4b5d50># Gets a property's value as &quot;application-wide&quot;.</font></i>
  <i><font color=#4b5d50>#   name - name of property</font></i>
  <i><font color=#4b5d50>#   defvalue - default value</font></i>
  <i><font color=#4b5d50># If the property had been set, the method returns its value.</font></i>
  <i><font color=#4b5d50># Otherwise, the method returns the default value (`$defvalue`).</font></i>

  <b><font color=#3a6797>variable</font></b> _AP_Properties
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists _AP_Properties(<font color=#1b1baa>$name</font>)]} {
    <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$_AP_Properties($name)</font>
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$defvalue</font>
}
<a id=CS_procs></a>
<i><font color=#4b5d50>## ________________________ CS procs _________________________ ##</font></i>
<a id=apave::cs_Non></a>
<b><font color=#ca14ca>proc</font></b> ::apave::cs_Non {} {
  <i><font color=#4b5d50># Gets non-existent CS index</font></i>

  <b><font color=#ca14ca>return</font></b> -3
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::cs_Min></a>
<b><font color=#ca14ca>proc</font></b> ::apave::cs_Min {} {
  <i><font color=#4b5d50># Gets a minimum index of available color schemes</font></i>

  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(MINCS)</font>
}
<a id=apave::cs_Max></a>
<b><font color=#ca14ca>proc</font></b> ::apave::cs_Max {} {
  <i><font color=#4b5d50># Gets a maximum index of available color schemes</font></i>

  <b><font color=#3a6797>expr</font></b> {[<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$::apave::_CS_(ALL)</font>] - 1}
}
<a id=apave::cs_MaxBasic></a>
<b><font color=#ca14ca>proc</font></b> ::apave::cs_MaxBasic {} {
  <i><font color=#4b5d50># Gets a maximum index of basic color schemes</font></i>

  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(STDCS)</font>
}
<a id=Opfions></a>
<i><font color=#4b5d50>## ________________________ Opfions _________________________ ##</font></i>
<a id=apave::parseOptionsFile></a>
<b><font color=#ca14ca>proc</font></b> ::apave::parseOptionsFile {strict inpargs args} {
  <i><font color=#4b5d50># Parses argument list containing options and (possibly) a file name.</font></i>
  <i><font color=#4b5d50>#   strict - if 0, 'args' options will be only counted for,</font></i>
  <i><font color=#4b5d50>#              other options are skipped</font></i>
  <i><font color=#4b5d50>#   strict - if 1, only 'args' options are allowed,</font></i>
  <i><font color=#4b5d50>#              all the rest of inpargs to be a file name</font></i>
  <i><font color=#4b5d50>#          - if 2, the 'args' options replace the</font></i>
  <i><font color=#4b5d50>#              appropriate options of 'inpargs'</font></i>
  <i><font color=#4b5d50>#   inpargs - list of options, values and a file name</font></i>
  <i><font color=#4b5d50>#   args  - list of default options</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># The inpargs list contains:</font></i>
  <i><font color=#4b5d50>#   - option names beginning with &quot;-&quot;</font></i>
  <i><font color=#4b5d50>#   - option values following their names (may be missing)</font></i>
  <i><font color=#4b5d50>#   - &quot;--&quot; denoting the end of options</font></i>
  <i><font color=#4b5d50>#   - file name following the options (may be missing)</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># The *args* parameter contains the pairs:</font></i>
  <i><font color=#4b5d50>#   - option name (e.g., &quot;-dir&quot;)</font></i>
  <i><font color=#4b5d50>#   - option default value</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># If the *args* option value is equal to =NONE=, the *inpargs* option</font></i>
  <i><font color=#4b5d50># is considered to be a single option without a value and,</font></i>
  <i><font color=#4b5d50># if present in inpargs, its value is returned as &quot;yes&quot;.</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># If any option of *inpargs* is absent in *args* and strict==1,</font></i>
  <i><font color=#4b5d50># the rest of *inpargs* is considered to be a file name.</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># The proc returns a list of two items:</font></i>
  <i><font color=#4b5d50>#   - an option list got from args/inpargs according to 'strict'</font></i>
  <i><font color=#4b5d50>#   - a file name from inpargs or {} if absent</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># Examples see in tests/obbit.test.</font></i>

  <b><font color=#3a6797>variable</font></b> _PU_opts
  <b><font color=#3a6797>set</font></b> actopts true
  <b><font color=#3a6797>array</font></b> set argarray <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>args yes yes&quot;</font> ;<i><font color=#4b5d50># maybe, tail option without value</font></i>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$strict</font>==2} {
    <b><font color=#3a6797>set</font></b> retlist <font color=#1b1baa>$inpargs</font>
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> retlist <font color=#1b1baa>$args</font>
  }
  <b><font color=#3a6797>set</font></b> retfile {}
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 0} {<font color=#1b1baa>$i</font> &lt; [<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$inpargs</font>]} {<b><font color=#3a6797>incr</font></b> i} {
    <b><font color=#3a6797>set</font></b> parg [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$inpargs</font> <font color=#1b1baa>$i</font>]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$actopts</font>} {
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$parg</font> eq <font color=#8b2a0e>&quot;--&quot;</font>} {
        <b><font color=#3a6797>set</font></b> actopts false
      } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> defval <font color=#1b1baa>$argarray($parg)</font>}]} {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$strict</font>==1} {
          <b><font color=#3a6797>set</font></b> actopts false
          <b><font color=#3a6797>append</font></b> retfile <font color=#1b1baa>$parg</font> <font color=#8b2a0e>&quot; &quot;</font>
        } <b><font color=#3a6797>else</font></b> {
          <b><font color=#3a6797>incr</font></b> i
        }
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$strict</font>==2} {
          <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$defval</font> == <font color=#1b1baa>$_PU_opts(-NONE)</font>} {
            <b><font color=#3a6797>set</font></b> defval yes
          }
          <b><font color=#3a6797>incr</font></b> i
        } <b><font color=#3a6797>else</font></b> {
          <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$defval</font> == <font color=#1b1baa>$_PU_opts(-NONE)</font>} {
            <b><font color=#3a6797>set</font></b> defval yes
          } <b><font color=#3a6797>else</font></b> {
            <b><font color=#3a6797>set</font></b> defval [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$inpargs</font> [<b><font color=#3a6797>incr</font></b> i]]
          }
        }
        <b><font color=#3a6797>set</font></b> ai [<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-exact</font> <font color=#1b1baa>$retlist</font> <font color=#1b1baa>$parg</font>]
        <b><font color=#3a6797>incr</font></b> ai
        <b><font color=#3a6797>set</font></b> retlist [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$retlist</font> <font color=#1b1baa>$ai</font> <font color=#1b1baa>$ai</font> <font color=#1b1baa>$defval</font>]
      }
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>append</font></b> retfile <font color=#1b1baa>$parg</font> <font color=#8b2a0e>&quot; &quot;</font>
    }
  }
  <b><font color=#3a6797>list</font></b> <font color=#1b1baa>$retlist</font> [<b><font color=#3a6797>string</font></b> trimright <font color=#1b1baa>$retfile</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::parseOptions></a>
<b><font color=#ca14ca>proc</font></b> ::apave::parseOptions {opts args} {
  <i><font color=#4b5d50># Parses argument list containing options.</font></i>
  <i><font color=#4b5d50>#  opts - list of options and values</font></i>
  <i><font color=#4b5d50>#  args - list of &quot;option / default value&quot; pairs</font></i>
  <i><font color=#4b5d50># It's the same as parseOptionsFile, excluding the file name stuff.</font></i>
  <i><font color=#4b5d50># Returns a list of options' values, according to args.</font></i>
  <i><font color=#4b5d50># See also: parseOptionsFile</font></i>

  <b><font color=#3a6797>lassign</font></b> [::apave::parseOptionsFile 0 <font color=#1b1baa>$opts</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>] tmp
  <b><font color=#3a6797>foreach</font></b> {nam val} <font color=#1b1baa>$tmp</font> {
    <b><font color=#3a6797>lappend</font></b> retlist <font color=#1b1baa>$val</font>
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$retlist</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::extractOptions></a>
<b><font color=#ca14ca>proc</font></b> ::apave::extractOptions {optsVar args} {
  <i><font color=#4b5d50># Gets options' values and removes the options from the input list.</font></i>
  <i><font color=#4b5d50>#  optsVar - variable name for the list of options and values</font></i>
  <i><font color=#4b5d50>#  args  - list of &quot;option / default value&quot; pairs</font></i>
  <i><font color=#4b5d50># Returns a list of options' values, according to args.</font></i>
  <i><font color=#4b5d50># See also: parseOptions</font></i>

  <b><font color=#3a6797>upvar</font></b> 1 <font color=#1b1baa>$optsVar</font> opts
  <b><font color=#3a6797>set</font></b> retlist [::apave::parseOptions <font color=#1b1baa>$opts</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
  <b><font color=#3a6797>foreach</font></b> {o v} <font color=#1b1baa>$args</font> {
    <b><font color=#3a6797>set</font></b> opts [::apave::removeOptions <font color=#1b1baa>$opts</font> <font color=#1b1baa>$o</font>]
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$retlist</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::getOption></a>
<b><font color=#ca14ca>proc</font></b> ::apave::getOption {optname args} {
  <i><font color=#4b5d50># Extracts one option from an option list.</font></i>
  <i><font color=#4b5d50>#   optname - option name</font></i>
  <i><font color=#4b5d50>#   args - option list</font></i>
  <i><font color=#4b5d50># Returns an option value or &quot;&quot;.</font></i>
  <i><font color=#4b5d50># Example:</font></i>
  <i><font color=#4b5d50>#     set options [list -name some -value &quot;any value&quot; -tip &quot;some tip&quot;]</font></i>
  <i><font color=#4b5d50>#     set optvalue [::apave::getOption -tip {*}$options]</font></i>

  <b><font color=#3a6797>set</font></b> optvalue [<b><font color=#3a6797>lindex</font></b> [::apave::parseOptions <font color=#1b1baa>$args</font> <font color=#1b1baa>$optname</font> <font color=#8b2a0e>&quot;&quot;</font>] 0]
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$optvalue</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::putOption></a>
<b><font color=#ca14ca>proc</font></b> ::apave::putOption {optname optvalue args} {
  <i><font color=#4b5d50># Replaces or adds one option to an option list.</font></i>
  <i><font color=#4b5d50>#   optname - option name</font></i>
  <i><font color=#4b5d50>#   optvalue - option value</font></i>
  <i><font color=#4b5d50>#   args - option list</font></i>
  <i><font color=#4b5d50># Returns an updated option list.</font></i>

  <b><font color=#3a6797>set</font></b> optlist {}
  <b><font color=#3a6797>set</font></b> doadd true
  <b><font color=#3a6797>foreach</font></b> {a v} <font color=#1b1baa>$args</font> {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$a</font> eq <font color=#1b1baa>$optname</font>} {
      <b><font color=#3a6797>set</font></b> v <font color=#1b1baa>$optvalue</font>
      <b><font color=#3a6797>set</font></b> doadd false
    }
    <b><font color=#3a6797>lappend</font></b> optlist <font color=#1b1baa>$a</font> <font color=#1b1baa>$v</font>
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$doadd</font>} {<b><font color=#3a6797>lappend</font></b> optlist <font color=#1b1baa>$optname</font> <font color=#1b1baa>$optvalue</font>}
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$optlist</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::removeOptions></a>
<b><font color=#ca14ca>proc</font></b> ::apave::removeOptions {opts args} {
  <i><font color=#4b5d50># Removes some options from a list of options.</font></i>
  <i><font color=#4b5d50>#   opts - list of options and values</font></i>
  <i><font color=#4b5d50>#   args - list of option names to remove</font></i>
  <i><font color=#4b5d50># The `opts` may contain &quot;key value&quot; pairs and &quot;alone&quot; options</font></i>
  <i><font color=#4b5d50># without values.</font></i>
  <i><font color=#4b5d50># To remove &quot;key value&quot; pairs, `key` should be an exact name.</font></i>
  <i><font color=#4b5d50># To remove an &quot;alone&quot; option, `key` should be a glob pattern with `*`.</font></i>

  <b><font color=#3a6797>foreach</font></b> key <font color=#1b1baa>$args</font> {
    <b><font color=#3a6797>while</font></b> {[<b><font color=#3a6797>incr</font></b> maxi]&lt;99} {
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> i [<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-exact</font> <font color=#1b1baa>$opts</font> <font color=#1b1baa>$key</font>]]&gt;-1} {
        <b><font color=#3a6797>catch</font></b> {
          <i><font color=#4b5d50># remove a pair &quot;option value&quot;</font></i>
          <b><font color=#3a6797>set</font></b> opts [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$opts</font> <font color=#1b1baa>$i</font> <font color=#1b1baa>$i</font>]
          <b><font color=#3a6797>set</font></b> opts [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$opts</font> <font color=#1b1baa>$i</font> <font color=#1b1baa>$i</font>]
        }
      } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#3a6797>string</font></b> first * <font color=#1b1baa>$key</font>]&gt;=0 && \
        [<b><font color=#3a6797>set</font></b> i [<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-glob</font> <font color=#1b1baa>$opts</font> <font color=#1b1baa>$key</font>]]&gt;-1} {
        <i><font color=#4b5d50># remove an option only</font></i>
        <b><font color=#3a6797>set</font></b> opts [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$opts</font> <font color=#1b1baa>$i</font> <font color=#1b1baa>$i</font>]
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#ca14ca>break</font></b>
      }
    }
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$opts</font>
}
<a id=Text_file></a>
<i><font color=#4b5d50>## ________________________ Text file _________________________ ##</font></i>
<a id=apave::error></a>
<b><font color=#ca14ca>proc</font></b> ::apave::error {{fileName <font color=#8b2a0e>&quot;&quot;</font>}} {
  <i><font color=#4b5d50># Gets the error's message at reading/writing.</font></i>
  <i><font color=#4b5d50>#   fileName - if set, return a full error messageat opening file</font></i>

  <b><font color=#3a6797>variable</font></b> _PU_opts
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$fileName</font> eq <font color=#8b2a0e>&quot;&quot;</font>} {
    <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$_PU_opts(_ERROR_)</font>
  }
  <b><font color=#ca14ca>return</font></b> <font color=#8b2a0e>&quot;Error of access to\n\&quot;<font color=#1b1baa>$</font>fileName\&quot;\n\n<font color=#1b1baa>$</font>_PU_opts(_ERROR_)&quot;</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::textsplit></a>
<b><font color=#ca14ca>proc</font></b> ::apave::textsplit {textcont} {
  <i><font color=#4b5d50># Splits a text's contents by EOLs. Those inventors of EOLs...</font></i>
  <i><font color=#4b5d50>#   textcont - text's contents</font></i>

  <b><font color=#3a6797>split</font></b> [<b><font color=#3a6797>string</font></b> map [<b><font color=#3a6797>list</font></b> \r\n \n \r \n] <font color=#1b1baa>$textcont</font>] \n
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::textEOL></a>
<b><font color=#ca14ca>proc</font></b> ::apave::textEOL {{EOL <font color=#8b2a0e>&quot;-&quot;</font>}} {
  <i><font color=#4b5d50># Gets/sets End-of-Line for text reqding/writing.</font></i>
  <i><font color=#4b5d50>#   EOL - LF, CR, CRLF or {}</font></i>
  <i><font color=#4b5d50># If EOL omitted or equals to {} or &quot;-&quot;, return the current EOL.</font></i>
  <i><font color=#4b5d50># If EOL equals to &quot;translation&quot;, return -translation option or {}.</font></i>

  <b><font color=#3a6797>variable</font></b> _PU_opts
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$EOL</font> eq <font color=#8b2a0e>&quot;-&quot;</font>} {<b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$_PU_opts(_EOL_)</font>}
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$EOL</font> eq <font color=#8b2a0e>&quot;translation&quot;</font>} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$_PU_opts(_EOL_)</font> eq <font color=#8b2a0e>&quot;&quot;</font>} {<b><font color=#ca14ca>return</font></b> <font color=#8b2a0e>&quot;&quot;</font>}
    <b><font color=#ca14ca>return</font></b> <font color=#8b2a0e>&quot;-translation <font color=#1b1baa>$</font>_PU_opts(_EOL_)&quot;</font>
  }
  <b><font color=#3a6797>set</font></b> _PU_opts(_EOL_) [<b><font color=#3a6797>string</font></b> trim [<b><font color=#3a6797>string</font></b> tolower <font color=#1b1baa>$EOL</font>]]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::textChanConfigure></a>
<b><font color=#ca14ca>proc</font></b> ::apave::textChanConfigure {channel {coding {}} {eol {}}} {
  <i><font color=#4b5d50># Configures a channel for text file.</font></i>
  <i><font color=#4b5d50>#   channel - the channel</font></i>
  <i><font color=#4b5d50>#   coding - if set, defines encoding of the file</font></i>
  <i><font color=#4b5d50>#   eol - if set, defines EOL of the file</font></i>

  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$coding</font> eq {}} {
    <b><font color=#3a6797>chan</font></b> configure <font color=#1b1baa>$channel</font> <font color=#653760>-encoding</font> utf-8
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>chan</font></b> configure <font color=#1b1baa>$channel</font> <font color=#653760>-encoding</font> <font color=#1b1baa>$coding</font>
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$eol</font> eq {}} {
    <b><font color=#3a6797>chan</font></b> configure <font color=#1b1baa>$channel</font> {<b><font color=#3a6797>*</font></b>}[::apave::textEOL translation]
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>chan</font></b> configure <font color=#1b1baa>$channel</font> <font color=#653760>-translation</font> <font color=#1b1baa>$eol</font>
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::logName></a>
<b><font color=#ca14ca>proc</font></b> ::apave::logName {fname} {
  <i><font color=#4b5d50># Sets a log file's name.</font></i>
  <i><font color=#4b5d50>#   fname - file name</font></i>
  <i><font color=#4b5d50># If fname is {}, disables logging.</font></i>

  <b><font color=#3a6797>variable</font></b> _PU_opts;
  <b><font color=#3a6797>set</font></b> _PU_opts(_LOGFILE) [<b><font color=#3a6797>file</font></b> normalize <font color=#1b1baa>$fname</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::logMessage></a>
<b><font color=#ca14ca>proc</font></b> ::apave::logMessage {msg {lev 16}} {
  <i><font color=#4b5d50># Logs messages to a log file.</font></i>
  <i><font color=#4b5d50>#   msg - the message</font></i>
  <i><font color=#4b5d50>#   lev - maximum level for [info level] to introspect calls</font></i>
  <i><font color=#4b5d50># A log file's name is set by _PU_opts(_LOGFILE). If it's blank,</font></i>
  <i><font color=#4b5d50># no logging is made.</font></i>

  <b><font color=#3a6797>variable</font></b> _PU_opts;
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$_PU_opts(_LOGFILE)</font> eq {}} <b><font color=#ca14ca>return</font></b>
  <b><font color=#3a6797>set</font></b> chan [<b><font color=#3a6797>open</font></b> <font color=#1b1baa>$_PU_opts(_LOGFILE)</font> a]
  <b><font color=#3a6797>set</font></b> dt [<b><font color=#3a6797>clock</font></b> format [<b><font color=#3a6797>clock</font></b> seconds] <font color=#653760>-format</font> {%d%b'%y %T}]
  <b><font color=#3a6797>set</font></b> msg <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>dt <font color=#1b1baa>$</font>msg&quot;</font>
  <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i <font color=#1b1baa>$lev</font>} {<font color=#1b1baa>$i</font>&gt;0} {<b><font color=#3a6797>incr</font></b> i -1} {
    <b><font color=#3a6797>catch</font></b> {
      <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>info</font></b> level -<font color=#1b1baa>$i</font>] p1 p2
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$p1</font> eq {<b><font color=#ca14ca>my</font></b>}} {<b><font color=#3a6797>append</font></b> p1 <font color=#8b2a0e>&quot; <font color=#1b1baa>$</font>p2&quot;</font>}
      <b><font color=#3a6797>append</font></b> msg <font color=#8b2a0e>&quot; / <font color=#1b1baa>$</font>p1&quot;</font>
    }
  }
  <b><font color=#3a6797>puts</font></b> <font color=#1b1baa>$chan</font> <font color=#1b1baa>$msg</font>
  <b><font color=#3a6797>close</font></b> <font color=#1b1baa>$chan</font>
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>incr</font></b> _PU_opts(_LOGNN)]==1} {<b><font color=#3a6797>puts</font></b> <font color=#1b1baa>$_PU_opts(_LOGFILE)</font>:}
  <b><font color=#3a6797>puts</font></b> <font color=#1b1baa>$_PU_opts(_LOGNN)</font>:\ <font color=#1b1baa>$msg</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::readTextFile></a>
<b><font color=#ca14ca>proc</font></b> ::apave::readTextFile {fname {varName <font color=#8b2a0e>&quot;&quot;</font>} {doErr 0} args} {
  <i><font color=#4b5d50># Reads a text file.</font></i>
  <i><font color=#4b5d50>#   fname - file name</font></i>
  <i><font color=#4b5d50>#   varName - variable name for file content or &quot;&quot;</font></i>
  <i><font color=#4b5d50>#   doErr - if 'true', exit at errors with error message</font></i>
  <i><font color=#4b5d50># Returns file contents or &quot;&quot;.</font></i>

  <b><font color=#3a6797>variable</font></b> _PU_opts
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$varName</font> ne {}} {<b><font color=#3a6797>upvar</font></b> <font color=#1b1baa>$varName</font> fvar}
  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> chan [<b><font color=#3a6797>open</font></b> <font color=#1b1baa>$fname</font>]} _PU_opts(_ERROR_)]} {
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$doErr</font>} {<b><font color=#3a6797>error</font></b> [::apave::error <font color=#1b1baa>$fname</font>]}
    <b><font color=#3a6797>set</font></b> fvar {}
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> enc [::apave::getOption <font color=#653760>-encoding</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
    <b><font color=#3a6797>set</font></b> eol [<b><font color=#3a6797>string</font></b> tolower [::apave::getOption <font color=#653760>-translation</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]]
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$eol</font> eq {}} {<b><font color=#3a6797>set</font></b> eol auto} ;<i><font color=#4b5d50># let EOL be autodetected by default</font></i>
    ::apave::textChanConfigure <font color=#1b1baa>$chan</font> <font color=#1b1baa>$enc</font> <font color=#1b1baa>$eol</font>
    <b><font color=#3a6797>set</font></b> fvar [<b><font color=#3a6797>read</font></b> <font color=#1b1baa>$chan</font>]
    <b><font color=#3a6797>close</font></b> <font color=#1b1baa>$chan</font>
    logMessage <font color=#8b2a0e>&quot;read <font color=#1b1baa>$</font>fname&quot;</font>
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$fvar</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::writeTextFile></a>
<b><font color=#ca14ca>proc</font></b> ::apave::writeTextFile {fname {varName <font color=#8b2a0e>&quot;&quot;</font>} {doErr 0} {doSave 1} args} {
  <i><font color=#4b5d50># Writes to a text file.</font></i>
  <i><font color=#4b5d50>#   fname - file name</font></i>
  <i><font color=#4b5d50>#   varName - variable name for file content or &quot;&quot;</font></i>
  <i><font color=#4b5d50>#   doErr - if 'true', exit at errors with error message</font></i>
  <i><font color=#4b5d50>#   doSave - if 'true', saves an empty file, else deletes it</font></i>
  <i><font color=#4b5d50># Returns &quot;yes&quot; if the file was saved successfully.</font></i>

  <b><font color=#3a6797>variable</font></b> _PU_opts
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$varName</font> ne {}} {
    <b><font color=#3a6797>upvar</font></b> <font color=#1b1baa>$varName</font> contents
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> contents {}
  }
  <b><font color=#3a6797>set</font></b> res yes
  <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$doSave</font> && [<b><font color=#3a6797>string</font></b> trim <font color=#1b1baa>$contents</font>] eq {}} {
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>file</font></b> delete <font color=#1b1baa>$fname</font>} _PU_opts(_ERROR_)]} {
      <b><font color=#3a6797>set</font></b> res no
    } <b><font color=#3a6797>else</font></b> {
      logMessage <font color=#8b2a0e>&quot;delete <font color=#1b1baa>$</font>fname&quot;</font>
    }
  } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> chan [<b><font color=#3a6797>open</font></b> <font color=#1b1baa>$fname</font> w]} _PU_opts(_ERROR_)]} {
    <b><font color=#3a6797>set</font></b> res no
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> enc [::apave::getOption <font color=#653760>-encoding</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
    <b><font color=#3a6797>set</font></b> eol [<b><font color=#3a6797>string</font></b> tolower [::apave::getOption <font color=#653760>-translation</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]]
    ::apave::textChanConfigure <font color=#1b1baa>$chan</font> <font color=#1b1baa>$enc</font> <font color=#1b1baa>$eol</font>
    <b><font color=#3a6797>puts</font></b> <font color=#653760>-nonewline</font> <font color=#1b1baa>$chan</font> <font color=#1b1baa>$contents</font>
    <b><font color=#3a6797>close</font></b> <font color=#1b1baa>$chan</font>
    logMessage <font color=#8b2a0e>&quot;write <font color=#1b1baa>$</font>fname&quot;</font>
  }
  <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$res</font> && <font color=#1b1baa>$doErr</font>} {<b><font color=#3a6797>error</font></b> [::apave::error <font color=#1b1baa>$fname</font>]}
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::undoIn></a>
<b><font color=#ca14ca>proc</font></b> ::apave::undoIn {wtxt} {
  <i><font color=#4b5d50># Enters a block of undo/redo for a text widget.</font></i>
  <i><font color=#4b5d50>#   wtxt - text widget's path</font></i>
  <i><font color=#4b5d50># Run before massive changes of the text, to have Undo/Redo done at one blow.</font></i>
  <i><font color=#4b5d50># See also: undoOut</font></i>

  <font color=#1b1baa>$wtxt</font> configure <font color=#653760>-autoseparators</font> no
  <font color=#1b1baa>$wtxt</font> edit separator
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::undoOut></a>
<b><font color=#ca14ca>proc</font></b> ::apave::undoOut {wtxt} {
  <i><font color=#4b5d50># Exits a block of undo/redo for a text widget.</font></i>
  <i><font color=#4b5d50>#   wtxt - text widget's path</font></i>
  <i><font color=#4b5d50># Run after massive changes of the text, to have Undo/Redo done at one blow.</font></i>
  <i><font color=#4b5d50># See also: undoIn</font></i>

  <font color=#1b1baa>$wtxt</font> edit separator
  <font color=#1b1baa>$wtxt</font> configure <font color=#653760>-autoseparators</font> yes
}
<a id=Binds></a>
<i><font color=#4b5d50>## ________________________ Binds _________________________ ##</font></i>
<a id=apave::bindToEvent></a>
<b><font color=#ca14ca>proc</font></b> ::apave::bindToEvent {w event args} {
  <i><font color=#4b5d50># Binds an event on a widget to a command.</font></i>
  <i><font color=#4b5d50>#   w - the widget's path</font></i>
  <i><font color=#4b5d50>#   event - the event</font></i>
  <i><font color=#4b5d50>#   args - the command</font></i>

  ::baltip::my::BindToEvent <font color=#1b1baa>$w</font> <font color=#1b1baa>$event</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::bindTextagToEvent></a>
<b><font color=#ca14ca>proc</font></b> ::apave::bindTextagToEvent {w tag event args} {
  <i><font color=#4b5d50># Binds an event on a text tag to a command.</font></i>
  <i><font color=#4b5d50>#   w - the widget's path</font></i>
  <i><font color=#4b5d50>#   tag - the tag</font></i>
  <i><font color=#4b5d50>#   event - the event</font></i>
  <i><font color=#4b5d50>#   args - the command</font></i>

  ::baltip::my::BindTextagToEvent <font color=#1b1baa>$w</font> <font color=#1b1baa>$tag</font> <font color=#1b1baa>$event</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::bindCantagToEvent></a>
<b><font color=#ca14ca>proc</font></b> ::apave::bindCantagToEvent {w tag event args} {
  <i><font color=#4b5d50># Binds an event on a canvas tag to a command.</font></i>
  <i><font color=#4b5d50>#   w - the widget's path</font></i>
  <i><font color=#4b5d50>#   tag - the tag</font></i>
  <i><font color=#4b5d50>#   event - the event</font></i>
  <i><font color=#4b5d50>#   args - the command</font></i>

  ::baltip::my::BindCantagToEvent <font color=#1b1baa>$w</font> <font color=#1b1baa>$tag</font> <font color=#1b1baa>$event</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
}
<a id=Helpers></a>
<i><font color=#4b5d50>## ________________________ Helpers _________________________ ##</font></i>
<a id=apave::InfoWindow></a>
<b><font color=#ca14ca>proc</font></b> ::apave::InfoWindow {{val <font color=#8b2a0e>&quot;&quot;</font>} {w .} {modal no} {var <font color=#8b2a0e>&quot;&quot;</font>} {regist no}} {
  <i><font color=#4b5d50># Registers/unregisters windows. Also sets/gets 'count of open modal windows'.</font></i>
  <i><font color=#4b5d50>#   val - current number of open modal windows</font></i>
  <i><font color=#4b5d50>#   w - root window's path</font></i>
  <i><font color=#4b5d50>#   modal - yes, if the window is modal</font></i>
  <i><font color=#4b5d50>#   var - variable's name for tkwait</font></i>
  <i><font color=#4b5d50>#   regist - yes or no for registering/unregistering</font></i>
  <i><font color=#4b5d50># See also: APaveBase::showWindow</font></i>

  <b><font color=#3a6797>variable</font></b> _PU_opts
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$modal</font> || <font color=#1b1baa>$regist</font>} {
    <b><font color=#3a6797>set</font></b> info [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$w</font> <font color=#1b1baa>$var</font> <font color=#1b1baa>$modal</font>]
    <b><font color=#3a6797>set</font></b> i [<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-exact</font> <font color=#1b1baa>$_PU_opts(_MODALWIN_)</font> <font color=#1b1baa>$info</font>]
    <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> _PU_opts(_MODALWIN_) [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$_PU_opts(_MODALWIN_)</font> <font color=#1b1baa>$i</font> <font color=#1b1baa>$i</font>]}
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$regist</font>} {
      <b><font color=#3a6797>lappend</font></b> _PU_opts(_MODALWIN_) <font color=#1b1baa>$info</font>
    }
    <b><font color=#3a6797>set</font></b> res [IntStatus . MODALS <font color=#1b1baa>$val</font>]
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> res [IntStatus . MODALS]
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::InfoFind></a>
<b><font color=#ca14ca>proc</font></b> ::apave::InfoFind {w modal} {
  <i><font color=#4b5d50># Searches data of a window in a list of registered windows.</font></i>
  <i><font color=#4b5d50>#   w - root window's path</font></i>
  <i><font color=#4b5d50>#   modal - yes, if the window is modal</font></i>
  <i><font color=#4b5d50># Returns: the window's path or &quot;&quot; if not found.</font></i>
  <i><font color=#4b5d50># See also: InfoWindow</font></i>

  <b><font color=#3a6797>variable</font></b> _PU_opts
  <b><font color=#3a6797>foreach</font></b> winfo [<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$_PU_opts(_MODALWIN_)</font> 1 end] {  ;<i><font color=#4b5d50># skip 1st window</font></i>
    <b><font color=#3a6797>incr</font></b> i
    <b><font color=#3a6797>lassign</font></b> <font color=#1b1baa>$winfo</font> w1 var1 modal1
    <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>winfo</font></b> exists <font color=#1b1baa>$w1</font>]} {
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$w</font> eq <font color=#1b1baa>$w1</font> && (<font color=#1b1baa>$modal</font> && <font color=#1b1baa>$modal1</font> || !<font color=#1b1baa>$modal</font> && !<font color=#1b1baa>$modal1</font>)} {
        <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$w1</font>
      }
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> _PU_opts(_MODALWIN_) [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$_PU_opts(_MODALWIN_)</font> <font color=#1b1baa>$i</font> <font color=#1b1baa>$i</font>]}
    }
  }
  <b><font color=#ca14ca>return</font></b> {}
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::TreSelect></a>
<b><font color=#ca14ca>proc</font></b> ::apave::TreSelect {w idx} {
  <i><font color=#4b5d50># Selects a treeview item.</font></i>
  <i><font color=#4b5d50>#   w - treeview's path</font></i>
  <i><font color=#4b5d50>#   idx - item index</font></i>

  <b><font color=#3a6797>set</font></b> items [<font color=#1b1baa>$w</font> children {}]
  <b><font color=#3a6797>catch</font></b> {
    <b><font color=#3a6797>set</font></b> it [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$items</font> <font color=#1b1baa>$idx</font>]
    <font color=#1b1baa>$w</font> see <font color=#1b1baa>$it</font>
    <font color=#1b1baa>$w</font> focus <font color=#1b1baa>$it</font>
    <font color=#1b1baa>$w</font> selection set <font color=#1b1baa>$it</font>  ;<i><font color=#4b5d50># generates &lt;&lt;TreeviewSelect&gt;&gt;</font></i>
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::LbxSelect></a>
<b><font color=#ca14ca>proc</font></b> ::apave::LbxSelect {w idx} {
  <i><font color=#4b5d50># Selects a listbox item.</font></i>
  <i><font color=#4b5d50>#   w - listbox's path</font></i>
  <i><font color=#4b5d50>#   idx - item index</font></i>

  <font color=#1b1baa>$w</font> activate <font color=#1b1baa>$idx</font>
  <font color=#1b1baa>$w</font> see <font color=#1b1baa>$idx</font>
  <b><font color=#3a6797>if</font></b> {[<font color=#1b1baa>$w</font> cget <font color=#653760>-selectmode</font>] in {single browse}} {
    <font color=#1b1baa>$w</font> selection clear 0 end
    <font color=#1b1baa>$w</font> selection set <font color=#1b1baa>$idx</font>
    <b><font color=#134070>event</font></b> generate <font color=#1b1baa>$w</font> &lt;&lt;ListboxSelect&gt;&gt;
  }
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::InsertChar></a>
<b><font color=#ca14ca>proc</font></b> ::apave::InsertChar {wt ch} {
  <i><font color=#4b5d50># Inserts character(s) into a text at cursor's position.</font></i>
  <i><font color=#4b5d50>#   wt - text's path</font></i>
  <i><font color=#4b5d50>#   ch - character(s)</font></i>

  <font color=#1b1baa>$wt</font> insert [<font color=#1b1baa>$wt</font> index insert] <font color=#1b1baa>$ch</font>
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::CursorToBEOL></a>
<b><font color=#ca14ca>proc</font></b> ::apave::CursorToBEOL {wt where} {
  <i><font color=#4b5d50># Sets the cursor to the real start/end of text line.</font></i>
  <i><font color=#4b5d50>#   wt - text's path</font></i>
  <i><font color=#4b5d50>#   where - where to set</font></i>

  <b><font color=#3a6797>set</font></b> idx [<font color=#1b1baa>$wt</font> index insert]
  ::tk::TextSetCursor <font color=#1b1baa>$wt</font> [<font color=#1b1baa>$wt</font> index <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>idx <font color=#1b1baa>$</font>where&quot;</font>]
}
<i><font color=#4b5d50>#_______________________</font></i>
<a id=apave::DefaultCS></a>
<b><font color=#ca14ca>proc</font></b> ::apave::DefaultCS {} {
  <i><font color=#4b5d50># Gets default color scheme counting current background of Tk root window.</font></i>

  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> ib [<b><font color=#134070>ttk::style</font></b> config . <font color=#653760>-background</font>]}] ||
  [<b><font color=#3a6797>lindex</font></b> [InvertBg <font color=#1b1baa>$ib</font> B] 0] eq {B}} {
    <b><font color=#3a6797>set</font></b> res 5  ;<i><font color=#4b5d50># light</font></i>
  } <b><font color=#3a6797>else</font></b> {
    <b><font color=#3a6797>set</font></b> res 23 ;<i><font color=#4b5d50># dark</font></i>
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
}
<a id=ObjectProperty></a>
<i><font color=#4b5d50># ________________________ ObjectProperty _________________________ #</font></i>
<i><font color=#4b5d50>#</font></i>
<i><font color=#4b5d50># 1st bit: Set/Get properties of object.</font></i>
<i><font color=#4b5d50>#</font></i>
<i><font color=#4b5d50># Call of setter:</font></i>
<i><font color=#4b5d50>#   oo::define SomeClass {</font></i>
<i><font color=#4b5d50>#     mixin ObjectProperty</font></i>
<i><font color=#4b5d50>#   }</font></i>
<i><font color=#4b5d50>#   SomeClass create someobj</font></i>
<i><font color=#4b5d50>#   ...</font></i>
<i><font color=#4b5d50>#   someobj setProperty Prop1 100</font></i>
<i><font color=#4b5d50>#</font></i>
<i><font color=#4b5d50># Call of getter:</font></i>
<i><font color=#4b5d50>#   oo::define SomeClass {</font></i>
<i><font color=#4b5d50>#     mixin ObjectProperty</font></i>
<i><font color=#4b5d50>#   }</font></i>
<i><font color=#4b5d50>#   SomeClass create someobj</font></i>
<i><font color=#4b5d50>#   ...</font></i>
<i><font color=#4b5d50>#   someobj getProperty Alter 10</font></i>
<i><font color=#4b5d50>#   someobj getProperty Alter</font></i>

<b><font color=#ca14ca>oo::class</font></b> create ::apave::ObjectProperty {

  <b><font color=#3a6797>variable</font></b> _OP_Properties
<a id=constructor></a>
  <b><font color=#ca14ca>constructor</font></b> {args} {
    <b><font color=#3a6797>array</font></b> set _OP_Properties {}
    <i><font color=#4b5d50># ObjectProperty can play solo or be a mixin</font></i>
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>llength</font></b> [<b><font color=#ca14ca>self</font></b> next]]} { <b><font color=#3a6797>next</font></b> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font> }
  }
<a id=destructor></a>
  <b><font color=#ca14ca>destructor</font></b> {
    <b><font color=#3a6797>array</font></b> unset _OP_Properties *
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>llength</font></b> [<b><font color=#ca14ca>self</font></b> next]]} <b><font color=#3a6797>next</font></b>
  }

<i><font color=#4b5d50># _______________________________________________________________________ #</font></i>
<a id=setProperty></a>
  <b><font color=#ca14ca>method</font></b> setProperty {name args} {
    <i><font color=#4b5d50># Sets a property's value as &quot;object-wide&quot;.</font></i>
    <i><font color=#4b5d50>#   name - name of property</font></i>
    <i><font color=#4b5d50>#   args - value of property</font></i>
    <i><font color=#4b5d50># If *args* is omitted, the method returns a property's value.</font></i>
    <i><font color=#4b5d50># If *args* is set, the method sets a property's value as $args.</font></i>

    <b><font color=#3a6797>switch</font></b> <font color=#653760>-exact</font> [<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$args</font>] {
      0 {<b><font color=#ca14ca>return</font></b> [<b><font color=#ca14ca>my</font></b> getProperty <font color=#1b1baa>$name</font>]}
      1 {<b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>set</font></b> _OP_Properties(<font color=#1b1baa>$name</font>) [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$args</font> 0]]}
    }
    <b><font color=#3a6797>puts</font></b> <font color=#653760>-nonewline</font> stderr \
      <font color=#8b2a0e>&quot;Wrong # args: should be \&quot;<font color=#1b1baa>[</font>namespace current<font color=#1b1baa>]</font> setProperty propertyname ?value?\&quot;&quot;</font>
    <b><font color=#ca14ca>return</font></b> <font color=#653760>-code</font> error
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=getProperty></a>
  <b><font color=#ca14ca>method</font></b> getProperty {name {defvalue <font color=#8b2a0e>&quot;&quot;</font>}} {
    <i><font color=#4b5d50># Gets an property's value as &quot;object-wide&quot;.</font></i>
    <i><font color=#4b5d50>#   name - name of property</font></i>
    <i><font color=#4b5d50>#   defvalue - default value</font></i>
    <i><font color=#4b5d50># If the property had been set, the method returns its value.</font></i>
    <i><font color=#4b5d50># Otherwise, the method returns the default value (`$defvalue`).</font></i>

    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists _OP_Properties(<font color=#1b1baa>$name</font>)]} {
      <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$_OP_Properties($name)</font>
    }
    <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$defvalue</font>
  }
<a id=EONS_ObjectProperty></a>
  <i><font color=#4b5d50>## _________________ EONS ObjectProperty _________________ ##</font></i>

}
<a id=ObjectTheming></a>
<i><font color=#4b5d50># ________________________ ObjectTheming _________________________ #</font></i>

<b><font color=#ca14ca>oo::class</font></b> create ::apave::ObjectTheming {
<a id=Obj_theming_Inits></a>
  <i><font color=#4b5d50>## ________________________ Obj theming Inits _________________________ ##</font></i>
<a id=constructor></a>
  <b><font color=#ca14ca>constructor</font></b> {args} {

    <b><font color=#ca14ca>my</font></b> InitCS
    <i><font color=#4b5d50># ObjectTheming can play solo or be a mixin</font></i>
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>llength</font></b> [<b><font color=#ca14ca>self</font></b> next]]} { <b><font color=#3a6797>next</font></b> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font> }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=destructor></a>
  <b><font color=#ca14ca>destructor</font></b> {
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>llength</font></b> [<b><font color=#ca14ca>self</font></b> next]]} <b><font color=#3a6797>next</font></b>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=InitCS></a>
  <b><font color=#ca14ca>method</font></b> InitCS {} {
    <i><font color=#4b5d50># Initializes the color scheme processing.</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$::apave::_CS_(initall)</font>} {
      <b><font color=#ca14ca>my</font></b> basicFontSize 10 ;<i><font color=#4b5d50># initialize main font size</font></i>
      <b><font color=#ca14ca>my</font></b> basicTextFont <font color=#1b1baa>$::apave::_CS_(textFont)</font> ;<i><font color=#4b5d50># initialize main font for text</font></i>
      <b><font color=#ca14ca>my</font></b> ColorScheme  ;<i><font color=#4b5d50># initialize default colors</font></i>
      <b><font color=#ca14ca>my</font></b> untouchWidgets *_untouch_*
      <b><font color=#3a6797>set</font></b> ::apave::_CS_(initall) 0
    }
  }
<a id=Fonts></a>
  <i><font color=#4b5d50>## ________________________ Fonts _________________________ ##</font></i>
<a id=create_FontsType></a>
  <b><font color=#ca14ca>method</font></b> create_FontsType {type args} {
    <i><font color=#4b5d50># Creates fonts used in apave, with additional options.</font></i>
    <i><font color=#4b5d50>#   type - type of the created fonts</font></i>
    <i><font color=#4b5d50>#   args - pairs &quot;option value&quot;</font></i>
    <i><font color=#4b5d50># Returns a list of two created font names (default & mono).</font></i>

    <b><font color=#3a6797>set</font></b> name1 apaveFontDefTyped<font color=#1b1baa>$type</font>
    <b><font color=#3a6797>set</font></b> name2 apaveFontMonoTyped<font color=#1b1baa>$type</font>
    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>font</font></b> delete <font color=#1b1baa>$name1</font>}
    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>font</font></b> delete <font color=#1b1baa>$name2</font>}
    <b><font color=#134070>font</font></b> create <font color=#1b1baa>$name1</font> <font color=#653760>-family</font> <font color=#1b1baa>$::apave::_CS_(defFont)</font> <font color=#653760>-size</font> <font color=#1b1baa>$::apave::_CS_(fs)</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
    <b><font color=#134070>font</font></b> create <font color=#1b1baa>$name2</font> <font color=#653760>-family</font> <font color=#1b1baa>$::apave::_CS_(textFont)</font> <font color=#653760>-size</font> <font color=#1b1baa>$::apave::_CS_(fs)</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
    <b><font color=#3a6797>list</font></b> <font color=#1b1baa>$name1</font> <font color=#1b1baa>$name2</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=create_Fonts></a>
  <b><font color=#ca14ca>method</font></b> create_Fonts {} {
    <i><font color=#4b5d50># Creates fonts used in apave.</font></i>

    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>font</font></b> delete apaveFontMono}
    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>font</font></b> delete apaveFontDef}
    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>font</font></b> delete apaveFontMonoBold}
    <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>font</font></b> delete apaveFontDefBold}
    <b><font color=#134070>font</font></b> create apaveFontMono <font color=#653760>-family</font> <font color=#1b1baa>$::apave::_CS_(textFont)</font> <font color=#653760>-size</font> <font color=#1b1baa>$::apave::_CS_(fs)</font>
    <b><font color=#134070>font</font></b> create apaveFontDef <font color=#653760>-family</font> <font color=#1b1baa>$::apave::_CS_(defFont)</font> <font color=#653760>-size</font> <font color=#1b1baa>$::apave::_CS_(fs)</font>
    <b><font color=#134070>font</font></b> create apaveFontMonoBold  {<b><font color=#3a6797>*</font></b>}[<b><font color=#ca14ca>my</font></b> boldTextFont]
    <b><font color=#134070>font</font></b> create apaveFontDefBold {<b><font color=#3a6797>*</font></b>}[<b><font color=#ca14ca>my</font></b> boldDefFont]
    <b><font color=#3a6797>set</font></b> ::apave::FONTMAIN <font color=#8b2a0e>&quot;<font color=#1b1baa>[</font>font actual apaveFontDef<font color=#1b1baa>]</font>&quot;</font>
    <b><font color=#3a6797>set</font></b> ::apave::FONTMAINBOLD <font color=#8b2a0e>&quot;<font color=#1b1baa>[</font>font actual apaveFontDefBold<font color=#1b1baa>]</font>&quot;</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=basicFontSize></a>
  <b><font color=#ca14ca>method</font></b> basicFontSize {{fs 0} {ds 0}} {
    <i><font color=#4b5d50># Gets/Sets a basic size of font used in apave</font></i>
    <i><font color=#4b5d50>#    fs - font size</font></i>
    <i><font color=#4b5d50>#    ds - incr/decr of size</font></i>
    <i><font color=#4b5d50># If 'fs' is omitted or ==0, this method gets it.</font></i>
    <i><font color=#4b5d50># If 'fs' &gt;0, this method sets it.</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$fs</font>} {
      <b><font color=#3a6797>set</font></b> ::apave::_CS_(fs) [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$fs</font> + <font color=#1b1baa>$ds</font>}]
      <b><font color=#ca14ca>my</font></b> create_Fonts
      <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(fs)</font>
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$::apave::_CS_(fs)</font> + <font color=#1b1baa>$ds</font>}]
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=basicDefFont></a>
  <b><font color=#ca14ca>method</font></b> basicDefFont {{deffont <font color=#8b2a0e>&quot;&quot;</font>}} {
    <i><font color=#4b5d50># Gets/Sets a basic default font.</font></i>
    <i><font color=#4b5d50>#    deffont - font</font></i>
    <i><font color=#4b5d50># If 'deffont' is omitted or ==&quot;&quot;, this method gets it.</font></i>
    <i><font color=#4b5d50># If 'deffont' is set, this method sets it.</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$deffont</font> ne <font color=#8b2a0e>&quot;&quot;</font>} {
      <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>set</font></b> ::apave::_CS_(defFont) <font color=#1b1baa>$deffont</font>]
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(defFont)</font>
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=basicTextFont></a>
  <b><font color=#ca14ca>method</font></b> basicTextFont {{textfont <font color=#8b2a0e>&quot;&quot;</font>}} {
    <i><font color=#4b5d50># Gets/Sets a basic font used in editing/viewing text widget.</font></i>
    <i><font color=#4b5d50>#    textfont - font</font></i>
    <i><font color=#4b5d50># If 'textfont' is omitted or ==&quot;&quot;, this method gets it.</font></i>
    <i><font color=#4b5d50># If 'textfont' is set, this method sets it.</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$textfont</font> ne <font color=#8b2a0e>&quot;&quot;</font>} {
      <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>set</font></b> ::apave::_CS_(textFont) <font color=#1b1baa>$textfont</font>]
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(textFont)</font>
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=basicSmallFont></a>
  <b><font color=#ca14ca>method</font></b> basicSmallFont {{smallfont <font color=#8b2a0e>&quot;&quot;</font>}} {
    <i><font color=#4b5d50># Gets/Sets a basic small font used in status bar etc.</font></i>
    <i><font color=#4b5d50>#    smallfont - font</font></i>
    <i><font color=#4b5d50># If 'smallfont' is omitted or ==&quot;&quot;, this method gets it.</font></i>
    <i><font color=#4b5d50># If 'smallfont' is set, this method sets it.</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$smallfont</font> ne <font color=#8b2a0e>&quot;&quot;</font>} {
      <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>set</font></b> ::apave::_CS_(smallFont) <font color=#1b1baa>$smallfont</font>]
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(smallFont)</font>
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=boldDefFont></a>
  <b><font color=#ca14ca>method</font></b> boldDefFont {{fs 0}} {
    <i><font color=#4b5d50># Returns a bold default font.</font></i>
    <i><font color=#4b5d50>#    fs - font size</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$fs</font> == 0} {<b><font color=#3a6797>set</font></b> fs [<b><font color=#ca14ca>my</font></b> basicFontSize]}
    <b><font color=#3a6797>set</font></b> bf [<b><font color=#134070>font</font></b> actual basicDefFont]
    <b><font color=#3a6797>dict</font></b> replace <font color=#1b1baa>$bf</font> <font color=#653760>-family</font> [<b><font color=#ca14ca>my</font></b> basicDefFont] <font color=#653760>-weight</font> bold <font color=#653760>-size</font> <font color=#1b1baa>$fs</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=boldTextFont></a>
  <b><font color=#ca14ca>method</font></b> boldTextFont {{fs 0}} {
    <i><font color=#4b5d50># Returns a bold fixed font.</font></i>
    <i><font color=#4b5d50>#    fs - font size</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$fs</font> == 0} {<b><font color=#3a6797>set</font></b> fs [<b><font color=#3a6797>expr</font></b> {2+[<b><font color=#ca14ca>my</font></b> basicFontSize]}]}
    <b><font color=#3a6797>set</font></b> bf [<b><font color=#134070>font</font></b> actual TkFixedFont]
    <b><font color=#3a6797>dict</font></b> replace <font color=#1b1baa>$bf</font> <font color=#653760>-family</font> [<b><font color=#ca14ca>my</font></b> basicTextFont] <font color=#653760>-weight</font> bold <font color=#653760>-size</font> <font color=#1b1baa>$fs</font>
  }
<a id=Color_schemes></a>
  <i><font color=#4b5d50>## ________________________ Color schemes _________________________ ##</font></i>
<a id=csFont></a>
  <b><font color=#ca14ca>method</font></b> csFont {fontname} {
    <i><font color=#4b5d50># Returns attributes of CS font.</font></i>

    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> font [<b><font color=#134070>font</font></b> configure <font color=#1b1baa>$fontname</font>]}]} {
      <b><font color=#ca14ca>my</font></b> create_Fonts
      <b><font color=#3a6797>set</font></b> font [<b><font color=#134070>font</font></b> configure <font color=#1b1baa>$fontname</font>]
    }
    <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$font</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csFontMono></a>
  <b><font color=#ca14ca>method</font></b> csFontMono {} {
    <i><font color=#4b5d50># Returns attributes of CS monotype font.</font></i>

    <b><font color=#ca14ca>my</font></b> csFont apaveFontMono
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csFontDef></a>
  <b><font color=#ca14ca>method</font></b> csFontDef {} {
    <i><font color=#4b5d50># Returns attributes of CS default font.</font></i>

    <b><font color=#ca14ca>my</font></b> csFont apaveFontDef
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csDark></a>
  <b><font color=#ca14ca>method</font></b> csDark {{cs <font color=#8b2a0e>&quot;&quot;</font>}} {
    <i><font color=#4b5d50># Returns a flag &quot;a color scheme is dark&quot;</font></i>
    <i><font color=#4b5d50>#   cs - the color scheme to be checked (the current one, if not set)</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$cs</font> eq {} || <font color=#1b1baa>$cs</font>==-3} {<b><font color=#3a6797>set</font></b> cs [<b><font color=#ca14ca>my</font></b> csCurrent]}
    <b><font color=#3a6797>lassign</font></b> <font color=#1b1baa>$::apave::_CS_(TONED)</font> csbasic cstoned
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$cs</font>==<font color=#1b1baa>$cstoned</font>} {<b><font color=#3a6797>set</font></b> cs <font color=#1b1baa>$csbasic</font>}
    <b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$cs</font>&gt;22}
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csExport></a>
  <b><font color=#ca14ca>method</font></b> csExport {} {
    <i><font color=#ff0000># TODO</font></i>

    <b><font color=#3a6797>set</font></b> theme <font color=#8b2a0e>&quot;&quot;</font>
    <b><font color=#3a6797>foreach</font></b> arg {tfg1 tbg1 tfg2 tbg2 tfgS tbgS tfgD tbgD tcur bclr args} {
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> a <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>::apave::_CS_(expo,<font color=#1b1baa>$</font>arg)&quot;</font>}] || <font color=#1b1baa>$a</font>==<font color=#8b2a0e>&quot;&quot;</font>} {
        <b><font color=#ca14ca>break</font></b>
      }
      <b><font color=#3a6797>append</font></b> theme <font color=#8b2a0e>&quot; <font color=#1b1baa>$</font>a&quot;</font>
    }
    <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$theme</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csCurrent></a>
  <b><font color=#ca14ca>method</font></b> csCurrent {} {

    <i><font color=#4b5d50># Gets an index of current color scheme</font></i>

    <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(index)</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csGetName></a>
  <b><font color=#ca14ca>method</font></b> csGetName {{ncolor 0}} {

    <i><font color=#4b5d50># Gets a color scheme's name</font></i>
    <i><font color=#4b5d50>#   ncolor - index of color scheme</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ncolor</font> &lt; <font color=#1b1baa>$::apave::_CS_(MINCS)</font>} {
      <b><font color=#ca14ca>return</font></b> <font color=#8b2a0e>&quot;-2: None&quot;</font>
    } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$ncolor</font> == <font color=#1b1baa>$::apave::_CS_(MINCS)</font>} {
      <b><font color=#ca14ca>return</font></b> <font color=#8b2a0e>&quot;-1: Basic&quot;</font>
    }
    <b><font color=#3a6797>lindex</font></b> [<b><font color=#ca14ca>my</font></b> ColorScheme <font color=#1b1baa>$ncolor</font>] 0
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csGet></a>
  <b><font color=#ca14ca>method</font></b> csGet {{ncolor <font color=#8b2a0e>&quot;&quot;</font>}} {

    <i><font color=#4b5d50># Gets a color scheme's colors</font></i>
    <i><font color=#4b5d50>#   ncolor - index of color scheme</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ncolor</font> eq <font color=#8b2a0e>&quot;&quot;</font>} {<b><font color=#3a6797>set</font></b> ncolor [<b><font color=#ca14ca>my</font></b> csCurrent]}
    <b><font color=#3a6797>lrange</font></b> [<b><font color=#ca14ca>my</font></b> ColorScheme <font color=#1b1baa>$ncolor</font>] 1 end
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csSet></a>
  <b><font color=#ca14ca>method</font></b> csSet {{ncolor 0} {win .} args} {

    <i><font color=#4b5d50># Sets a color scheme and applies it to Tk/Ttk widgets.</font></i>
    <i><font color=#4b5d50>#   ncolor - index of color scheme</font></i>
    <i><font color=#4b5d50>#   win - window's name</font></i>
    <i><font color=#4b5d50>#   args - list of colors if ncolor=&quot;&quot;</font></i>
    <i><font color=#4b5d50>#</font></i>
    <i><font color=#4b5d50># The `args` can be set as &quot;-doit&quot;. In this case the method does set</font></i>
    <i><font color=#4b5d50># the `ncolor` color scheme (otherwise it doesn't set the CS if it's</font></i>
    <i><font color=#4b5d50># already of the same `ncolor`).</font></i>

    <i><font color=#4b5d50># The clrtitf, clrinaf etc. had been designed for e_menu. And as such,</font></i>
    <i><font color=#4b5d50># they can be used directly, outside of this &quot;color scheming&quot; UI.</font></i>
    <i><font color=#4b5d50># They set pairs of related fb/bg:</font></i>
    <i><font color=#4b5d50>#   clrtitf/clrtitb is item's fg/bg</font></i>
    <i><font color=#4b5d50>#   clrinaf/clrinab is main fg/bg</font></i>
    <i><font color=#4b5d50>#   clractf/clractb is active (selection) fg/bg</font></i>
    <i><font color=#4b5d50># and separate colors:</font></i>
    <i><font color=#4b5d50>#   clrhelp is &quot;help&quot; foreground</font></i>
    <i><font color=#4b5d50>#   clrcurs is &quot;caret&quot; background</font></i>
    <i><font color=#4b5d50>#   clrgrey is &quot;shadowing&quot; background</font></i>
    <i><font color=#4b5d50>#   clrhotk is &quot;hotkey/border&quot; foreground</font></i>
    <i><font color=#4b5d50>#</font></i>
    <i><font color=#4b5d50># In color scheming, these colors are transformed to be consistent</font></i>
    <i><font color=#4b5d50># with Tk/Ttk's color mechanics.</font></i>
    <i><font color=#4b5d50>#</font></i>
    <i><font color=#4b5d50># Additionally, &quot;grey&quot; color is used as &quot;border color/disabled foreground&quot;.</font></i>
    <i><font color=#4b5d50>#</font></i>
    <i><font color=#4b5d50># Returns a list of colors used by the color scheme.</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ncolor</font> == -2} {
      <b><font color=#134070>ttk::style</font></b> map Treeview <font color=#653760>-foreground</font> [<b><font color=#3a6797>list</font></b> readonly grey disabled grey selected black]
      <b><font color=#ca14ca>return</font></b> {}
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ncolor</font> eq {}} {
      <b><font color=#3a6797>lassign</font></b> <font color=#1b1baa>$args</font> \
        clrtitf clrinaf clrtitb clrinab clrhelp clractb clractf clrcurs clrgrey clrhotk tfgI tbgI fM bM tfgW tbgW tHL2 tbHL chkHL res5 res6 res7
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>foreach</font></b> cs [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$ncolor</font> <font color=#1b1baa>$::apave::_CS_(MINCS)</font>] {
        <b><font color=#3a6797>lassign</font></b> [<b><font color=#ca14ca>my</font></b> csGet <font color=#1b1baa>$cs</font>] \
          clrtitf clrinaf clrtitb clrinab clrhelp clractb clractf clrcurs clrgrey clrhotk tfgI tbgI fM bM tfgW tbgW tHL2 tbHL chkHL res5 res6 res7
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$clrtitf</font> ne <font color=#8b2a0e>&quot;&quot;</font>} <b><font color=#ca14ca>break</font></b>
        <b><font color=#3a6797>set</font></b> ncolor <font color=#1b1baa>$cs</font>
      }
      <b><font color=#3a6797>set</font></b> ::apave::_CS_(index) <font color=#1b1baa>$ncolor</font>
    }
    <i><font color=#4b5d50># colors can be passed in args as -clrtitf &quot;color&quot; -clrinaf &quot;color&quot; ...</font></i>
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ncolor</font>&gt;=0} {
      <b><font color=#3a6797>foreach</font></b> nclr {clrtitf clrinaf clrtitb clrinab clrhelp clractb clractf clrcurs clrgrey clrhotk tfgI tbgI fM bM tfgW tbgW tHL2 tbHL chkHL} {
        <b><font color=#3a6797>incr</font></b> ic
        <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> i [<b><font color=#3a6797>lsearch</font></b> <font color=#1b1baa>$args</font> -<font color=#1b1baa>$nclr</font>]]&gt;-1} {
          <b><font color=#3a6797>set</font></b> <font color=#1b1baa>$nclr</font> [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$args</font> <font color=#1b1baa>$i</font>+1]
          <b><font color=#3a6797>set</font></b> chcs [<b><font color=#3a6797>lreplace</font></b> [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$::apave::_CS_(ALL)</font> <font color=#1b1baa>$ncolor</font>] <font color=#1b1baa>$ic</font> <font color=#1b1baa>$ic</font> [<b><font color=#3a6797>set</font></b> <font color=#1b1baa>$nclr</font>]]
          <b><font color=#3a6797>set</font></b> ::apave::_CS_(ALL) [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$::apave::_CS_(ALL)</font> <font color=#1b1baa>$ncolor</font> <font color=#1b1baa>$ncolor</font> <font color=#1b1baa>$chcs</font>]
        }
      }
    }
    <b><font color=#3a6797>set</font></b> fg <font color=#1b1baa>$clrinaf</font>  ;<i><font color=#4b5d50># main foreground</font></i>
    <b><font color=#3a6797>set</font></b> bg <font color=#1b1baa>$clrinab</font>  ;<i><font color=#4b5d50># main background</font></i>
    <b><font color=#3a6797>set</font></b> fE <font color=#1b1baa>$clrtitf</font>  ;<i><font color=#4b5d50># fieldforeground foreground</font></i>
    <b><font color=#3a6797>set</font></b> bE <font color=#1b1baa>$clrtitb</font>  ;<i><font color=#4b5d50># fieldforeground background</font></i>
    <b><font color=#3a6797>set</font></b> fS <font color=#1b1baa>$clractf</font>  ;<i><font color=#4b5d50># active/selection foreground</font></i>
    <b><font color=#3a6797>set</font></b> bS <font color=#1b1baa>$clractb</font>  ;<i><font color=#4b5d50># active/selection background</font></i>
    <b><font color=#3a6797>set</font></b> hh <font color=#1b1baa>$clrhelp</font>  ;<i><font color=#4b5d50># (not used in cs' theming) title color</font></i>
    <b><font color=#3a6797>set</font></b> gr <font color=#1b1baa>$clrgrey</font>  ;<i><font color=#4b5d50># (not used in cs' theming) shadowing color</font></i>
    <b><font color=#3a6797>set</font></b> cc <font color=#1b1baa>$clrcurs</font>  ;<i><font color=#4b5d50># caret's color</font></i>
    <b><font color=#3a6797>set</font></b> ht <font color=#1b1baa>$clrhotk</font>  ;<i><font color=#4b5d50># hotkey color</font></i>
    <b><font color=#3a6797>set</font></b> grey <font color=#1b1baa>$gr</font> ;<i><font color=#4b5d50># #808080</font></i>
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$::apave::_CS_(old)</font> != <font color=#1b1baa>$ncolor</font> || <font color=#8b2a0e>&quot;-doit&quot;</font> in <font color=#1b1baa>$args</font>} {
      <b><font color=#3a6797>set</font></b> ::apave::_CS_(old) <font color=#1b1baa>$ncolor</font>
      <b><font color=#ca14ca>my</font></b> themeWindow <font color=#1b1baa>$win</font> [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$fg</font> <font color=#1b1baa>$bg</font> <font color=#1b1baa>$fE</font> <font color=#1b1baa>$bE</font> <font color=#1b1baa>$fS</font> <font color=#1b1baa>$bS</font> <font color=#1b1baa>$grey</font> <font color=#1b1baa>$bg</font> <font color=#1b1baa>$cc</font> <font color=#1b1baa>$ht</font> <font color=#1b1baa>$hh</font> <font color=#1b1baa>$tfgI</font> <font color=#1b1baa>$tbgI</font> <font color=#1b1baa>$fM</font> <font color=#1b1baa>$bM</font> <font color=#1b1baa>$tfgW</font> <font color=#1b1baa>$tbgW</font> <font color=#1b1baa>$tHL2</font> <font color=#1b1baa>$tbHL</font> <font color=#1b1baa>$chkHL</font> <font color=#1b1baa>$res5</font> <font color=#1b1baa>$res6</font> <font color=#1b1baa>$res7</font>]
      <b><font color=#ca14ca>my</font></b> UpdateColors
      <b><font color=#ca14ca>my</font></b> initTooltip
    }
    <b><font color=#3a6797>set</font></b> ::apave::FGMAIN <font color=#1b1baa>$fg</font>
    <b><font color=#3a6797>set</font></b> ::apave::BGMAIN <font color=#1b1baa>$bg</font>
    <b><font color=#3a6797>set</font></b> ::apave::FGMAIN2 <font color=#1b1baa>$fE</font>
    <b><font color=#3a6797>set</font></b> ::apave::BGMAIN2 <font color=#1b1baa>$bE</font>
    <b><font color=#3a6797>catch</font></b> {
      <b><font color=#3a6797>if</font></b> {[<b><font color=#ca14ca>my</font></b> csDark <font color=#1b1baa>$ncolor</font>]} {::baltip::configure <font color=#653760>-relief</font> groove}
    }
    <b><font color=#3a6797>list</font></b> <font color=#1b1baa>$fg</font> <font color=#1b1baa>$bg</font> <font color=#1b1baa>$fE</font> <font color=#1b1baa>$bE</font> <font color=#1b1baa>$fS</font> <font color=#1b1baa>$bS</font> <font color=#1b1baa>$hh</font> <font color=#1b1baa>$grey</font> <font color=#1b1baa>$cc</font> <font color=#1b1baa>$ht</font> <font color=#1b1baa>$tfgI</font> <font color=#1b1baa>$tbgI</font> <font color=#1b1baa>$fM</font> <font color=#1b1baa>$bM</font> <font color=#1b1baa>$tfgW</font> <font color=#1b1baa>$tbgW</font> <font color=#1b1baa>$tHL2</font> <font color=#1b1baa>$tbHL</font> <font color=#1b1baa>$chkHL</font> <font color=#1b1baa>$res5</font> <font color=#1b1baa>$res6</font> <font color=#1b1baa>$res7</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csAdd></a>
  <b><font color=#ca14ca>method</font></b> csAdd {newcs {setnew true}} {
    <i><font color=#4b5d50># Registers new color scheme in the list of CS.</font></i>
    <i><font color=#4b5d50>#   newcs -  CS item</font></i>
    <i><font color=#4b5d50>#   setnew - if true, sets the CS as current</font></i>
    <i><font color=#4b5d50># Does not register the CS, if it is already registered.</font></i>
    <i><font color=#4b5d50># Returns an index of current CS.</font></i>
    <i><font color=#4b5d50># See also: themeWindow</font></i>

    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$newcs</font>]&lt;4} {
      <b><font color=#3a6797>set</font></b> newcs [<b><font color=#ca14ca>my</font></b> ColorScheme]  ;<i><font color=#4b5d50># CS should be defined</font></i>
    }
    <b><font color=#3a6797>lassign</font></b> <font color=#1b1baa>$newcs</font> name tfg2 tfg1 tbg2 tbg1 tfhh - - tcur grey bclr
    <b><font color=#3a6797>set</font></b> found <font color=#1b1baa>$::apave::_CS_(NONCS)</font>
    <b><font color=#3a6797>set</font></b> maxcs [::apave::cs_Max]
    <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i <font color=#1b1baa>$::apave::_CS_(MINCS)</font>} {<font color=#1b1baa>$i</font>&lt;=<font color=#1b1baa>$maxcs</font>} {<b><font color=#3a6797>incr</font></b> i} {
      <b><font color=#3a6797>lassign</font></b> [<b><font color=#ca14ca>my</font></b> csGet <font color=#1b1baa>$i</font>] cfg2 cfg1 cbg2 cbg1 cfhh - - ccur
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$cfg2</font> eq <font color=#1b1baa>$tfg2</font> && <font color=#1b1baa>$cfg1</font> eq <font color=#1b1baa>$tfg1</font> && <font color=#1b1baa>$cbg2</font> eq <font color=#1b1baa>$tbg2</font> && \
      <font color=#1b1baa>$cbg1</font> eq <font color=#1b1baa>$tbg1</font> && <font color=#1b1baa>$cfhh</font> eq <font color=#1b1baa>$tfhh</font> && <font color=#1b1baa>$ccur</font> eq <font color=#1b1baa>$tcur</font>} {
        <b><font color=#3a6797>set</font></b> found <font color=#1b1baa>$i</font>
        <b><font color=#ca14ca>break</font></b>
      }
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$found</font> == <font color=#1b1baa>$::apave::_CS_(MINCS)</font> && [<b><font color=#ca14ca>my</font></b> csCurrent] == <font color=#1b1baa>$::apave::_CS_(NONCS)</font>} {
      <b><font color=#3a6797>set</font></b> setnew false ;<i><font color=#4b5d50># no moves from default CS to 'basic'</font></i>
    } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$found</font> == <font color=#1b1baa>$::apave::_CS_(NONCS)</font>} {
      <b><font color=#3a6797>lappend</font></b> ::apave::_CS_(ALL) <font color=#1b1baa>$newcs</font>
      <b><font color=#3a6797>set</font></b> found [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$maxcs</font>+1}]
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$setnew</font>} {<b><font color=#3a6797>set</font></b> ::apave::_CS_(index) [<b><font color=#3a6797>set</font></b> ::apave::_CS_(old) <font color=#1b1baa>$found</font>]}
    <b><font color=#ca14ca>my</font></b> csCurrent
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csDeleteExternal></a>
  <b><font color=#ca14ca>method</font></b> csDeleteExternal {} {
    <i><font color=#4b5d50># Removes all external CS.</font></i>

    <b><font color=#3a6797>set</font></b> ::apave::_CS_(ALL) [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$::apave::_CS_(ALL)</font> 48 end]

  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csToned></a>
  <b><font color=#ca14ca>method</font></b> csToned {cs hue {doit no}} {
    <i><font color=#4b5d50># Make an external CS that has tones (hues) of colors for a CS.</font></i>
    <i><font color=#4b5d50>#   cs - internal apave CS to be toned</font></i>
    <i><font color=#4b5d50>#   hue - a percent to get light (&gt; 0) or dark (&lt; 0) tones</font></i>
    <i><font color=#4b5d50>#   doit - flag &quot;do it anyway&quot;</font></i>
    <i><font color=#4b5d50># This method allows only one external CS, eliminating others.</font></i>
    <i><font color=#4b5d50># Returns: &quot;yes&quot; if the CS was toned</font></i>

    <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$doit</font> && [<b><font color=#ca14ca>my</font></b> csCurrent] &gt; <font color=#1b1baa>$::apave::_CS_(NONCS)</font>} {
      <b><font color=#3a6797>puts</font></b> [<b><font color=#3a6797>set</font></b> msg <font color=#8b2a0e>&quot;\napave method csToned must be run before csSet!\n&quot;</font>]
      <b><font color=#ca14ca>return</font></b> <font color=#653760>-code</font> error <font color=#1b1baa>$msg</font>
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$cs</font> &lt;= <font color=#1b1baa>$::apave::_CS_(NONCS)</font> || <font color=#1b1baa>$cs</font> &gt; <font color=#1b1baa>$::apave::_CS_(STDCS)</font>} {
      <b><font color=#ca14ca>return</font></b> no
    }
    <b><font color=#ca14ca>my</font></b> csDeleteExternal
    <b><font color=#3a6797>set</font></b> CS [<b><font color=#ca14ca>my</font></b> csGet <font color=#1b1baa>$cs</font>]
    <b><font color=#3a6797>set</font></b> mainc [<b><font color=#ca14ca>my</font></b> csMainColors]
    <b><font color=#3a6797>set</font></b> ::apave::_CS_(HUE) <font color=#1b1baa>$hue</font>
    <b><font color=#3a6797>set</font></b> hue [<b><font color=#3a6797>expr</font></b> {(100.0+<font color=#1b1baa>$hue</font>)/100.0}]
    <b><font color=#3a6797>foreach</font></b> i [<b><font color=#ca14ca>my</font></b> csMapTheme] {
      <b><font color=#3a6797>set</font></b> color [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$CS</font> <font color=#1b1baa>$i</font>]
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font> in <font color=#1b1baa>$mainc</font>} {
        <b><font color=#3a6797>catch</font></b> {  ;<i><font color=#4b5d50># for CS=-1 not working</font></i>
          <b><font color=#3a6797>set</font></b> clr [<b><font color=#3a6797>string</font></b> map {black #000000 white #ffffff grey #808080 \
            red #ff0000 yellow #ffff00 \
            orange #ffa500 #000 #000000 #fff #ffffff} <font color=#1b1baa>$color</font>]
          <b><font color=#3a6797>scan</font></b> <font color=#1b1baa>$clr</font> #%2x%2x%2x R G B
          <b><font color=#3a6797>foreach</font></b> valname {R G B} {
            <b><font color=#3a6797>set</font></b> val [<b><font color=#3a6797>expr</font></b> {int([<b><font color=#3a6797>set</font></b> <font color=#1b1baa>$valname</font>]*<font color=#1b1baa>$hue</font>)}]
            <b><font color=#3a6797>set</font></b> <font color=#1b1baa>$valname</font> [<b><font color=#3a6797>expr</font></b> {max(min(<font color=#1b1baa>$val</font>,255),0)}]
          }
          <b><font color=#3a6797>set</font></b> color [<b><font color=#3a6797>format</font></b> #%02x%02x%02x <font color=#1b1baa>$R</font> <font color=#1b1baa>$G</font> <font color=#1b1baa>$B</font>]
        }
      }
      <b><font color=#3a6797>lappend</font></b> TWargs <font color=#1b1baa>$color</font>
    }
    <b><font color=#3a6797>set</font></b> ::apave::_CS_(TONED) [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$cs</font> [<b><font color=#ca14ca>my</font></b> csNewIndex]]
    <b><font color=#ca14ca>my</font></b> themeWindow . <font color=#1b1baa>$TWargs</font> no
    <b><font color=#ca14ca>my</font></b> csSet [<b><font color=#ca14ca>my</font></b> csCurrent] .  ;<i><font color=#4b5d50># resets new CS's data</font></i>
    <b><font color=#ca14ca>return</font></b> yes
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csMainColors></a>
  <b><font color=#ca14ca>method</font></b> csMainColors {} {
    <i><font color=#4b5d50># Returns a list of main colors' indices of CS.</font></i>
    <i><font color=#4b5d50># See also: csMapTheme</font></i>

    <b><font color=#3a6797>list</font></b> 0 1 2 3 5 10 11 13 16
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csMapTheme></a>
  <b><font color=#ca14ca>method</font></b> csMapTheme {} {
    <i><font color=#4b5d50># Returns a map of CS / themeWindow method colors.</font></i>
    <i><font color=#4b5d50># The map is a list of indices in CS corresponding to themeWindow's args.</font></i>
    <i><font color=#4b5d50># See also: themeWindow</font></i>

    <b><font color=#3a6797>list</font></b> 1 3 0 2 6 5 8 3 7 9 4 10 11 1 13 14 15 16 17 18 19 20 21
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=csNewIndex></a>
  <b><font color=#ca14ca>method</font></b> csNewIndex {} {
    <i><font color=#4b5d50># Gets a next available CS's index.</font></i>

    <b><font color=#3a6797>expr</font></b> {[::apave::cs_Max]+1}
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=ColorScheme></a>
  <b><font color=#ca14ca>method</font></b> ColorScheme {{ncolor <font color=#8b2a0e>&quot;&quot;</font>}} {
    <i><font color=#4b5d50># Gets a full record of color scheme from a list of available ones</font></i>
    <i><font color=#4b5d50>#   ncolor - index of color scheme</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ncolor</font> eq {} || <font color=#1b1baa>$ncolor</font>&lt;0} {
      <i><font color=#4b5d50># basic color scheme: get colors from a current ttk::style colors</font></i>
      <b><font color=#3a6797>set</font></b> fW black
      <b><font color=#3a6797>set</font></b> bW #FBFB95
      <b><font color=#3a6797>set</font></b> bg2 #e4e4e4
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists ::apave::_CS_(def_fg)]} {
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ncolor</font> == <font color=#1b1baa>$::apave::_CS_(NONCS)</font>} {<b><font color=#3a6797>set</font></b> bg2 #e5e5e5}
        <b><font color=#3a6797>set</font></b> fg <font color=#1b1baa>$::apave::_CS_(def_fg)</font>
        <b><font color=#3a6797>set</font></b> fg2 #2b3f55
        <b><font color=#3a6797>set</font></b> bg <font color=#1b1baa>$::apave::_CS_(def_bg)</font>
        <b><font color=#3a6797>set</font></b> fS <font color=#1b1baa>$::apave::_CS_(def_fS)</font>
        <b><font color=#3a6797>set</font></b> bS <font color=#1b1baa>$::apave::_CS_(def_bS)</font>
        <b><font color=#3a6797>set</font></b> bA <font color=#1b1baa>$::apave::_CS_(def_bA)</font>
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(index) <font color=#1b1baa>$::apave::_CS_(NONCS)</font>
        <b><font color=#3a6797>lassign</font></b> [::apave::parseOptions [<b><font color=#134070>ttk::style</font></b> configure .] \
          <font color=#653760>-foreground</font> #000000 <font color=#653760>-background</font> #d9d9d9 <font color=#653760>-troughcolor</font> #c3c3c3] fg bg tc
        <b><font color=#3a6797>set</font></b> fS <font color=#1b1baa>$::apave::_CS_(!FG)</font>
        <b><font color=#3a6797>set</font></b> bS <font color=#1b1baa>$::apave::_CS_(!BG)</font>
        <b><font color=#3a6797>lassign</font></b> [::apave::parseOptions [<b><font color=#134070>ttk::style</font></b> map . <font color=#653760>-background</font>] \
          disabled #d9d9d9 active #ececec] bD bA
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$bA</font> eq {#ececec}} {<b><font color=#3a6797>set</font></b> bA #ffffff}
        <b><font color=#3a6797>lassign</font></b> [::apave::parseOptions [<b><font color=#134070>ttk::style</font></b> map . <font color=#653760>-foreground</font>] \
          disabled #a3a3a3] fD
        <b><font color=#3a6797>lassign</font></b> [::apave::parseOptions [<b><font color=#134070>ttk::style</font></b> map . <font color=#653760>-selectbackground</font>] \
          !focus #9e9a91] bclr
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(def_fg) [<b><font color=#3a6797>set</font></b> fg2 <font color=#1b1baa>$fg</font>]
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(def_bg) <font color=#1b1baa>$bg</font>
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(def_fS) <font color=#1b1baa>$fS</font>
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(def_bS) <font color=#1b1baa>$bS</font>
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(def_fD) <font color=#1b1baa>$fD</font>
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(def_bD) <font color=#1b1baa>$bD</font>
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(def_bA) <font color=#1b1baa>$bA</font>
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(def_tc) <font color=#1b1baa>$tc</font>
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(def_bclr) <font color=#1b1baa>$bclr</font>
      }
      <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> default \
           <font color=#1b1baa>$fg</font>    <font color=#1b1baa>$fg</font>     <font color=#1b1baa>$bA</font>    <font color=#1b1baa>$bg</font>     <font color=#1b1baa>$fg2</font>    <font color=#1b1baa>$bS</font>     <font color=#1b1baa>$fS</font>    #444  grey   #4f6379 <font color=#1b1baa>$fS</font> <font color=#1b1baa>$bS</font> - <font color=#1b1baa>$bg</font> <font color=#1b1baa>$fW</font> <font color=#1b1baa>$bW</font> <font color=#1b1baa>$bg2</font> #a20000 #76b2f1 #005 #006 #007]
      <i><font color=#4b5d50># clrtitf clrinaf clrtitb clrinab clrhelp clractb clractf clrcurs clrgrey clrhotk fI  bI fM bM fW bW</font></i>
    }
    <b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$::apave::_CS_(ALL)</font> <font color=#1b1baa>$ncolor</font>
  }
<a id=Theming></a>
<i><font color=#4b5d50># ________________________ Theming _________________________ #</font></i>
<a id=Common></a>
  <i><font color=#4b5d50>## ________________________ Common _________________________ ##</font></i>
<a id=apaveTheme></a>
  <b><font color=#ca14ca>method</font></b> apaveTheme {{theme {}}} {
    <i><font color=#4b5d50># Checks if apave color scheme is used (always for standard ttk themes).</font></i>
    <i><font color=#4b5d50>#   theme - a theme to be checked (if omitted, a current ttk theme)</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$theme</font> eq {}} {<b><font color=#3a6797>set</font></b> theme [<b><font color=#134070>ttk::style</font></b> theme use]}
    <b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$theme</font> in {clam alt classic default awdark awlight plastik}}
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=initTooltip></a>
  <b><font color=#ca14ca>method</font></b> initTooltip {args} {
    <i><font color=#4b5d50># Configurates colors and other attributes of tooltip.</font></i>
    <i><font color=#4b5d50>#  args - options of ::baltip::configure</font></i>

    ::apave::initBaltip
    <b><font color=#3a6797>lassign</font></b> [<b><font color=#3a6797>lrange</font></b> [<b><font color=#ca14ca>my</font></b> csGet] 14 15] fW bW
    ::baltip config <font color=#653760>-fg</font> <font color=#1b1baa>$fW</font> <font color=#653760>-bg</font> <font color=#1b1baa>$bW</font> <font color=#653760>-global</font> yes
    ::baltip config {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=thDark></a>
  <b><font color=#ca14ca>method</font></b> thDark {theme} {
    <i><font color=#4b5d50># Checks if a theme is dark, light or neutral.</font></i>
    <i><font color=#4b5d50>#   theme - theme's name</font></i>
    <i><font color=#4b5d50># Returns 1 for dark, 0 for light, -1 for neutral.</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$theme</font> in {alt classic default clam}} {
      <b><font color=#ca14ca>return</font></b> -1
    }
    <b><font color=#3a6797>string</font></b> match <font color=#653760>-nocase</font> *dark* <font color=#1b1baa>$theme</font>
  }
<a id=Theme_methods></a>
  <i><font color=#4b5d50>## ________________________ Theme methods _________________________ ##</font></i>
<a id=themeWindow></a>
  <b><font color=#ca14ca>method</font></b> themeWindow {win {clrs <font color=#8b2a0e>&quot;&quot;</font>} {isCS true} args} {
    <i><font color=#4b5d50># Changes a Tk style (theming a bit)</font></i>
    <i><font color=#4b5d50>#   win - window's name</font></i>
    <i><font color=#4b5d50>#   clrs - list of colors</font></i>
    <i><font color=#4b5d50>#   isCS - true, if the colors are taken from a CS</font></i>
    <i><font color=#4b5d50>#   args - other options</font></i>
    <i><font color=#4b5d50>#</font></i>
    <i><font color=#4b5d50># The clrs contains:</font></i>
    <i><font color=#4b5d50>#   tfg1 - foreground for themed widgets (main stock)</font></i>
    <i><font color=#4b5d50>#   tbg1 - background for themed widgets (main stock)</font></i>
    <i><font color=#4b5d50>#   tfg2 - foreground for themed widgets (enter data stock)</font></i>
    <i><font color=#4b5d50>#   tbg2 - background for themed widgets (enter data stock)</font></i>
    <i><font color=#4b5d50>#   tfgS - foreground for selection</font></i>
    <i><font color=#4b5d50>#   tbgS - background for selection</font></i>
    <i><font color=#4b5d50>#   tfgD - foreground for disabled themed widgets</font></i>
    <i><font color=#4b5d50>#   tbgD - background for disabled themed widgets</font></i>
    <i><font color=#4b5d50>#   tcur - insertion cursor color</font></i>
    <i><font color=#4b5d50>#   bclr - hotkey/border color</font></i>
    <i><font color=#4b5d50>#   thlp - help color</font></i>
    <i><font color=#4b5d50>#   tfgI - foreground for external CS</font></i>
    <i><font color=#4b5d50>#   tbgI - background for external CS</font></i>
    <i><font color=#4b5d50>#   tfgM - foreground for menus</font></i>
    <i><font color=#4b5d50>#   tbgM - background for menus</font></i>
    <i><font color=#4b5d50>#</font></i>
    <i><font color=#4b5d50># The themeWindow can be used outside of &quot;color scheme&quot; UI.</font></i>
    <i><font color=#4b5d50># E.g., in TKE editor, e_menu and add_shortcuts plugins use it to</font></i>
    <i><font color=#4b5d50># be consistent with TKE theme.</font></i>

    <b><font color=#3a6797>if</font></b> {![::apave::cs_Active]} {
      <b><font color=#ca14ca>my</font></b> themeMandatory <font color=#1b1baa>$win</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
      <b><font color=#ca14ca>return</font></b>
    }
    <b><font color=#3a6797>lassign</font></b> <font color=#1b1baa>$clrs</font> tfg1 tbg1 tfg2 tbg2 tfgS tbgS tfgD tbgD tcur bclr \
      thlp tfgI tbgI tfgM tbgM twfg twbg tHL2 tbHL chkHL res5 res6 res7
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tfg1</font> eq {-}} <b><font color=#ca14ca>return</font></b>
    <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$isCS</font>} {
      <i><font color=#4b5d50># if 'external  scheme' is used, register it in _CS_(ALL)</font></i>
      <i><font color=#4b5d50># and set it as the current CS</font></i>

<i><font color=#4b5d50># &lt;CS&gt;    itemfg  mainfg  itembg  mainbg  itemsHL  actbg   actfg  cursor  greyed   hot \</font></i>
<i><font color=#4b5d50>  emfg  embg   -  menubg  winfg   winbg   itemHL2 #003...reserved...</font></i>

      <b><font color=#ca14ca>my</font></b> csAdd [<b><font color=#3a6797>list</font></b> CS-[<b><font color=#ca14ca>my</font></b> csNewIndex] <font color=#1b1baa>$tfg2</font> <font color=#1b1baa>$tfg1</font> <font color=#1b1baa>$tbg2</font> <font color=#1b1baa>$tbg1</font> \
        <font color=#1b1baa>$thlp</font> <font color=#1b1baa>$tbgS</font> <font color=#1b1baa>$tfgS</font> <font color=#1b1baa>$tcur</font> <font color=#1b1baa>$tfgD</font> <font color=#1b1baa>$bclr</font> <font color=#1b1baa>$tfgI</font> <font color=#1b1baa>$tbgI</font> <font color=#1b1baa>$tfgM</font> <font color=#1b1baa>$tbgM</font> \
        <font color=#1b1baa>$twfg</font> <font color=#1b1baa>$twbg</font> <font color=#1b1baa>$tHL2</font> <font color=#1b1baa>$tbHL</font> <font color=#1b1baa>$chkHL</font> <font color=#1b1baa>$res5</font> <font color=#1b1baa>$res6</font> <font color=#1b1baa>$res7</font>]
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tfgI</font> eq {}} {<b><font color=#3a6797>set</font></b> tfgI <font color=#1b1baa>$tfg2</font>}
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tbgI</font> eq {}} {<b><font color=#3a6797>set</font></b> tbgI <font color=#1b1baa>$tbg2</font>}
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tfgM</font> in {{} -}} {<b><font color=#3a6797>set</font></b> tfgM <font color=#1b1baa>$tfg1</font>}
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tbgM</font> eq {}} {<b><font color=#3a6797>set</font></b> tbgM <font color=#1b1baa>$tbg1</font>}
    <b><font color=#ca14ca>my</font></b> Main_Style <font color=#1b1baa>$tfg1</font> <font color=#1b1baa>$tbg1</font> <font color=#1b1baa>$tfg2</font> <font color=#1b1baa>$tbg2</font> <font color=#1b1baa>$tfgS</font> <font color=#1b1baa>$tbgS</font> <font color=#1b1baa>$tfgD</font> <font color=#1b1baa>$tbg1</font> <font color=#1b1baa>$tfg1</font> <font color=#1b1baa>$tbg2</font> <font color=#1b1baa>$tbg1</font>
    <b><font color=#3a6797>foreach</font></b> arg {tfg1 tbg1 tfg2 tbg2 tfgS tbgS tfgD tbgD tcur bclr \
    thlp tfgI tbgI tfgM tbgM twfg twbg tHL2 tbHL chkHL res5 res6 res7 args} {
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$win</font> eq {.}} {
        <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$win</font>,<font color=#1b1baa>$arg</font>) [<b><font color=#3a6797>set</font></b> <font color=#1b1baa>$arg</font>]
      }
      <b><font color=#3a6797>set</font></b> ::apave::_CS_(expo,<font color=#1b1baa>$arg</font>) [<b><font color=#3a6797>set</font></b> <font color=#1b1baa>$arg</font>]
    }
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> darkCS [<b><font color=#ca14ca>my</font></b> csDark]]} {<b><font color=#3a6797>set</font></b> aclr #ff9dff} {<b><font color=#3a6797>set</font></b> aclr #890970}
    <b><font color=#3a6797>set</font></b> fontdef [<b><font color=#134070>font</font></b> actual apaveFontDef]
    <i><font color=#4b5d50># configuring themed widgets</font></i>
    <b><font color=#3a6797>foreach</font></b> ts {TLabel TButton TCheckbutton TRadiobutton TMenubutton} {
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-font</font> <font color=#1b1baa>$fontdef</font>
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-foreground</font> <font color=#1b1baa>$tfg1</font>
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-background</font> <font color=#1b1baa>$tbg1</font>
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-background</font> [<b><font color=#3a6797>list</font></b> pressed <font color=#1b1baa>$tbg2</font> active <font color=#1b1baa>$tbg2</font> focus <font color=#1b1baa>$tbgS</font> alternate <font color=#1b1baa>$tbg2</font>]
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-foreground</font> [<b><font color=#3a6797>list</font></b> disabled <font color=#1b1baa>$tfgD</font> pressed <font color=#1b1baa>$tfgS</font> active <font color=#1b1baa>$aclr</font> focus <font color=#1b1baa>$tfgS</font> alternate <font color=#1b1baa>$tfg2</font> focus <font color=#1b1baa>$tfg2</font> selected <font color=#1b1baa>$tfg1</font>]
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-bordercolor</font> [<b><font color=#3a6797>list</font></b> focus <font color=#1b1baa>$bclr</font> pressed <font color=#1b1baa>$bclr</font>]
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-lightcolor</font> [<b><font color=#3a6797>list</font></b> focus <font color=#1b1baa>$bclr</font>]
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-darkcolor</font> [<b><font color=#3a6797>list</font></b> focus <font color=#1b1baa>$bclr</font>]
    }
    <b><font color=#134070>ttk::style</font></b> configure TLabelframe.Label <font color=#653760>-foreground</font> <font color=#1b1baa>$thlp</font> <font color=#653760>-background</font> <font color=#1b1baa>$tbg1</font> <font color=#653760>-font</font> <font color=#1b1baa>$fontdef</font>
    <b><font color=#3a6797>foreach</font></b> ts {TNotebook TFrame} {
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-background</font> <font color=#1b1baa>$tbg1</font>
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-background</font> [<b><font color=#3a6797>list</font></b> focus <font color=#1b1baa>$tbg1</font> !focus <font color=#1b1baa>$tbg1</font>]
    }
    <b><font color=#134070>ttk::style</font></b> configure TNotebook.Tab <font color=#653760>-font</font> <font color=#1b1baa>$fontdef</font>
    <b><font color=#134070>ttk::style</font></b> map TNotebook.Tab <font color=#653760>-foreground</font> [<b><font color=#3a6797>list</font></b> {selected !active} <font color=#1b1baa>$tfgS</font> \
      {!selected !active} <font color=#1b1baa>$tfgM</font> active <font color=#1b1baa>$aclr</font> {selected active} <font color=#1b1baa>$aclr</font>] \
      <font color=#653760>-background</font> [<b><font color=#3a6797>list</font></b> {selected !active} <font color=#1b1baa>$tbgS</font> {!selected !active} <font color=#1b1baa>$tbgM</font> \
      {!selected active} <font color=#1b1baa>$tbg2</font> {selected active} <font color=#1b1baa>$tbg2</font>]
    <b><font color=#3a6797>foreach</font></b> ts {TEntry Treeview TSpinbox TCombobox TCombobox.Spinbox TMatchbox TNotebook.Tab TScale} {
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-lightcolor</font> [<b><font color=#3a6797>list</font></b> focus <font color=#1b1baa>$bclr</font> active <font color=#1b1baa>$bclr</font>]
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-darkcolor</font> [<b><font color=#3a6797>list</font></b> focus <font color=#1b1baa>$bclr</font> active <font color=#1b1baa>$bclr</font>]
    }
    <b><font color=#134070>ttk::style</font></b> configure TScrollbar <font color=#653760>-arrowcolor</font> <font color=#1b1baa>$tfg1</font>
    <b><font color=#134070>ttk::style</font></b> map TScrollbar <font color=#653760>-troughcolor</font> [<b><font color=#3a6797>list</font></b> !active <font color=#1b1baa>$tbg1</font> active <font color=#1b1baa>$tbg2</font>] \
      <font color=#653760>-background</font> [<b><font color=#3a6797>list</font></b> !active <font color=#1b1baa>$tbg1</font> disabled <font color=#1b1baa>$tbg1</font> {!selected !disabled active} <font color=#1b1baa>$tbgS</font>]
    <b><font color=#134070>ttk::style</font></b> map TProgressbar <font color=#653760>-troughcolor</font> [<b><font color=#3a6797>list</font></b> !active <font color=#1b1baa>$tbg2</font> active <font color=#1b1baa>$tbg1</font>]
    <b><font color=#134070>ttk::style</font></b> configure TProgressbar <font color=#653760>-background</font> <font color=#1b1baa>$tbgS</font>
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> cs [<b><font color=#ca14ca>my</font></b> csCurrent]]&lt;20} {
      <b><font color=#134070>ttk::style</font></b> conf TSeparator <font color=#653760>-background</font> #a2a2a2
    } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$cs</font>&lt;23} {
      <b><font color=#134070>ttk::style</font></b> conf TSeparator <font color=#653760>-background</font> #656565
    } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$cs</font>&lt;28} {
      <b><font color=#134070>ttk::style</font></b> conf TSeparator <font color=#653760>-background</font> #3c3c3c
    } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$cs</font>&gt;35 && <font color=#1b1baa>$cs</font>&lt;39} {
      <b><font color=#134070>ttk::style</font></b> conf TSeparator <font color=#653760>-background</font> #313131
    } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$cs</font>==43 || <font color=#1b1baa>$cs</font>&gt;44} {
      <b><font color=#134070>ttk::style</font></b> conf TSeparator <font color=#653760>-background</font> #2e2e2e
    }
    <b><font color=#3a6797>foreach</font></b> ts {TEntry Treeview TSpinbox TCombobox TCombobox.Spinbox TMatchbox} {
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-font</font> <font color=#1b1baa>$fontdef</font>
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-selectforeground</font> <font color=#1b1baa>$tfgS</font>
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-selectbackground</font> <font color=#1b1baa>$tbgS</font>
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-selectforeground</font> [<b><font color=#3a6797>list</font></b> !focus <font color=#1b1baa>$::apave::_CS_(!FG)</font>]
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-selectbackground</font> [<b><font color=#3a6797>list</font></b> !focus <font color=#1b1baa>$::apave::_CS_(!BG)</font>]
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-fieldforeground</font> <font color=#1b1baa>$tfg2</font>
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-fieldbackground</font> <font color=#1b1baa>$tbg2</font>
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-insertcolor</font> <font color=#1b1baa>$tcur</font>
      <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-bordercolor</font> [<b><font color=#3a6797>list</font></b> focus <font color=#1b1baa>$bclr</font> active <font color=#1b1baa>$bclr</font>]
      <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-insertwidth</font> <font color=#1b1baa>$::apave::_CS_(CURSORWIDTH)</font>
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ts</font> eq {TCombobox}} {
        <i><font color=#4b5d50># combobox is sort of individual</font></i>
        <b><font color=#134070>ttk::style</font></b> configure <font color=#1b1baa>$ts</font> <font color=#653760>-foreground</font> <font color=#1b1baa>$tfg1</font> <font color=#653760>-background</font> <font color=#1b1baa>$tbg1</font> <font color=#653760>-arrowcolor</font> <font color=#1b1baa>$tfg1</font>
        <b><font color=#134070>ttk::style</font></b> map <font color=#1b1baa>$ts</font> <font color=#653760>-background</font> [<b><font color=#3a6797>list</font></b> {readonly focus} <font color=#1b1baa>$tbg2</font> {active focus} <font color=#1b1baa>$tbg2</font>] \
          <font color=#653760>-foreground</font> [<b><font color=#3a6797>list</font></b> {readonly focus} <font color=#1b1baa>$tfg2</font> {active focus} <font color=#1b1baa>$tfg2</font>] \
          <font color=#653760>-fieldforeground</font> [<b><font color=#3a6797>list</font></b> {active focus} <font color=#1b1baa>$tfg2</font> readonly <font color=#1b1baa>$tfg2</font> disabled <font color=#1b1baa>$tfgD</font>] \
          <font color=#653760>-fieldbackground</font> [<b><font color=#3a6797>list</font></b> {active focus} <font color=#1b1baa>$tbg2</font> {readonly focus} <font color=#1b1baa>$tbg2</font> {readonly !focus} <font color=#1b1baa>$tbg1</font> disabled <font color=#1b1baa>$tbgD</font>] \
          <font color=#653760>-focusfill</font> [<b><font color=#3a6797>list</font></b> {readonly focus} <font color=#1b1baa>$tbgS</font>] <font color=#653760>-arrowcolor</font> [<b><font color=#3a6797>list</font></b> disabled <font color=#1b1baa>$tfgD</font>]
      } <b><font color=#3a6797>else</font></b> {
        <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-foreground</font> <font color=#1b1baa>$tfg2</font>
        <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-background</font> <font color=#1b1baa>$tbg2</font>
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ts</font> eq {Treeview}} {
          <b><font color=#134070>ttk::style</font></b> map <font color=#1b1baa>$ts</font> <font color=#653760>-foreground</font> [<b><font color=#3a6797>list</font></b> readonly <font color=#1b1baa>$tfgD</font> disabled <font color=#1b1baa>$tfgD</font> {selected focus} <font color=#1b1baa>$tfgS</font> {selected !focus} <font color=#1b1baa>$thlp</font>] \
            <font color=#653760>-background</font> [<b><font color=#3a6797>list</font></b> readonly <font color=#1b1baa>$tbgD</font> disabled <font color=#1b1baa>$tbgD</font> {selected focus} <font color=#1b1baa>$tbgS</font> {selected !focus} <font color=#1b1baa>$tbg1</font>]
        } <b><font color=#3a6797>else</font></b> {
          <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-foreground</font> [<b><font color=#3a6797>list</font></b> readonly <font color=#1b1baa>$tfgD</font> disabled <font color=#1b1baa>$tfgD</font> selected <font color=#1b1baa>$tfgS</font>]
          <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-background</font> [<b><font color=#3a6797>list</font></b> readonly <font color=#1b1baa>$tbgD</font> disabled <font color=#1b1baa>$tbgD</font> selected <font color=#1b1baa>$tbgS</font>]
          <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-fieldforeground</font> [<b><font color=#3a6797>list</font></b> readonly <font color=#1b1baa>$tfgD</font> disabled <font color=#1b1baa>$tfgD</font>]
          <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-fieldbackground</font> [<b><font color=#3a6797>list</font></b> readonly <font color=#1b1baa>$tbgD</font> disabled <font color=#1b1baa>$tbgD</font>]
          <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$ts</font> <font color=#653760>-arrowcolor</font> [<b><font color=#3a6797>list</font></b> disabled <font color=#1b1baa>$tfgD</font>]
          <b><font color=#ca14ca>my</font></b> Ttk_style configure <font color=#1b1baa>$ts</font> <font color=#653760>-arrowcolor</font> <font color=#1b1baa>$tfg1</font>
        }
      }
    }
    <b><font color=#134070>ttk::style</font></b> configure Heading <font color=#653760>-font</font> <font color=#1b1baa>$fontdef</font> <font color=#653760>-relief</font> raised <font color=#653760>-padding</font> 1 <font color=#653760>-background</font> <font color=#1b1baa>$tbg1</font>
    <b><font color=#134070>ttk::style</font></b> map Heading <font color=#653760>-foreground</font> [<b><font color=#3a6797>list</font></b> active <font color=#1b1baa>$aclr</font>]
    <b><font color=#134070>option</font></b> add *Listbox.font <font color=#1b1baa>$fontdef</font>
    <b><font color=#134070>option</font></b> add *Menu.font <font color=#1b1baa>$fontdef</font>
    <b><font color=#134070>ttk::style</font></b> configure TMenubutton <font color=#653760>-foreground</font> <font color=#1b1baa>$tfgM</font> <font color=#653760>-background</font> <font color=#1b1baa>$tbgM</font> <font color=#653760>-arrowcolor</font> <font color=#1b1baa>$tfg1</font>
    <b><font color=#134070>ttk::style</font></b> map TMenubutton <font color=#653760>-arrowcolor</font> [<b><font color=#3a6797>list</font></b> disabled <font color=#1b1baa>$tfgD</font>]
    <b><font color=#134070>ttk::style</font></b> configure TButton <font color=#653760>-foreground</font> <font color=#1b1baa>$tfgM</font> <font color=#653760>-background</font> <font color=#1b1baa>$tbgM</font>
    <b><font color=#3a6797>foreach</font></b> {nam clr} {back tbg2 fore tfg2 selectBack tbgS selectFore tfgS} {
      <b><font color=#134070>option</font></b> add *Listbox.<font color=#1b1baa>${nam}</font>ground [<b><font color=#3a6797>set</font></b> <font color=#1b1baa>$clr</font>]
    }
    <b><font color=#3a6797>foreach</font></b> {nam clr} {back tbgM fore tfgM selectBack tbgS selectFore tfgS} {
      <b><font color=#134070>option</font></b> add *Menu.<font color=#1b1baa>${nam}</font>ground [<b><font color=#3a6797>set</font></b> <font color=#1b1baa>$clr</font>]
    }
    <b><font color=#3a6797>foreach</font></b> ts {TRadiobutton TCheckbutton} {
      <b><font color=#134070>ttk::style</font></b> map <font color=#1b1baa>$ts</font> <font color=#653760>-background</font> [<b><font color=#3a6797>list</font></b> focus <font color=#1b1baa>$tbg2</font> !focus <font color=#1b1baa>$tbg1</font>]
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$darkCS</font>} {
      <i><font color=#4b5d50># esp. for default/alt/classic themes and dark CS:</font></i>
      <i><font color=#4b5d50># checked buttons to be lighter</font></i>
      <b><font color=#3a6797>foreach</font></b> ts {TCheckbutton TRadiobutton} {
        <b><font color=#134070>ttk::style</font></b> configure <font color=#1b1baa>$ts</font> <font color=#653760>-indicatorcolor</font> <font color=#1b1baa>$tbgM</font>
        <b><font color=#134070>ttk::style</font></b> map <font color=#1b1baa>$ts</font> <font color=#653760>-indicatorcolor</font> [<b><font color=#3a6797>list</font></b> pressed <font color=#1b1baa>$tbg2</font> selected <font color=#1b1baa>$chkHL</font>]
      }
    }
    <i><font color=#4b5d50># non-themed widgets of button and entry types</font></i>
    <b><font color=#3a6797>foreach</font></b> ts [<b><font color=#ca14ca>my</font></b> NonThemedWidgets button] {
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 6
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,1) <font color=#8b2a0e>&quot;-background <font color=#1b1baa>$</font>tbg1&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,2) <font color=#8b2a0e>&quot;-foreground <font color=#1b1baa>$</font>tfg1&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,3) <font color=#8b2a0e>&quot;-activeforeground <font color=#1b1baa>$</font>tfg2&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,4) <font color=#8b2a0e>&quot;-activebackground <font color=#1b1baa>$</font>tbg2&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,5) <font color=#8b2a0e>&quot;-font <font color=#1b1baa>{$</font>fontdef<font color=#1b1baa>}</font>&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,6) <font color=#8b2a0e>&quot;-highlightbackground <font color=#1b1baa>$</font>tfgD&quot;</font>
      <b><font color=#3a6797>switch</font></b> <font color=#653760>-exact</font> -- <font color=#1b1baa>$ts</font> {
        <b><font color=#134070>checkbutton</font></b> - radiobutton {
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 8
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,7) <font color=#8b2a0e>&quot;-selectcolor <font color=#1b1baa>$</font>tbg1&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,8) <font color=#8b2a0e>&quot;-highlightbackground <font color=#1b1baa>$</font>tbg1&quot;</font>
        }
        <b><font color=#134070>frame</font></b> - scrollbar - scale {
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 8
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,4) <font color=#8b2a0e>&quot;-activebackground <font color=#1b1baa>$</font>tbgS&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,7) <font color=#8b2a0e>&quot;-troughcolor <font color=#1b1baa>$</font>tbg1&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,8) <font color=#8b2a0e>&quot;-elementborderwidth 2&quot;</font>
        }
        <b><font color=#134070>menu</font></b> {
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 9
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,1) <font color=#8b2a0e>&quot;-background <font color=#1b1baa>$</font>tbgM&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,3) <font color=#8b2a0e>&quot;-activeforeground <font color=#1b1baa>$</font>tfgS&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,4) <font color=#8b2a0e>&quot;-activebackground <font color=#1b1baa>$</font>tbgS&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,5) <font color=#8b2a0e>&quot;-disabledforeground <font color=#1b1baa>$</font>tfgD&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,6) <font color=#8b2a0e>&quot;-font <font color=#1b1baa>{$</font>fontdef<font color=#1b1baa>}</font>&quot;</font>
          <b><font color=#3a6797>if</font></b> {[::iswindows]} {
            <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 6
          } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> apaveTheme]} {
            <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,7) {<font color=#653760>-borderwidth</font> 2}
            <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,8) {<font color=#653760>-relief</font> raised}
          } <b><font color=#3a6797>else</font></b> {
            <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,7) {<font color=#653760>-borderwidth</font> 1}
            <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,8) {<font color=#653760>-relief</font> groove}
          }
          <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$darkCS</font>} {<b><font color=#3a6797>set</font></b> c white} {<b><font color=#3a6797>set</font></b> c black}
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,9) <font color=#8b2a0e>&quot;-selectcolor <font color=#1b1baa>$</font>c&quot;</font>
        }
        <b><font color=#134070>canvas</font></b> {
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,1) <font color=#8b2a0e>&quot;-background <font color=#1b1baa>$</font>tbg2&quot;</font>
        }
      }
    }
    <b><font color=#3a6797>foreach</font></b> ts [<b><font color=#ca14ca>my</font></b> NonThemedWidgets entry] {
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 3
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,1) <font color=#8b2a0e>&quot;-foreground <font color=#1b1baa>$</font>tfg2&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,2) <font color=#8b2a0e>&quot;-background <font color=#1b1baa>$</font>tbg2&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,3) <font color=#8b2a0e>&quot;-highlightbackground <font color=#1b1baa>$</font>tfgD&quot;</font>
      <b><font color=#3a6797>switch</font></b> <font color=#653760>-exact</font> -- <font color=#1b1baa>$ts</font> {
        tcombobox - listbox - tmatchbox {
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 8
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,4) <font color=#8b2a0e>&quot;-disabledforeground <font color=#1b1baa>$</font>tfgD&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,5) <font color=#8b2a0e>&quot;-disabledbackground <font color=#1b1baa>$</font>tbgD&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,6) <font color=#8b2a0e>&quot;-highlightcolor <font color=#1b1baa>$</font>bclr&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,7) <font color=#8b2a0e>&quot;-font <font color=#1b1baa>{$</font>fontdef<font color=#1b1baa>}</font>&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,8) <font color=#8b2a0e>&quot;-insertbackground <font color=#1b1baa>$</font>tcur&quot;</font>
        }
        <b><font color=#134070>text</font></b> - entry - tentry {
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 11
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,4) <font color=#8b2a0e>&quot;-selectforeground <font color=#1b1baa>$</font>tfgS&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,5) <font color=#8b2a0e>&quot;-selectbackground <font color=#1b1baa>$</font>tbgS&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,6) <font color=#8b2a0e>&quot;-disabledforeground <font color=#1b1baa>$</font>tfgD&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,7) <font color=#8b2a0e>&quot;-disabledbackground <font color=#1b1baa>$</font>tbgD&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,8) <font color=#8b2a0e>&quot;-highlightcolor <font color=#1b1baa>$</font>bclr&quot;</font>
          <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ts</font> eq {<b><font color=#134070>text</font></b>}} {
            <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 12
            <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,9) <font color=#8b2a0e>&quot;-font <font color=#1b1baa>{[</font>font actual apaveFontMono<font color=#1b1baa>]}</font>&quot;</font>
            <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,12) <font color=#8b2a0e>&quot;-inactiveselectbackground <font color=#1b1baa>$</font>tbgS&quot;</font>
          } <b><font color=#3a6797>else</font></b> {
            <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,9) <font color=#8b2a0e>&quot;-font <font color=#1b1baa>{$</font>fontdef<font color=#1b1baa>}</font>&quot;</font>
          }
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,10) <font color=#8b2a0e>&quot;-insertwidth <font color=#1b1baa>$</font>::apave::_CS_(CURSORWIDTH)&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,11) <font color=#8b2a0e>&quot;-insertbackground <font color=#1b1baa>$</font>tcur&quot;</font>
        }
        <b><font color=#134070>spinbox</font></b> - tspinbox - tablelist {
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 12
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,4) <font color=#8b2a0e>&quot;-insertbackground <font color=#1b1baa>$</font>tcur&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,5) <font color=#8b2a0e>&quot;-buttonbackground <font color=#1b1baa>$</font>tbg2&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,6) <font color=#8b2a0e>&quot;-selectforeground <font color=#1b1baa>$</font>::apave::_CS_(!FG)&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,7) <font color=#8b2a0e>&quot;-selectbackground <font color=#1b1baa>$</font>::apave::_CS_(!BG)&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,8) <font color=#8b2a0e>&quot;-disabledforeground <font color=#1b1baa>$</font>tfgD&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,9) <font color=#8b2a0e>&quot;-disabledbackground <font color=#1b1baa>$</font>tbgD&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,10) <font color=#8b2a0e>&quot;-font <font color=#1b1baa>{$</font>fontdef<font color=#1b1baa>}</font>&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,11) <font color=#8b2a0e>&quot;-insertwidth <font color=#1b1baa>$</font>::apave::_CS_(CURSORWIDTH)&quot;</font>
          <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,12) <font color=#8b2a0e>&quot;-highlightcolor <font color=#1b1baa>$</font>bclr&quot;</font>
        }
      }
    }
    <b><font color=#3a6797>foreach</font></b> ts {disabled} {
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 4
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,1) <font color=#8b2a0e>&quot;-foreground <font color=#1b1baa>$</font>tfgD&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,2) <font color=#8b2a0e>&quot;-background <font color=#1b1baa>$</font>tbgD&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,3) <font color=#8b2a0e>&quot;-disabledforeground <font color=#1b1baa>$</font>tfgD&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,4) <font color=#8b2a0e>&quot;-disabledbackground <font color=#1b1baa>$</font>tbgD&quot;</font>
    }
    <b><font color=#3a6797>foreach</font></b> ts {readonly} {
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,0) 2
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,1) <font color=#8b2a0e>&quot;-foreground <font color=#1b1baa>$</font>tfg1&quot;</font>
      <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$ts</font>,2) <font color=#8b2a0e>&quot;-background <font color=#1b1baa>$</font>tbg1&quot;</font>
    }
    <b><font color=#ca14ca>my</font></b> themeMandatory <font color=#1b1baa>$win</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=Ttk_style></a>
  <b><font color=#ca14ca>method</font></b> Ttk_style {oper ts opt val} {
    <i><font color=#4b5d50># Sets a new style options.</font></i>
    <i><font color=#4b5d50>#   oper - command of ttk::style (&quot;map&quot; or &quot;configure&quot;)</font></i>
    <i><font color=#4b5d50>#   ts - type of style to be configurated</font></i>
    <i><font color=#4b5d50>#   opt - option's name</font></i>
    <i><font color=#4b5d50>#   val - option's value</font></i>

    <b><font color=#3a6797>if</font></b> {![<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> oldval [<b><font color=#134070>ttk::style</font></b> <font color=#1b1baa>$oper</font> <font color=#1b1baa>$ts</font> <font color=#1b1baa>$opt</font>]}]} {
      <b><font color=#3a6797>catch</font></b> {<b><font color=#134070>ttk::style</font></b> <font color=#1b1baa>$oper</font> <font color=#1b1baa>$ts</font> <font color=#1b1baa>$opt</font> <font color=#1b1baa>$val</font>}
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$oldval</font> eq {} && <font color=#1b1baa>$oper</font> eq {configure}} {
        <b><font color=#3a6797>switch</font></b> <font color=#653760>-exact</font> -- <font color=#1b1baa>$opt</font> {
          <font color=#653760>-foreground</font> - <font color=#653760>-background</font> {
            <b><font color=#3a6797>set</font></b> oldval [<b><font color=#134070>ttk::style</font></b> <font color=#1b1baa>$oper</font> . <font color=#1b1baa>$opt</font>]
          }
          <font color=#653760>-fieldbackground</font> {
            <b><font color=#3a6797>set</font></b> oldval white
          }
          <font color=#653760>-insertcolor</font> {
            <b><font color=#3a6797>set</font></b> oldval black
          }
        }
      }
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=Main_Style></a>
  <b><font color=#ca14ca>method</font></b> Main_Style {tfg1 tbg1 tfg2 tbg2 tfgS tbgS bclr tc fA bA bD} {
    <i><font color=#4b5d50># Sets main colors of application</font></i>
    <i><font color=#4b5d50>#   tfg1 - main foreground</font></i>
    <i><font color=#4b5d50>#   tbg1 - main background</font></i>
    <i><font color=#4b5d50>#   tfg2 - not used</font></i>
    <i><font color=#4b5d50>#   tbg2 - not used</font></i>
    <i><font color=#4b5d50>#   tfgS - selectforeground</font></i>
    <i><font color=#4b5d50>#   tbgS - selectbackground</font></i>
    <i><font color=#4b5d50>#   bclr - bordercolor</font></i>
    <i><font color=#4b5d50>#   tc - troughcolor</font></i>
    <i><font color=#4b5d50>#   fA - foreground active</font></i>
    <i><font color=#4b5d50>#   bA - background active</font></i>
    <i><font color=#4b5d50>#   bD - background disabled</font></i>
    <i><font color=#4b5d50># The *foreground disabled* is set as `grey`.</font></i>

    <b><font color=#ca14ca>my</font></b> create_Fonts
    <b><font color=#3a6797>if</font></b> {[<b><font color=#134070>ttk::style</font></b> theme use] eq {classic}} {
      <b><font color=#3a6797>set</font></b> hlc <font color=#8b2a0e>&quot;-highlightcolor <font color=#1b1baa>$</font>tbg1&quot;</font>
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>set</font></b> hlc {}
    }
    <b><font color=#134070>ttk::style</font></b> configure <font color=#8b2a0e>&quot;.&quot;</font> \
      <font color=#653760>-foreground</font> <font color=#1b1baa>$tfg1</font> <font color=#653760>-background</font> <font color=#1b1baa>$tbg1</font> <font color=#653760>-bordercolor</font> <font color=#1b1baa>$bclr</font> <font color=#653760>-darkcolor</font> <font color=#1b1baa>$tbg1</font> \
      <font color=#653760>-lightcolor</font> <font color=#1b1baa>$tbg1</font> <font color=#653760>-troughcolor</font> <font color=#1b1baa>$tc</font> <font color=#653760>-arrowcolor</font> <font color=#1b1baa>$tfg1</font> \
      <font color=#653760>-selectforeground</font> <font color=#1b1baa>$tfgS</font> <font color=#653760>-selectbackground</font> <font color=#1b1baa>$tbgS</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$hlc</font>
    <b><font color=#134070>ttk::style</font></b> map <font color=#8b2a0e>&quot;.&quot;</font> \
      <font color=#653760>-background</font> [<b><font color=#3a6797>list</font></b> disabled <font color=#1b1baa>$bD</font> active <font color=#1b1baa>$bA</font>] \
      <font color=#653760>-foreground</font> [<b><font color=#3a6797>list</font></b> disabled grey active <font color=#1b1baa>$fA</font>]
    . configure <font color=#653760>-bg</font> <font color=#1b1baa>$tbg1</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=themeMandatory></a>
  <b><font color=#ca14ca>method</font></b> themeMandatory {win args} {
    <i><font color=#4b5d50># Themes all that must be themed.</font></i>
    <i><font color=#4b5d50>#   win - window's name</font></i>
    <i><font color=#4b5d50>#   args - options</font></i>

    <i><font color=#4b5d50># set the new options for nested widgets (menu e.g.)</font></i>
    <b><font color=#ca14ca>my</font></b> themeNonThemed <font color=#1b1baa>$win</font>
    <i><font color=#4b5d50># other options per widget type</font></i>
    <b><font color=#3a6797>foreach</font></b> {typ v1 v2} <font color=#1b1baa>$args</font> {
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$typ</font> eq <font color=#8b2a0e>&quot;-&quot;</font>} {
        <i><font color=#4b5d50># config of non-themed widgets</font></i>
        <b><font color=#3a6797>set</font></b> ind [<b><font color=#3a6797>incr</font></b> ::apave::_C_(<font color=#1b1baa>$v1</font>,0)]
        <b><font color=#3a6797>set</font></b> ::apave::_C_(<font color=#1b1baa>$v1</font>,<font color=#1b1baa>$ind</font>) <font color=#8b2a0e>&quot;<font color=#1b1baa>$</font>v2&quot;</font>
      } <b><font color=#3a6797>else</font></b> {
        <i><font color=#4b5d50># style maps of themed widgets</font></i>
        <b><font color=#ca14ca>my</font></b> Ttk_style map <font color=#1b1baa>$typ</font> <font color=#1b1baa>$v1</font> [<b><font color=#3a6797>list</font></b> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$v2</font>]
      }
    }
    ::apave::initStyles
    <b><font color=#ca14ca>my</font></b> ThemeChoosers
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=untouchWidgets></a>
  <b><font color=#ca14ca>method</font></b> untouchWidgets {args} {
    <i><font color=#4b5d50># Makes non-ttk widgets to be untouched by coloring or gets their list.</font></i>
    <i><font color=#4b5d50>#   args - list of widget globs (e.g. {.em.fr.win.* .em.fr.h1 .em.fr.h2})</font></i>
    <i><font color=#4b5d50># If args not set, returns the list of untouched widgets.</font></i>
    <i><font color=#4b5d50># Items of *args* can have 2 components:</font></i>
    <i><font color=#4b5d50>#   - widget glob</font></i>
    <i><font color=#4b5d50>#   - list of option+value pairs, e.g. &quot;*.textWidget {-fg white -bg black}&quot;</font></i>
    <i><font color=#4b5d50># 2nd component defines additional attributes that override the defaults.</font></i>
    <i><font color=#4b5d50># If 1st item of *args* is &quot;clear&quot;, removes all items set with glob patterns</font></i>
    <i><font color=#4b5d50># (e.g.: my untouchWidgets clear *BALTIP* - clears all baltip's references).</font></i>
    <i><font color=#4b5d50># See also:</font></i>
    <i><font color=#4b5d50>#   touchWidgets</font></i>
    <i><font color=#4b5d50>#   themeNonThemed</font></i>

    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$args</font>]==0} {<b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(untouch)</font>}
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$args</font> 0] eq {clear}} {
      <b><font color=#3a6797>foreach</font></b> u [<b><font color=#3a6797>lrange</font></b> <font color=#1b1baa>$args</font> 1 end] {
        <b><font color=#3a6797>set</font></b> ii [<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-all</font> <font color=#653760>-glob</font> <font color=#1b1baa>$::apave::_CS_(untouch)</font> <font color=#1b1baa>$u</font>]
        <b><font color=#3a6797>foreach</font></b> i [<b><font color=#3a6797>lsort</font></b> <font color=#653760>-decreasing</font> <font color=#653760>-integer</font> <font color=#1b1baa>$ii</font>] {
          <b><font color=#3a6797>set</font></b> ::apave::_CS_(untouch) [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$::apave::_CS_(untouch)</font> <font color=#1b1baa>$i</font> <font color=#1b1baa>$i</font>]
        }
      }
    } <b><font color=#3a6797>else</font></b> {
      <b><font color=#3a6797>foreach</font></b> u <font color=#1b1baa>$args</font> {
        <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-exact</font> <font color=#1b1baa>$::apave::_CS_(untouch)</font> <font color=#1b1baa>$u</font>]==-1} {
          <b><font color=#3a6797>lappend</font></b> ::apave::_CS_(untouch) <font color=#1b1baa>$u</font>
        }
      }
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=touchWidgets></a>
  <b><font color=#ca14ca>method</font></b> touchWidgets {args} {
    <i><font color=#4b5d50># Makes non-ttk widgets to be touched again.</font></i>
    <i><font color=#4b5d50>#   args - list of widget globs (e.g. {.em.fr.win.* .em.fr.h1 .em.fr.h2})</font></i>
    <i><font color=#4b5d50># If args not set, returns the list of untouched widgets.</font></i>
    <i><font color=#4b5d50># See also:</font></i>
    <i><font color=#4b5d50>#   untouchWidgets</font></i>
    <i><font color=#4b5d50>#   themeNonThemed</font></i>

    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$args</font>]==0} {<b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$::apave::_CS_(untouch)</font>}
    <b><font color=#3a6797>foreach</font></b> u <font color=#1b1baa>$args</font> {
      <b><font color=#3a6797>set</font></b> u [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$u</font> 0]
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> i [<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-index</font> 0 <font color=#653760>-exact</font> <font color=#1b1baa>$::apave::_CS_(untouch)</font> <font color=#1b1baa>$u</font>]]&gt;-1} {
        <b><font color=#3a6797>set</font></b> ::apave::_CS_(untouch) [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$::apave::_CS_(untouch)</font> <font color=#1b1baa>$i</font> <font color=#1b1baa>$i</font>]
      }
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=themeExternal></a>
  <b><font color=#ca14ca>method</font></b> themeExternal {args} {
    <i><font color=#4b5d50># Configures an external dialogue so that its colors accord with a current CS.</font></i>
    <i><font color=#4b5d50>#   args - list of untouched widgets</font></i>

    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> cs [<b><font color=#ca14ca>my</font></b> csCurrent]] != -2} {
      <b><font color=#3a6797>foreach</font></b> untw <font color=#1b1baa>$args</font> {<b><font color=#ca14ca>my</font></b> untouchWidgets <font color=#1b1baa>$untw</font>}
      <b><font color=#3a6797>after</font></b> idle [<b><font color=#3a6797>list</font></b> [<b><font color=#ca14ca>self</font></b>] csSet <font color=#1b1baa>$cs</font> . <font color=#653760>-doit</font>]  ;<i><font color=#4b5d50># theme the dialogue to be run</font></i>
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=themeNonThemed></a>
  <b><font color=#ca14ca>method</font></b> themeNonThemed {win {addwid {}}} {
    <i><font color=#4b5d50># Updates the appearances of currently used widgets (non-themed).</font></i>
    <i><font color=#4b5d50>#   win - window path whose children will be touched</font></i>
    <i><font color=#4b5d50>#   addwid - additional widget(s) to be touched</font></i>
    <i><font color=#4b5d50>#</font></i>
    <i><font color=#4b5d50># See also:</font></i>
    <i><font color=#4b5d50>#   untouchWidgets</font></i>

    <b><font color=#3a6797>set</font></b> wtypes [<b><font color=#ca14ca>my</font></b> NonThemedWidgets all]
    <b><font color=#3a6797>set</font></b> lwid [<b><font color=#134070>winfo</font></b> children <font color=#1b1baa>$win</font>]
    <b><font color=#3a6797>lappend</font></b> lwid {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$addwid</font>
    <b><font color=#3a6797>foreach</font></b> w1 <font color=#1b1baa>$lwid</font> {
      <b><font color=#3a6797>set</font></b> ts [<b><font color=#3a6797>string</font></b> tolower [<b><font color=#134070>winfo</font></b> class <font color=#1b1baa>$w1</font>]]
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ts</font> ni {tcombobox tlabel tscrollbar tcheckbutton tradiobutton}} {
        <b><font color=#ca14ca>my</font></b> themeNonThemed <font color=#1b1baa>$w1</font>
      }
      <b><font color=#3a6797>set</font></b> tch 1
      <b><font color=#3a6797>foreach</font></b> u <font color=#1b1baa>$::apave::_CS_(untouch)</font> {
        <b><font color=#3a6797>lassign</font></b> <font color=#1b1baa>$u</font> u addopts
        <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>string</font></b> match <font color=#1b1baa>$u</font> <font color=#1b1baa>$w1</font>]} {<b><font color=#3a6797>set</font></b> tch 0; <b><font color=#ca14ca>break</font></b>}
      }
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exist ::apave::_C_(<font color=#1b1baa>$ts</font>,0)] && [<b><font color=#3a6797>lsearch</font></b> <font color=#653760>-exact</font> <font color=#1b1baa>$wtypes</font> <font color=#1b1baa>$ts</font>]&gt;-1} {
        <b><font color=#3a6797>set</font></b> i 0
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$tch</font>} {
          <b><font color=#3a6797>set</font></b> tch <font color=#1b1baa>$::apave::_C_($ts,0)</font>
          <b><font color=#3a6797>set</font></b> addopts {}
        } <b><font color=#3a6797>else</font></b> {
          <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$addopts</font> ne {}} {
            <b><font color=#3a6797>set</font></b> tch <font color=#1b1baa>$::apave::_C_($ts,0)</font>
          }
        }
        <b><font color=#3a6797>while</font></b> {[<b><font color=#3a6797>incr</font></b> i] &lt;= <font color=#1b1baa>$tch</font>} {
          <b><font color=#3a6797>lassign</font></b> <font color=#1b1baa>$::apave::_C_($ts,$i)</font> opt val
          <b><font color=#3a6797>catch</font></b> {
            <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>string</font></b> first __tooltip__.label <font color=#1b1baa>$w1</font>]&lt;0} {
              <font color=#1b1baa>$w1</font> configure <font color=#1b1baa>$opt</font> <font color=#1b1baa>$val</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$addopts</font>
              <b><font color=#3a6797>switch</font></b> <font color=#653760>-exact</font> -- [<font color=#1b1baa>$w1</font> cget <font color=#653760>-state</font>] {
                disabled {
                  <font color=#1b1baa>$w1</font> configure {<b><font color=#3a6797>*</font></b>}[<b><font color=#ca14ca>my</font></b> NonTtkStyle <font color=#1b1baa>$w1</font> 1]
                }
                readonly {
                  <font color=#1b1baa>$w1</font> configure {<b><font color=#3a6797>*</font></b>}[<b><font color=#ca14ca>my</font></b> NonTtkStyle <font color=#1b1baa>$w1</font> 2]
                }
              }
            }
            <b><font color=#3a6797>set</font></b> nam3 [<b><font color=#3a6797>string</font></b> range [<b><font color=#ca14ca>my</font></b> ownWName <font color=#1b1baa>$w1</font>] 0 2]
            <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$nam3</font> in {lbx tbl flb enT spX}} {
              <b><font color=#ca14ca>my</font></b> UpdateSelectAttrs <font color=#1b1baa>$w1</font>
            }
          }
        }
      }
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=NonThemedWidgets></a>
  <b><font color=#ca14ca>method</font></b> NonThemedWidgets {selector} {
    <i><font color=#4b5d50># Lists the non-themed widgets to process in apave.</font></i>
    <i><font color=#4b5d50>#   selector - sets a widget group to return as a list</font></i>
    <i><font color=#4b5d50># The `selector` can be `entry`, `button` or `all`.</font></i>

    <b><font color=#3a6797>switch</font></b> <font color=#653760>-exact</font> -- <font color=#1b1baa>$selector</font> {
      <b><font color=#134070>entry</font></b> {
        <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> tspinbox tcombobox tentry entry text listbox spinbox tablelist tmatchbox]
      }
      <b><font color=#134070>button</font></b> {
        <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> label button menu menubutton checkbutton radiobutton frame labelframe scale scrollbar canvas]
      }
    }
    <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>list</font></b> tspinbox tcombobox tentry entry text listbox spinbox label button \
      <b><font color=#134070>menu</font></b> menubutton checkbutton radiobutton frame labelframe scale \
      <b><font color=#134070>scrollbar</font></b> canvas tablelist tmatchbox]
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=NonTtkTheme></a>
  <b><font color=#ca14ca>method</font></b> NonTtkTheme {win} {
    <i><font color=#4b5d50># Calls themeWindow to color non-ttk widgets.</font></i>
    <i><font color=#4b5d50>#   win - window's name</font></i>

    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> exists ::apave::_C_(.,tfg1)] &&
    <font color=#1b1baa>$::apave::_CS_(expo,tfg1)</font> ne <font color=#8b2a0e>&quot;-&quot;</font>} {
      <b><font color=#ca14ca>my</font></b> themeWindow <font color=#1b1baa>$win</font> [<b><font color=#3a6797>list</font></b> \
         <font color=#1b1baa>$::apave::_C_(.,tfg1)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tbg1)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tfg2)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tbg2)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tfgS)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tbgS)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tfgD)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tbgD)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tcur)</font> \
         <font color=#1b1baa>$::apave::_C_(.,bclr)</font> \
         <font color=#1b1baa>$::apave::_C_(.,thlp)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tfgI)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tbgI)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tfgM)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tbgM)</font> \
         <font color=#1b1baa>$::apave::_C_(.,twfg)</font> \
         <font color=#1b1baa>$::apave::_C_(.,twbg)</font> \
         <font color=#1b1baa>$::apave::_C_(.,tHL2)</font>] \
         false {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$::apave::_C_(.,args)</font>
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=NonTtkStyle></a>
  <b><font color=#ca14ca>method</font></b> NonTtkStyle {typ {dsbl 0}} {
    <i><font color=#4b5d50># Makes styling for non-ttk widgets.</font></i>
    <i><font color=#4b5d50>#   typ - widget's type (the same as in &quot;APaveBase::widgetType&quot; method)</font></i>
    <i><font color=#4b5d50>#   dsbl - `1` for disabled; `2` for readonly; otherwise for all widgets</font></i>
    <i><font color=#4b5d50># See also: APaveBase::widgetType</font></i>

    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dsbl</font>} {
      <b><font color=#3a6797>set</font></b> disopt {}
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$dsbl</font>==1 && [<b><font color=#3a6797>info</font></b> exist ::apave::_C_(disabled,0)]} {
        <b><font color=#3a6797>set</font></b> typ [<b><font color=#3a6797>string</font></b> range [<b><font color=#3a6797>lindex</font></b> [<b><font color=#3a6797>split</font></b> <font color=#1b1baa>$typ</font> .] end] 0 2]
        <b><font color=#3a6797>switch</font></b> <font color=#653760>-exact</font> -- <font color=#1b1baa>$typ</font> {
          frA - lfR {
            <b><font color=#3a6797>append</font></b> disopt { } <font color=#1b1baa>$::apave::_C_(disabled,2)</font>
          }
          enT - spX {
            <b><font color=#3a6797>append</font></b> disopt { } <font color=#1b1baa>$::apave::_C_(disabled,1)</font> \
                          { } <font color=#1b1baa>$::apave::_C_(disabled,2)</font> \
                          { } <font color=#1b1baa>$::apave::_C_(disabled,3)</font> \
                          { } <font color=#1b1baa>$::apave::_C_(disabled,4)</font>
          }
          laB - tex - chB - raD - lbx - scA {
            <b><font color=#3a6797>append</font></b> disopt { } <font color=#1b1baa>$::apave::_C_(disabled,1)</font> \
                          { } <font color=#1b1baa>$::apave::_C_(disabled,2)</font>
          }
        }
      } <b><font color=#3a6797>elseif</font></b> {<font color=#1b1baa>$dsbl</font>==2 && [<b><font color=#3a6797>info</font></b> exist ::apave::_C_(readonly,0)]} {
        <b><font color=#3a6797>append</font></b> disopt { } \
          <font color=#1b1baa>$::apave::_C_(readonly,1)</font> { } <font color=#1b1baa>$::apave::_C_(readonly,2)</font> \
      }
      <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$disopt</font>
    }
    <b><font color=#3a6797>set</font></b> opts {<font color=#653760>-foreground</font> <font color=#653760>-foreground</font> <font color=#653760>-background</font> <font color=#653760>-background</font>}
    <b><font color=#3a6797>lassign</font></b> <font color=#8b2a0e>&quot;&quot;</font> ts2 ts3 opts2 opts3
    <b><font color=#3a6797>switch</font></b> <font color=#653760>-exact</font> -- <font color=#1b1baa>$typ</font> {
      buT {<b><font color=#3a6797>set</font></b> ts TButton}
      chB {<b><font color=#3a6797>set</font></b> ts TCheckbutton
        <b><font color=#3a6797>lappend</font></b> opts <font color=#653760>-background</font> <font color=#653760>-selectcolor</font>
      }
      enT {
        <b><font color=#3a6797>set</font></b> ts TEntry
        <b><font color=#3a6797>set</font></b> opts  {<font color=#653760>-foreground</font> <font color=#653760>-foreground</font> <font color=#653760>-fieldbackground</font> <font color=#653760>-background</font> \
          <font color=#653760>-insertbackground</font> <font color=#653760>-insertcolor</font>}
      }
      tex {
        <b><font color=#3a6797>set</font></b> ts TEntry
        <b><font color=#3a6797>set</font></b> opts {<font color=#653760>-foreground</font> <font color=#653760>-foreground</font> <font color=#653760>-fieldbackground</font> <font color=#653760>-background</font> \
          <font color=#653760>-insertcolor</font> <font color=#653760>-insertbackground</font> \
          <font color=#653760>-selectforeground</font> <font color=#653760>-selectforeground</font> <font color=#653760>-selectbackground</font> <font color=#653760>-selectbackground</font>
        }
      }
      frA {<b><font color=#3a6797>set</font></b> ts TFrame; <b><font color=#3a6797>set</font></b> opts {<font color=#653760>-background</font> <font color=#653760>-background</font>}}
      laB {<b><font color=#3a6797>set</font></b> ts TLabel}
      lbx {<b><font color=#3a6797>set</font></b> ts TLabel}
      lfR {<b><font color=#3a6797>set</font></b> ts TLabelframe}
      raD {<b><font color=#3a6797>set</font></b> ts TRadiobutton}
      scA {<b><font color=#3a6797>set</font></b> ts TScale}
      sbH -
      sbV {<b><font color=#3a6797>set</font></b> ts TScrollbar; <b><font color=#3a6797>set</font></b> opts {<font color=#653760>-background</font> <font color=#653760>-background</font>}}
      spX {<b><font color=#3a6797>set</font></b> ts TSpinbox}
      <b><font color=#3a6797>default</font></b> {
        <b><font color=#ca14ca>return</font></b> {}
      }
    }
    <b><font color=#3a6797>set</font></b> att {}
    <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 1} {<font color=#1b1baa>$i</font>&lt;=3} {<b><font color=#3a6797>incr</font></b> i} {
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$i</font>&gt;1} {
        <b><font color=#3a6797>set</font></b> ts [<b><font color=#3a6797>set</font></b> ts<font color=#1b1baa>$i</font>]
        <b><font color=#3a6797>set</font></b> opts [<b><font color=#3a6797>set</font></b> opts<font color=#1b1baa>$i</font>]
      }
      <b><font color=#3a6797>foreach</font></b> {opt1 opt2} <font color=#1b1baa>$opts</font> {
        <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#3a6797>set</font></b> val [<b><font color=#134070>ttk::style</font></b> configure <font color=#1b1baa>$ts</font> <font color=#1b1baa>$opt1</font>]}]} {
          <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$att</font>
        }
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$val</font> eq {}} {
          <b><font color=#3a6797>catch</font></b> { <b><font color=#3a6797>set</font></b> val [<b><font color=#134070>ttk::style</font></b> <font color=#1b1baa>$oper</font> . <font color=#1b1baa>$opt2</font>] }
        }
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$val</font> ne {}} {
          <b><font color=#3a6797>append</font></b> att <font color=#8b2a0e>&quot; <font color=#1b1baa>$</font>opt2 <font color=#1b1baa>$</font>val&quot;</font>
        }
      }
    }
    <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$att</font>
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=UpdateSelectAttrs></a>
  <b><font color=#ca14ca>method</font></b> UpdateSelectAttrs {w} {
    <i><font color=#4b5d50># Updates attributes for selection.</font></i>
    <i><font color=#4b5d50>#   w - window's name</font></i>
    <i><font color=#4b5d50># Some widgets (e.g. listbox) need a work-around to set</font></i>
    <i><font color=#4b5d50># attributes for selection in run-time, namely at focusing in/out.</font></i>

    <b><font color=#3a6797>set</font></b> fD <font color=#1b1baa>$::apave::_CS_(!FG)</font>
    <b><font color=#3a6797>set</font></b> bD <font color=#1b1baa>$::apave::_CS_(!BG)</font>
    <b><font color=#3a6797>set</font></b> f <font color=#653760>-selectforeground</font>
    <b><font color=#3a6797>set</font></b> b <font color=#653760>-selectbackground</font>
    <b><font color=#3a6797>lassign</font></b> [::apave::parseOptions [<b><font color=#134070>ttk::style</font></b> configure .] <font color=#1b1baa>$f</font> <font color=#1b1baa>$fD</font> <font color=#1b1baa>$b</font> <font color=#1b1baa>$bD</font>] fS bS
    ::apave::bindToEvent <font color=#1b1baa>$w</font> &lt;FocusIn&gt;  <font color=#1b1baa>$w</font> configure <font color=#1b1baa>$f</font> <font color=#1b1baa>$fS</font> <font color=#1b1baa>$b</font> <font color=#1b1baa>$bS</font>
    ::apave::bindToEvent <font color=#1b1baa>$w</font> &lt;FocusOut&gt; <font color=#1b1baa>$w</font> configure <font color=#1b1baa>$f</font> <font color=#1b1baa>$fD</font> <font color=#1b1baa>$b</font> <font color=#1b1baa>$bD</font>
  }
<a id=Popup_menus></a>
  <i><font color=#4b5d50>## ________________________ Popup menus _________________________ ##</font></i>
<a id=ThemePopup></a>
  <b><font color=#ca14ca>method</font></b> ThemePopup {mnu args} {
    <i><font color=#4b5d50># Recursively configures popup menus.</font></i>
    <i><font color=#4b5d50>#   mnu - menu's name (path)</font></i>
    <i><font color=#4b5d50>#   args - options of configuration</font></i>
    <i><font color=#4b5d50># See also: themePopup</font></i>

    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> last [<font color=#1b1baa>$mnu</font> index end]] ne {none}} {
      <font color=#1b1baa>$mnu</font> configure {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
      <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> i 0} {<font color=#1b1baa>$i</font> &lt;= <font color=#1b1baa>$last</font>} {<b><font color=#3a6797>incr</font></b> i} {
        <b><font color=#3a6797>switch</font></b> <font color=#653760>-exact</font> -- [<font color=#1b1baa>$mnu</font> type <font color=#1b1baa>$i</font>] {
          cascade {
            <b><font color=#ca14ca>my</font></b> ThemePopup [<font color=#1b1baa>$mnu</font> entrycget <font color=#1b1baa>$i</font> <font color=#653760>-menu</font>] {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
          }
          command {
            <font color=#1b1baa>$mnu</font> entryconfigure <font color=#1b1baa>$i</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>
          }
        }
      }
    }
  }
  <i><font color=#4b5d50>#_______________________</font></i>
<a id=themePopup></a>
  <b><font color=#ca14ca>method</font></b> themePopup {mnu} {
    <i><font color=#4b5d50># Configures a popup menu so that its colors accord with a current CS.</font></i>
    <i><font color=#4b5d50>#   mnu - menu's name (path)</font></i>

    <b><font color=#3a6797>if</font></b> {[<b><font color=#ca14ca>my</font></b> csCurrent] == <font color=#1b1baa>$::apave::_CS_(NONCS)</font>} <b><font color=#ca14ca>return</font></b>
    <b><font color=#3a6797>lassign</font></b> [<b><font color=#ca14ca>my</font></b> csGet] - fg - bg2 - bgS fgS - tfgD - - - - bg
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$bg</font> eq {}} {<b><font color=#3a6797>set</font></b> bg <font color=#1b1baa>$bg2</font>}
    <b><font color=#3a6797>set</font></b> opts <font color=#8b2a0e>&quot;-foreground <font color=#1b1baa>$</font>fg -background <font color=#1b1baa>$</font>bg -activeforeground <font color=#1b1baa>$</font>fgS \</font>
<font color=#8b2a0e>      -activebackground <font color=#1b1baa>$</font>bgS -font <font color=#1b1baa>{[</font>font actual apaveFontDef<font color=#1b1baa>]}</font>&quot;</font>
    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>catch</font></b> {<b><font color=#ca14ca>my</font></b> ThemePopup <font color=#1b1baa>$mnu</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$opts</font> <font color=#653760>-disabledforeground</font> <font color=#1b1baa>$tfgD</font>}]} {
      <b><font color=#ca14ca>my</font></b> ThemePopup <font color=#1b1baa>$mnu</font> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$opts</font>
    }
    <b><font color=#ca14ca>my</font></b> themeNonThemed <font color=#1b1baa>$mnu</font> <font color=#1b1baa>$mnu</font>
  }
<a id=Tk_choosers></a>
  <i><font color=#4b5d50>## ________________________ Tk choosers _________________________ ##</font></i>
<a id=ThemeChoosers></a>
  <b><font color=#ca14ca>method</font></b> ThemeChoosers {} {
    <i><font color=#4b5d50># Configures file/dir choosers so that its colors accord with a current CS.</font></i>

    <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>info</font></b> commands ::apave::_TK_TOPLEVEL] ne <font color=#8b2a0e>&quot;&quot;</font>} <b><font color=#ca14ca>return</font></b>
    <b><font color=#3a6797>rename</font></b> ::toplevel ::apave::_TK_TOPLEVEL
  ; <b><font color=#ca14ca>proc</font></b> ::toplevel {args} {
      <b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>eval</font></b> ::apave::_TK_TOPLEVEL <font color=#1b1baa>$args</font>]
      <b><font color=#3a6797>set</font></b> w [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$args</font> 0]
      <b><font color=#3a6797>rename</font></b> <font color=#1b1baa>$w</font> ::apave::_W_TOPLEVEL<font color=#1b1baa>$w</font>
    ; <b><font color=#ca14ca>proc</font></b> ::<font color=#1b1baa>$w</font> {args} <font color=#8b2a0e>&quot; \</font>
<font color=#8b2a0e>        set cs \[::apave::obj csCurrent\] ;\</font>
<font color=#8b2a0e>        if <font color=#1b1baa>{{</font>configure -menu<font color=#1b1baa>}</font> eq \$args<font color=#1b1baa>}</font> <font color=#1b1baa>{</font>set args <font color=#1b1baa>{</font>configure<font color=#1b1baa>}}</font> ;\</font>
<font color=#8b2a0e>        if <font color=#1b1baa>{</font>\$cs&gt;-2 && \[string first <font color=#1b1baa>{</font>configure<font color=#1b1baa>}</font> \$args\]==0<font color=#1b1baa>}</font> <font color=#1b1baa>{</font> \</font>
<font color=#8b2a0e>          lassign \[::apave::obj csGet \$cs\] fg - bg ;\</font>
<font color=#8b2a0e>          lappend args -background \$bg \</font>
<font color=#8b2a0e>        <font color=#1b1baa>}</font> ;\</font>
<font color=#8b2a0e>        return \[eval ::apave::_W_TOPLEVEL<font color=#1b1baa>$</font>w \$args\]</font>
<font color=#8b2a0e>      &quot;</font>
      <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
    }
    <b><font color=#3a6797>rename</font></b> ::canvas ::apave::_TK_CANVAS
  ; <b><font color=#ca14ca>proc</font></b> ::canvas {args} {
      <b><font color=#3a6797>set</font></b> res [<b><font color=#3a6797>eval</font></b> ::apave::_TK_CANVAS <font color=#1b1baa>$args</font>]
      <b><font color=#3a6797>set</font></b> w [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$args</font> 0]
      <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>string</font></b> match <font color=#8b2a0e>&quot;*cHull.canvas&quot;</font> <font color=#1b1baa>$w</font>]} {
        <b><font color=#3a6797>rename</font></b> <font color=#1b1baa>$w</font> ::apave::_W_CANVAS<font color=#1b1baa>$w</font>
      ; <b><font color=#ca14ca>proc</font></b> ::<font color=#1b1baa>$w</font> {args} <font color=#8b2a0e>&quot; \</font>
<font color=#8b2a0e>          set cs \[::apave::obj csCurrent\] ;\</font>
<font color=#8b2a0e>          lassign \[::apave::obj csGet \$cs\] fg - bg ;\</font>
<font color=#8b2a0e>          if <font color=#1b1baa>{</font>\$cs&gt;-2<font color=#1b1baa>}</font> <font color=#1b1baa>{</font> \</font>
<font color=#8b2a0e>            if <font color=#1b1baa>{</font>\[string first <font color=#1b1baa>{</font>create text<font color=#1b1baa>}</font> \$args\]==0 || \</font>
<font color=#8b2a0e>            \[string first <font color=#1b1baa>{</font>itemconfigure<font color=#1b1baa>}</font> \$args\]==0 && \</font>
<font color=#8b2a0e>            \[string first <font color=#1b1baa>{</font>-fill black<font color=#1b1baa>}</font> \$args\]&gt;0<font color=#1b1baa>}</font> <font color=#1b1baa>{</font> \</font>
<font color=#8b2a0e>              dict set args -fill \$fg ;\</font>
<font color=#8b2a0e>              dict set args -font apaveFontDef \</font>
<font color=#8b2a0e>            <font color=#1b1baa>}</font> \</font>
<font color=#8b2a0e>          <font color=#1b1baa>}</font>  ;\</font>
<font color=#8b2a0e>          ::apave::_W_CANVAS<font color=#1b1baa>$</font>w configure -bg \$bg ;\</font>
<font color=#8b2a0e>          return \[eval ::apave::_W_CANVAS<font color=#1b1baa>$</font>w \$args\]</font>
<font color=#8b2a0e>        &quot;</font>
      }
      <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$res</font>
    }
  }
<a id=EONS_ObjectTheming></a>
  <i><font color=#4b5d50>## __________________ EONS ObjectTheming ___________________ ##</font></i>

}
<a id=EOF></a>
<i><font color=#4b5d50># ________________________ EOF _________________________ #</font></i>

</pre>

<table border=0 cellPadding=4 cellSpacing=0 width=100%>  <td border=0 bgColor=#bdd7e7><div style=text-align:center>  <a href="../index.html"><font color=#1a1a1a size=6>  <b>obbit.tcl</b></font></div></td></table>

</section>
<script>
  writeFooter('Generated by <a href="'+homeLINK()+'/en/tcl/alited/index.html">alited</a> &amp; <a href="'+homeLINK()+'/en/tcl/mulster/index.html">mulster</a></a>');
</script>
</div>
</body>
</html>