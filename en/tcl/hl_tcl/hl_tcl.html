<!DOCTYPE html><html><head><meta charset="utf-8"/>
<link rel="stylesheet" href="../../../zoo/sh/styles/aplsimple.css">
<title>::hl_tcl reference</title>
<style>
/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,button,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,var,optgroup{font-style:inherit;font-weight:inherit;}del,ins{text-decoration:none;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:baseline;}sub{vertical-align:baseline;}legend{color:#000;}input,button,textarea,select,optgroup,option{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;}input,button,textarea,select{*font-size:100%;}body{font:13px/1.231 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small;}select,input,button,textarea,button{font:99% arial,helvetica,clean,sans-serif;}table{font-size:inherit;font:100%;}pre,code,kbd,samp,tt{font-family:Consolas,"Courier New",monospace;font-size:100%;line-height:100%;}body{text-align:center;}#doc,#doc2,#doc3,#doc4,.yui-t1,.yui-t2,.yui-t3,.yui-t4,.yui-t5,.yui-t6,.yui-t7{margin:auto;text-align:left;width:57.69em;*width:56.25em;}#doc2{width:73.076em;*width:71.25em;}#doc3{margin:auto 10px;width:auto;}#doc4{width:74.923em;*width:73.05em;}.yui-b{position:relative;}.yui-b{_position:static;}#yui-main .yui-b{position:static;}#yui-main,.yui-g .yui-u .yui-g{width:100%;}.yui-t1 #yui-main,.yui-t2 #yui-main,.yui-t3 #yui-main{float:right;margin-left:-25em;}.yui-t4 #yui-main,.yui-t5 #yui-main,.yui-t6 #yui-main{float:left;margin-right:-25em;}.yui-t1 .yui-b{float:left;width:12.30769em;*width:12.00em;}.yui-t1 #yui-main .yui-b{margin-left:13.30769em;*margin-left:13.05em;}.yui-t2 .yui-b{float:left;width:9.8461em;*width:13.50em;}.yui-t2 #yui-main .yui-b{margin-left:10.8461em;*margin-left:14.55em;}.yui-t3 .yui-b{float:left;width:23.0769em;*width:22.50em;}.yui-t3 #yui-main .yui-b{margin-left:24.0769em;*margin-left:23.62em;}.yui-t4 .yui-b{float:right;width:13.8456em;*width:13.50em;}.yui-t4 #yui-main .yui-b{margin-right:14.8456em;*margin-right:14.55em;}.yui-t5 .yui-b{float:right;width:18.4615em;*width:18.00em;}.yui-t5 #yui-main .yui-b{margin-right:19.4615em;*margin-right:19.125em;}.yui-t6 .yui-b{float:right;width:23.0769em;*width:22.50em;}.yui-t6 #yui-main .yui-b{margin-right:24.0769em;*margin-right:23.62em;}.yui-t7 #yui-main .yui-b{display:block;margin:0 0 1em 0;}#yui-main .yui-b{float:none;width:auto;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf,.yui-gc .yui-u,.yui-gd .yui-g,.yui-g .yui-gc .yui-u,.yui-ge .yui-u,.yui-ge .yui-g,.yui-gf .yui-g,.yui-gf .yui-u{float:right;}.yui-g div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first,.yui-ge div.first,.yui-gf div.first,.yui-g .yui-gc div.first,.yui-g .yui-ge div.first,.yui-gc div.first div.first{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf{width:49.1%;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{width:32%;margin-left:1.99%;}.yui-gb .yui-u{*margin-left:1.9%;*width:31.9%;}.yui-gc div.first,.yui-gd .yui-u{width:66%;}.yui-gd div.first{width:32%;}.yui-ge div.first,.yui-gf .yui-u{width:74.2%;}.yui-ge .yui-u,.yui-gf div.first{width:24%;}.yui-g .yui-gb div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first{margin-left:0;}.yui-g .yui-g .yui-u,.yui-gb .yui-g .yui-u,.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u,.yui-ge .yui-g .yui-u,.yui-gf .yui-g .yui-u{width:49%;*width:48.1%;*margin-left:0;}.yui-g .yui-g .yui-u{width:48.1%;}.yui-g .yui-gb div.first,.yui-gb .yui-gb div.first{*margin-right:0;*width:32%;_width:31.7%;}.yui-g .yui-gc div.first,.yui-gd .yui-g{width:66%;}.yui-gb .yui-g div.first{*margin-right:4%;_margin-right:1.3%;}.yui-gb .yui-gc div.first,.yui-gb .yui-gd div.first{*margin-right:0;}.yui-gb .yui-gb .yui-u,.yui-gb .yui-gc .yui-u{*margin-left:1.8%;_margin-left:4%;}.yui-g .yui-gb .yui-u{_margin-left:1.0%;}.yui-gb .yui-gd .yui-u{*width:66%;_width:61.2%;}.yui-gb .yui-gd div.first{*width:31%;_width:29.5%;}.yui-g .yui-gc .yui-u,.yui-gb .yui-gc .yui-u{width:32%;_float:right;margin-right:0;_margin-left:0;}.yui-gb .yui-gc div.first{width:66%;*float:left;*margin-left:0;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf .yui-u{margin:0;}.yui-gb .yui-gb .yui-u{_margin-left:.7%;}.yui-gb .yui-g div.first,.yui-gb .yui-gb div.first{*margin-left:0;}.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u{*width:48.1%;*margin-left:0;}.yui-gb .yui-gd div.first{width:32%;}.yui-g .yui-gd div.first{_width:29.9%;}.yui-ge .yui-g{width:24%;}.yui-gf .yui-g{width:74.2%;}.yui-gb .yui-ge div.yui-u,.yui-gb .yui-gf div.yui-u{float:right;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf div.first{float:left;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf div.first{*width:24%;_width:20%;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf .yui-u{*width:73.5%;_width:65.5%;}.yui-ge div.first .yui-gd .yui-u{width:65%;}.yui-ge div.first .yui-gd div.first{width:32%;}#hd:after,#bd:after,#ft:after,.yui-g:after,.yui-gb:after,.yui-gc:after,.yui-gd:after,.yui-ge:after,.yui-gf:after{content:".";display:block;height:0;clear:both;visibility:hidden;}#hd,#bd,#ft,.yui-g,.yui-gb,.yui-gc,.yui-gd,.yui-ge,.yui-gf{zoom:0;}

body{margin:10px;}h1{font-size:138.5%;}h2{font-size:123.1%;}h3{font-size:108%;}h1,h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6,strong,dt{font-weight:bold;}optgroup{font-weight:normal;}abbr,acronym{border-bottom:1px dotted #000;cursor:help;}em{font-style:italic;}del{text-decoration:line-through;}blockquote,ul,ol,dl{margin:1em;}ol,ul,dl{margin-left:2em;}ol li{list-style:decimal outside;}ul li{list-style:disc outside;}dl dd{margin-left:1em;}th,td{border:1px solid #000;padding:.5em;}th{font-weight:bold;text-align:center;}caption{margin-bottom:.5em;text-align:center;}sup{vertical-align:super;}sub{vertical-align:sub;}p,fieldset,table,pre{margin-bottom:1em;}button,input[type="checkbox"],input[type="radio"],input[type="reset"],input[type="submit"]{padding:1px;}

/* Ruff default CSS */

body {
  /*max-width: 70em;*/
  margin: 0;
}

h1,h2 {
  color: #888888;
  margin-bottom: 0.5em;
  margin-top: 0em;
}

#ft { font-size: x-small; font-family: Arial, sans-serif;
  text-align: left;
  border-top: 1px solid #0B3467;
  color: #888888;
  margin-top: 10px;
}

.banner h2 {
  color: #0B3467;
}

#hd.banner {
 font-family: "Times New Roman", serif;
 font-size: 200%;
 line-height: 64px;
 border-bottom: thin solid #0B3467;
 color: #0B3467;
}

p.linkline {
  text-align: right;
  font-size: smaller;
  /*    margin-top: -1em; */
  margin-bottom: 0;
}

.tinylink {
  font-size: x-small;
  font-variant: normal;
  font-family: Arial, sans-serif;
  float: right;
  padding:2px;
}

h1 .tinylink a {
  color: white;
}

#bd {
font-family: Arial, sans-serif;
/*font-size: 108%;*/
}

div.navbox {
  /* margin-top: 1em; */
  background-color: #0B3467;
  color: white;
  padding: 3px 4px 2px 4px;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

div.navbox:hover {
  overflow: visible;
}

/* Note .navbox header css should be based on $header_levels */
.navbox h1, .navbox h2, .navbox h3, .navbox h4, .navbox h5 {
  font-size: 85%;
  margin: 0px;
  font-weight: normal;
}
.navbox h1 {
  font-weight: bold; /* Override */
}
.navbox h2 {
  padding-left: 1em;
}
.navbox h3 {
  padding-left: 2em;
}
.navbox h4 {
  padding-left: 2.5em;
  font-weight: normal;
}
.navbox h5 {
  padding-left: 3em;
  font-weight: normal;
}
.navbox hr {
  color: white;
  margin-top:0.1em;
  margin-bottom:0.1em;
}

.navbox a:link, .navbox a:visited, .navbox a:hover {
  text-decoration: none;
  color: white;
  background-color: #0B3467;
}

.navbox a:hover {
   font-weight: bold;
}

/* Tooltip text - see https://www.w3schools.com/css/css_tooltip.asp */
.tooltip {
  position: relative;
  /* display: inline-block; */
}

.tooltip .tooltiptext {
  width: 100%;
  font-weight: bold;
  background-color: white;
  color: #0B3467;
  text-align: left;
  border: 1px solid #0B3467;
  /* border-radius: 4px; */
  position: absolute;
  z-index: 1;
  margin-left: 4px;
  padding: 2px 3px;
  visibility: hidden;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}

span.ns_scope {
  color: #aaaaaa;
}

span.ns_scope a:link, span.ns_scope a:visited {
  text-decoration: none;
  color: #aaaaaa;

}

li {
  margin-top: 0.5em;
}

span.ns_scope a:hover {
  text-decoration: none;
  color: #666666;
}

table {
  margin: 1em;
  margin-top: 0.5em;
  border: thin solid;
  border-collapse: collapse;
  border-color: #808080;
  padding: 4px;
}

td {
  border: thin solid;
  border-color: #808080;
  vertical-align: top;
  font-size: 93%;
  padding: 0.3em;
  padding-top: 0.1em;
}
th {
  border: thin solid;
  border-color: #808080;
  padding: 0.3em;
  padding-top: 0.1em;
  background-color: #CCCCCC;
}

dt, dd {
   font-size: 93%;
}

h1.ruff {
  background-color: #0B3467;
  color: #ffffff;
  padding-left: 0.2em;
  font-family: "Times New Roman", serif;
}
h2.ruff {
  font-variant: small-caps;
  color: #0B3467;
  font-weight: bold;
  font-family: "Times New Roman", serif;
}

h3.ruff, h4.ruff, h5.ruff, h6.ruff {
  color: #0B3467;
}
h5.ruff {
  font-style: italic;
  font-weight: normal;
}
h6.ruff {
  font-weight: normal;
}
h3.ruffclass, h3.ruffproc, h3.ruffmethod,
h4.ruffclass, h4.ruffproc, h4.ruffmethod,
h5.ruffclass, h5.ruffproc, h5.ruffmethod {
  border-bottom: thin solid #0B3467;
  color: #0B3467;
  margin-bottom: 0.2em;
}

pre {
  background-color: #f9f9f9;
  margin-top: 1em;
  margin-left: 1em;
  padding: 5px;
  font-family: Consolas, "Courier New", monospace;
  /* width: max-content; --- to leave footsteps */ overflow: auto;
  line-height: 1.2em;
}

.ruff_dyn_src {
  display: none; /* Displayed via JS */
}

.ruff_synopsis {
  border: thin solid #cccccc;
  background: #f9f9f9;
  font-family: Consolas, "Courier New", monospace;
  padding: 5px;
  margin: 0em 2em 1em;
}
.ruff_const, .ruff_cmd, ruff_defitem {
  font-weight: bold;
  font-family: Consolas, "Courier New", monospace;
}
.ruff_arg {
  font-style: italic;
  font-family: Consolas, "Courier New", monospace;
}

.ruff_source_link {
  font-size: smaller;
}
</style>
<script>function toggleSource( id )
{
  /* Copied from Rails */
  var elem
  var link

  if( document.getElementById )
  {
      elem = document.getElementById( id )
      link = document.getElementById( "l_" + id )
  }
  else if ( document.all )
  {
      elem = eval( "document.all." + id )
      link = eval( "document.all.l_" + id )
  }
  else
      return false;

  if( elem.style.display == "block" )
  {
      elem.style.display = "none"
      link.innerHTML = "Show source"
  }
  else
  {
      elem.style.display = "block"
      link.innerHTML = "Hide source"
  }
}
</script></head>
<meta name="author" content="aplsimple">
<meta name="description" content="aplsimple's home page">
<meta name="keywords" content="aplsimple,home">
<link rel="stylesheet" href="../../../en/zoo/style.css">
<style>
table{
background-color: #f9f9f9;
margin: 0%;
margin-bottom: 2%;
padding: 0%;
box-shadow: none;
filter: none;
}
pre{
margin: 0%;
margin-bottom: 2%;
padding: 0%;
}
</style>
<link rel="icon" type="image/jpg" href="../../../zoo/favicon.jpg">
<body>
<div id="wrapper">
<div name="divd1" ALIGN="CENTER"> <FONT SIZE=5em color=#b01c20><B>
<noscript>THIS PAGE IS NOT WORKING WITHOUT JAVASCRIPT!
<BR>
<BR>PLEASE, SWITCH ON JAVASCRIPT IN SETTINGS OF YOUR BROWSER AND RELOAD THE PAGE.
</noscript>
</B></FONT></div>
<div id='doc3' class='yui-t2'>
<script src="../../../zoo/funcs.js"></script>
<script src="../../../en/zoo/this.js"></script>
<section id=sec2>
<div id='hd' class='banner'>
<a name='hl_tcl.html'>::hl_tcl reference</a>
</div>
<div id='bd'><div id='yui-main'><div class='yui-b'><h1 class='ruff'><a name='::hl_tcl'></a>::hl_tcl<span class='tinylink'><a href='#top'>Top</a></span></h1>
<div style='clear:both;'></div>
<p class='ruff'>The <em>hl_tcl</em> package is a syntax highlighter for Tcl/Tk code.</p>
<p class='ruff'>It can be applied to a <em>Tk text</em> widget or to a static html page.</p>
<p class='ruff'>The <em>Tk text</em> widget may be made read-only or editable. Also, the <em>hl_tcl</em> may take an argument, sort of command to watch the viewing / editing.</p>
<p class='ruff'>When applied to html pages, the <em>hl_tcl</em> highlights Tcl/Tk code snippets embedded between &lt;code&gt; &lt;/code&gt; tags.</p>
<p class='ruff'>The <em>hl_tcl</em> has highlighted its own code in <a href="https://aplsimple.github.io/en/tcl/hl_tcl/hl_tcl.html" >Reference</a>.</p>
<br><h2 class='ruff'><a name='::hl_tcl-Some_of_blah-blah'></a>Some of blah-blah<span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<p class='ruff'>The Tcl being incredibly dynamic language sets a lot of problems before any Tcl syntax highlighter. Probably, a Tcl string spanning several lines is the main challenge at that.</p>
<p class='ruff'>Below is a line that brings most (not <em>hl_tcl</em> in <a href="https://aplsimple.github.io/en/tcl/hl_tcl/hl_tcl.html" >Reference</a>) of Tcl highlighters in a stupor:</p>
<pre class='ruff'><br><code class="tcl">  <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>set</font></b> i [<b><font color=#922b23>string</font></b> first {&quot;} <font color=#4A181B>$line</font> <font color=#4A181B>$i</font>]]==-1} {<b><font color=#800080>return</font></b> no}
<br></code></pre>
<p class='ruff'>... as well as this one:</p>
<pre class='ruff'><br><code class="tcl">  <b><font color=#922b23>regsub</font></b> -all {(([^A-Z@]|\\@)[.?!](&quot;|'|'')?([])])?) } <font color=#4A181B>$fieldText</font> {\1  } fieldText
<br></code></pre>
<p class='ruff'>Good luck for a highlighter when the second line (or similar) follows the first, giving it a matching quote and thus bringing it out of the stupor.</p>
<p class='ruff'>Those stand-alone quotes are widely used in <code>regexp</code> and <code>regsub</code> Tcl commands, so that when a honest Tcl highlighter (like <a href="https://www.geany.org" title="Geany IDE">Geany</a>) stumbles upon a quote, it tries its best to highlight the rest of code as a string, till the next occurence of unescaped quote.</p>
<p class='ruff'>Thus, we have</p>
<p class='ruff'><img src="files/hltcl1.png" class="media" alt=""></p>
<p class='ruff'>... instead of</p>
<p class='ruff'><img src="files/hltcl2.png" class="media" alt=""></p>
<p class='ruff'>There are &quot;tricky&quot; highlighters (like <a href="https://wiki.gnome.org/Apps/Gedit" title="Gedit editor">Gedit</a>) that behave more wisely at the stumbling a quote: they permit only a one-line Tcl strings (if not continued with \), so that the string highlighting would be most likely finished in the same line it started. No problems except for this silly line. And no delays due to the highlighting the rest of code...</p>
<p class='ruff'>... as seen in:</p>
<p class='ruff'><img src="files/hltcl3.png" class="media" alt=""></p>
<br><h2 class='ruff'><a name='::hl_tcl-Some_of_editors'></a>Some of editors<span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<p class='ruff'><a href="https://www.geany.org" title="Geany IDE">Geany</a>. Probably, the best Tcl highlighter and the great programming tool at that. Still, it has few drawbacks:</p>
<ul class='ruff'>
<li>doesn't highlight the above mentioned Tcl lines properly</li>
<li>doesn't highlight <code>${var}</code> in contrast with <code>$var</code></li>
<li>tries to highlight any (even hexidecimal) number it encounters, thus <code>set a 1fix</code> or <code>set b #abxxx</code> looks a bit peculiar</li>
<li><code>set c {#000000 #FFFFFF}</code> is quite a legal Tcl command, not for Geany</li>
<li>no highlighting TclOO (<code>method, mixin, my</code> etc.)</li>
</ul>
<p class='ruff'><a href="http://www.vim.org/" title="Vim editor">Vim</a>. Probably, the fastest Tcl highlighter. Great and awful. Nonetheless:</p>
<ul class='ruff'>
<li>tricky with those above mentioned Tcl lines</li>
<li>doesn't highlight ttk commands (Tk only) and TclOO</li>
<li>tries to highlight every bit of Tcl, e.g. <code>set set set</code> is highlighted as three <code>set</code> commands ;)</li>
<li>as a result, much more florid than others</li>
</ul>
<p class='ruff'><a href="https://kate-editor.org" title="Kate editor">Kate</a>. As nearly good as Geany, still doesn't highlight ttk and TclOO.</p>
<p class='ruff'><a href="https://github.com/phase1geo/tke/" title="TKE editor">TKE</a>. Written in Tcl/Tk, it might be the best of all to highlight the Tcl/Tk. In spite of its suspended state it still can. Has issues with highlighting strings and the performance.</p>
<p class='ruff'><a href="http://mate-desktop.org" title="Pluma editor">Pluma</a> and <a href="https://wiki.gnome.org/Apps/Gedit" title="Gedit editor">Gedit</a> seem to use the same Tcl highlighting engine that gives rather good results. Still, the mentioned above drawbacks are here too. And no highlighting of tk, ttk, TclOO.</p>
<p class='ruff'><a href="https://notepad-plus-plus.org/" title="Notepad++ official site">Notepad++</a>. Very fast Tcl highlighter. Still, the mentioned above drawbacks are here all the same. No highlighting of tk, ttk, TclOO. Plus an obsolete version of Tcl, i.e. no highlighting <code>lset, lassign</code> etc.</p>
<br><h2 class='ruff'><a name='::hl_tcl-What_can_we_do_'></a>What can we do?<span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<p class='ruff'>To develop a correct (and fast at that) Tcl highlighter, we would have to be familiar with Tcl core. Though, no hopes to achieve this ideal through repeating the core in Tcl/Tk or massively using the regular expressions.</p>
<p class='ruff'>That said, while implementing Tcl/Tk highlighter <em>in pure Tcl/Tk</em>, we might hope to achieve a reasonable compromise between the performance and the elimination of blunders.</p>
<p class='ruff'>It seems <em>hl_tcl</em> got close to this compromise. Specifically, it provides:</p>
<ul class='ruff'>
<li>special highlighting for Tcl and TclOO commands</li>
<li>special highlighting for Tk and ttk commands</li>
<li>special highlighting for declarations (<code>proc, method, oo::class</code> etc.)  and <code>return</code></li>
<li>in-line comments being recognized and thus highlighted only after <code>;#</code></li>
<li>proper handling of most <code>regexp</code> and <code>regsub</code> expressions containing a quote</li>
<li>highlighting the multi-line strings, with possible switching this mode off (a-la Gedit) to improve the performance</li>
<li>customizing colors of the highlighting</li>
<li>highlighting viewable/editable <em>Tk text</em> widget and static html pages</li>
<li>good performance at editing 1000-4000 LOC and rather acceptable for 4000-9000 LOC</li>
<li>even monstrous 10000 LOC and more are handled fast at the &quot;tricky&quot; mode a-la Gedit</li>
</ul>
<p class='ruff'>The <em>hl_tcl</em> doesn't provide the following:</p>
<ul class='ruff'>
<li>highlighting <em>numbers</em></li>
<li>highlighting <em>-options</em></li>
<li>highlighting <em>brackets</em> except for in strings</li>
</ul>
<p class='ruff'>These are in no way critical drawbacks. A bit less florid Tcl code might be even preferable.</p>
<p class='ruff'>The Tcl can arrange its pitfalls for <em>hl_tcl</em> (I know where). Also, tricky practices or tastes can make a fool of <em>hl_tcl</em>. Still hopefully these pranks are few and rare to encounter.</p>
<br><h2 class='ruff'><a name='::hl_tcl-Use_for_text_widget'></a>Use for text widget<span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<p class='ruff'>The code below:</p>
<pre class='ruff'><br><code class="tcl">  <b><font color=#922b23>package</font></b> require hl_tcl
  <font color=#646464>#...</font>
  <b><font color=#800080>proc</font></b> ::stub {} {<b><font color=#922b23>puts</font></b> <font color=#035103>&quot;stub: <font color=#4A181B>[$</font>::txt index end<font color=#4A181B>]</font>&quot;</font>}
  <font color=#646464>#...</font>
  ::hl_tcl::hl_init <font color=#4A181B>$::txt</font>
  <font color=#646464>#... inserting a text into the text widget</font>
  ::hl_tcl::hl_text <font color=#4A181B>$::txt</font> <font color=#4A181B>$readonly</font> <font color=#4A181B>$multi</font> ::stub
<br></code></pre>
<p class='ruff'>sets an example of <em>hl_tcl</em> usage. Here are the details:</p>
<ul class='ruff'>
<li><strong><code>::stub</code></strong> is a procedure to watch the text editing; here it simply puts out the text's last index</li>
<li><strong><code>hl_init</code></strong> is called <em>before</em> filling the text widget with a Tcl code</li>
<li><strong><code>hl_text</code></strong> is called to highlight the Tcl code of the text widget and view/edit it</li>
</ul>
<p class='ruff'>The <strong><code>hl_init</code></strong> takes arguments:</p>
<ul class='ruff'>
<li><em>txt</em> is the text widget's path</li>
<li><em>args</em> is options of text widget (omittable)</li>
</ul>
<p class='ruff'>The <em>args</em> may contain pairs <em>option value</em> where <em>option</em> may be:</p>
<ul class='ruff'>
<li><em>-colors</em> for a list of colors: <em>clrCOM, clrCOMTK, clrSTR, clrVAR, clrCMN, clrPROC</em></li>
<li>-dark for a flag &quot;dark background of text&quot; (i.e. simplified <em>-colors</em>)</li>
<li><em>-font</em> for a font attributes</li>
</ul>
<p class='ruff'>The <strong><code>hl_text</code></strong> takes arguments:</p>
<ul class='ruff'>
<li><em>text widget</em>'s path</li>
<li><em>readonly</em> flag (may be omitted, by default &quot;no&quot;)</li>
<li><em>multi-line strings</em> flag (may be omitted, by default &quot;yes&quot;)</li>
<li><em>procedure name</em> to watch the editing (may be omitted, by default &quot;&quot;)</li>
</ul>
<p class='ruff'>Other <em>hl_tcl</em> procedures are:</p>
<ul class='ruff'>
<li><strong><code>hl_readonly</code></strong> gets/sets a read-only mode and/or a command to watch a text widget at viewing/editing it</li>
<li><strong><code>hl_colors</code></strong> gets/sets colors of highlighting</li>
<li><strong><code>hl_font</code></strong> gets/sets font attributes for text widget</li>
<li><strong><code>hl_all</code></strong> updates (&quot;rehighlights&quot;) all highlighted existing text widgets</li>
</ul>
<p class='ruff'>See details in <a href="https://aplsimple.github.io/en/tcl/hl_tcl/hl_tcl.html" >Reference</a>.</p>
<br><h2 class='ruff'><a name='::hl_tcl-Use_for_static_html'></a>Use for static html<span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<p class='ruff'>In the <a href="https://chiselapp.com/user/aplsimple/repository/hl_tcl/download" >hl_tcl.zip</a>, there is a Tcl script named <em>tcl_html.tcl</em> that highlights Tcl snippets of static html page(s).</p>
<p class='ruff'>It runs as follows:</p>
<pre class='ruff'><br><code class="tcl">  tclsh tcl_html.tcl <font color=#035103>&quot;glob-pattern-of-html-files&quot;</font>
<br></code></pre>
<p class='ruff'>For example:</p>
<pre class='ruff'><br><code class="tcl">  tclsh ~/UTILS/hl_tcl/tcl_html.tcl <font color=#035103>&quot;~/UTILS/mulster/tasks/ruff/src/*&quot;</font>
<br></code></pre>
<p class='ruff'>In this example, the html files are located in <code>~/UTILS/mulster/tasks/ruff/src/*</code>.</p>
<p class='ruff'>Perhaps, you would want to modify the <em>tcl_html.tcl</em>, this way:</p>
<ul class='ruff'>
<li>replace <code>&lt;code class=&quot;tcl&quot;&gt;</code> with html tags <em>starting</em> the Tcl code in your html files</li>
<li>replace <code>&lt;/code&gt;</code> with html tags <em>finishing</em> the Tcl code in your html files</li>
</ul>
<br><h2 class='ruff'><a name='::hl_tcl-Links'></a>Links<span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<p class='ruff'><a href="https://aplsimple.github.io/en/tcl/hl_tcl/hl_tcl.html" >Reference</a></p>
<p class='ruff'><a href="https://chiselapp.com/user/aplsimple/repository/hl_tcl/download" >Source</a> (hl_tcl.zip)</p>
<br><h2 class='ruff'><a name='::hl_tcl-Commands'></a>Commands<span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><br><br><h4 class='ruffproc'><a name='::hl_tcl::hl_all'>hl_all</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl" title="::hl_tcl" class='ruff_cmd'>::hl_tcl</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Updates (&quot;rehighlights&quot;) all highlighted and existing text widgets.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>hl_all</span> <span class='ruff_arg'>?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>dict of options</td></tr>
</table>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="hl_tcl.html#::hl_tcl::hl_init" title="hl_init" class='ruff_cmd'>hl_init</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_1' href="javascript:toggleSource('1')">Show source</a></p>
<div id='1' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::hl_all {args} {

  <font color=#646464># Updates (&quot;rehighlights&quot;) all highlighted and existing text widgets.</font>
  <font color=#646464>#   args - dict of options</font>
  <font color=#646464># See also: hl_init</font>

  <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>info</font></b> exists ::hl_tcl::my::data(LIST_TXT)]} {
    <b><font color=#922b23>foreach</font></b> wattrs <font color=#4A181B>$::hl_tcl::my::data(LIST_TXT)</font> {
      <b><font color=#922b23>lassign</font></b> <font color=#4A181B>$wattrs</font> txt ro multi com2
      <b><font color=#922b23>if</font></b> {[<b><font color=#771008>winfo</font></b> exists <font color=#4A181B>$txt</font>]} {
        hl_init <font color=#4A181B>$txt</font> {*}<font color=#4A181B>$args</font>
        hl_text <font color=#4A181B>$txt</font> <font color=#4A181B>$ro</font> <font color=#4A181B>$multi</font> <font color=#4A181B>$com2</font>
      }
    }
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::hl_colors'>hl_colors</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl" title="::hl_tcl" class='ruff_cmd'>::hl_tcl</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Sets/gets default colors for highlighting.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>hl_colors</span> <span class='ruff_arg'>txt ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>list of default colors</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>If 'args' omitted, returns a list of default colors.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_2' href="javascript:toggleSource('2')">Show source</a></p>
<div id='2' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::hl_colors {txt args} {

  <font color=#646464># Sets/gets default colors for highlighting.</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   args - list of default colors</font>
  <font color=#646464># If 'args' omitted, returns a list of default colors.</font>

  <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>llength</font></b> <font color=#4A181B>$args</font>]} {
    <b><font color=#922b23>set</font></b> ::hl_tcl::my::data(COLORS,<font color=#4A181B>$txt)</font> <font color=#4A181B>$args</font>
    <b><font color=#800080>return</font></b>
  } <b><font color=#922b23>elseif</font></b> {[<b><font color=#922b23>info</font></b> exists ::hl_tcl::my::data(COLORS,<font color=#4A181B>$txt)</font>]} {
    <b><font color=#800080>return</font></b> <font color=#4A181B>$::hl_tcl::my::data(COLORS</font>,<font color=#4A181B>$txt)</font>
  } <b><font color=#922b23>elseif</font></b> {<font color=#4A181B>$::hl_tcl::my::data(DARK_EDITOR</font>,<font color=#4A181B>$txt)</font>} {
    <b><font color=#922b23>set</font></b> clrCOM orange
    <b><font color=#922b23>set</font></b> clrCOMTK #fe9880
    <b><font color=#922b23>set</font></b> clrSTR lightgreen
    <b><font color=#922b23>set</font></b> clrVAR #f1b479
    <b><font color=#922b23>set</font></b> clrCMN #76a396
    <b><font color=#922b23>set</font></b> clrPROC #d485d4
  } <b><font color=#922b23>else</font></b> {
    <b><font color=#922b23>set</font></b> clrCOM #923B23
    <b><font color=#922b23>set</font></b> clrCOMTK #7A040E
    <b><font color=#922b23>set</font></b> clrSTR #035103
    <b><font color=#922b23>set</font></b> clrVAR #4A181B
    <b><font color=#922b23>set</font></b> clrCMN #646464
    <b><font color=#922b23>set</font></b> clrPROC #A106A1
  }
  <b><font color=#800080>return</font></b> [<b><font color=#922b23>list</font></b> <font color=#4A181B>$clrCOM</font> <font color=#4A181B>$clrCOMTK</font> <font color=#4A181B>$clrSTR</font> <font color=#4A181B>$clrVAR</font> <font color=#4A181B>$clrCMN</font> <font color=#4A181B>$clrPROC</font>]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::hl_font'>hl_font</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl" title="::hl_tcl" class='ruff_cmd'>::hl_tcl</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Sets/gets default font for highlighting.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>hl_font</span> <span class='ruff_arg'>txt ?fontattr?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>fontattr</code></code></td><td class='ruff_defitem'>attributes of default font; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>If 'fontattr' omitted, returns the attributes of default font.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_3' href="javascript:toggleSource('3')">Show source</a></p>
<div id='3' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::hl_font {txt {fontattr {}}} {

  <font color=#646464># Sets/gets default font for highlighting.</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   fontattr - attributes of default font</font>
  <font color=#646464># If 'fontattr' omitted, returns the attributes of default font.</font>

  <b><font color=#922b23>if</font></b> {<font color=#4A181B>$fontattr</font> ne <font color=#035103>&quot;&quot;</font>} {
    <b><font color=#922b23>set</font></b> ::hl_tcl::my::data(FONT,<font color=#4A181B>$txt)</font> <font color=#4A181B>$fontattr</font>
    <b><font color=#800080>return</font></b>
  } <b><font color=#922b23>elseif</font></b> {[<b><font color=#922b23>info</font></b> exists ::hl_tcl::my::data(FONT,<font color=#4A181B>$txt)</font>]} {
    <b><font color=#800080>return</font></b> <font color=#4A181B>$::hl_tcl::my::data(FONT</font>,<font color=#4A181B>$txt)</font>
  }
  <b><font color=#922b23>set</font></b> font0 [<b><font color=#771008>font</font></b> configure TkFixedFont]
  <b><font color=#922b23>dict</font></b> set font0 -size 12
  <b><font color=#800080>return</font></b> <font color=#4A181B>$font0</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::hl_init'>hl_init</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl" title="::hl_tcl" class='ruff_cmd'>::hl_tcl</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Initializes highlighting.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>hl_init</span> <span class='ruff_arg'>txt ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>dict of options</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>The 'args' options include:</p>
<table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>-dark</code></td><td class='ruff_defitem'>flag &quot;the text widget has dark background&quot;</td></tr>
<tr><td class='ruff_defitem'><code>-colors</code></td><td class='ruff_defitem'>list of colors: clrCOM, clrCOMTK, clrSTR, clrVAR, clrCMN, clrPROC</td></tr>
<tr><td class='ruff_defitem'><code>-font</code></td><td class='ruff_defitem'>attributes of font</td></tr>
</table>
<p class='ruff'>This procedure has to be called before writing a text in the text widget.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_4' href="javascript:toggleSource('4')">Show source</a></p>
<div id='4' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::hl_init {txt args} {

  <font color=#646464># Initializes highlighting.</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   args - dict of options</font>
  <font color=#646464># The 'args' options include:</font>
  <font color=#646464>#   -dark - flag &quot;the text widget has dark background&quot;</font>
  <font color=#646464>#   -colors - list of colors: clrCOM, clrCOMTK, clrSTR, clrVAR, clrCMN, clrPROC</font>
  <font color=#646464>#   -font - attributes of font</font>
  <font color=#646464># This procedure has to be called before writing a text in the text widget.</font>

  <b><font color=#922b23>set</font></b> ::hl_tcl::my::data(REG_TXT,<font color=#4A181B>$txt)</font> <font color=#035103>&quot;&quot;</font>  ;<font color=#646464># disables Modified at changing the text</font>
  <b><font color=#922b23>set</font></b> ::hl_tcl::my::data(DARK_EDITOR,<font color=#4A181B>$txt)</font> [<b><font color=#922b23>expr</font></b> {[<b><font color=#922b23>dict</font></b> exists <font color=#4A181B>$args</font> -dark] &&  [<b><font color=#922b23>dict</font></b> get <font color=#4A181B>$args</font> -dark]}]
  <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>dict</font></b> exists <font color=#4A181B>$args</font> -colors]} {
    <b><font color=#922b23>set</font></b> ::hl_tcl::my::data(COLORS,<font color=#4A181B>$txt)</font> [<b><font color=#922b23>dict</font></b> get <font color=#4A181B>$args</font> -colors]
  }
  <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>dict</font></b> exists <font color=#4A181B>$args</font> -font]} {
    <b><font color=#922b23>set</font></b> ::hl_tcl::my::data(FONT,<font color=#4A181B>$txt)</font> [<b><font color=#922b23>dict</font></b> get <font color=#4A181B>$args</font> -font]
  }
  hl_readonly <font color=#4A181B>$txt</font> no
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::hl_readonly'>hl_readonly</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl" title="::hl_tcl" class='ruff_cmd'>::hl_tcl</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Makes the text widget be readonly or gets its 'read-only' state.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>hl_readonly</span> <span class='ruff_arg'>txt ?ro? ?com2?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>ro</code></code></td><td class='ruff_defitem'>flag &quot;the text widget is readonly&quot; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
<tr><td class='ruff_defitem'><code><code>com2</code></code></td><td class='ruff_defitem'>command to be called after changes; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>If 'ro' argument is omitted, returns the widget's 'read-only' state.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_5' href="javascript:toggleSource('5')">Show source</a></p>
<div id='5' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::hl_readonly {txt {ro {}} {com2 {}}} {

  <font color=#646464># Makes the text widget be readonly or gets its 'read-only' state.</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   ro - flag &quot;the text widget is readonly&quot;</font>
  <font color=#646464>#   com2 - command to be called after changes</font>
  <font color=#646464># If 'ro' argument is omitted, returns the widget's 'read-only' state.</font>

  <b><font color=#922b23>if</font></b> {<font color=#4A181B>$ro</font> eq <font color=#035103>&quot;&quot;</font>} {
    <b><font color=#800080>return</font></b> [<b><font color=#922b23>expr</font></b> {[<b><font color=#922b23>info</font></b> exists ::hl_tcl::my::data(READONLY,<font color=#4A181B>$txt)</font>] && <font color=#4A181B>$::hl_tcl::my::data(READONLY</font>,<font color=#4A181B>$txt)</font>}]
  }
  <b><font color=#922b23>set</font></b> ::hl_tcl::my::data(READONLY,<font color=#4A181B>$txt)</font> <font color=#4A181B>$ro</font>
  <b><font color=#922b23>set</font></b> newcom <font color=#035103>&quot;::<font color=#4A181B>$</font>txt.internal&quot;</font>
  <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>info</font></b> commands <font color=#4A181B>$newcom</font>] eq <font color=#035103>&quot;&quot;</font>} {<b><font color=#922b23>rename</font></b> <font color=#4A181B>$txt</font> <font color=#4A181B>$newcom</font>}
  <b><font color=#922b23>set</font></b> com <font color=#035103>&quot;<font color=#4A181B>[</font>namespace current<font color=#4A181B>]</font>::my::Modified <font color=#4A181B>$</font>txt&quot;</font>
  <b><font color=#922b23>if</font></b> {<font color=#4A181B>$com2</font> ne <font color=#035103>&quot;&quot;</font>} {<b><font color=#922b23>append</font></b> com <font color=#035103>&quot; ; <font color=#4A181B>$</font>com2&quot;</font>}
  <b><font color=#922b23>if</font></b> {<font color=#4A181B>$ro</font>} {<b><font color=#800080>proc</font></b> ::<font color=#4A181B>$txt</font> {args} <font color=#035103>&quot;</font>
<font color=#035103>      switch -exact -- \[lindex \$args 0\] \{</font>
<font color=#035103>          insert \{<font color=#4A181B>$</font>com2\}</font>
<font color=#035103>          delete \{<font color=#4A181B>$</font>com2\}</font>
<font color=#035103>          replace \{<font color=#4A181B>$</font>com2\}</font>
<font color=#035103>          default \{</font>
<font color=#035103>              return \[eval <font color=#4A181B>$</font>newcom \$args\]</font>
<font color=#035103>          \}</font>
<font color=#035103>      \}&quot;</font>
  } <b><font color=#922b23>else</font></b> {<b><font color=#800080>proc</font></b> ::<font color=#4A181B>$txt</font> {args} <font color=#035103>&quot;</font>
<font color=#035103>      set _res_ \[eval <font color=#4A181B>$</font>newcom \$args\]</font>
<font color=#035103>      switch -exact -- \[lindex \$args 0\] \{</font>
<font color=#035103>          insert \{after idle <font color=#4A181B>{$</font>com<font color=#4A181B>}</font>\}</font>
<font color=#035103>          delete \{after idle <font color=#4A181B>{$</font>com<font color=#4A181B>}</font>\}</font>
<font color=#035103>          replace \{after idle <font color=#4A181B>{$</font>com<font color=#4A181B>}</font>\}</font>
<font color=#035103>      \}</font>
<font color=#035103>      return \$_res_&quot;</font>
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::hl_text'>hl_text</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl" title="::hl_tcl" class='ruff_cmd'>::hl_tcl</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl'>hl_tcl</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights Tcl code of a text widget.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>hl_text</span> <span class='ruff_arg'>txt ?ro? ?multi? ?com2?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>ro</code></code></td><td class='ruff_defitem'>flag &quot;the text widget is readonly&quot; <i>optional, default</i> <code>no</code></td></tr>
<tr><td class='ruff_defitem'><code><code>multi</code></code></td><td class='ruff_defitem'>flag &quot;process multi-line strings&quot; (&quot;yes&quot; by default); <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
<tr><td class='ruff_defitem'><code><code>com2</code></code></td><td class='ruff_defitem'>command to be called after each text change; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_6' href="javascript:toggleSource('6')">Show source</a></p>
<div id='6' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::hl_text {txt {ro no} {multi {}} {com2 {}}} {

  <font color=#646464># Highlights Tcl code of a text widget.</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   ro - flag &quot;the text widget is readonly&quot;</font>
  <font color=#646464>#   multi - flag &quot;process multi-line strings&quot; (&quot;yes&quot; by default)</font>
  <font color=#646464>#   com2 - command to be called after each text change</font>

  <b><font color=#922b23>if</font></b> {<font color=#4A181B>$multi</font> ne <font color=#035103>&quot;&quot;</font>} {<b><font color=#922b23>set</font></b> ::hl_tcl::my::data(MULTI_LINE_STR) <font color=#4A181B>$multi</font>}
  <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>info</font></b> exists ::hl_tcl::my::data(FONT,<font color=#4A181B>$txt)</font>]} {
    <b><font color=#922b23>set</font></b> font0 <font color=#4A181B>$::hl_tcl::my::data(FONT</font>,<font color=#4A181B>$txt)</font>
  } <b><font color=#922b23>else</font></b> {
    <b><font color=#922b23>set</font></b> font0 [<b><font color=#771008>font</font></b> configure TkFixedFont]
    <b><font color=#922b23>dict</font></b> set font0 -size 12
  }
  <b><font color=#922b23>set</font></b> font1 [<b><font color=#922b23>set</font></b> font2 <font color=#4A181B>$font0</font>]
  <font color=#4A181B>$txt</font> tag config tagSTD -font <font color=#035103>&quot;<font color=#4A181B>$</font>font0&quot;</font>
  <font color=#4A181B>$txt</font> tag add tagSTD 1.0 end
  <b><font color=#922b23>dict</font></b> set font1 -weight bold
  <b><font color=#922b23>dict</font></b> set font2 -slant italic
  <b><font color=#922b23>lassign</font></b> [hl_colors <font color=#4A181B>$txt</font>] clrCOM clrCOMTK clrSTR clrVAR clrCMN clrPROC
  <font color=#4A181B>$txt</font> tag config tagCOM -font <font color=#035103>&quot;<font color=#4A181B>$</font>font1&quot;</font> -foreground <font color=#4A181B>$clrCOM</font>
  <font color=#4A181B>$txt</font> tag config tagCOMTK -font <font color=#035103>&quot;<font color=#4A181B>$</font>font1&quot;</font> -foreground <font color=#4A181B>$clrCOMTK</font>
  <font color=#4A181B>$txt</font> tag config tagSTR -font <font color=#035103>&quot;<font color=#4A181B>$</font>font0&quot;</font> -foreground <font color=#4A181B>$clrSTR</font>
  <font color=#4A181B>$txt</font> tag config tagVAR -font <font color=#035103>&quot;<font color=#4A181B>$</font>font0&quot;</font> -foreground <font color=#4A181B>$clrVAR</font>
  <font color=#4A181B>$txt</font> tag config tagCMN -font <font color=#035103>&quot;<font color=#4A181B>$</font>font2&quot;</font> -foreground <font color=#4A181B>$clrCMN</font>
  <font color=#4A181B>$txt</font> tag config tagPROC -font <font color=#035103>&quot;<font color=#4A181B>$</font>font1&quot;</font> -foreground <font color=#4A181B>$clrPROC</font>
  my::HighlightAll <font color=#4A181B>$txt</font>
  <b><font color=#922b23>if</font></b> {![<b><font color=#922b23>info</font></b> exists ::hl_tcl::my::data(BIND_TXT,<font color=#4A181B>$txt)</font>]} {
    <b><font color=#771008>bind</font></b> <font color=#4A181B>$txt</font> &lt;KeyPress&gt; [<b><font color=#922b23>list</font></b> + [<b><font color=#922b23>namespace</font></b> current]::my::Mempos <font color=#4A181B>$txt</font>]
    <b><font color=#771008>bind</font></b> <font color=#4A181B>$txt</font> &lt;ButtonPress-1&gt; [<b><font color=#922b23>list</font></b> + [<b><font color=#922b23>namespace</font></b> current]::my::Mempos <font color=#4A181B>$txt</font>]
    <b><font color=#922b23>set</font></b> ::hl_tcl::my::data(BIND_TXT,<font color=#4A181B>$txt)</font> yes
  }
  <b><font color=#922b23>set</font></b> ::hl_tcl::my::data(REG_TXT,<font color=#4A181B>$txt)</font> <font color=#035103>&quot;1&quot;</font>
  <b><font color=#922b23>set</font></b> txtattrs [<b><font color=#922b23>list</font></b> <font color=#4A181B>$txt</font> <font color=#4A181B>$ro</font> <font color=#4A181B>$multi</font> <font color=#4A181B>$com2</font>]
  <b><font color=#922b23>if</font></b> {![<b><font color=#922b23>info</font></b> exists ::hl_tcl::my::data(LIST_TXT)] ||  [<b><font color=#922b23>set</font></b> i [<b><font color=#922b23>lsearch</font></b> -index 0 <font color=#4A181B>$::hl_tcl::my::data(LIST_TXT)</font> <font color=#4A181B>$txt</font>]]==-1} {
    <b><font color=#922b23>lappend</font></b> ::hl_tcl::my::data(LIST_TXT) <font color=#4A181B>$txtattrs</font>
  } <b><font color=#922b23>else</font></b> {
    <b><font color=#922b23>set</font></b> ::hl_tcl::my::data(LIST_TXT) [<b><font color=#922b23>lreplace</font></b> <font color=#4A181B>$::hl_tcl::my::data(LIST_TXT)</font> <font color=#4A181B>$i</font> <font color=#4A181B>$i</font> <font color=#4A181B>$txtattrs</font>]
  }
  hl_readonly <font color=#4A181B>$txt</font> <font color=#4A181B>$ro</font> <font color=#4A181B>$com2</font>
}<br><br></code></pre></div>
</div><br><br><h1 class='ruff'><a name='::hl_tcl::my'></a>::hl_tcl::my<span class='tinylink'><a href='#top'>Top</a></span></h1>
<div style='clear:both;'></div>
<p class='ruff'>The <code>::hl_tcl::my</code> namespace contains procedures for the &quot;internal&quot; usage by <em>hl_tcl</em> package.</p>
<p class='ruff'>All of them are upper-cased, in contrast with the UI procedures of <code>hl_tcl</code> namespace.</p>
<br><h2 class='ruff'><a name='::hl_tcl::my-Commands'></a>Commands<span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::AuxEnding'>AuxEnding</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Auxiliary procedure to process the ending character of line.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>AuxEnding</span> <span class='ruff_arg'>kName lineName iName</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>kName</code></code></td><td class='ruff_defitem'>variable's name for 'k'</td></tr>
<tr><td class='ruff_defitem'><code><code>lineName</code></code></td><td class='ruff_defitem'>variable's name for 'line'</td></tr>
<tr><td class='ruff_defitem'><code><code>iName</code></code></td><td class='ruff_defitem'>variable's name for 'i'</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_7' href="javascript:toggleSource('7')">Show source</a></p>
<div id='7' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::AuxEnding {kName lineName iName} {

  <font color=#646464># Auxiliary procedure to process the ending character of line.</font>
  <font color=#646464>#   kName - variable's name for 'k'</font>
  <font color=#646464>#   lineName - variable's name for 'line'</font>
  <font color=#646464>#   iName - variable's name for 'i'</font>

  <b><font color=#922b23>upvar</font></b> 1 <font color=#4A181B>$kName</font> k <font color=#4A181B>$lineName</font> line <font color=#4A181B>$iName</font> i
  <b><font color=#800080>return</font></b> [<b><font color=#922b23>expr</font></b> {[<b><font color=#922b23>set</font></b> k [<b><font color=#922b23>string</font></b> first <font color=#035103>&quot;#&quot;</font> <font color=#4A181B>$line</font> <font color=#4A181B>$i</font>]]&gt;-1 &&  ([<b><font color=#922b23>string</font></b> trimleft [<b><font color=#922b23>string</font></b> range <font color=#4A181B>$line</font> 0 <font color=#4A181B>$k</font>-1]] eq <font color=#035103>&quot;&quot;</font> || [<b><font color=#922b23>string</font></b> index  [<b><font color=#922b23>string</font></b> trimright [<b><font color=#922b23>string</font></b> range <font color=#4A181B>$line</font> <font color=#4A181B>$i</font>+1 <font color=#4A181B>$k</font>-1]] end] eq <font color=#035103>&quot;;&quot;</font>)}]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::CountChar'>CountChar</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Counts a character in a string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>CountChar</span> <span class='ruff_arg'>str ch</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>str</code></code></td><td class='ruff_defitem'>a string</td></tr>
<tr><td class='ruff_defitem'><code><code>ch</code></code></td><td class='ruff_defitem'>a character</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a number of non-escaped occurences of character <em>ch</em> in string <em>str</em>.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="https://wiki.tcl-lang.org/page/Reformatting+Tcl+code+indentation" >wiki.tcl-lang.org</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_8' href="javascript:toggleSource('8')">Show source</a></p>
<div id='8' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::CountChar {str ch} {

  <font color=#646464># Counts a character in a string.</font>
  <font color=#646464>#   str - a string</font>
  <font color=#646464>#   ch - a character</font>
  <font color=#646464>#</font>
  <font color=#646464># Returns a number of non-escaped occurences of character *ch* in</font>
  <font color=#646464># string *str*.</font>
  <font color=#646464>#</font>
  <font color=#646464># See also:</font>
  <font color=#646464># [wiki.tcl-lang.org](https://wiki.tcl-lang.org/page/Reformatting+Tcl+code+indentation)</font>

  <b><font color=#922b23>set</font></b> icnt 0
  <b><font color=#922b23>while</font></b> {[<b><font color=#922b23>set</font></b> idx [<b><font color=#922b23>string</font></b> first <font color=#4A181B>$ch</font> <font color=#4A181B>$str</font>]] &gt;= 0} {
    <b><font color=#922b23>set</font></b> backslashes 0
    <b><font color=#922b23>set</font></b> nidx <font color=#4A181B>$idx</font>
    <b><font color=#922b23>while</font></b> {[<b><font color=#922b23>string</font></b> equal [<b><font color=#922b23>string</font></b> index <font color=#4A181B>$str</font> [<b><font color=#922b23>incr</font></b> nidx -1]] \\]} {
      <b><font color=#922b23>incr</font></b> backslashes
    }
    <b><font color=#922b23>if</font></b> {<font color=#4A181B>$backslashes</font> % 2 == 0} { <b><font color=#922b23>incr</font></b> icnt }
    <b><font color=#922b23>set</font></b> str [<b><font color=#922b23>string</font></b> range <font color=#4A181B>$str</font> [<b><font color=#922b23>incr</font></b> idx] end]
  }
  <b><font color=#800080>return</font></b> <font color=#4A181B>$icnt</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::CountQSH'>CountQSH</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Counts quotes, slashes, hashes in a line</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>CountQSH</span> <span class='ruff_arg'>txt ln</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>ln</code></code></td><td class='ruff_defitem'>line's index</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_9' href="javascript:toggleSource('9')">Show source</a></p>
<div id='9' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::CountQSH {txt ln} {

  <font color=#646464># Counts quotes, slashes, hashes in a line</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   ln - line's index</font>

  <b><font color=#922b23>set</font></b> ln [<b><font color=#922b23>expr</font></b> {int(<font color=#4A181B>$ln)</font>}]
  <b><font color=#922b23>set</font></b> st [<font color=#4A181B>$txt</font> get <font color=#4A181B>$ln</font>.0 <font color=#4A181B>$ln</font>.end]
  <b><font color=#800080>return</font></b> [<b><font color=#922b23>list</font></b> [CountChar <font color=#4A181B>$st</font> <font color=#035103>&quot;\&quot;&quot;</font>] [CountChar <font color=#4A181B>$st</font> <font color=#035103>&quot;\\&quot;</font>] [CountChar <font color=#4A181B>$st</font> <font color=#035103>&quot;#&quot;</font>]]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::FirstQtd'>FirstQtd</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Searches the quote characters in line.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>FirstQtd</span> <span class='ruff_arg'>lineName iName</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>lineName</code></code></td><td class='ruff_defitem'>variable's name for 'line'</td></tr>
<tr><td class='ruff_defitem'><code><code>iName</code></code></td><td class='ruff_defitem'>variable's name for 'i'</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns &quot;yes&quot; if a quote character was found.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_10' href="javascript:toggleSource('10')">Show source</a></p>
<div id='10' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::FirstQtd {lineName iName} {

  <font color=#646464># Searches the quote characters in line.</font>
  <font color=#646464>#   lineName - variable's name for 'line'</font>
  <font color=#646464>#   iName - variable's name for 'i'</font>
  <font color=#646464># Returns &quot;yes&quot; if a quote character was found.</font>

  <b><font color=#922b23>variable</font></b> data
  <b><font color=#922b23>upvar</font></b> 1 <font color=#4A181B>$lineName</font> line <font color=#4A181B>$iName</font> i
  <b><font color=#922b23>while</font></b> {1} {
    <font color=#646464># below is a line that brings Tcl highlighters in the stupor:</font>
    <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>set</font></b> i [<b><font color=#922b23>string</font></b> first {&quot;} <font color=#4A181B>$line</font> <font color=#4A181B>$i</font>]]==-1} {<b><font color=#800080>return</font></b> no}
    <font color=#646464># as well as this one:</font>
    <font color=#646464># regsub -all {(([^A-Z@]|\\@)[.?!](&quot;|'|'')?([])])?) } $fieldText {\1  } fieldText</font>
    <b><font color=#922b23>if</font></b> {[NotEscaped <font color=#4A181B>$line</font> <font color=#4A181B>$i</font>]} {
      <b><font color=#922b23>set</font></b> i1 [<b><font color=#922b23>expr</font></b> {<font color=#4A181B>$i</font>-1}]
      <b><font color=#922b23>set</font></b> i2 [<b><font color=#922b23>expr</font></b> {<font color=#4A181B>$i</font>+1}]
      <b><font color=#922b23>if</font></b> {[NotEscaped <font color=#4A181B>$line</font> <font color=#4A181B>$i1</font>] && [NotEscaped <font color=#4A181B>$line</font> <font color=#4A181B>$i2</font>]} {
        <b><font color=#922b23>set</font></b> c1 [<b><font color=#922b23>string</font></b> index <font color=#4A181B>$line</font> <font color=#4A181B>$i1</font>]  ;<font color=#646464># check the string ends</font>
        <b><font color=#922b23>set</font></b> c2 [<b><font color=#922b23>string</font></b> index <font color=#4A181B>$line</font> <font color=#4A181B>$i2</font>]
        <b><font color=#922b23>if</font></b> {<font color=#4A181B>$c1</font> in <font color=#4A181B>$data(S_BOTH)</font> || <font color=#4A181B>$c2</font> in <font color=#4A181B>$data(S_BOTH)</font> ||
        <font color=#4A181B>$c1</font> in <font color=#4A181B>$data(S_LEFT)</font> && <font color=#4A181B>$c2</font> ni <font color=#4A181B>$data(S_RIGHT)</font> || <font color=#4A181B>$c1</font> ni <font color=#4A181B>$data(S_LEFT)</font> && <font color=#4A181B>$c2</font> in <font color=#4A181B>$data(S_RIGHT)</font>} {
          <b><font color=#800080>return</font></b> yes
        }
        <font color=#646464># last reverence: for braced expression</font>
        <b><font color=#922b23>set</font></b> i1 <font color=#4A181B>$i</font>
        <b><font color=#922b23>while</font></b> {<font color=#4A181B>$i1</font>&gt;0} {
          <b><font color=#922b23>set</font></b> c1 [<b><font color=#922b23>string</font></b> index <font color=#4A181B>$line</font> <font color=#4A181B>$i1</font>-1]
          <b><font color=#922b23>set</font></b> c2 [<b><font color=#922b23>string</font></b> index <font color=#4A181B>$line</font> <font color=#4A181B>$i1</font>]
          <b><font color=#922b23>if</font></b> {<font color=#4A181B>$c1</font> in <font color=#4A181B>$data(S_SPACE)</font>} {<b><font color=#800080>return</font></b> [<b><font color=#922b23>expr</font></b> {<font color=#4A181B>$c2</font> ne <font color=#035103>&quot;\{&quot;</font>}]}
          <b><font color=#922b23>incr</font></b> i1 -1
        }
        <b><font color=#800080>return</font></b> no ;<font color=#646464>#[expr {!$data(MULTI_LINE_STR)}]</font>
      }
      <b><font color=#800080>return</font></b> yes
    }
    <b><font color=#922b23>incr</font></b> i
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::HighlightAll'>HighlightAll</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights all of a text.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>HighlightAll</span> <span class='ruff_arg'>txt</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_11' href="javascript:toggleSource('11')">Show source</a></p>
<div id='11' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::HighlightAll {txt} {

  <font color=#646464># Highlights all of a text.</font>
  <font color=#646464>#   txt - text widget's path</font>

  <b><font color=#922b23>set</font></b> tlen [<b><font color=#922b23>lindex</font></b> [<b><font color=#922b23>split</font></b> [<font color=#4A181B>$txt</font> index end] .] 0]
  RemoveTags <font color=#4A181B>$txt</font> 1.0 end
  <b><font color=#922b23>for</font></b> {<b><font color=#922b23>set</font></b> currQtd [<b><font color=#922b23>set</font></b> ln 0]} {<font color=#4A181B>$ln</font>&lt;=<font color=#4A181B>$tlen</font>} {<b><font color=#922b23>incr</font></b> ln} {
    <b><font color=#922b23>set</font></b> currQtd [HighlightLine <font color=#4A181B>$txt</font> <font color=#4A181B>$ln</font> <font color=#4A181B>$currQtd</font>]
  }
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::HighlightCmd'>HighlightCmd</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights Tcl/Tk commands.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>HighlightCmd</span> <span class='ruff_arg'>txt line ln pri i</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>line</code></code></td><td class='ruff_defitem'>line to be highlighted</td></tr>
<tr><td class='ruff_defitem'><code><code>ln</code></code></td><td class='ruff_defitem'>line number</td></tr>
<tr><td class='ruff_defitem'><code><code>pri</code></code></td><td class='ruff_defitem'>column number to highlighted from</td></tr>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>current position in 'line'</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_12' href="javascript:toggleSource('12')">Show source</a></p>
<div id='12' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::HighlightCmd {txt line ln pri i} {

  <font color=#646464># Highlights Tcl/Tk commands.</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   line - line to be highlighted</font>
  <font color=#646464>#   ln - line number</font>
  <font color=#646464>#   pri - column number to highlighted from</font>
  <font color=#646464>#   i - current position in 'line'</font>

  <b><font color=#922b23>variable</font></b> data
  <font color=#4A181B>$txt</font> tag add tagSTD <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>pri&quot;</font> <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>i -1 chars&quot;</font>
  <b><font color=#922b23>set</font></b> st [<b><font color=#922b23>string</font></b> range <font color=#4A181B>$line</font> <font color=#4A181B>$pri</font> <font color=#4A181B>$i</font>-1]
  <b><font color=#922b23>set</font></b> lcom [<b><font color=#922b23>regexp</font></b> -inline -all -indices {(^|\[|\{|\}|;)+\s*(:|\w)+} <font color=#4A181B>$st</font>]
  <font color=#646464># commands</font>
  <b><font color=#922b23>foreach</font></b> {lc g1 g2} <font color=#4A181B>$lcom</font> {
    <b><font color=#922b23>lassign</font></b> <font color=#4A181B>$lc</font> i1 i2
    <b><font color=#922b23>set</font></b> c [<b><font color=#922b23>string</font></b> trim [<b><font color=#922b23>string</font></b> range <font color=#4A181B>$st</font> <font color=#4A181B>$i1</font> <font color=#4A181B>$i2</font>] <font color=#035103>&quot;\{\}\[;\t &quot;</font>]
    <b><font color=#922b23>set</font></b> ik [<b><font color=#922b23>expr</font></b> {<font color=#4A181B>$i2</font>-<font color=#4A181B>$i1</font>+1-[<b><font color=#922b23>string</font></b> length <font color=#4A181B>$c</font>]}]
    <b><font color=#922b23>if</font></b> {<font color=#4A181B>$c</font> ne <font color=#035103>&quot;&quot;</font>} {
      <b><font color=#922b23>incr</font></b> i1 <font color=#4A181B>$ik</font>
      <b><font color=#922b23>incr</font></b> i2
      <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>set</font></b> j [<b><font color=#922b23>lsearch</font></b> -exact <font color=#4A181B>$data(CMD)</font> <font color=#4A181B>$c</font>]]&gt;-1} {
        <b><font color=#922b23>if</font></b> {<font color=#4A181B>$j</font>&gt;11} {<b><font color=#922b23>set</font></b> tag <font color=#035103>&quot;tagCOM&quot;</font>} {<b><font color=#922b23>set</font></b> tag <font color=#035103>&quot;tagPROC&quot;</font>}
        <font color=#4A181B>$txt</font> tag add <font color=#4A181B>$tag</font> <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>pri +<font color=#4A181B>$</font>i1 char&quot;</font> <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>pri +<font color=#4A181B>$</font>i2 char&quot;</font>
      } <b><font color=#922b23>elseif</font></b> {[<b><font color=#922b23>lsearch</font></b> -exact <font color=#4A181B>$data(CMD_TK)</font> <font color=#4A181B>$c</font>]&gt;-1} {
        <font color=#4A181B>$txt</font> tag add tagCOMTK <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>pri +<font color=#4A181B>$</font>i1 char&quot;</font> <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>pri +<font color=#4A181B>$</font>i2 char&quot;</font>
      }
    }
  }
  <b><font color=#922b23>foreach</font></b> el {else elseif} {
    <b><font color=#922b23>set</font></b> lcom [<b><font color=#922b23>regexp</font></b> -inline -all -indices <font color=#035103>&quot;\}\\s+(<font color=#4A181B>$</font>el)\\s+\{&quot;</font> <font color=#4A181B>$st</font>]
    <b><font color=#922b23>foreach</font></b> {g1 lc} <font color=#4A181B>$lcom</font> {
      <b><font color=#922b23>lassign</font></b> <font color=#4A181B>$lc</font> i1 i2
      <font color=#4A181B>$txt</font> tag add tagCOM <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>pri +<font color=#4A181B>$</font>i1 char&quot;</font> <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>pri +<font color=#4A181B>[</font>incr i2<font color=#4A181B>]</font> char&quot;</font>
    }
  }
  <font color=#646464># variable values</font>
  <b><font color=#922b23>set</font></b> lcom [<b><font color=#922b23>regexp</font></b> -inline -all -indices {(^|[^\\])\$+\{?(:|\w|\(|\))+\}?} <font color=#4A181B>$st</font>]
  <b><font color=#922b23>foreach</font></b> {lc g1 g2} <font color=#4A181B>$lcom</font> {
    <b><font color=#922b23>lassign</font></b> <font color=#4A181B>$lc</font> i1 i2
    <b><font color=#922b23>set</font></b> i [<b><font color=#922b23>string</font></b> first \$ [<b><font color=#922b23>set</font></b> c [<b><font color=#922b23>string</font></b> range <font color=#4A181B>$st</font> <font color=#4A181B>$i1</font> <font color=#4A181B>$i2</font>]]]
    <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>string</font></b> last \} <font color=#4A181B>$c</font>]&gt;0 && [<b><font color=#922b23>string</font></b> first \$\{ <font color=#4A181B>$c</font>]==-1} {<b><font color=#922b23>incr</font></b> i2 -1}
    <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>incr</font></b> i1 <font color=#4A181B>$i</font>]&lt;[<b><font color=#922b23>incr</font></b> i2]} {
      <font color=#4A181B>$txt</font> tag add tagVAR <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>pri +<font color=#4A181B>$</font>i1 char&quot;</font> <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>pri +<font color=#4A181B>$</font>i2 char&quot;</font>
    }
  }
  <b><font color=#800080>return</font></b>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::HighlightLine'>HighlightLine</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlightes a line in text.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>HighlightLine</span> <span class='ruff_arg'>txt ln prevQtd</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>ln</code></code></td><td class='ruff_defitem'>line's number</td></tr>
<tr><td class='ruff_defitem'><code><code>prevQtd</code></code></td><td class='ruff_defitem'>flag of &quot;being quoted&quot; from the previous line</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_13' href="javascript:toggleSource('13')">Show source</a></p>
<div id='13' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::HighlightLine {txt ln prevQtd} {

  <font color=#646464># Highlightes a line in text.</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   ln - line's number</font>
  <font color=#646464>#   prevQtd - flag of &quot;being quoted&quot; from the previous line</font>

  <b><font color=#922b23>variable</font></b> data
  <b><font color=#922b23>set</font></b> line [<font color=#4A181B>$txt</font> get <font color=#4A181B>$ln</font>.0 <font color=#4A181B>$ln</font>.end]
  <b><font color=#922b23>if</font></b> {<font color=#4A181B>$prevQtd</font>==-1} {  ;<font color=#646464># comments continued</font>
    <font color=#4A181B>$txt</font> tag add tagCMN <font color=#4A181B>$ln</font>.0 <font color=#4A181B>$ln</font>.end
    <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>string</font></b> index <font color=#4A181B>$line</font> end] ne <font color=#035103>&quot;\\&quot;</font>} {<b><font color=#922b23>set</font></b> prevQtd 0}
    <b><font color=#800080>return</font></b> <font color=#4A181B>$prevQtd</font>
  }
  <b><font color=#922b23>set</font></b> currQtd <font color=#4A181B>$prevQtd</font>  ;<font color=#646464># current state of being quoted</font>
  <b><font color=#922b23>set</font></b> i [<b><font color=#922b23>set</font></b> pri [<b><font color=#922b23>set</font></b> lasti 0]]
  <b><font color=#922b23>set</font></b> k -1
  <b><font color=#922b23>while</font></b> {1} {
    <b><font color=#922b23>if</font></b> {![FirstQtd line i]} {
      <b><font color=#922b23>if</font></b> {<font color=#4A181B>$currQtd</font>} {
        HighlightStr <font color=#4A181B>$txt</font> <font color=#4A181B>$ln</font>.<font color=#4A181B>$pri</font> <font color=#4A181B>$ln</font>.end
      } <b><font color=#922b23>elseif</font></b> {<font color=#4A181B>$k</font>&gt;-1 || [AuxEnding k line lasti]} {
        HighlightCmd <font color=#4A181B>$txt</font> <font color=#4A181B>$line</font> <font color=#4A181B>$ln</font> <font color=#4A181B>$lasti</font> <font color=#4A181B>$k</font>
        <font color=#4A181B>$txt</font> tag add tagCMN <font color=#4A181B>$ln</font>.<font color=#4A181B>$k</font> <font color=#4A181B>$ln</font>.end
        <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>string</font></b> index <font color=#4A181B>$line</font> end] eq <font color=#035103>&quot;\\&quot;</font>} {<b><font color=#922b23>set</font></b> currQtd -1}
      } <b><font color=#922b23>else</font></b> {
        HighlightCmd <font color=#4A181B>$txt</font> <font color=#4A181B>$line</font> <font color=#4A181B>$ln</font> <font color=#4A181B>$lasti</font> [<b><font color=#922b23>string</font></b> length <font color=#4A181B>$line</font>]
      }
      <b><font color=#922b23>break</font></b>
    }
    <b><font color=#922b23>set</font></b> lasti <font color=#4A181B>$i</font>
    <b><font color=#922b23>if</font></b> {<font color=#4A181B>$currQtd</font>} {
      HighlightStr <font color=#4A181B>$txt</font> <font color=#4A181B>$ln</font>.<font color=#4A181B>$pri</font> <font color=#035103>&quot;<font color=#4A181B>$</font>ln.<font color=#4A181B>$</font>i +1 char&quot;</font>
      <b><font color=#922b23>set</font></b> currQtd 0
      <b><font color=#922b23>if</font></b> {[AuxEnding j line lasti]} {
        <b><font color=#922b23>set</font></b> k <font color=#4A181B>$j</font>
        <b><font color=#922b23>set</font></b> i end+1
        <b><font color=#922b23>continue</font></b>
      }
    } <b><font color=#922b23>else</font></b> {
      <b><font color=#922b23>if</font></b> {[AuxEnding j line pri] && <font color=#4A181B>$j</font>&lt;<font color=#4A181B>$i</font>} {
        <b><font color=#922b23>set</font></b> lasti <font color=#4A181B>$pri</font>
        <b><font color=#922b23>set</font></b> k <font color=#4A181B>$j</font>
        <b><font color=#922b23>set</font></b> i end+1
        <b><font color=#922b23>continue</font></b>
      }
      HighlightCmd <font color=#4A181B>$txt</font> <font color=#4A181B>$line</font> <font color=#4A181B>$ln</font> <font color=#4A181B>$pri</font> <font color=#4A181B>$i</font>
      <b><font color=#922b23>set</font></b> currQtd 1
    }
    <b><font color=#922b23>set</font></b> pri <font color=#4A181B>$i</font>
    <b><font color=#922b23>incr</font></b> i
  }
  <b><font color=#922b23>if</font></b> {!<font color=#4A181B>$data(MULTI_LINE_STR)</font> && <font color=#4A181B>$currQtd</font> && [<b><font color=#922b23>string</font></b> index <font color=#4A181B>$line</font> end] ne <font color=#035103>&quot;\\&quot;</font>} {
    <b><font color=#922b23>set</font></b> currQtd 0
  }
  <b><font color=#800080>return</font></b> <font color=#4A181B>$currQtd</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::HighlightStr'>HighlightStr</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Highlights strings.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>HighlightStr</span> <span class='ruff_arg'>txt p1 p2</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>p1</code></code></td><td class='ruff_defitem'>starting index of the string in 'txt'</td></tr>
<tr><td class='ruff_defitem'><code><code>p2</code></code></td><td class='ruff_defitem'>ending index of the string in 'txt'</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_14' href="javascript:toggleSource('14')">Show source</a></p>
<div id='14' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::HighlightStr {txt p1 p2} {

  <font color=#646464># Highlights strings.</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   p1 - starting index of the string in 'txt'</font>
  <font color=#646464>#   p2 - ending index of the string in 'txt'</font>

  <b><font color=#922b23>set</font></b> p1 [<font color=#4A181B>$txt</font> index <font color=#4A181B>$p1</font>]
  <b><font color=#922b23>set</font></b> p2 [<font color=#4A181B>$txt</font> index <font color=#4A181B>$p2</font>]
  <font color=#4A181B>$txt</font> tag add tagSTR <font color=#4A181B>$p1</font> <font color=#4A181B>$p2</font>
  <b><font color=#922b23>set</font></b> st [<font color=#4A181B>$txt</font> get <font color=#4A181B>$p1</font> <font color=#4A181B>$p2</font>]
  <b><font color=#922b23>set</font></b> lcom [<b><font color=#922b23>regexp</font></b> -inline -all -indices {(^|[^\\])(\[|\]|\$|\{|\})+} <font color=#4A181B>$st</font>]
  <b><font color=#922b23>foreach</font></b> {lc g1 g2} <font color=#4A181B>$lcom</font> {
    <b><font color=#922b23>lassign</font></b> <font color=#4A181B>$lc</font> i1 i2
    <b><font color=#922b23>incr</font></b> i2
    <b><font color=#922b23>while</font></b> {[<b><font color=#922b23>incr</font></b> i1]&lt;<font color=#4A181B>$i2</font>} {
      <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>string</font></b> first [<b><font color=#922b23>string</font></b> index <font color=#4A181B>$st</font> <font color=#4A181B>$i1</font>] <font color=#035103>&quot;\[\]\$\{\}&quot;</font>]&gt;-1} {
        <font color=#4A181B>$txt</font> tag add tagVAR <font color=#035103>&quot;<font color=#4A181B>$</font>p1 +<font color=#4A181B>$</font>i1 char&quot;</font> <font color=#035103>&quot;<font color=#4A181B>$</font>p1 +<font color=#4A181B>$</font>i2 char&quot;</font>
      }
    }
  }
  <b><font color=#800080>return</font></b>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::InRange'>InRange</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Checks if a text position is in a range of text positions.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>InRange</span> <span class='ruff_arg'>p1 p2 l ?c?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>p1</code></code></td><td class='ruff_defitem'>1st position of range</td></tr>
<tr><td class='ruff_defitem'><code><code>p2</code></code></td><td class='ruff_defitem'>2nd position of range</td></tr>
<tr><td class='ruff_defitem'><code><code>l</code></code></td><td class='ruff_defitem'>line position to check (or 'l.c' if 'c' not set)</td></tr>
<tr><td class='ruff_defitem'><code><code>c</code></code></td><td class='ruff_defitem'>column position to check; <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_15' href="javascript:toggleSource('15')">Show source</a></p>
<div id='15' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::InRange {p1 p2 l {c {}}} {

    <font color=#646464># Checks if a text position is in a range of text positions.</font>
    <font color=#646464>#   p1 - 1st position of range</font>
    <font color=#646464>#   p2 - 2nd position of range</font>
    <font color=#646464>#   l - line position to check (or 'l.c' if 'c' not set)</font>
    <font color=#646464>#   c - column position to check</font>

    <b><font color=#922b23>if</font></b> {<font color=#4A181B>$c</font> eq <font color=#035103>&quot;&quot;</font>} {<b><font color=#922b23>lassign</font></b> [<b><font color=#922b23>split</font></b> <font color=#4A181B>$l</font> .] l c}
    <b><font color=#922b23>lassign</font></b> [<b><font color=#922b23>split</font></b> <font color=#4A181B>$p1</font> .] l1 c1
    <b><font color=#922b23>lassign</font></b> [<b><font color=#922b23>split</font></b> <font color=#4A181B>$p2</font> .] l2 c2
    <b><font color=#922b23>incr</font></b> c2 -1 ;<font color=#646464># text ranges are not right-inclusive</font>
    <b><font color=#800080>return</font></b> [<b><font color=#922b23>expr</font></b> {  (<font color=#4A181B>$l</font>&gt;=<font color=#4A181B>$l1</font> && <font color=#4A181B>$l</font>&lt;<font color=#4A181B>$l2</font> && <font color=#4A181B>$c</font>&gt;=<font color=#4A181B>$c1)</font> || (<font color=#4A181B>$l</font>&gt;<font color=#4A181B>$l1</font> && <font color=#4A181B>$l</font>&lt;=<font color=#4A181B>$l2</font> && <font color=#4A181B>$c</font>&lt;=<font color=#4A181B>$c2)</font> ||
      (<font color=#4A181B>$l</font>==<font color=#4A181B>$l1</font> && <font color=#4A181B>$l1</font>==<font color=#4A181B>$l2</font> && <font color=#4A181B>$c</font>&gt;=<font color=#4A181B>$c1</font> && <font color=#4A181B>$c</font>&lt;=<font color=#4A181B>$c2)</font> || (<font color=#4A181B>$l</font>&gt;<font color=#4A181B>$l1</font> && <font color=#4A181B>$l</font>&lt;<font color=#4A181B>$l2)</font>}]
    <font color=#646464>#set p [format &quot;%09d%09d&quot; $l $c]</font>
    <font color=#646464>#set p1 [format &quot;%09d%09d&quot; $l1 $c1]</font>
    <font color=#646464>#set p2 [format &quot;%09d%09d&quot; $l2 $c2]</font>
    <font color=#646464>#return [expr {$p&gt;=$p1 && $p&lt;=$p2}]</font>
  <font color=#646464># doctest</font>
  <font color=#646464>#% ::hl_tcl::my::InRange 9.0 9.20 9.0</font>
  <font color=#646464>#&gt; 1</font>
  <font color=#646464>#% ::hl_tcl::my::InRange 9.1 9.20 9.0</font>
  <font color=#646464>#&gt; 0</font>
  <font color=#646464>#% ::hl_tcl::my::InRange 9.0 9.20 9.19</font>
  <font color=#646464>#&gt; 1</font>
  <font color=#646464>#% ::hl_tcl::my::InRange 9.0 9.20 9.20</font>
  <font color=#646464>#&gt; 0</font>
  <font color=#646464>#% ::hl_tcl::my::InRange 9.0 9.20 8.19</font>
  <font color=#646464>#&gt; 0</font>
  <font color=#646464>#% ::hl_tcl::my::InRange 9.0 9.20 10.0</font>
  <font color=#646464>#&gt; 0</font>
  <font color=#646464>#% ::hl_tcl::my::InRange 9.10 11.2 10.0</font>
  <font color=#646464>#&gt; 1</font>
  <font color=#646464>#% ::hl_tcl::my::InRange 9.0 10.0 9 9999</font>
  <font color=#646464>#&gt; 1</font>
  <font color=#646464>#% puts [time {::hl_tcl::my::InRange 9.0 9.20 8.20} 10000]</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::LineState'>LineState</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets an initial state of line.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>LineState</span> <span class='ruff_arg'>txt tSTR tCMN l1</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>tSTR</code></code></td><td class='ruff_defitem'>ranges of string tags</td></tr>
<tr><td class='ruff_defitem'><code><code>tCMN</code></code></td><td class='ruff_defitem'>ranges of comment tags</td></tr>
<tr><td class='ruff_defitem'><code><code>l1</code></code></td><td class='ruff_defitem'>the line's index</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Returns: 0 if no tags for the line; 1 if the line is a string's continuation; -1 if the line is a comment's continuation.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_16' href="javascript:toggleSource('16')">Show source</a></p>
<div id='16' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::LineState {txt tSTR tCMN l1} {

  <font color=#646464># Gets an initial state of line.</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   tSTR - ranges of string tags</font>
  <font color=#646464>#   tCMN - ranges of comment tags</font>
  <font color=#646464>#   l1 - the line's index</font>
  <font color=#646464># Returns: 0 if no tags for the line; 1 if the line is a string's continuation; -1 if the line is a comment's continuation.</font>

  <b><font color=#922b23>set</font></b> i1 [<font color=#4A181B>$txt</font> index <font color=#4A181B>$l1</font>]
  <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>set</font></b> prev [<b><font color=#922b23>string</font></b> first <font color=#035103>&quot;-1&quot;</font> <font color=#4A181B>$l1</font>]]&gt;-1} {
    <b><font color=#922b23>set</font></b> i1 [<font color=#4A181B>$txt</font> index <font color=#035103>&quot;<font color=#4A181B>$</font>i1 -1 chars&quot;</font>]
  }
  <b><font color=#922b23>set</font></b> ch [<font color=#4A181B>$txt</font> get <font color=#035103>&quot;<font color=#4A181B>$</font>i1&quot;</font> <font color=#035103>&quot;<font color=#4A181B>$</font>i1 +1 chars&quot;</font>]
  <b><font color=#922b23>set</font></b> currQtd 0
  <b><font color=#922b23>if</font></b> {[SearchTag <font color=#4A181B>$tCMN</font> <font color=#4A181B>$i1</font>]!=-1} {    ;<font color=#646464># is a comment continues?</font>
    <b><font color=#922b23>if</font></b> {<font color=#4A181B>$ch</font> eq <font color=#035103>&quot;\\&quot;</font>} {<b><font color=#922b23>set</font></b> currQtd -1}
  } <b><font color=#922b23>else</font></b> {                            ;<font color=#646464># is a string continues?</font>
    <b><font color=#922b23>set</font></b> nl [<b><font color=#922b23>lindex</font></b> [<b><font color=#922b23>split</font></b> <font color=#4A181B>$l1</font> .] 0]
    <b><font color=#922b23>set</font></b> line <font color=#035103>&quot;&quot;</font>
    <b><font color=#922b23>if</font></b> {<font color=#4A181B>$prev</font>&gt;-1} {
      <b><font color=#922b23>while</font></b> {<font color=#4A181B>$nl</font>&gt;1} {
        <b><font color=#922b23>incr</font></b> nl -1
        <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>set</font></b> line [<font color=#4A181B>$txt</font> get <font color=#4A181B>$nl</font>.0 <font color=#4A181B>$nl</font>.end]] ne <font color=#035103>&quot;&quot;</font>} <b><font color=#922b23>break</font></b>
      }
      <b><font color=#922b23>set</font></b> i1 [<font color=#4A181B>$txt</font> index <font color=#035103>&quot;<font color=#4A181B>$</font>nl.end -1 char&quot;</font>]
    } <b><font color=#922b23>else</font></b> {
      <b><font color=#922b23>set</font></b> nltot [<b><font color=#922b23>lindex</font></b> [<b><font color=#922b23>split</font></b> [<font color=#4A181B>$txt</font> index end] .] 0]
      <b><font color=#922b23>while</font></b> {<font color=#4A181B>$nl</font>&lt;<font color=#4A181B>$nltot</font>} {
        <b><font color=#922b23>incr</font></b> nl
        <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>set</font></b> line [<font color=#4A181B>$txt</font> get <font color=#4A181B>$nl</font>.0 <font color=#4A181B>$nl</font>.end]] ne <font color=#035103>&quot;&quot;</font>} <b><font color=#922b23>break</font></b>
      }
      <b><font color=#922b23>set</font></b> i1 <font color=#4A181B>$nl</font>.0
    }
    <b><font color=#922b23>set</font></b> f1 [<b><font color=#922b23>expr</font></b> {[SearchTag <font color=#4A181B>$tSTR</font> [<font color=#4A181B>$txt</font> index <font color=#035103>&quot;<font color=#4A181B>$</font>i1 -1 chars&quot;</font>]]!=-1}]
    <b><font color=#922b23>set</font></b> f  [<b><font color=#922b23>expr</font></b> {[SearchTag <font color=#4A181B>$tSTR</font> [<font color=#4A181B>$txt</font> index <font color=#035103>&quot;<font color=#4A181B>$</font>i1&quot;</font>]]!=-1}]
    <b><font color=#922b23>set</font></b> f2 [<b><font color=#922b23>expr</font></b> {[SearchTag <font color=#4A181B>$tSTR</font> [<font color=#4A181B>$txt</font> index <font color=#035103>&quot;<font color=#4A181B>$</font>i1 +1 chars&quot;</font>]]!=-1}]
    <b><font color=#922b23>set</font></b> ch [<font color=#4A181B>$txt</font> get <font color=#035103>&quot;<font color=#4A181B>$</font>i1&quot;</font> <font color=#035103>&quot;<font color=#4A181B>$</font>i1 +1 chars&quot;</font>]
    <b><font color=#922b23>lassign</font></b> [<b><font color=#922b23>split</font></b> [<font color=#4A181B>$txt</font> index <font color=#4A181B>$i1</font>] .] l c
    <b><font color=#922b23>if</font></b> {![NotEscaped <font color=#4A181B>$line</font> <font color=#4A181B>$c</font>]} {<b><font color=#922b23>set</font></b> ch <font color=#035103>&quot;&quot;</font>}
    <b><font color=#922b23>set</font></b> currQtd [<b><font color=#922b23>expr</font></b> {
      <font color=#4A181B>$prev</font>!=-1 && (<font color=#4A181B>$ch</font>!=<font color=#035103>&quot;\&quot;&quot;</font> && <font color=#4A181B>$f</font> || <font color=#4A181B>$ch</font>==<font color=#035103>&quot;\&quot;&quot;</font> && !<font color=#4A181B>$f1)</font> ||
      <font color=#4A181B>$prev</font>==-1 && (<font color=#4A181B>$ch</font>!=<font color=#035103>&quot;\&quot;&quot;</font> && <font color=#4A181B>$f</font> || <font color=#4A181B>$ch</font>==<font color=#035103>&quot;\&quot;&quot;</font> && !<font color=#4A181B>$f2)</font>}]
  }
  <b><font color=#800080>return</font></b> <font color=#4A181B>$currQtd</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::Mempos'>Mempos</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Remembers the state of current line.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Mempos</span> <span class='ruff_arg'>txt</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_17' href="javascript:toggleSource('17')">Show source</a></p>
<div id='17' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::Mempos {txt} {

  <font color=#646464># Remembers the state of current line.</font>
  <font color=#646464>#   txt - text widget's path</font>

  <b><font color=#922b23>variable</font></b> data
  <b><font color=#922b23>set</font></b> ln [<font color=#4A181B>$txt</font> index insert]
  <b><font color=#922b23>set</font></b> data(CUR_POS,<font color=#4A181B>$txt)</font> <font color=#4A181B>$ln</font>
  <b><font color=#922b23>set</font></b> data(CUR_LEN,<font color=#4A181B>$txt)</font> [<font color=#4A181B>$txt</font> index end]
  <b><font color=#922b23>lassign</font></b> [CountQSH <font color=#4A181B>$txt</font> <font color=#4A181B>$ln</font>]  data(CNT_QUOTE,<font color=#4A181B>$txt)</font> data(CNT_SLASH,<font color=#4A181B>$txt)</font> data(CNT_COMMENT,<font color=#4A181B>$txt)</font>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::Modified'>Modified</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Handles modifications of text.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>Modified</span> <span class='ruff_arg'>txt</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_18' href="javascript:toggleSource('18')">Show source</a></p>
<div id='18' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::Modified {txt} {

  <font color=#646464># Handles modifications of text.</font>
  <font color=#646464>#   txt - text widget's path</font>

  <b><font color=#922b23>variable</font></b> data
  <b><font color=#922b23>if</font></b> {![<b><font color=#922b23>info</font></b> exist data(REG_TXT,<font color=#4A181B>$txt)</font>] || <font color=#4A181B>$data(REG_TXT</font>,<font color=#4A181B>$txt)</font> eq <font color=#035103>&quot;&quot;</font> ||  ![<b><font color=#922b23>info</font></b> exist data(CUR_LEN,<font color=#4A181B>$txt)</font>]} {
    <b><font color=#800080>return</font></b>  ;<font color=#646464># skip changes till the highlighting done</font>
  }
  <font color=#646464># current line:</font>
  <b><font color=#922b23>set</font></b> ln [<b><font color=#922b23>expr</font></b> {int([<font color=#4A181B>$txt</font> index insert])}]
  <font color=#646464># range of change:</font>
  <b><font color=#922b23>set</font></b> dl [<b><font color=#922b23>expr</font></b> {abs(int(<font color=#4A181B>$data(CUR_LEN</font>,<font color=#4A181B>$txt))</font> - int([<font color=#4A181B>$txt</font> index end]))}]
  <font color=#646464># ending line:</font>
  <b><font color=#922b23>set</font></b> endl [<b><font color=#922b23>expr</font></b> {int([<font color=#4A181B>$txt</font> index end])}]
  <font color=#646464># begin and end of changes:</font>
  <b><font color=#922b23>set</font></b> ln1 [<b><font color=#922b23>expr</font></b> {max((<font color=#4A181B>$ln</font>-<font color=#4A181B>$dl)</font>,1)}]
  <b><font color=#922b23>set</font></b> ln2 [<b><font color=#922b23>expr</font></b> {min((<font color=#4A181B>$ln</font>+<font color=#4A181B>$dl)</font>,<font color=#4A181B>$endl)</font>}]
  <b><font color=#922b23>lassign</font></b> [CountQSH <font color=#4A181B>$txt</font> <font color=#4A181B>$ln</font>] cntq cnts ccmnt
  <font color=#646464># flag &quot;highlight to the end&quot;:</font>
  <b><font color=#922b23>set</font></b> bf1 [<b><font color=#922b23>expr</font></b> {abs(<font color=#4A181B>$ln</font>-int(<font color=#4A181B>$data(CUR_POS</font>,<font color=#4A181B>$txt)))</font>&gt;1 || <font color=#4A181B>$dl</font>&gt;1  || <font color=#4A181B>$cntq</font>!=<font color=#4A181B>$data(CNT_QUOTE</font>,<font color=#4A181B>$txt)</font>  || <font color=#4A181B>$cnts</font>!=<font color=#4A181B>$data(CNT_SLASH</font>,<font color=#4A181B>$txt)</font>  || <font color=#4A181B>$ccmnt</font>!=<font color=#4A181B>$data(CNT_COMMENT</font>,<font color=#4A181B>$txt)</font>}]
  <b><font color=#922b23>set</font></b> tSTR [<font color=#4A181B>$txt</font> tag ranges tagSTR]
  <b><font color=#922b23>set</font></b> tCMN [<font color=#4A181B>$txt</font> tag ranges tagCMN]
  <b><font color=#922b23>if</font></b> {<font color=#4A181B>$ln1</font>==1} {
    <b><font color=#922b23>set</font></b> currQtd 0
  } <b><font color=#922b23>else</font></b> {
    <b><font color=#922b23>set</font></b> currQtd [LineState <font color=#4A181B>$txt</font> <font color=#4A181B>$tSTR</font> <font color=#4A181B>$tCMN</font> <font color=#035103>&quot;<font color=#4A181B>$</font>ln1.0 -1 chars&quot;</font>]
  }
  <b><font color=#922b23>while</font></b> {<font color=#4A181B>$ln1</font>&lt;=<font color=#4A181B>$ln2</font>} {
    <b><font color=#922b23>if</font></b> {<font color=#4A181B>$ln1</font>==<font color=#4A181B>$ln2</font>} {
      <b><font color=#922b23>set</font></b> bf2 [LineState <font color=#4A181B>$txt</font> <font color=#4A181B>$tSTR</font> <font color=#4A181B>$tCMN</font> <font color=#035103>&quot;<font color=#4A181B>$</font>ln1.end +1 chars&quot;</font>]
    }
    RemoveTags <font color=#4A181B>$txt</font> <font color=#4A181B>$ln1</font>.0 <font color=#4A181B>$ln1</font>.end
    <b><font color=#922b23>set</font></b> currQtd [HighlightLine <font color=#4A181B>$txt</font> <font color=#4A181B>$ln1</font> <font color=#4A181B>$currQtd</font>]
    <b><font color=#922b23>if</font></b> {<font color=#4A181B>$ln1</font>==<font color=#4A181B>$ln2</font> && (<font color=#4A181B>$bf1</font> || <font color=#4A181B>$bf2</font>!=<font color=#4A181B>$currQtd)</font> && <font color=#4A181B>$data(MULTI_LINE_STR)</font>} {
      <b><font color=#922b23>set</font></b> ln2 <font color=#4A181B>$endl</font>  ;<font color=#646464># run to the end</font>
    }
    <b><font color=#922b23>incr</font></b> ln1
  }
  <b><font color=#800080>return</font></b>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::NotEscaped'>NotEscaped</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Checks if a character escaped in a line.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>NotEscaped</span> <span class='ruff_arg'>line i</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>line</code></code></td><td class='ruff_defitem'>line</td></tr>
<tr><td class='ruff_defitem'><code><code>i</code></code></td><td class='ruff_defitem'>the character's position in 'line'</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns &quot;yes&quot; if the character not escaped.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_19' href="javascript:toggleSource('19')">Show source</a></p>
<div id='19' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::NotEscaped {line i} {

  <font color=#646464># Checks if a character escaped in a line.</font>
  <font color=#646464>#   line - line</font>
  <font color=#646464>#   i - the character's position in 'line'</font>
  <font color=#646464># Returns &quot;yes&quot; if the character not escaped.</font>

  <b><font color=#922b23>set</font></b> cntq 0
  <b><font color=#922b23>while</font></b> {<font color=#4A181B>$i</font>&gt;0} {
    <b><font color=#922b23>incr</font></b> i -1
    <b><font color=#922b23>if</font></b> {[<b><font color=#922b23>string</font></b> index <font color=#4A181B>$line</font> <font color=#4A181B>$i</font>] ne <font color=#035103>&quot;\\&quot;</font>} <b><font color=#922b23>break</font></b>
    <b><font color=#922b23>incr</font></b> cntq
  }
  <b><font color=#800080>return</font></b> [<b><font color=#922b23>expr</font></b> {(<font color=#4A181B>$cntq</font>%2)==0}]
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::RemoveTags'>RemoveTags</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Removes tags in text.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>RemoveTags</span> <span class='ruff_arg'>txt from to</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>txt</code></code></td><td class='ruff_defitem'>text widget's path</td></tr>
<tr><td class='ruff_defitem'><code><code>from</code></code></td><td class='ruff_defitem'>starting index</td></tr>
<tr><td class='ruff_defitem'><code><code>to</code></code></td><td class='ruff_defitem'>ending index</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_20' href="javascript:toggleSource('20')">Show source</a></p>
<div id='20' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::RemoveTags {txt from to} {

  <font color=#646464># Removes tags in text.</font>
  <font color=#646464>#   txt - text widget's path</font>
  <font color=#646464>#   from - starting index</font>
  <font color=#646464>#   to - ending index</font>

  <b><font color=#922b23>foreach</font></b> tag {tagCOM tagCOMTK tagSTR tagVAR tagCMN tagPROC} {
    <font color=#4A181B>$txt</font> tag remove <font color=#4A181B>$tag</font> <font color=#4A181B>$from</font> <font color=#4A181B>$to</font>
  }
  <b><font color=#800080>return</font></b>
}<br><br></code></pre></div>
</div><br><br><br><h4 class='ruffproc'><a name='::hl_tcl::my::SearchTag'>SearchTag</a><span class='ns_scope'> [<a href="hl_tcl.html#::hl_tcl::my" title="::hl_tcl::my" class='ruff_cmd'>::hl_tcl::my</a>]</span><span class='tinylink'><a href='hl_tcl.html#::hl_tcl::my'>my</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Searches a position in tag ranges.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>SearchTag</span> <span class='ruff_arg'>tagpos l1</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>tagpos</code></code></td><td class='ruff_defitem'>tag position ranges</td></tr>
<tr><td class='ruff_defitem'><code><code>l1</code></code></td><td class='ruff_defitem'>the position to find</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a found range's index of -1 if not found.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_21' href="javascript:toggleSource('21')">Show source</a></p>
<div id='21' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#800080>proc</font></b> ::hl_tcl::my::SearchTag {tagpos l1} {

  <font color=#646464># Searches a position in tag ranges.</font>
  <font color=#646464>#   tagpos - tag position ranges</font>
  <font color=#646464>#   l1 - the position to find</font>
  <font color=#646464># Returns a found range's index of -1 if not found.</font>

  <b><font color=#922b23>lassign</font></b> [<b><font color=#922b23>split</font></b> <font color=#4A181B>$l1</font> .] l c
  <b><font color=#922b23>set</font></b> i 0
  <b><font color=#922b23>foreach</font></b> {p1 p2} <font color=#4A181B>$tagpos</font> {
    <b><font color=#922b23>if</font></b> {[InRange <font color=#4A181B>$p1</font> <font color=#4A181B>$p2</font> <font color=#4A181B>$l</font> <font color=#4A181B>$c</font>]} {<b><font color=#800080>return</font></b> <font color=#4A181B>$i</font>}
    <b><font color=#922b23>incr</font></b> i 2
  }
  <b><font color=#800080>return</font></b> -1
}<br><br></code></pre></div>
</div></div></div><div class='yui-b navbox' ><h1><a href='#::hl_tcl'>hl_tcl</a></h1><h2><a href='#::hl_tcl-Some_of_blah-blah'>Some of blah-blah</a></h2><h2><a href='#::hl_tcl-Some_of_editors'>Some of editors</a></h2><h2><a href='#::hl_tcl-What_can_we_do_'>What can we do?</a></h2><h2><a href='#::hl_tcl-Use_for_text_widget'>Use for text widget</a></h2><h2><a href='#::hl_tcl-Use_for_static_html'>Use for static html</a></h2><h2><a href='#::hl_tcl-Links'>Links</a></h2><h2><a href='#::hl_tcl-Commands'>Commands</a></h2><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::hl_all'>hl_all</a><span class='tooltiptext'>Updates (&quot;rehighlights&quot;) all highlighted and existing text widgets.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::hl_colors'>hl_colors</a><span class='tooltiptext'>Sets/gets default colors for highlighting.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::hl_font'>hl_font</a><span class='tooltiptext'>Sets/gets default font for highlighting.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::hl_init'>hl_init</a><span class='tooltiptext'>Initializes highlighting.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::hl_readonly'>hl_readonly</a><span class='tooltiptext'>Makes the text widget be readonly or gets its 'read-only' state.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::hl_text'>hl_text</a><span class='tooltiptext'>Highlights Tcl code of a text widget.
</span></h4><h1><a href='#::hl_tcl::my'>hl_tcl::my</a></h1><h2><a href='#::hl_tcl::my-Commands'>Commands</a></h2><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::AuxEnding'>AuxEnding</a><span class='tooltiptext'>Auxiliary procedure to process the ending character of line.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::CountChar'>CountChar</a><span class='tooltiptext'>Counts a character in a string.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::CountQSH'>CountQSH</a><span class='tooltiptext'>Counts quotes, slashes, hashes in a line
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::FirstQtd'>FirstQtd</a><span class='tooltiptext'>Searches the quote characters in line.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::HighlightAll'>HighlightAll</a><span class='tooltiptext'>Highlights all of a text.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::HighlightCmd'>HighlightCmd</a><span class='tooltiptext'>Highlights Tcl/Tk commands.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::HighlightLine'>HighlightLine</a><span class='tooltiptext'>Highlightes a line in text.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::HighlightStr'>HighlightStr</a><span class='tooltiptext'>Highlights strings.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::InRange'>InRange</a><span class='tooltiptext'>Checks if a text position is in a range of text positions.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::LineState'>LineState</a><span class='tooltiptext'>Gets an initial state of line.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::Mempos'>Mempos</a><span class='tooltiptext'>Remembers the state of current line.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::Modified'>Modified</a><span class='tooltiptext'>Handles modifications of text.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::NotEscaped'>NotEscaped</a><span class='tooltiptext'>Checks if a character escaped in a line.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::RemoveTags'>RemoveTags</a><span class='tooltiptext'>Removes tags in text.
</span></h4><h4 class='tooltip'><a href='hl_tcl.html#::hl_tcl::my::SearchTag'>SearchTag</a><span class='tooltiptext'>Searches a position in tag ranges.
</span></h4></div></div><div id='ft'><div style='float: right;'>Document generated by <a href='https://ruff.magicsplat.com'>Ruff!</a></div></div>
</div></body></html>
