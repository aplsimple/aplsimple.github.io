<!DOCTYPE html><html><head><meta charset="utf-8"/>
<link rel="stylesheet" href="../../../zoo/sh/styles/aplsimple.css">
<title>::mulster reference</title>
<style>
/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,button,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,var,optgroup{font-style:inherit;font-weight:inherit;}del,ins{text-decoration:none;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:baseline;}sub{vertical-align:baseline;}legend{color:#000;}input,button,textarea,select,optgroup,option{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;}input,button,textarea,select{*font-size:100%;}body{font:13px/1.231 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small;}select,input,button,textarea,button{font:99% arial,helvetica,clean,sans-serif;}table{font-size:inherit;font:100%;}pre,code,kbd,samp,tt{font-family:Consolas,"Courier New",monospace;font-size:100%;line-height:100%;}body{text-align:center;}#doc,#doc2,#doc3,#doc4,.yui-t1,.yui-t2,.yui-t3,.yui-t4,.yui-t5,.yui-t6,.yui-t7{margin:auto;text-align:left;width:57.69em;*width:56.25em;}#doc2{width:73.076em;*width:71.25em;}#doc3{margin:auto;width:auto;}#doc4{width:74.923em;*width:73.05em;}.yui-b{position:relative;}.yui-b{_position:static;}#yui-main .yui-b{position:static;}#yui-main,.yui-g .yui-u .yui-g{width:100%;}.yui-t1 #yui-main,.yui-t2 #yui-main,.yui-t3 #yui-main{float:right;margin-left:-25em;}.yui-t4 #yui-main,.yui-t5 #yui-main,.yui-t6 #yui-main{float:left;margin-right:-25em;}.yui-t1 .yui-b{float:left;width:12.30769em;*width:12.00em;}.yui-t1 #yui-main .yui-b{margin-left:13.30769em;*margin-left:13.05em;}.yui-t2 .yui-b{float:left;width:9.8461em;*width:13.50em;}.yui-t2 #yui-main .yui-b{margin-left:10.8461em;*margin-left:14.55em;}.yui-t3 .yui-b{float:left;width:23.0769em;*width:22.50em;}.yui-t3 #yui-main .yui-b{margin-left:24.0769em;*margin-left:23.62em;}.yui-t4 .yui-b{float:right;width:13.8456em;*width:13.50em;}.yui-t4 #yui-main .yui-b{margin-right:14.8456em;*margin-right:14.55em;}.yui-t5 .yui-b{float:right;width:18.4615em;*width:18.00em;}.yui-t5 #yui-main .yui-b{margin-right:19.4615em;*margin-right:19.125em;}.yui-t6 .yui-b{float:right;width:23.0769em;*width:22.50em;}.yui-t6 #yui-main .yui-b{margin-right:24.0769em;*margin-right:23.62em;}.yui-t7 #yui-main .yui-b{display:block;margin:0 0 1em 0;}#yui-main .yui-b{float:none;width:auto;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf,.yui-gc .yui-u,.yui-gd .yui-g,.yui-g .yui-gc .yui-u,.yui-ge .yui-u,.yui-ge .yui-g,.yui-gf .yui-g,.yui-gf .yui-u{float:right;}.yui-g div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first,.yui-ge div.first,.yui-gf div.first,.yui-g .yui-gc div.first,.yui-g .yui-ge div.first,.yui-gc div.first div.first{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf{width:49.1%;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{width:32%;margin-left:1.99%;}.yui-gb .yui-u{*margin-left:1.9%;*width:31.9%;}.yui-gc div.first,.yui-gd .yui-u{width:66%;}.yui-gd div.first{width:32%;}.yui-ge div.first,.yui-gf .yui-u{width:74.2%;}.yui-ge .yui-u,.yui-gf div.first{width:24%;}.yui-g .yui-gb div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first{margin-left:0;}.yui-g .yui-g .yui-u,.yui-gb .yui-g .yui-u,.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u,.yui-ge .yui-g .yui-u,.yui-gf .yui-g .yui-u{width:49%;*width:48.1%;*margin-left:0;}.yui-g .yui-g .yui-u{width:48.1%;}.yui-g .yui-gb div.first,.yui-gb .yui-gb div.first{*margin-right:0;*width:32%;_width:31.7%;}.yui-g .yui-gc div.first,.yui-gd .yui-g{width:66%;}.yui-gb .yui-g div.first{*margin-right:4%;_margin-right:1.3%;}.yui-gb .yui-gc div.first,.yui-gb .yui-gd div.first{*margin-right:0;}.yui-gb .yui-gb .yui-u,.yui-gb .yui-gc .yui-u{*margin-left:1.8%;_margin-left:4%;}.yui-g .yui-gb .yui-u{_margin-left:1.0%;}.yui-gb .yui-gd .yui-u{*width:66%;_width:61.2%;}.yui-gb .yui-gd div.first{*width:31%;_width:29.5%;}.yui-g .yui-gc .yui-u,.yui-gb .yui-gc .yui-u{width:32%;_float:right;margin-right:0;_margin-left:0;}.yui-gb .yui-gc div.first{width:66%;*float:left;*margin-left:0;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf .yui-u{margin:0;}.yui-gb .yui-gb .yui-u{_margin-left:.7%;}.yui-gb .yui-g div.first,.yui-gb .yui-gb div.first{*margin-left:0;}.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u{*width:48.1%;*margin-left:0;}.yui-gb .yui-gd div.first{width:32%;}.yui-g .yui-gd div.first{_width:29.9%;}.yui-ge .yui-g{width:24%;}.yui-gf .yui-g{width:74.2%;}.yui-gb .yui-ge div.yui-u,.yui-gb .yui-gf div.yui-u{float:right;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf div.first{float:left;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf div.first{*width:24%;_width:20%;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf .yui-u{*width:73.5%;_width:65.5%;}.yui-ge div.first .yui-gd .yui-u{width:65%;}.yui-ge div.first .yui-gd div.first{width:32%;}#hd:after,#bd:after,#ft:after,.yui-g:after,.yui-gb:after,.yui-gc:after,.yui-gd:after,.yui-ge:after,.yui-gf:after{content:".";display:block;height:0;clear:both;visibility:hidden;}#hd,#bd,#ft,.yui-g,.yui-gb,.yui-gc,.yui-gd,.yui-ge,.yui-gf{zoom:0;}

body{margin:10px;}h1{font-size:138.5%;}h2{font-size:123.1%;}h3{font-size:108%;}h1,h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6,strong,dt{font-weight:bold;}optgroup{font-weight:normal;}abbr,acronym{border-bottom:1px dotted #000;cursor:help;}em{font-style:italic;}del{text-decoration:line-through;}blockquote,ul,ol,dl{margin:1em;}ol,ul,dl{margin-left:2em;}ol li{list-style:decimal outside;}ul li{list-style:disc outside;}dl dd{margin-left:1em;}th,td{border:1px solid #000;padding:.5em;}th{font-weight:bold;text-align:center;}caption{margin-bottom:.5em;text-align:center;}sup{vertical-align:super;}sub{vertical-align:sub;}p,fieldset,table,pre{margin-bottom:1em;}button,input[type="checkbox"],input[type="radio"],input[type="reset"],input[type="submit"]{padding:1px;}

/* Ruff default CSS */

body {
  /*max-width: 70em;*/
  margin: 0;
}

h1,h2 {
  color: #888888;
  margin-bottom: 0.5em;
  margin-top: 0em;
}

#ft { font-size: x-small; font-family: Arial, sans-serif;
  text-align: left;
  border-top: 1px solid #0B3467;
  color: #888888;
  margin-top: 10px;
}

.banner h2 {
  color: #0B3467;
}

#hd.banner {
 font-family: "Times New Roman", serif;
 font-size: 200%;
 line-height: 64px;
 border-bottom: thin solid #0B3467;
 color: #0B3467;
}

p.linkline {
  text-align: right;
  font-size: smaller;
  /*    margin-top: -1em; */
  margin-bottom: 0;
}

.tinylink {
  font-size: x-small;
  font-variant: normal;
  font-family: Arial, sans-serif;
  float: right;
  padding:2px;
}

h1 .tinylink a {
  color: white;
}

#bd {
font-family: Arial, sans-serif;
/*font-size: 108%;*/
}

div.navbox {
  /* margin-top: 1em; */
  background-color: #0B3467;
  color: white;
  padding: 3px 4px 2px 4px;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

div.navbox:hover {
  overflow: visible;
}

/* Note .navbox header css should be based on $header_levels */
.navbox h1, .navbox h2, .navbox h3, .navbox h4, .navbox h5 {
  font-size: 85%;
  margin: 0px;
  font-weight: normal;
}
.navbox h1 {
  font-weight: bold; /* Override */
}
.navbox h2 {
  padding-left: 1em;
}
.navbox h3 {
  padding-left: 2em;
}
.navbox h4 {
  padding-left: 2.5em;
  font-weight: normal;
}
.navbox h5 {
  padding-left: 3em;
  font-weight: normal;
}
.navbox hr {
  color: white;
  margin-top:0.1em;
  margin-bottom:0.1em;
}

.navbox a:link, .navbox a:visited, .navbox a:hover {
  text-decoration: none;
  color: white;
  background-color: #0B3467;
}

.navbox a:hover {
   font-weight: bold;
}

/* Tooltip text - see https://www.w3schools.com/css/css_tooltip.asp */
.tooltip {
  position: relative;
  /* display: inline-block; */
}

.tooltip .tooltiptext {
  width: 100%;
  font-weight: bold;
  background-color: white;
  color: #0B3467;
  text-align: left;
  border: 1px solid #0B3467;
  /* border-radius: 4px; */
  position: absolute;
  z-index: 1;
  margin-left: 4px;
  padding: 2px 3px;
  visibility: hidden;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
  visibility: visible;
}

span.ns_scope {
  color: #aaaaaa;
}

span.ns_scope a:link, span.ns_scope a:visited {
  text-decoration: none;
  color: #aaaaaa;

}

li {
  margin-top: 0.5em;
}

span.ns_scope a:hover {
  text-decoration: none;
  color: #666666;
}

table {
  margin: 1em;
  margin-top: 0.5em;
  border: thin solid;
  border-collapse: collapse;
  border-color: #808080;
  padding: 4px;
}

td {
  border: thin solid;
  border-color: #808080;
  vertical-align: top;
  font-size: 93%;
  padding: 0.3em;
  padding-top: 0.1em;
}
th {
  border: thin solid;
  border-color: #808080;
  padding: 0.3em;
  padding-top: 0.1em;
  background-color: #CCCCCC;
}

dt, dd {
   font-size: 93%;
}

h1.ruff {
  background-color: #0B3467;
  color: #ffffff;
  padding-left: 0.2em;
  font-family: "Times New Roman", serif;
}
h2.ruff {
  font-variant: small-caps;
  color: #0B3467;
  font-weight: bold;
  font-family: "Times New Roman", serif;
}

h3.ruff, h4.ruff, h5.ruff, h6.ruff {
  color: #0B3467;
}
h5.ruff {
  font-style: italic;
  font-weight: normal;
}
h6.ruff {
  font-weight: normal;
}
h3.ruffclass, h3.ruffproc, h3.ruffmethod,
h4.ruffclass, h4.ruffproc, h4.ruffmethod,
h5.ruffclass, h5.ruffproc, h5.ruffmethod {
  border-bottom: thin solid #0B3467;
  color: #0B3467;
  margin-bottom: 0.2em;
}

pre {
  background-color: #f9f9f9;
  margin-top: 1em;
  margin-left: 1em;
  padding: 5px;
  font-family: Consolas, "Courier New", monospace;
  /* width: max-content; --- to leave footsteps */ overflow: auto;
  line-height: 1.2em;
}

.ruff_dyn_src {
  display: none; /* Displayed via JS */
}

.ruff_synopsis {
  border: thin solid #cccccc;
  background: #f9f9f9;
  font-family: Consolas, "Courier New", monospace;
  padding: 5px;
  margin: 0em 2em 1em;
}
.ruff_const, .ruff_cmd, ruff_defitem {
  font-weight: bold;
  font-family: Consolas, "Courier New", monospace;
}
.ruff_arg {
  font-style: italic;
  font-family: Consolas, "Courier New", monospace;
}

.ruff_source_link {
  font-size: smaller;
}

.ruff_index {
  font-size: small;
  color: grey;
  line-height: 1;
}

.ruff_index ul li {
  list-style-type: none;
}

.ruff_index ul li a {
  text-decoration: none;
}
</style>
<script>function toggleSource( id )
{
  /* Copied from Rails */
  var elem
  var link

  if( document.getElementById )
  {
      elem = document.getElementById( id )
      link = document.getElementById( "l_" + id )
  }
  else if ( document.all )
  {
      elem = eval( "document.all." + id )
      link = eval( "document.all.l_" + id )
  }
  else
      return false;

  if( elem.style.display == "block" )
  {
      elem.style.display = "none"
      link.innerHTML = "Show source"
  }
  else
  {
      elem.style.display = "block"
      link.innerHTML = "Hide source"
  }
}
</script></head>
<meta name="author" content="aplsimple">
<meta name="description" content="aplsimple's home page">
<meta name="keywords" content="aplsimple,home">
<link rel="stylesheet" href="../../../en/zoo/style.css">
<style>
table{
background-color: #f9f9f9;
margin: 0%;
margin-bottom: 2%;
padding: 0%;
box-shadow: none;
filter: none;
}
pre{
margin: 0%;
margin-bottom: 2%;
padding: 0%;
}
</style>
<link rel="icon" type="image/jpg" href="../../../zoo/favicon.jpg">
<body>
<div id="wrapper">
<div name="divd1" ALIGN="CENTER"> <FONT SIZE=5em color=#b01c20><B>
<noscript>THIS PAGE IS NOT WORKING WITHOUT JAVASCRIPT!
<BR>
<BR>PLEASE, SWITCH ON JAVASCRIPT IN SETTINGS OF YOUR BROWSER AND RELOAD THE PAGE.
</noscript>
</B></FONT></div>
<div id='doc3' class='yui-t2'>
<script src="../../../zoo/funcs.js"></script>
<script src="../../../en/zoo/this.js"></script>
<section id=sec2>
<div id='hd' class='banner'>
<a name='mulster.html'>::mulster reference</a>
</div>
<div id='bd'><div id='yui-main'><div class='yui-b'><h1 class='ruff'><a name='::mulster'></a>::mulster<span class='tinylink'><a href='#top'>Top</a></span></h1>
<div style='clear:both;'></div>
<p class='ruff'>This little thing provides multi-line replacements in text files.</p>
<p class='ruff'>It's called this way:</p>
<pre class='ruff'><br><code class="tcl">tclsh mulster.tcl [<b><font color=#134070>options</font></b>] fileini
</code><br></pre>
<p class='ruff'>where:</p>
<p class='ruff'><code>fileini</code> is a name of file containing options for replacements, e.g.</p>
<pre class='ruff'><br><code class="tcl">INFILE=input file name.txt
OUTFILE=output file name.txt
IN=BEGIN(1,1)
  line #1 to find
  line #2 to find
IN=END
OUT=BEGIN
  line #1
OUT=END
</code><br></pre>
<p class='ruff'><code>options</code> are:</p>
<pre class='ruff'><br><code class="tcl"><font color=#6c3e67>-infile</font> input-file-name
<font color=#6c3e67>-outfile</font> output-file-name
<font color=#6c3e67>-mode</font> exact | exact0 | glob | regexp
<font color=#6c3e67>-backup</font> 0 | &lt;dir&gt;
<font color=#6c3e67>-keep</font> 0 | 1 | false | true
<font color=#6c3e67>-single</font> 0 | 1 | false | true
<font color=#6c3e67>-files</font> 0 | 1 | false | true
<font color=#6c3e67>-charset</font> charsetName (e.g. cp1251)
<font color=#6c3e67>-lineend</font> lineEnding (e.g. \r\n)
--
</code><br></pre>
<p class='ruff'>See README for details.</p>
<p class='ruff'>The <code>mulster::Mulster</code> class provides two methods to be called from Tcl module.</p>
<p class='ruff'>1. The <code>main</code> method performs the multi-line replacements. Declared as:</p>
<pre class='ruff'><br><code class="tcl"><b><font color=#ca14ca>method</font></b> main {fileini {mode 1} {backup BAK} {keep 0} {single 0} {charset <font color=#8b2a0e>&quot;&quot;</font>} {lineend <font color=#8b2a0e>&quot;&quot;</font>} {files 0}}
</code><br></pre>
<p class='ruff'>where:</p>
<p class='ruff'><code>fileini</code> is a file name of options</p>
<p class='ruff'><code>mode = 0</code> (exact0, EXACT0) to match exact, without leading/tailing spaces</p>
<p class='ruff'><code>mode = 1</code> (exact, EXACT) to match exact, with all their leading/tailing spaces</p>
<p class='ruff'><code>mode = 2</code> (glob, GLOB) to match glob pattern</p>
<p class='ruff'><code>mode = 3</code> (regexp, re, REGEXP, RE) to match regexp pattern</p>
<p class='ruff'><code>mode = regexp--</code> to match regexp pattern and call <code>regsub</code></p>
<pre class='ruff'><br><code class="tcl"> Note: IN= line is to be found, OUT= line is to substitute, according to the regexp syntax accepted in Tcl.

 Note: With regexp and regsub, only one line is of use to IN=/OUT= block.
</code><br></pre>
<p class='ruff'><code>mode = regexp-all</code> to match regexp pattern and call <code>regsub -all</code></p>
<p class='ruff'><code>mode = regexp-nocase</code> to match regexp pattern and call <code>regsub -nocase</code></p>
<p class='ruff'><code>mode = regexp-expanded</code> to match regexp pattern and call <code>regsub -expanded</code></p>
<p class='ruff'>regexp <code>mode</code> can be combined, e.g. &quot;regexp-all-nocase&quot;</p>
<p class='ruff'><code>backup 0</code> means no input files' backuping</p>
<p class='ruff'><code>backup dir</code> means backuping to <em>dir</em> directory</p>
<p class='ruff'><code>keep</code>  if 1, keeps input files' attributes/times in output files</p>
<p class='ruff'><code>single</code> if 1, sets a standard string-for-string replacements</p>
<p class='ruff'><code>charset</code> is a charset of input files, e.g. cp1251</p>
<p class='ruff'><code>lineend</code> sets characters to end lines, e.g. \r\n (by default \n)</p>
<p class='ruff'><code>files</code> if 1, OUT= lines to be file names to take the lines from</p>
<p class='ruff'>2. The <code>mulsterList</code> method performs in-memory replacements in a list. Declared as:</p>
<pre class='ruff'><br><code class="tcl"><b><font color=#ca14ca>method</font></b> mulsterList {lcont lin lout {r1 0} {r2 0} {mode 1} {single 0} {files 0}}
</code><br></pre>
<p class='ruff'>where:</p>
<p class='ruff'><code>lcont</code> is a list to be processed</p>
<p class='ruff'><code>lin</code> is a list of input lines (replaced)</p>
<p class='ruff'><code>lout</code> is a list of output lines (replacing)</p>
<p class='ruff'><code>r1</code> and <code>r2</code> set a range of replacements</p>
<p class='ruff'><code>mode</code> is a search mode (as defined in getSearchMode method)</p>
<p class='ruff'><code>single</code> if true, means a standard 'string for string' replacements</p>
<p class='ruff'><code>files</code>  if true, output lines are taken from files</p>
<p class='ruff'>The <code>mulsterList</code> method returns a list processed.</p>
<br><h2 class='ruff'><a name='::mulster-Commands'></a>Commands<span class='tinylink'><a href='mulster.html#::mulster'>mulster</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><br><br><h4 class='ruffproc'><a name='::mulster::synopsis'>synopsis</a><span class='ns_scope'> [<a href="mulster.html#::mulster" title="::mulster" class='ruff_cmd'>::mulster</a>]</span><span class='tinylink'><a href='mulster.html#::mulster'>mulster</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Puts a synopsis of mulster utility.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>synopsis</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_mulster_synopsis' href="javascript:toggleSource('mulster_synopsis')">Show source</a></p>
<div id='mulster_synopsis' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>proc</font></b> ::mulster::synopsis {} {
  <i><font color=#4b5d50># Puts a synopsis of mulster utility.</font></i>

  <b><font color=#3a6797>variable</font></b> _ruff_preamble
  <b><font color=#3a6797>puts</font></b> <font color=#1b1baa>$_ruff_preamble</font>
}</code><br></pre></div>
</div><br><h2 class='ruff'><a name='::mulster-Classes'></a>Classes<span class='tinylink'><a href='mulster.html#::mulster'>mulster</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><br><h3 class='ruffclass'><a name='::mulster::Mulster'>Mulster</a><span class='ns_scope'> [<a href="mulster.html#::mulster" title="::mulster" class='ruff_cmd'>::mulster</a>]</span><span class='tinylink'><a href='mulster.html#::mulster'>mulster</a>, <a href='#top'>Top</a></span></h3>
<div style='clear:both;'></div>
<h5 class='ruff'>Method summary</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><a href="mulster.html#::mulster::Mulster::getBoolean" title="getBoolean" class='ruff_cmd'>getBoolean</a></code></td><td class='ruff_defitem'>Checks and gets a boolean value.</td></tr>
<tr><td class='ruff_defitem'><code><a href="mulster.html#::mulster::Mulster::getSearchMode" title="getSearchMode" class='ruff_cmd'>getSearchMode</a></code></td><td class='ruff_defitem'>Gets a search mode as numeric from string.</td></tr>
<tr><td class='ruff_defitem'><code><a href="mulster.html#::mulster::Mulster::init" title="init" class='ruff_cmd'>init</a></code></td><td class='ruff_defitem'>Initializes processing files.</td></tr>
<tr><td class='ruff_defitem'><code><a href="mulster.html#::mulster::Mulster::main" title="main" class='ruff_cmd'>main</a></code></td><td class='ruff_defitem'>Processes files according to the options of 'fileini' file.</td></tr>
<tr><td class='ruff_defitem'><code><a href="mulster.html#::mulster::Mulster::mulsterList" title="mulsterList" class='ruff_cmd'>mulsterList</a></code></td><td class='ruff_defitem'>Performs replacements in a list.</td></tr>
</table>
<br><br><h4 class='ruffmethod'><a name='::mulster::Mulster::getBoolean'>getBoolean</a><span class='ns_scope'> [<a href="mulster.html#::mulster::Mulster" title="::mulster::Mulster" class='ruff_cmd'>::mulster::Mulster</a>]</span><span class='tinylink'><a href='mulster.html#::mulster::Mulster'>Mulster</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Checks and gets a boolean value.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT getBoolean</span> <span class='ruff_arg'>val ?defval?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>val</code></td><td class='ruff_defitem'>a value to be checked</td></tr>
<tr><td class='ruff_defitem'><code>defval</code></td><td class='ruff_defitem'>a default value; <i>optional, default</i> <code>true</code></td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a normalized value.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_mulster_Mulster_getBoolean' href="javascript:toggleSource('mulster_Mulster_getBoolean')">Show source</a></p>
<div id='mulster_Mulster_getBoolean' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>method</font></b> getBoolean {val {defval true}} {
  <i><font color=#4b5d50># Checks and gets a boolean value.</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50>#   val - a value to be checked</font></i>
  <i><font color=#4b5d50>#   defval - a default value</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># Returns a normalized value.</font></i>

  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$val</font> ni {0 1 false true}} {<b><font color=#3a6797>set</font></b> val <font color=#1b1baa>$defval</font>}
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$val</font>
}</code><br></pre></div>
</div><br><br><h4 class='ruffmethod'><a name='::mulster::Mulster::getSearchMode'>getSearchMode</a><span class='ns_scope'> [<a href="mulster.html#::mulster::Mulster" title="::mulster::Mulster" class='ruff_cmd'>::mulster::Mulster</a>]</span><span class='tinylink'><a href='mulster.html#::mulster::Mulster'>Mulster</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a search mode as numeric from string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT getSearchMode</span> <span class='ruff_arg'>strmode</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>strmode</code></td><td class='ruff_defitem'>search mode in a string form (&quot;exact&quot;, &quot;RE&quot; etc.)</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>Numeric mode:</p>
<table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>0</code></td><td class='ruff_defitem'>to match exact, without their leading/tailing spaces (str trimmed)</td></tr>
<tr><td class='ruff_defitem'><code>1</code></td><td class='ruff_defitem'>to match exact, with all their leading/tailing spaces</td></tr>
<tr><td class='ruff_defitem'><code>2</code></td><td class='ruff_defitem'>to match glob</td></tr>
<tr><td class='ruff_defitem'><code>3</code></td><td class='ruff_defitem'>to match regexp for IN= lines and substitute by OUT= lines</td></tr>
<tr><td class='ruff_defitem'><code>4</code></td><td class='ruff_defitem'>to match regexp -all and call 'regsub -all'</td></tr>
<tr><td class='ruff_defitem'><code>8</code></td><td class='ruff_defitem'>to match regexp -nocase and call 'regsub -nocase'</td></tr>
<tr><td class='ruff_defitem'><code>16</code></td><td class='ruff_defitem'>to match regexp -expanded and call 'regsub -expanded'</td></tr>
</table>
<p class='ruff'>The mode can combine 4,8,16, e.g. 12 means &quot;regexp -all -nocase&quot;.</p>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns the numeric mode.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_mulster_Mulster_getSearchMode' href="javascript:toggleSource('mulster_Mulster_getSearchMode')">Show source</a></p>
<div id='mulster_Mulster_getSearchMode' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>method</font></b> getSearchMode {strmode} {
  <i><font color=#4b5d50># Gets a search mode as numeric from string.</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50>#   strmode - search mode in a string form (&quot;exact&quot;, &quot;RE&quot; etc.)</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># Returns the numeric mode.</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># Numeric mode:</font></i>
  <i><font color=#4b5d50>#   0 - to match exact, without their leading/tailing spaces (str trimmed)</font></i>
  <i><font color=#4b5d50>#   1 - to match exact, with all their leading/tailing spaces</font></i>
  <i><font color=#4b5d50>#   2 - to match glob</font></i>
  <i><font color=#4b5d50>#   3 - to match regexp for IN= lines and substitute by OUT= lines</font></i>
  <i><font color=#4b5d50>#   4 - to match regexp -all and call 'regsub -all'</font></i>
  <i><font color=#4b5d50>#   8 - to match regexp -nocase and call 'regsub -nocase'</font></i>
  <i><font color=#4b5d50>#  16 - to match regexp -expanded and call 'regsub -expanded'</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># The mode can combine 4,8,16, e.g. 12 means &quot;regexp -all -nocase&quot;.</font></i>

  <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>string</font></b> is integer <font color=#1b1baa>$strmode</font>]} {<b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$strmode</font>}
  <b><font color=#3a6797>set</font></b> mode 0
  <b><font color=#3a6797>switch</font></b> <font color=#6c3e67>-regexp</font> <font color=#6c3e67>-nocase</font> <font color=#6c3e67>-matchvar</font> am <font color=#1b1baa>$strmode</font> {
    ^exact$         {<b><font color=#3a6797>set</font></b> mode 1}
    ^glob$          {<b><font color=#3a6797>set</font></b> mode 2}
    ^regexp$ - ^re$ {<b><font color=#3a6797>set</font></b> mode 3}
    ^regexp\\s*(-.*)$ - ^re\\s*(-.*) {
      <b><font color=#3a6797>set</font></b> am [<b><font color=#3a6797>split</font></b> [<b><font color=#3a6797>string</font></b> toupper [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$am</font> 1]] <font color=#8b2a0e>&quot; -&quot;</font>]
      <b><font color=#3a6797>if</font></b> {<font color=#8b2a0e>&quot;A&quot;</font> in <font color=#1b1baa>$am</font> || <font color=#8b2a0e>&quot;ALL&quot;</font> in <font color=#1b1baa>$am</font>} { <b><font color=#3a6797>incr</font></b> mode 4 }
      <b><font color=#3a6797>if</font></b> {<font color=#8b2a0e>&quot;N&quot;</font> in <font color=#1b1baa>$am</font> || <font color=#8b2a0e>&quot;NOCASE&quot;</font> in <font color=#1b1baa>$am</font>} { <b><font color=#3a6797>incr</font></b> mode 8 }
      <b><font color=#3a6797>if</font></b> {<font color=#8b2a0e>&quot;E&quot;</font> in <font color=#1b1baa>$am</font> || <font color=#8b2a0e>&quot;EXPANDED&quot;</font> in <font color=#1b1baa>$am</font>} { <b><font color=#3a6797>incr</font></b> mode 16 }
      <b><font color=#3a6797>incr</font></b> mode 32  ;<i><font color=#4b5d50># to call 'regsub' anyway</font></i>
    }
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$mode</font>
}</code><br></pre></div>
</div><br><br><h4 class='ruffmethod'><a name='::mulster::Mulster::init'>init</a><span class='ns_scope'> [<a href="mulster.html#::mulster::Mulster" title="::mulster::Mulster" class='ruff_cmd'>::mulster::Mulster</a>]</span><span class='tinylink'><a href='mulster.html#::mulster::Mulster'>Mulster</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Initializes processing files.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT init</span> <span class='ruff_arg'>infile outfile ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>infile</code></td><td class='ruff_defitem'>input file name</td></tr>
<tr><td class='ruff_defitem'><code>outfile</code></td><td class='ruff_defitem'>output file name</td></tr>
<tr><td class='ruff_defitem'><code>args</code></td><td class='ruff_defitem'>optional arguments</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_mulster_Mulster_init' href="javascript:toggleSource('mulster_Mulster_init')">Show source</a></p>
<div id='mulster_Mulster_init' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>method</font></b> init {infile outfile args} {
  <i><font color=#4b5d50># Initializes processing files.</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50>#   infile - input file name</font></i>
  <i><font color=#4b5d50>#   outfile - output file name</font></i>
  <i><font color=#4b5d50>#   args - optional arguments</font></i>

  <b><font color=#3a6797>array</font></b> set _MMM {}
  <b><font color=#ca14ca>my</font></b> InitIO
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$infile</font> ne <font color=#8b2a0e>&quot;&quot;</font>} {
    <b><font color=#3a6797>set</font></b> _MMM(fin) 1
    <b><font color=#3a6797>set</font></b> _MMM(infile) <font color=#1b1baa>$infile</font>
  }
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$outfile</font> ne <font color=#8b2a0e>&quot;&quot;</font>} {
    <b><font color=#3a6797>set</font></b> _MMM(fout) 1
    <b><font color=#3a6797>set</font></b> _MMM(outfile) <font color=#1b1baa>$outfile</font>
  }
  <b><font color=#3a6797>set</font></b> _MMM(IN_FILE)   INFILE=   ;<i><font color=#4b5d50># pattern for in file name</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(OUT_FILE)  OUTFILE=  ;<i><font color=#4b5d50># pattern for out file name</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(IN_BEGIN)  IN=BEGIN  ;<i><font color=#4b5d50># pattern for in lines start</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(IN_END)    IN=END    ;<i><font color=#4b5d50># pattern for in lines finish</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(OUT_BEGIN) OUT=BEGIN ;<i><font color=#4b5d50># pattern for out lines start</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(OUT_END)   OUT=END   ;<i><font color=#4b5d50># pattern for out lines finish</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(MODE)      MODE=     ;<i><font color=#4b5d50># pattern for exact/glob/regexp mode</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(BACKUP)    BACKUP=   ;<i><font color=#4b5d50># pattern for backup dir name</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(KEEP)      KEEP=     ;<i><font color=#4b5d50># pattern for keep mode</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(SINGLE)    SINGLE=   ;<i><font color=#4b5d50># pattern for single mode</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(CHARSET)   CHARSET=  ;<i><font color=#4b5d50># pattern for charset mode</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(LINEEND)   LINEEND=  ;<i><font color=#4b5d50># pattern for lineend mode</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(FILES)     FILES=    ;<i><font color=#4b5d50># pattern for files</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(GRP1) {(.+)}           ;<i><font color=#4b5d50># RE group for a file name</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(GRP2) {\((.+),(.+)\)}  ;<i><font color=#4b5d50># RE groups for range</font></i>
  <b><font color=#3a6797>set</font></b> _MMM(DEBUG) false         ;<i><font color=#4b5d50># DEBUG mode</font></i>
  <b><font color=#3a6797>if</font></b> { [<b><font color=#ca14ca>self</font></b> next] != {} } {
    <b><font color=#ca14ca>return</font></b> [<b><font color=#3a6797>next</font></b> {<b><font color=#3a6797>*</font></b>}<font color=#1b1baa>$args</font>]
  }
}</code><br></pre></div>
</div><br><br><h4 class='ruffmethod'><a name='::mulster::Mulster::main'>main</a><span class='ns_scope'> [<a href="mulster.html#::mulster::Mulster" title="::mulster::Mulster" class='ruff_cmd'>::mulster::Mulster</a>]</span><span class='tinylink'><a href='mulster.html#::mulster::Mulster'>Mulster</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Processes files according to the options of 'fileini' file.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT main</span> <span class='ruff_arg'>fileini ?mode? ?backup? ?keep? ?single? ?charset? ?lineend? ?files?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>fileini</code></td><td class='ruff_defitem'>options file name</td></tr>
<tr><td class='ruff_defitem'><code>mode</code></td><td class='ruff_defitem'>a search mode (as defined in getSearchMode method); <i>optional, default</i> <code>1</code></td></tr>
<tr><td class='ruff_defitem'><code>backup</code></td><td class='ruff_defitem'>if 0, means no backuping, otherwise - backup directory; <i>optional, default</i> <code>BAK</code></td></tr>
<tr><td class='ruff_defitem'><code>keep</code></td><td class='ruff_defitem'>if 1, keeps input files' attributes/times in output files; <i>optional, default</i> <code>0</code></td></tr>
<tr><td class='ruff_defitem'><code>single</code></td><td class='ruff_defitem'>if 1, standard 'one string for one string' replacements; <i>optional, default</i> <code>0</code></td></tr>
<tr><td class='ruff_defitem'><code>charset</code></td><td class='ruff_defitem'>a charset of input files (e.g. cp1251); <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
<tr><td class='ruff_defitem'><code>lineend</code></td><td class='ruff_defitem'>a line ending of input files (e.g. \r\n); <i>optional, default</i> <code>&quot;&quot;</code></td></tr>
<tr><td class='ruff_defitem'><code>files</code></td><td class='ruff_defitem'>if 1, output lines are taken from files; <i>optional, default</i> <code>0</code></td></tr>
</table>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="mulster.html#::mulster::Mulster::getSearchMode" title="getSearchMode" class='ruff_cmd'>getSearchMode</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_mulster_Mulster_main' href="javascript:toggleSource('mulster_Mulster_main')">Show source</a></p>
<div id='mulster_Mulster_main' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>method</font></b> main {fileini {mode 1} {backup BAK} {keep 0} {single 0} {charset {}} {lineend {}} {files 0}} {
  <i><font color=#4b5d50># Processes files according to the options of 'fileini' file.</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50>#   fileini - options file name</font></i>
  <i><font color=#4b5d50>#   mode - a search mode (as defined in getSearchMode method)</font></i>
  <i><font color=#4b5d50>#   backup - if 0, means no backuping, otherwise - backup directory</font></i>
  <i><font color=#4b5d50>#   keep - if 1, keeps input files' attributes/times in output files</font></i>
  <i><font color=#4b5d50>#   single - if 1, standard 'one string for one string' replacements</font></i>
  <i><font color=#4b5d50>#   charset - a charset of input files (e.g. cp1251)</font></i>
  <i><font color=#4b5d50>#   lineend - a line ending of input files (e.g. \r\n)</font></i>
  <i><font color=#4b5d50>#   files - if 1, output lines are taken from files</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># See also:</font></i>
  <i><font color=#4b5d50>#   getSearchMode</font></i>

  <b><font color=#3a6797>set</font></b> mode [<b><font color=#ca14ca>my</font></b> getSearchMode <font color=#1b1baa>$mode</font>]
  <b><font color=#3a6797>set</font></b> keep [<b><font color=#ca14ca>my</font></b> getBoolean <font color=#1b1baa>$keep</font>]
  <b><font color=#3a6797>set</font></b> single [<b><font color=#ca14ca>my</font></b> getBoolean <font color=#1b1baa>$single</font>]
  <b><font color=#3a6797>set</font></b> fileon [<b><font color=#ca14ca>my</font></b> getBoolean <font color=#1b1baa>$files</font>]
  <b><font color=#3a6797>if</font></b> {!(<font color=#1b1baa>$_MMM(fin)</font> + <font color=#1b1baa>$_MMM(fout)</font>)} { <b><font color=#ca14ca>my</font></b> InitIO }
  <b><font color=#3a6797>set</font></b> state NONE
  <b><font color=#3a6797>set</font></b> _MMM(st) [<b><font color=#3a6797>set</font></b> comments <font color=#8b2a0e>&quot;&quot;</font>]
  <b><font color=#3a6797>set</font></b> _MMM(nl) 0
  <b><font color=#3a6797>set</font></b> _MMM(fileini) <font color=#1b1baa>$fileini</font>
  <b><font color=#3a6797>set</font></b> chini [<b><font color=#ca14ca>my</font></b> Topen <font color=#1b1baa>$fileini</font>]
  <b><font color=#3a6797>foreach</font></b> _MMM(st) [<b><font color=#3a6797>split</font></b> [<b><font color=#3a6797>read</font></b> <font color=#1b1baa>$chini</font>] \n] {
    <b><font color=#3a6797>incr</font></b> _MMM(nl)
    <b><font color=#3a6797>switch</font></b> <font color=#1b1baa>$state</font> {
      NONE {
        <i><font color=#4b5d50># check for finish</font></i>
        <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>regexp</font></b> <font color=#6c3e67>-nocase</font> <font color=#8b2a0e>&quot;^\\s*MODE=EXIT&quot;</font> <font color=#1b1baa>$_MMM(st)</font>]} {
          <b><font color=#ca14ca>break</font></b>
        <i><font color=#4b5d50># check for debug mode</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#3a6797>regexp</font></b> <font color=#6c3e67>-nocase</font> <font color=#8b2a0e>&quot;^\\s*MODE=DEBUG&quot;</font> <font color=#1b1baa>$_MMM(st)</font>]} {
          <b><font color=#3a6797>set</font></b> _MMM(DEBUG) true
        <i><font color=#4b5d50># check for comments</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#3a6797>regexp</font></b> <font color=#8b2a0e>&quot;^\\s*#&quot;</font> <font color=#1b1baa>$_MMM(st)</font>]} {
          <b><font color=#3a6797>set</font></b> comments <font color=#8b2a0e>&quot;\n<font color=#1b1baa>$</font>_MMM(st)&quot;</font>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(MODE)</font> <font color=#1b1baa>$_MMM(GRP1)</font>]} {
        <i><font color=#4b5d50># check for mode</font></i>
          <b><font color=#3a6797>set</font></b> mode [<b><font color=#ca14ca>my</font></b> getSearchMode <font color=#1b1baa>$_MMM(match1)</font>]
        <i><font color=#4b5d50># check for backup dir</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(BACKUP)</font> <font color=#1b1baa>$_MMM(GRP1)</font>]} {
          <b><font color=#ca14ca>my</font></b> FlushOut <font color=#1b1baa>$mode</font> <font color=#1b1baa>$keep</font> <font color=#1b1baa>$charset</font> <font color=#1b1baa>$lineend</font> <font color=#1b1baa>$backup</font>
          <b><font color=#3a6797>set</font></b> backup <font color=#1b1baa>$_MMM(match1)</font>
        <i><font color=#4b5d50># check for keep state</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(KEEP)</font> <font color=#1b1baa>$_MMM(GRP1)</font>]} {
          <b><font color=#ca14ca>my</font></b> FlushOut <font color=#1b1baa>$mode</font> <font color=#1b1baa>$keep</font> <font color=#1b1baa>$charset</font> <font color=#1b1baa>$lineend</font> <font color=#1b1baa>$backup</font>
          <b><font color=#3a6797>set</font></b> keep [<b><font color=#ca14ca>my</font></b> getBoolean <font color=#1b1baa>$_MMM(match1)</font>]
        <i><font color=#4b5d50># check for charset</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(CHARSET)</font> <font color=#1b1baa>$_MMM(GRP1)</font>]} {
          <b><font color=#ca14ca>my</font></b> FlushOut <font color=#1b1baa>$mode</font> <font color=#1b1baa>$keep</font> <font color=#1b1baa>$charset</font> <font color=#1b1baa>$lineend</font> <font color=#1b1baa>$backup</font>
          <b><font color=#3a6797>set</font></b> charset <font color=#1b1baa>$_MMM(match1)</font>
        <i><font color=#4b5d50># check for lineend</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(LINEEND)</font> <font color=#1b1baa>$_MMM(GRP1)</font>]} {
          <b><font color=#ca14ca>my</font></b> FlushOut <font color=#1b1baa>$mode</font> <font color=#1b1baa>$keep</font> <font color=#1b1baa>$charset</font> <font color=#1b1baa>$lineend</font> <font color=#1b1baa>$backup</font>
          <b><font color=#3a6797>set</font></b> lineend <font color=#1b1baa>$_MMM(match1)</font>
        <i><font color=#4b5d50># check for single state</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(SINGLE)</font> <font color=#1b1baa>$_MMM(GRP1)</font>]} {
          <b><font color=#3a6797>set</font></b> single [<b><font color=#ca14ca>my</font></b> getBoolean <font color=#1b1baa>$_MMM(match1)</font>]
        <i><font color=#4b5d50># check for fileon state</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(FILES)</font> <font color=#1b1baa>$_MMM(GRP1)</font>]} {
          <b><font color=#3a6797>set</font></b> fileon [<b><font color=#ca14ca>my</font></b> getBoolean <font color=#1b1baa>$_MMM(match1)</font>]
        <i><font color=#4b5d50># check for input file</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(IN_FILE)</font> <font color=#1b1baa>$_MMM(GRP1)</font>]} {
          <b><font color=#ca14ca>my</font></b> FlushOut <font color=#1b1baa>$mode</font> <font color=#1b1baa>$keep</font> <font color=#1b1baa>$charset</font> <font color=#1b1baa>$lineend</font> <font color=#1b1baa>$backup</font>
          <b><font color=#3a6797>set</font></b> _MMM(fin) 1
          <b><font color=#3a6797>set</font></b> _MMM(infile) <font color=#1b1baa>$_MMM(match1)</font>
        <i><font color=#4b5d50># check for output file</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(OUT_FILE)</font> <font color=#1b1baa>$_MMM(GRP1)</font>]} {
          <b><font color=#ca14ca>my</font></b> CheckFiles 1
          <b><font color=#3a6797>set</font></b> _MMM(fout) 1
          <b><font color=#3a6797>set</font></b> _MMM(outfile) <font color=#1b1baa>$_MMM(match1)</font>
        <i><font color=#4b5d50># check for input lines beginning</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(IN_BEGIN)</font>] ||  [<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(IN_BEGIN)</font> <font color=#1b1baa>$_MMM(GRP2)</font>]} {
          <b><font color=#ca14ca>my</font></b> CheckFiles 1
          <b><font color=#ca14ca>my</font></b> CheckFiles 2
          <b><font color=#3a6797>lappend</font></b> _MMM(inlist) [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$_MMM(match1)</font> <font color=#1b1baa>$_MMM(match2)</font>  <font color=#1b1baa>$single</font> <font color=#1b1baa>$fileon</font> <font color=#1b1baa>$charset</font> <font color=#1b1baa>$lineend</font> <font color=#1b1baa>$mode</font> <font color=#1b1baa>$comments</font>]
          <b><font color=#3a6797>set</font></b> comments <font color=#8b2a0e>&quot;&quot;</font>
          <b><font color=#3a6797>set</font></b> state IN
        <i><font color=#4b5d50># check for output lines beginning</font></i>
        } <b><font color=#3a6797>elseif</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(OUT_BEGIN)</font>]} {
          <b><font color=#ca14ca>my</font></b> CheckFiles 1
          <b><font color=#ca14ca>my</font></b> CheckFiles 2
          <b><font color=#3a6797>lappend</font></b> _MMM(outlist) [<b><font color=#3a6797>list</font></b>]
          <b><font color=#3a6797>set</font></b> state OUT
        }
      }
      IN {
        <i><font color=#4b5d50># check for input lines ending</font></i>
        <b><font color=#3a6797>if</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(IN_END)</font>]} {
          <b><font color=#3a6797>set</font></b> state NONE
        } <b><font color=#3a6797>else</font></b> {
          <i><font color=#4b5d50># collect the input lines</font></i>
          <b><font color=#3a6797>set</font></b> curl [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$_MMM(inlist)</font> end]
          <b><font color=#3a6797>lappend</font></b> curl <font color=#1b1baa>$_MMM(st)</font>
          <b><font color=#3a6797>set</font></b> _MMM(inlist) [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$_MMM(inlist)</font> end end <font color=#1b1baa>$curl</font>]
        }
      }
      OUT {
        <i><font color=#4b5d50># check for output lines ending</font></i>
        <b><font color=#3a6797>if</font></b> {[<b><font color=#ca14ca>my</font></b> OptionIs <font color=#1b1baa>$_MMM(OUT_END)</font>]} {
          <b><font color=#3a6797>set</font></b> state NONE
        } <b><font color=#3a6797>else</font></b> {
          <i><font color=#4b5d50># collect the output lines</font></i>
          <b><font color=#3a6797>set</font></b> curl [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$_MMM(outlist)</font> end]
          <b><font color=#3a6797>lappend</font></b> curl <font color=#1b1baa>$_MMM(st)</font>
          <b><font color=#3a6797>set</font></b> _MMM(outlist) [<b><font color=#3a6797>lreplace</font></b> <font color=#1b1baa>$_MMM(outlist)</font> end end <font color=#1b1baa>$curl</font>]
        }
      }
    }
  }
  <i><font color=#4b5d50># flush out the collected lines if any</font></i>
  <b><font color=#ca14ca>my</font></b> FlushOut <font color=#1b1baa>$mode</font> <font color=#1b1baa>$keep</font> <font color=#1b1baa>$charset</font> <font color=#1b1baa>$lineend</font> <font color=#1b1baa>$backup</font>
  <b><font color=#3a6797>close</font></b> <font color=#1b1baa>$chini</font>
}</code><br></pre></div>
</div><br><br><h4 class='ruffmethod'><a name='::mulster::Mulster::mulsterList'>mulsterList</a><span class='ns_scope'> [<a href="mulster.html#::mulster::Mulster" title="::mulster::Mulster" class='ruff_cmd'>::mulster::Mulster</a>]</span><span class='tinylink'><a href='mulster.html#::mulster::Mulster'>Mulster</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Performs replacements in a list.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>OBJECT mulsterList</span> <span class='ruff_arg'>lcont lin lout ?r1? ?r2? ?mode? ?single? ?files?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>lcont</code></td><td class='ruff_defitem'>a list to be processed</td></tr>
<tr><td class='ruff_defitem'><code>lin</code></td><td class='ruff_defitem'>input lines' list</td></tr>
<tr><td class='ruff_defitem'><code>lout</code></td><td class='ruff_defitem'>output lines' list</td></tr>
<tr><td class='ruff_defitem'><code>r1</code></td><td class='ruff_defitem'>first index of replacements to do; <i>optional, default</i> <code>0</code></td></tr>
<tr><td class='ruff_defitem'><code>r2</code></td><td class='ruff_defitem'>last index of replacements to do; <i>optional, default</i> <code>0</code></td></tr>
<tr><td class='ruff_defitem'><code>mode</code></td><td class='ruff_defitem'>a search mode (as defined in getSearchMode method); <i>optional, default</i> <code>1</code></td></tr>
<tr><td class='ruff_defitem'><code>single</code></td><td class='ruff_defitem'>if true, means a standard 'string for string' replacements; <i>optional, default</i> <code>0</code></td></tr>
<tr><td class='ruff_defitem'><code>files</code></td><td class='ruff_defitem'>if true, output lines are taken from files; <i>optional, default</i> <code>0</code></td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list with replacements made.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_mulster_Mulster_mulsterList' href="javascript:toggleSource('mulster_Mulster_mulsterList')">Show source</a></p>
<div id='mulster_Mulster_mulsterList' class='ruff_dyn_src'><pre><br><code class="tcl"><b><font color=#ca14ca>method</font></b> mulsterList {lcont lin lout {r1 0} {r2 0} {mode 1} {single 0} {files 0}} {
  <i><font color=#4b5d50># Performs replacements in a list.</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50>#   lcont - a list to be processed</font></i>
  <i><font color=#4b5d50>#   lin - input lines' list</font></i>
  <i><font color=#4b5d50>#   lout - output lines' list</font></i>
  <i><font color=#4b5d50>#   r1 - first index of replacements to do</font></i>
  <i><font color=#4b5d50>#   r2 - last index of replacements to do</font></i>
  <i><font color=#4b5d50>#   mode - a search mode (as defined in getSearchMode method)</font></i>
  <i><font color=#4b5d50>#   single - if true, means a standard 'string for string' replacements</font></i>
  <i><font color=#4b5d50>#   files - if true, output lines are taken from files</font></i>
  <i><font color=#4b5d50>#</font></i>
  <i><font color=#4b5d50># Returns a list with replacements made.</font></i>

  <b><font color=#3a6797>set</font></b> _MMM(repls) 0
  <b><font color=#3a6797>set</font></b> leni [<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$lin</font>]
  <b><font color=#3a6797>if</font></b> {!<font color=#1b1baa>$leni</font>} {
    <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$lcont</font>  ;<i><font color=#4b5d50># nothing to replace</font></i>
  }
  <b><font color=#3a6797>set</font></b> lres [<b><font color=#3a6797>list</font></b>]  ;<i><font color=#4b5d50># resulting list</font></i>
  <b><font color=#3a6797>set</font></b> sti0 [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$lin</font> 0]
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$mode</font>==0} {<b><font color=#3a6797>set</font></b> sti0 [<b><font color=#3a6797>string</font></b> trim <font color=#1b1baa>$sti0</font>]} ;<i><font color=#4b5d50># for a quick 1st check</font></i>
  <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$files</font>} {<b><font color=#3a6797>set</font></b> lout [<b><font color=#ca14ca>my</font></b> FilesContents <font color=#1b1baa>$lout</font>]}
  <b><font color=#3a6797>set</font></b> leno [<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$lout</font>]
  <b><font color=#3a6797>set</font></b> lenc [<b><font color=#3a6797>llength</font></b> <font color=#1b1baa>$lcont</font>]
  <b><font color=#3a6797>set</font></b> ic [<b><font color=#3a6797>set</font></b> ifnd 0]
  <b><font color=#3a6797>while</font></b> {<font color=#1b1baa>$ic</font> &lt; <font color=#1b1baa>$lenc</font>} {
    <b><font color=#3a6797>set</font></b> stc [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$lcont</font> <font color=#1b1baa>$ic</font>]
    <b><font color=#3a6797>if</font></b> { [<b><font color=#ca14ca>my</font></b> CompareStr <font color=#1b1baa>$mode</font> <font color=#1b1baa>$stc</font> <font color=#1b1baa>$sti0</font>] } { ;<i><font color=#4b5d50># 1st line found</font></i>
      <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> ii [<b><font color=#3a6797>set</font></b> found 1]} {<font color=#1b1baa>$ii</font>&lt;<font color=#1b1baa>$leni</font> && <font color=#1b1baa>$found</font>} {<b><font color=#3a6797>incr</font></b> ii} {
        <b><font color=#3a6797>if</font></b> {[<b><font color=#3a6797>set</font></b> ic2 [<b><font color=#3a6797>expr</font></b> {<font color=#1b1baa>$ic</font> + <font color=#1b1baa>$ii</font>}]] &gt;= <font color=#1b1baa>$lenc</font>} {
          <b><font color=#3a6797>set</font></b> found 0  ;<i><font color=#4b5d50># out of lcont's range</font></i>
        } <b><font color=#3a6797>else</font></b> {
          <b><font color=#3a6797>set</font></b> sti [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$lin</font> <font color=#1b1baa>$ii</font>]
          <b><font color=#3a6797>set</font></b> sto [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$lcont</font> <font color=#1b1baa>$ic2</font>]
          <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$mode</font>==0} {  ;<i><font color=#4b5d50># exact0 is 'trimmed exact' mode</font></i>
            <b><font color=#3a6797>set</font></b> found [<b><font color=#ca14ca>my</font></b> CompareStr <font color=#1b1baa>$mode</font> <font color=#1b1baa>$sto</font> [<b><font color=#3a6797>string</font></b> trim <font color=#1b1baa>$sti</font>]]
          } <b><font color=#3a6797>else</font></b> {
            <b><font color=#3a6797>set</font></b> found [<b><font color=#ca14ca>my</font></b> CompareStr <font color=#1b1baa>$mode</font> <font color=#1b1baa>$sto</font> <font color=#1b1baa>$sti</font>]
          }
        }
      }
      <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$found</font>} {
        <b><font color=#3a6797>incr</font></b> ifnd
        ;<i><font color=#4b5d50># check a found ifnd-th bunch for the range (r1,r2)</font></i>
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ifnd</font>&gt;=<font color=#1b1baa>$r1</font> && (<font color=#1b1baa>$ifnd</font>&lt;=<font color=#1b1baa>$r2</font> || !<font color=#1b1baa>$r2</font>)} {
          <b><font color=#3a6797>set</font></b> rinc 1
          <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> io 0} {<font color=#1b1baa>$io</font>&lt;<font color=#1b1baa>$leno</font>} {<b><font color=#3a6797>incr</font></b> io} {
            <b><font color=#3a6797>set</font></b> stout [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$lout</font> <font color=#1b1baa>$io</font>]
            <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$mode</font>&gt;3} {
              <b><font color=#3a6797>set</font></b> rinc [<b><font color=#3a6797>regsub</font></b> {<b><font color=#3a6797>*</font></b>}[<b><font color=#ca14ca>my</font></b> ReOptions <font color=#1b1baa>$mode</font>]  [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$lin</font> <font color=#1b1baa>$io</font>] <font color=#1b1baa>$stc</font> <font color=#1b1baa>$stout</font> stout]
            }
            <b><font color=#3a6797>lappend</font></b> lres <font color=#1b1baa>$stout</font>
          }
          <b><font color=#3a6797>incr</font></b> ic <font color=#1b1baa>$leni</font>  ;<i><font color=#4b5d50># go to a line just following the 'lin' bunch</font></i>
          <b><font color=#3a6797>incr</font></b> _MMM(repls) <font color=#1b1baa>$rinc</font>
        } <b><font color=#3a6797>else</font></b> {         ;<i><font color=#4b5d50># not in the range r1-r2, so skip this IN=/OUT=</font></i>
          <b><font color=#3a6797>for</font></b> {<b><font color=#3a6797>set</font></b> ii 0} {<font color=#1b1baa>$ii</font>&lt;<font color=#1b1baa>$leni</font>} {<b><font color=#3a6797>incr</font></b> ii} {
            <b><font color=#3a6797>lappend</font></b> lres [<b><font color=#3a6797>lindex</font></b> <font color=#1b1baa>$lcont</font> <font color=#1b1baa>$ic</font>]
            <b><font color=#3a6797>incr</font></b> ic
          }
        }
        <b><font color=#ca14ca>continue</font></b>
      }
    }
    <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$single</font>} {   ;<i><font color=#4b5d50># do standard string replacement</font></i>
      <b><font color=#3a6797>foreach</font></b> si <font color=#1b1baa>$lin</font> so <font color=#1b1baa>$lout</font> {
        <b><font color=#3a6797>set</font></b> stc2 [<b><font color=#3a6797>string</font></b> map [<b><font color=#3a6797>list</font></b> <font color=#1b1baa>$si</font> <font color=#1b1baa>$so</font>] <font color=#1b1baa>$stc</font>]
        <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$stc2</font> ne <font color=#1b1baa>$stc</font>} {
          <b><font color=#3a6797>incr</font></b> ifnd
          ;<i><font color=#4b5d50># check a found ifnd-th bunch for the range (r1,r2)</font></i>
          <b><font color=#3a6797>if</font></b> {<font color=#1b1baa>$ifnd</font>&gt;=<font color=#1b1baa>$r1</font> && (<font color=#1b1baa>$ifnd</font>&lt;=<font color=#1b1baa>$r2</font> || !<font color=#1b1baa>$r2</font>)} {
            <b><font color=#3a6797>set</font></b> stc <font color=#1b1baa>$stc2</font>
            <b><font color=#3a6797>incr</font></b> _MMM(repls)
          }
        }
      }
    }
    <b><font color=#3a6797>lappend</font></b> lres <font color=#1b1baa>$stc</font>  ;<i><font color=#4b5d50># this line is not the 1st of 'lin' bunch</font></i>
    <b><font color=#3a6797>incr</font></b> ic
  }
  <b><font color=#ca14ca>return</font></b> <font color=#1b1baa>$lres</font>
}</code><br></pre></div>
</div></div></div><div class='yui-b navbox' ><h1><a href='#::mulster'>mulster</a></h1><h2><a href='#::mulster-Commands'>Commands</a></h2><h4 class='tooltip'><a href='mulster.html#::mulster::synopsis'>synopsis</a><span class='tooltiptext'>Puts a synopsis of mulster utility.
</span></h4><hr><h2><a href='#::mulster-Classes'>Classes</a></h2><h3><a href='mulster.html#::mulster::Mulster'>Mulster</a></h3><h4 class='tooltip'><a href='mulster.html#::mulster::Mulster::getBoolean'>getBoolean</a><span class='tooltiptext'>Checks and gets a boolean value.
</span></h4><h4 class='tooltip'><a href='mulster.html#::mulster::Mulster::getSearchMode'>getSearchMode</a><span class='tooltiptext'>Gets a search mode as numeric from string.
</span></h4><h4 class='tooltip'><a href='mulster.html#::mulster::Mulster::init'>init</a><span class='tooltiptext'>Initializes processing files.
</span></h4><h4 class='tooltip'><a href='mulster.html#::mulster::Mulster::main'>main</a><span class='tooltiptext'>Processes files according to the options of 'fileini' file.
</span></h4><h4 class='tooltip'><a href='mulster.html#::mulster::Mulster::mulsterList'>mulsterList</a><span class='tooltiptext'>Performs replacements in a list.
</span></h4></div></div><div id='ft'><div style='float: right;'>Document generated by <a href='https://ruff.magicsplat.com'>Ruff!</a></div></div>
</div></body></html>
